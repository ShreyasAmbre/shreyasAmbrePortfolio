var Ex=Object.defineProperty,bx=Object.defineProperties,Cx=Object.getOwnPropertyDescriptors,CD=Object.getOwnPropertySymbols,Ix=Object.prototype.hasOwnProperty,Tx=Object.prototype.propertyIsEnumerable,ID=(ut,Ie,j)=>Ie in ut?Ex(ut,Ie,{enumerable:!0,configurable:!0,writable:!0,value:j}):ut[Ie]=j,TD=(ut,Ie)=>{for(var j in Ie||(Ie={}))Ix.call(Ie,j)&&ID(ut,j,Ie[j]);if(CD)for(var j of CD(Ie))Tx.call(Ie,j)&&ID(ut,j,Ie[j]);return ut},DD=(ut,Ie)=>bx(ut,Cx(Ie));(self.webpackChunkshreyas_ambre_portfolio=self.webpackChunkshreyas_ambre_portfolio||[]).push([[179],{8255:ut=>{function Ie(j){return Promise.resolve().then(()=>{var R=new Error("Cannot find module '"+j+"'");throw R.code="MODULE_NOT_FOUND",R})}Ie.keys=()=>[],Ie.resolve=Ie,Ie.id=8255,ut.exports=Ie},8583:(ut,Ie,j)=>{"use strict";j.d(Ie,{mr:()=>Be,ez:()=>Bo,K0:()=>be,Do:()=>bt,V_:()=>Y,Ye:()=>nt,S$:()=>xe,O5:()=>Xn,b0:()=>$e,lw:()=>ue,EM:()=>yi,JF:()=>Bi,PM:()=>Eo,w_:()=>le,bD:()=>sr,q:()=>z,Mx:()=>Xt,HT:()=>he});var R=j(3018);let A=null;function z(){return A}function he(k){A||(A=k)}class le{}const be=new R.OlP("DocumentToken");let ue=(()=>{class k{historyGo(N){throw new Error("Not implemented")}}return k.\u0275fac=function(N){return new(N||k)},k.\u0275prov=(0,R.Yz7)({factory:fe,token:k,providedIn:"platform"}),k})();function fe(){return(0,R.LFG)(Q)}const Y=new R.OlP("Location Initialized");let Q=(()=>{class k extends ue{constructor(N){super(),this._doc=N,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return z().getBaseHref(this._doc)}onPopState(N){const W=z().getGlobalEventTarget(this._doc,"window");return W.addEventListener("popstate",N,!1),()=>W.removeEventListener("popstate",N)}onHashChange(N){const W=z().getGlobalEventTarget(this._doc,"window");return W.addEventListener("hashchange",N,!1),()=>W.removeEventListener("hashchange",N)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(N){this.location.pathname=N}pushState(N,W,se){ye()?this._history.pushState(N,W,se):this.location.hash=se}replaceState(N,W,se){ye()?this._history.replaceState(N,W,se):this.location.hash=se}forward(){this._history.forward()}back(){this._history.back()}historyGo(N=0){this._history.go(N)}getState(){return this._history.state}}return k.\u0275fac=function(N){return new(N||k)(R.LFG(be))},k.\u0275prov=(0,R.Yz7)({factory:me,token:k,providedIn:"platform"}),k})();function ye(){return!!window.history.pushState}function me(){return new Q((0,R.LFG)(be))}function Re(k,B){if(0==k.length)return B;if(0==B.length)return k;let N=0;return k.endsWith("/")&&N++,B.startsWith("/")&&N++,2==N?k+B.substring(1):1==N?k+B:k+"/"+B}function He(k){const B=k.match(/#|\?|$/),N=B&&B.index||k.length;return k.slice(0,N-("/"===k[N-1]?1:0))+k.slice(N)}function Oe(k){return k&&"?"!==k[0]?"?"+k:k}let xe=(()=>{class k{historyGo(N){throw new Error("Not implemented")}}return k.\u0275fac=function(N){return new(N||k)},k.\u0275prov=(0,R.Yz7)({factory:Ye,token:k,providedIn:"root"}),k})();function Ye(k){const B=(0,R.LFG)(be).location;return new $e((0,R.LFG)(ue),B&&B.origin||"")}const Be=new R.OlP("appBaseHref");let $e=(()=>{class k extends xe{constructor(N,W){if(super(),this._platformLocation=N,this._removeListenerFns=[],null==W&&(W=this._platformLocation.getBaseHrefFromDOM()),null==W)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=W}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}prepareExternalUrl(N){return Re(this._baseHref,N)}path(N=!1){const W=this._platformLocation.pathname+Oe(this._platformLocation.search),se=this._platformLocation.hash;return se&&N?`${W}${se}`:W}pushState(N,W,se,Ee){const Ke=this.prepareExternalUrl(se+Oe(Ee));this._platformLocation.pushState(N,W,Ke)}replaceState(N,W,se,Ee){const Ke=this.prepareExternalUrl(se+Oe(Ee));this._platformLocation.replaceState(N,W,Ke)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(N=0){var W,se;null===(se=(W=this._platformLocation).historyGo)||void 0===se||se.call(W,N)}}return k.\u0275fac=function(N){return new(N||k)(R.LFG(ue),R.LFG(Be,8))},k.\u0275prov=R.Yz7({token:k,factory:k.\u0275fac}),k})(),bt=(()=>{class k extends xe{constructor(N,W){super(),this._platformLocation=N,this._baseHref="",this._removeListenerFns=[],null!=W&&(this._baseHref=W)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}path(N=!1){let W=this._platformLocation.hash;return null==W&&(W="#"),W.length>0?W.substring(1):W}prepareExternalUrl(N){const W=Re(this._baseHref,N);return W.length>0?"#"+W:W}pushState(N,W,se,Ee){let Ke=this.prepareExternalUrl(se+Oe(Ee));0==Ke.length&&(Ke=this._platformLocation.pathname),this._platformLocation.pushState(N,W,Ke)}replaceState(N,W,se,Ee){let Ke=this.prepareExternalUrl(se+Oe(Ee));0==Ke.length&&(Ke=this._platformLocation.pathname),this._platformLocation.replaceState(N,W,Ke)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(N=0){var W,se;null===(se=(W=this._platformLocation).historyGo)||void 0===se||se.call(W,N)}}return k.\u0275fac=function(N){return new(N||k)(R.LFG(ue),R.LFG(Be,8))},k.\u0275prov=R.Yz7({token:k,factory:k.\u0275fac}),k})(),nt=(()=>{class k{constructor(N,W){this._subject=new R.vpe,this._urlChangeListeners=[],this._platformStrategy=N;const se=this._platformStrategy.getBaseHref();this._platformLocation=W,this._baseHref=He(jt(se)),this._platformStrategy.onPopState(Ee=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ee.state,type:Ee.type})})}path(N=!1){return this.normalize(this._platformStrategy.path(N))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(N,W=""){return this.path()==this.normalize(N+Oe(W))}normalize(N){return k.stripTrailingSlash(function(k,B){return k&&B.startsWith(k)?B.substring(k.length):B}(this._baseHref,jt(N)))}prepareExternalUrl(N){return N&&"/"!==N[0]&&(N="/"+N),this._platformStrategy.prepareExternalUrl(N)}go(N,W="",se=null){this._platformStrategy.pushState(se,"",N,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+Oe(W)),se)}replaceState(N,W="",se=null){this._platformStrategy.replaceState(se,"",N,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+Oe(W)),se)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(N=0){var W,se;null===(se=(W=this._platformStrategy).historyGo)||void 0===se||se.call(W,N)}onUrlChange(N){this._urlChangeListeners.push(N),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(W=>{this._notifyUrlChangeListeners(W.url,W.state)}))}_notifyUrlChangeListeners(N="",W){this._urlChangeListeners.forEach(se=>se(N,W))}subscribe(N,W,se){return this._subject.subscribe({next:N,error:W,complete:se})}}return k.\u0275fac=function(N){return new(N||k)(R.LFG(xe),R.LFG(ue))},k.normalizeQueryParams=Oe,k.joinWithSlash=Re,k.stripTrailingSlash=He,k.\u0275prov=(0,R.Yz7)({factory:ct,token:k,providedIn:"root"}),k})();function ct(){return new nt((0,R.LFG)(xe),(0,R.LFG)(ue))}function jt(k){return k.replace(/\/index.html$/,"")}var lt=(()=>((lt=lt||{})[lt.Zero=0]="Zero",lt[lt.One=1]="One",lt[lt.Two=2]="Two",lt[lt.Few=3]="Few",lt[lt.Many=4]="Many",lt[lt.Other=5]="Other",lt))();const gn=R.kL8;class fr{}let Wn=(()=>{class k extends fr{constructor(N){super(),this.locale=N}getPluralCategory(N,W){switch(gn(W||this.locale)(N)){case lt.Zero:return"zero";case lt.One:return"one";case lt.Two:return"two";case lt.Few:return"few";case lt.Many:return"many";default:return"other"}}}return k.\u0275fac=function(N){return new(N||k)(R.LFG(R.soG))},k.\u0275prov=R.Yz7({token:k,factory:k.\u0275fac}),k})();function Xt(k,B){B=encodeURIComponent(B);for(const N of k.split(";")){const W=N.indexOf("="),[se,Ee]=-1==W?[N,""]:[N.slice(0,W),N.slice(W+1)];if(se.trim()===B)return decodeURIComponent(Ee)}return null}let Xn=(()=>{class k{constructor(N,W){this._viewContainer=N,this._context=new Ji,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=W}set ngIf(N){this._context.$implicit=this._context.ngIf=N,this._updateView()}set ngIfThen(N){On("ngIfThen",N),this._thenTemplateRef=N,this._thenViewRef=null,this._updateView()}set ngIfElse(N){On("ngIfElse",N),this._elseTemplateRef=N,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(N,W){return!0}}return k.\u0275fac=function(N){return new(N||k)(R.Y36(R.s_b),R.Y36(R.Rgc))},k.\u0275dir=R.lG2({type:k,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),k})();class Ji{constructor(){this.$implicit=null,this.ngIf=null}}function On(k,B){if(B&&!B.createEmbeddedView)throw new Error(`${k} must be a TemplateRef, but received '${(0,R.AaK)(B)}'.`)}let Bo=(()=>{class k{}return k.\u0275fac=function(N){return new(N||k)},k.\u0275mod=R.oAB({type:k}),k.\u0275inj=R.cJS({providers:[{provide:fr,useClass:Wn}]}),k})();const sr="browser";function Eo(k){return"server"===k}let yi=(()=>{class k{}return k.\u0275prov=(0,R.Yz7)({token:k,providedIn:"root",factory:()=>new la((0,R.LFG)(be),window)}),k})();class la{constructor(B,N){this.document=B,this.window=N,this.offset=()=>[0,0]}setOffset(B){this.offset=Array.isArray(B)?()=>B:B}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(B){this.supportsScrolling()&&this.window.scrollTo(B[0],B[1])}scrollToAnchor(B){if(!this.supportsScrolling())return;const N=function(k,B){const N=k.getElementById(B)||k.getElementsByName(B)[0];if(N)return N;if("function"==typeof k.createTreeWalker&&k.body&&(k.body.createShadowRoot||k.body.attachShadow)){const W=k.createTreeWalker(k.body,NodeFilter.SHOW_ELEMENT);let se=W.currentNode;for(;se;){const Ee=se.shadowRoot;if(Ee){const Ke=Ee.getElementById(B)||Ee.querySelector(`[name="${B}"]`);if(Ke)return Ke}se=W.nextNode()}}return null}(this.document,B);N&&(this.scrollToElement(N),this.attemptFocus(N))}setHistoryScrollRestoration(B){if(this.supportScrollRestoration()){const N=this.window.history;N&&N.scrollRestoration&&(N.scrollRestoration=B)}}scrollToElement(B){const N=B.getBoundingClientRect(),W=N.left+this.window.pageXOffset,se=N.top+this.window.pageYOffset,Ee=this.offset();this.window.scrollTo(W-Ee[0],se-Ee[1])}attemptFocus(B){return B.focus(),this.document.activeElement===B}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const B=ji(this.window.history)||ji(Object.getPrototypeOf(this.window.history));return!(!B||!B.writable&&!B.set)}catch(B){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(B){return!1}}}function ji(k){return Object.getOwnPropertyDescriptor(k,"scrollRestoration")}class Bi{}},1841:(ut,Ie,j)=>{"use strict";j.d(Ie,{eN:()=>dt,JF:()=>Dn,qT:()=>Be,WM:()=>Y,LE:()=>xe});var R=j(8583),A=j(3018),z=j(5917),_e=j(7574),he=j(4612),le=j(5435),be=j(8002);class ue{}class fe{}class Y{constructor(X){this.normalizedNames=new Map,this.lazyUpdate=null,X?this.lazyInit="string"==typeof X?()=>{this.headers=new Map,X.split("\n").forEach(de=>{const Ze=de.indexOf(":");if(Ze>0){const We=de.slice(0,Ze),wt=We.toLowerCase(),ot=de.slice(Ze+1).trim();this.maybeSetNormalizedName(We,wt),this.headers.has(wt)?this.headers.get(wt).push(ot):this.headers.set(wt,[ot])}})}:()=>{this.headers=new Map,Object.keys(X).forEach(de=>{let Ze=X[de];const We=de.toLowerCase();"string"==typeof Ze&&(Ze=[Ze]),Ze.length>0&&(this.headers.set(We,Ze),this.maybeSetNormalizedName(de,We))})}:this.headers=new Map}has(X){return this.init(),this.headers.has(X.toLowerCase())}get(X){this.init();const de=this.headers.get(X.toLowerCase());return de&&de.length>0?de[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(X){return this.init(),this.headers.get(X.toLowerCase())||null}append(X,de){return this.clone({name:X,value:de,op:"a"})}set(X,de){return this.clone({name:X,value:de,op:"s"})}delete(X,de){return this.clone({name:X,value:de,op:"d"})}maybeSetNormalizedName(X,de){this.normalizedNames.has(de)||this.normalizedNames.set(de,X)}init(){this.lazyInit&&(this.lazyInit instanceof Y?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(X=>this.applyUpdate(X)),this.lazyUpdate=null))}copyFrom(X){X.init(),Array.from(X.headers.keys()).forEach(de=>{this.headers.set(de,X.headers.get(de)),this.normalizedNames.set(de,X.normalizedNames.get(de))})}clone(X){const de=new Y;return de.lazyInit=this.lazyInit&&this.lazyInit instanceof Y?this.lazyInit:this,de.lazyUpdate=(this.lazyUpdate||[]).concat([X]),de}applyUpdate(X){const de=X.name.toLowerCase();switch(X.op){case"a":case"s":let Ze=X.value;if("string"==typeof Ze&&(Ze=[Ze]),0===Ze.length)return;this.maybeSetNormalizedName(X.name,de);const We=("a"===X.op?this.headers.get(de):void 0)||[];We.push(...Ze),this.headers.set(de,We);break;case"d":const wt=X.value;if(wt){let ot=this.headers.get(de);if(!ot)return;ot=ot.filter(at=>-1===wt.indexOf(at)),0===ot.length?(this.headers.delete(de),this.normalizedNames.delete(de)):this.headers.set(de,ot)}else this.headers.delete(de),this.normalizedNames.delete(de)}}forEach(X){this.init(),Array.from(this.normalizedNames.keys()).forEach(de=>X(this.normalizedNames.get(de),this.headers.get(de)))}}class Q{encodeKey(X){return He(X)}encodeValue(X){return He(X)}decodeKey(X){return decodeURIComponent(X)}decodeValue(X){return decodeURIComponent(X)}}const me=/%(\d[a-f0-9])/gi,Re={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function He(Le){return encodeURIComponent(Le).replace(me,(X,de)=>{var Ze;return null!==(Ze=Re[de])&&void 0!==Ze?Ze:X})}function Oe(Le){return`${Le}`}class xe{constructor(X={}){if(this.updates=null,this.cloneFrom=null,this.encoder=X.encoder||new Q,X.fromString){if(X.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(Le,X){const de=new Map;return Le.length>0&&Le.replace(/^\?/,"").split("&").forEach(We=>{const wt=We.indexOf("="),[ot,at]=-1==wt?[X.decodeKey(We),""]:[X.decodeKey(We.slice(0,wt)),X.decodeValue(We.slice(wt+1))],Lt=de.get(ot)||[];Lt.push(at),de.set(ot,Lt)}),de}(X.fromString,this.encoder)}else X.fromObject?(this.map=new Map,Object.keys(X.fromObject).forEach(de=>{const Ze=X.fromObject[de];this.map.set(de,Array.isArray(Ze)?Ze:[Ze])})):this.map=null}has(X){return this.init(),this.map.has(X)}get(X){this.init();const de=this.map.get(X);return de?de[0]:null}getAll(X){return this.init(),this.map.get(X)||null}keys(){return this.init(),Array.from(this.map.keys())}append(X,de){return this.clone({param:X,value:de,op:"a"})}appendAll(X){const de=[];return Object.keys(X).forEach(Ze=>{const We=X[Ze];Array.isArray(We)?We.forEach(wt=>{de.push({param:Ze,value:wt,op:"a"})}):de.push({param:Ze,value:We,op:"a"})}),this.clone(de)}set(X,de){return this.clone({param:X,value:de,op:"s"})}delete(X,de){return this.clone({param:X,value:de,op:"d"})}toString(){return this.init(),this.keys().map(X=>{const de=this.encoder.encodeKey(X);return this.map.get(X).map(Ze=>de+"="+this.encoder.encodeValue(Ze)).join("&")}).filter(X=>""!==X).join("&")}clone(X){const de=new xe({encoder:this.encoder});return de.cloneFrom=this.cloneFrom||this,de.updates=(this.updates||[]).concat(X),de}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(X=>this.map.set(X,this.cloneFrom.map.get(X))),this.updates.forEach(X=>{switch(X.op){case"a":case"s":const de=("a"===X.op?this.map.get(X.param):void 0)||[];de.push(Oe(X.value)),this.map.set(X.param,de);break;case"d":if(void 0===X.value){this.map.delete(X.param);break}{let Ze=this.map.get(X.param)||[];const We=Ze.indexOf(Oe(X.value));-1!==We&&Ze.splice(We,1),Ze.length>0?this.map.set(X.param,Ze):this.map.delete(X.param)}}}),this.cloneFrom=this.updates=null)}}class Be{constructor(){this.map=new Map}set(X,de){return this.map.set(X,de),this}get(X){return this.map.has(X)||this.map.set(X,X.defaultValue()),this.map.get(X)}delete(X){return this.map.delete(X),this}keys(){return this.map.keys()}}function bt(Le){return"undefined"!=typeof ArrayBuffer&&Le instanceof ArrayBuffer}function nt(Le){return"undefined"!=typeof Blob&&Le instanceof Blob}function ct(Le){return"undefined"!=typeof FormData&&Le instanceof FormData}class jt{constructor(X,de,Ze,We){let wt;if(this.url=de,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=X.toUpperCase(),function(Le){switch(Le){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||We?(this.body=void 0!==Ze?Ze:null,wt=We):wt=Ze,wt&&(this.reportProgress=!!wt.reportProgress,this.withCredentials=!!wt.withCredentials,wt.responseType&&(this.responseType=wt.responseType),wt.headers&&(this.headers=wt.headers),wt.context&&(this.context=wt.context),wt.params&&(this.params=wt.params)),this.headers||(this.headers=new Y),this.context||(this.context=new Be),this.params){const ot=this.params.toString();if(0===ot.length)this.urlWithParams=de;else{const at=de.indexOf("?");this.urlWithParams=de+(-1===at?"?":at<de.length-1?"&":"")+ot}}else this.params=new xe,this.urlWithParams=de}serializeBody(){return null===this.body?null:bt(this.body)||nt(this.body)||ct(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof xe?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ct(this.body)?null:nt(this.body)?this.body.type||null:bt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof xe?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(X={}){var de;const Ze=X.method||this.method,We=X.url||this.url,wt=X.responseType||this.responseType,ot=void 0!==X.body?X.body:this.body,at=void 0!==X.withCredentials?X.withCredentials:this.withCredentials,Lt=void 0!==X.reportProgress?X.reportProgress:this.reportProgress;let jn=X.headers||this.headers,Tr=X.params||this.params;const Wt=null!==(de=X.context)&&void 0!==de?de:this.context;return void 0!==X.setHeaders&&(jn=Object.keys(X.setHeaders).reduce((un,ht)=>un.set(ht,X.setHeaders[ht]),jn)),X.setParams&&(Tr=Object.keys(X.setParams).reduce((un,ht)=>un.set(ht,X.setParams[ht]),Tr)),new jt(Ze,We,ot,{params:Tr,headers:jn,context:Wt,reportProgress:Lt,responseType:wt,withCredentials:at})}}var Ve=(()=>((Ve=Ve||{})[Ve.Sent=0]="Sent",Ve[Ve.UploadProgress=1]="UploadProgress",Ve[Ve.ResponseHeader=2]="ResponseHeader",Ve[Ve.DownloadProgress=3]="DownloadProgress",Ve[Ve.Response=4]="Response",Ve[Ve.User=5]="User",Ve))();class Qe{constructor(X,de=200,Ze="OK"){this.headers=X.headers||new Y,this.status=void 0!==X.status?X.status:de,this.statusText=X.statusText||Ze,this.url=X.url||null,this.ok=this.status>=200&&this.status<300}}class lt extends Qe{constructor(X={}){super(X),this.type=Ve.ResponseHeader}clone(X={}){return new lt({headers:X.headers||this.headers,status:void 0!==X.status?X.status:this.status,statusText:X.statusText||this.statusText,url:X.url||this.url||void 0})}}class Et extends Qe{constructor(X={}){super(X),this.type=Ve.Response,this.body=void 0!==X.body?X.body:null}clone(X={}){return new Et({body:void 0!==X.body?X.body:this.body,headers:X.headers||this.headers,status:void 0!==X.status?X.status:this.status,statusText:X.statusText||this.statusText,url:X.url||this.url||void 0})}}class Ct extends Qe{constructor(X){super(X,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${X.url||"(unknown url)"}`:`Http failure response for ${X.url||"(unknown url)"}: ${X.status} ${X.statusText}`,this.error=X.error||null}}function $t(Le,X){return{body:X,headers:Le.headers,context:Le.context,observe:Le.observe,params:Le.params,reportProgress:Le.reportProgress,responseType:Le.responseType,withCredentials:Le.withCredentials}}let dt=(()=>{class Le{constructor(de){this.handler=de}request(de,Ze,We={}){let wt;if(de instanceof jt)wt=de;else{let Lt,jn;Lt=We.headers instanceof Y?We.headers:new Y(We.headers),We.params&&(jn=We.params instanceof xe?We.params:new xe({fromObject:We.params})),wt=new jt(de,Ze,void 0!==We.body?We.body:null,{headers:Lt,context:We.context,params:jn,reportProgress:We.reportProgress,responseType:We.responseType||"json",withCredentials:We.withCredentials})}const ot=(0,z.of)(wt).pipe((0,he.b)(Lt=>this.handler.handle(Lt)));if(de instanceof jt||"events"===We.observe)return ot;const at=ot.pipe((0,le.h)(Lt=>Lt instanceof Et));switch(We.observe||"body"){case"body":switch(wt.responseType){case"arraybuffer":return at.pipe((0,be.U)(Lt=>{if(null!==Lt.body&&!(Lt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Lt.body}));case"blob":return at.pipe((0,be.U)(Lt=>{if(null!==Lt.body&&!(Lt.body instanceof Blob))throw new Error("Response is not a Blob.");return Lt.body}));case"text":return at.pipe((0,be.U)(Lt=>{if(null!==Lt.body&&"string"!=typeof Lt.body)throw new Error("Response is not a string.");return Lt.body}));default:return at.pipe((0,be.U)(Lt=>Lt.body))}case"response":return at;default:throw new Error(`Unreachable: unhandled observe type ${We.observe}}`)}}delete(de,Ze={}){return this.request("DELETE",de,Ze)}get(de,Ze={}){return this.request("GET",de,Ze)}head(de,Ze={}){return this.request("HEAD",de,Ze)}jsonp(de,Ze){return this.request("JSONP",de,{params:(new xe).append(Ze,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(de,Ze={}){return this.request("OPTIONS",de,Ze)}patch(de,Ze,We={}){return this.request("PATCH",de,$t(We,Ze))}post(de,Ze,We={}){return this.request("POST",de,$t(We,Ze))}put(de,Ze,We={}){return this.request("PUT",de,$t(We,Ze))}}return Le.\u0275fac=function(de){return new(de||Le)(A.LFG(ue))},Le.\u0275prov=A.Yz7({token:Le,factory:Le.\u0275fac}),Le})();class Un{constructor(X,de){this.next=X,this.interceptor=de}handle(X){return this.interceptor.intercept(X,this.next)}}const Lr=new A.OlP("HTTP_INTERCEPTORS");let oi=(()=>{class Le{intercept(de,Ze){return Ze.handle(de)}}return Le.\u0275fac=function(de){return new(de||Le)},Le.\u0275prov=A.Yz7({token:Le,factory:Le.\u0275fac}),Le})();const St=/^\)\]\}',?\n/;let Ii=(()=>{class Le{constructor(de){this.xhrFactory=de}handle(de){if("JSONP"===de.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new _e.y(Ze=>{const We=this.xhrFactory.build();if(We.open(de.method,de.urlWithParams),de.withCredentials&&(We.withCredentials=!0),de.headers.forEach((ht,zt)=>We.setRequestHeader(ht,zt.join(","))),de.headers.has("Accept")||We.setRequestHeader("Accept","application/json, text/plain, */*"),!de.headers.has("Content-Type")){const ht=de.detectContentTypeHeader();null!==ht&&We.setRequestHeader("Content-Type",ht)}if(de.responseType){const ht=de.responseType.toLowerCase();We.responseType="json"!==ht?ht:"text"}const wt=de.serializeBody();let ot=null;const at=()=>{if(null!==ot)return ot;const ht=1223===We.status?204:We.status,zt=We.statusText||"OK",Ur=new Y(We.getAllResponseHeaders()),vt=function(Le){return"responseURL"in Le&&Le.responseURL?Le.responseURL:/^X-Request-URL:/m.test(Le.getAllResponseHeaders())?Le.getResponseHeader("X-Request-URL"):null}(We)||de.url;return ot=new lt({headers:Ur,status:ht,statusText:zt,url:vt}),ot},Lt=()=>{let{headers:ht,status:zt,statusText:Ur,url:vt}=at(),zn=null;204!==zt&&(zn=void 0===We.response?We.responseText:We.response),0===zt&&(zt=zn?200:0);let gt=zt>=200&&zt<300;if("json"===de.responseType&&"string"==typeof zn){const je=zn;zn=zn.replace(St,"");try{zn=""!==zn?JSON.parse(zn):null}catch(et){zn=je,gt&&(gt=!1,zn={error:et,text:zn})}}gt?(Ze.next(new Et({body:zn,headers:ht,status:zt,statusText:Ur,url:vt||void 0})),Ze.complete()):Ze.error(new Ct({error:zn,headers:ht,status:zt,statusText:Ur,url:vt||void 0}))},jn=ht=>{const{url:zt}=at(),Ur=new Ct({error:ht,status:We.status||0,statusText:We.statusText||"Unknown Error",url:zt||void 0});Ze.error(Ur)};let Tr=!1;const Wt=ht=>{Tr||(Ze.next(at()),Tr=!0);let zt={type:Ve.DownloadProgress,loaded:ht.loaded};ht.lengthComputable&&(zt.total=ht.total),"text"===de.responseType&&!!We.responseText&&(zt.partialText=We.responseText),Ze.next(zt)},un=ht=>{let zt={type:Ve.UploadProgress,loaded:ht.loaded};ht.lengthComputable&&(zt.total=ht.total),Ze.next(zt)};return We.addEventListener("load",Lt),We.addEventListener("error",jn),We.addEventListener("timeout",jn),We.addEventListener("abort",jn),de.reportProgress&&(We.addEventListener("progress",Wt),null!==wt&&We.upload&&We.upload.addEventListener("progress",un)),We.send(wt),Ze.next({type:Ve.Sent}),()=>{We.removeEventListener("error",jn),We.removeEventListener("abort",jn),We.removeEventListener("load",Lt),We.removeEventListener("timeout",jn),de.reportProgress&&(We.removeEventListener("progress",Wt),null!==wt&&We.upload&&We.upload.removeEventListener("progress",un)),We.readyState!==We.DONE&&We.abort()}})}}return Le.\u0275fac=function(de){return new(de||Le)(A.LFG(R.JF))},Le.\u0275prov=A.Yz7({token:Le,factory:Le.\u0275fac}),Le})();const Hr=new A.OlP("XSRF_COOKIE_NAME"),Ft=new A.OlP("XSRF_HEADER_NAME");class Kn{}let Yr=(()=>{class Le{constructor(de,Ze,We){this.doc=de,this.platform=Ze,this.cookieName=We,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const de=this.doc.cookie||"";return de!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,R.Mx)(de,this.cookieName),this.lastCookieString=de),this.lastToken}}return Le.\u0275fac=function(de){return new(de||Le)(A.LFG(R.K0),A.LFG(A.Lbi),A.LFG(Hr))},Le.\u0275prov=A.Yz7({token:Le,factory:Le.\u0275fac}),Le})(),gn=(()=>{class Le{constructor(de,Ze){this.tokenService=de,this.headerName=Ze}intercept(de,Ze){const We=de.url.toLowerCase();if("GET"===de.method||"HEAD"===de.method||We.startsWith("http://")||We.startsWith("https://"))return Ze.handle(de);const wt=this.tokenService.getToken();return null!==wt&&!de.headers.has(this.headerName)&&(de=de.clone({headers:de.headers.set(this.headerName,wt)})),Ze.handle(de)}}return Le.\u0275fac=function(de){return new(de||Le)(A.LFG(Kn),A.LFG(Ft))},Le.\u0275prov=A.Yz7({token:Le,factory:Le.\u0275fac}),Le})(),kn=(()=>{class Le{constructor(de,Ze){this.backend=de,this.injector=Ze,this.chain=null}handle(de){if(null===this.chain){const Ze=this.injector.get(Lr,[]);this.chain=Ze.reduceRight((We,wt)=>new Un(We,wt),this.backend)}return this.chain.handle(de)}}return Le.\u0275fac=function(de){return new(de||Le)(A.LFG(fe),A.LFG(A.zs3))},Le.\u0275prov=A.Yz7({token:Le,factory:Le.\u0275fac}),Le})(),Sn=(()=>{class Le{static disable(){return{ngModule:Le,providers:[{provide:gn,useClass:oi}]}}static withOptions(de={}){return{ngModule:Le,providers:[de.cookieName?{provide:Hr,useValue:de.cookieName}:[],de.headerName?{provide:Ft,useValue:de.headerName}:[]]}}}return Le.\u0275fac=function(de){return new(de||Le)},Le.\u0275mod=A.oAB({type:Le}),Le.\u0275inj=A.cJS({providers:[gn,{provide:Lr,useExisting:gn,multi:!0},{provide:Kn,useClass:Yr},{provide:Hr,useValue:"XSRF-TOKEN"},{provide:Ft,useValue:"X-XSRF-TOKEN"}]}),Le})(),Dn=(()=>{class Le{}return Le.\u0275fac=function(de){return new(de||Le)},Le.\u0275mod=A.oAB({type:Le}),Le.\u0275inj=A.cJS({providers:[dt,{provide:ue,useClass:kn},Ii,{provide:fe,useExisting:Ii}],imports:[[Sn.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),Le})()},3018:(ut,Ie,j)=>{"use strict";j.d(Ie,{deG:()=>Rh,tb:()=>kT,AFp:()=>MT,ip1:()=>F0,CZH:()=>em,hGG:()=>IS,z2F:()=>L_,sBO:()=>VC,Sil:()=>F_,_Vd:()=>Il,EJc:()=>LT,SBq:()=>Ru,qLn:()=>Oa,vpe:()=>Al,gxx:()=>La,tBr:()=>fu,XFs:()=>X,OlP:()=>br,zs3:()=>si,ZZ4:()=>_h,aQg:()=>Ug,soG:()=>OE,YKP:()=>__,v3s:()=>rS,h0i:()=>Tl,PXZ:()=>QA,R0b:()=>Dc,FiY:()=>Cr,Lbi:()=>OT,g9A:()=>NT,Qsj:()=>Qw,FYo:()=>u_,JOm:()=>ao,Tiy:()=>Uf,q3G:()=>ni,tp0:()=>Rs,EAV:()=>aS,Rgc:()=>Wf,dDg:()=>jT,DyG:()=>or,q4F:()=>l_,GfV:()=>Jw,s_b:()=>Bg,ifc:()=>Wt,eFA:()=>qT,G48:()=>GA,Gpc:()=>Oe,X6Q:()=>$0,_c5:()=>yS,VLi:()=>$A,c2e:()=>FT,zSh:()=>th,wAp:()=>Ut,vHH:()=>$e,EiD:()=>Hs,mCW:()=>Te,qzn:()=>Ra,JVY:()=>lm,pB0:()=>Oh,eBb:()=>dm,L6k:()=>Md,LAX:()=>Fl,cg1:()=>vd,Tjo:()=>gS,kL8:()=>xf,yhl:()=>qc,dqk:()=>vt,sIi:()=>dd,CqO:()=>wf,QGY:()=>Iy,F4k:()=>lg,RDi:()=>N,AaK:()=>me,z3N:()=>Mo,qOj:()=>ld,TTD:()=>Ui,_Bn:()=>o_,xp6:()=>Cm,uIk:()=>ty,ekj:()=>Df,Suo:()=>lT,Xpm:()=>Tt,lG2:()=>Is,Yz7:()=>Ft,cJS:()=>Yr,oAB:()=>dr,Yjl:()=>ai,Y36:()=>yf,_UZ:()=>cg,qZA:()=>Ey,TgZ:()=>vf,EpF:()=>ug,n5z:()=>cn,Ikx:()=>Tg,LFG:()=>cr,$8M:()=>An,NdJ:()=>Ef,CRH:()=>dT,Q6J:()=>wy,DdM:()=>w,iGM:()=>cT,MAs:()=>md,CHM:()=>Pc,LSH:()=>lc,kYT:()=>Yt,YNc:()=>gd,_uU:()=>Jb,Gf:()=>uT});var R=j(9765),A=j(5319),z=j(7574),_e=j(6682),he=j(2441);var ue=j(1307);function fe(){return new R.xQ}function Q(n){for(let r in n)if(n[r]===Q)return r;throw Error("Could not find renamed property on target object.")}function ye(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function me(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(me).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function Re(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const He=Q({__forward_ref__:Q});function Oe(n){return n.__forward_ref__=Oe,n.toString=function(){return me(this())},n}function xe(n){return Ye(n)?n():n}function Ye(n){return"function"==typeof n&&n.hasOwnProperty(He)&&n.__forward_ref__===Oe}class $e extends Error{constructor(r,o){super(function(n,r){return`${n?`NG0${n}: `:""}${r}`}(r,o)),this.code=r}}function ct(n){return"string"==typeof n?n:null==n?"":String(n)}function tn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ct(n)}function lt(n,r){const o=r?` in ${r}`:"";throw new $e("201",`No provider for ${tn(n)} found${o}`)}function Jn(n,r){null==n&&function(n,r,o,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${o} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function Ft(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Yr(n){return{providers:n.providers||[],imports:n.imports||[]}}function gn(n){return kn(n,Dn)||kn(n,hs)}function kn(n,r){return n.hasOwnProperty(r)?n[r]:null}function Sn(n){return n&&(n.hasOwnProperty(Fn)||n.hasOwnProperty(Le))?n[Fn]:null}const Dn=Q({\u0275prov:Q}),Fn=Q({\u0275inj:Q}),hs=Q({ngInjectableDef:Q}),Le=Q({ngInjectorDef:Q});var X=(()=>((X=X||{})[X.Default=0]="Default",X[X.Host=1]="Host",X[X.Self=2]="Self",X[X.SkipSelf=4]="SkipSelf",X[X.Optional=8]="Optional",X))();let de;function We(n){const r=de;return de=n,r}function wt(n,r,o){const a=gn(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:o&X.Optional?null:void 0!==r?r:void lt(me(n),"Injector")}function at(n){return{toString:n}.toString()}var Lt=(()=>((Lt=Lt||{})[Lt.OnPush=0]="OnPush",Lt[Lt.Default=1]="Default",Lt))(),Wt=(()=>((Wt=Wt||{})[Wt.Emulated=0]="Emulated",Wt[Wt.None=2]="None",Wt[Wt.ShadowDom=3]="ShadowDom",Wt))();const un="undefined"!=typeof globalThis&&globalThis,ht="undefined"!=typeof window&&window,zt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,vt=un||"undefined"!=typeof global&&global||ht||zt,je={},et=[],Ot=Q({\u0275cmp:Q}),Jt=Q({\u0275dir:Q}),wn=Q({\u0275pipe:Q}),ie=Q({\u0275mod:Q}),te=Q({\u0275loc:Q}),oe=Q({\u0275fac:Q}),Ne=Q({__NG_ELEMENT_ID__:Q});let De=0;function Tt(n){return at(()=>{const o={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Lt.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||et,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Wt.Emulated,id:"c",styles:n.styles||et,_:null,setInput:null,schemas:n.schemas||null,tView:null},u=n.directives,h=n.features,y=n.pipes;return a.id+=De++,a.inputs=Br(n.inputs,o),a.outputs=Br(n.outputs),h&&h.forEach(v=>v(a)),a.directiveDefs=u?()=>("function"==typeof u?u():u).map(Nn):null,a.pipeDefs=y?()=>("function"==typeof y?y():y).map(jr):null,a})}function Nn(n){return Nt(n)||function(n){return n[Jt]||null}(n)}function jr(n){return function(n){return n[wn]||null}(n)}const Pr={};function dr(n){return at(()=>{const r={type:n.type,bootstrap:n.bootstrap||et,declarations:n.declarations||et,imports:n.imports||et,exports:n.exports||et,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Pr[n.id]=n.type),r})}function Yt(n,r){return at(()=>{const o=ir(n,!0);o.declarations=r.declarations||et,o.imports=r.imports||et,o.exports=r.exports||et})}function Br(n,r){if(null==n)return je;const o={};for(const a in n)if(n.hasOwnProperty(a)){let u=n[a],h=u;Array.isArray(u)&&(h=u[1],u=u[0]),o[u]=a,r&&(r[u]=h)}return o}const Is=Tt;function ai(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Nt(n){return n[Ot]||null}function ir(n,r){const o=n[ie]||null;if(!o&&!0===r)throw new Error(`Type ${me(n)} does not have '\u0275mod' property.`);return o}function Si(n){return Array.isArray(n)&&"object"==typeof n[1]}function gr(n){return Array.isArray(n)&&!0===n[1]}function Qs(n){return 0!=(8&n.flags)}function Ho(n){return 2==(2&n.flags)}function xi(n){return 1==(1&n.flags)}function Vi(n){return null!==n.template}function Uo(n){return 0!=(512&n[2])}function di(n,r){return n.hasOwnProperty(oe)?n[oe]:null}class ns{constructor(r,o,a){this.previousValue=r,this.currentValue=o,this.firstChange=a}isFirstChange(){return this.firstChange}}function Ui(){return Eo}function Eo(n){return n.type.prototype.ngOnChanges&&(n.setInput=Qr),ua}function ua(){const n=yi(this),r=null==n?void 0:n.current;if(r){const o=n.previous;if(o===je)n.previous=r;else for(let a in r)o[a]=r[a];n.current=null,this.ngOnChanges(r)}}function Qr(n,r,o,a){const u=yi(n)||function(n,r){return n[$o]=r}(n,{previous:je,current:null}),h=u.current||(u.current={}),y=u.previous,v=this.declaredInputs[o],T=y[v];h[v]=new ns(T&&T.currentValue,r,y===je),n[a]=r}Ui.ngInherit=!0;const $o="__ngSimpleChanges__";function yi(n){return n[$o]||null}let B;function N(n){B=n}function Ee(n){return!!n.listen}const It={createRenderer:(n,r)=>void 0!==B?B:"undefined"!=typeof document?document:void 0};function At(n){for(;Array.isArray(n);)n=n[0];return n}function mn(n,r){return At(r[n.index])}function rs(n,r){return n.data[r]}function $n(n,r){const o=r[n];return Si(o)?o:o[0]}function yr(n){return 4==(4&n[2])}function is(n){return 128==(128&n[2])}function $i(n,r){return null==r?null:n[r]}function ss(n){n[18]=0}function bo(n,r){n[5]+=r;let o=n,a=n[3];for(;null!==a&&(1===r&&1===o[5]||-1===r&&0===o[5]);)a[5]+=r,o=a,a=a[3]}const qt={lFrame:ga(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function eo(){return qt.bindingsEnabled}function Ge(){return qt.lFrame.lView}function En(){return qt.lFrame.tView}function Pc(n){return qt.lFrame.contextLView=n,n[8]}function tr(){let n=Ka();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ka(){return qt.lFrame.currentTNode}function as(n,r){const o=qt.lFrame;o.currentTNode=n,o.isParent=r}function fa(){return qt.lFrame.isParent}function Ar(){return qt.isInCheckNoChangesMode}function ar(n){qt.isInCheckNoChangesMode=n}function Co(){return qt.lFrame.bindingIndex++}function Fu(n,r){const o=qt.lFrame;o.bindingIndex=o.bindingRootIndex=n,za(r)}function za(n){qt.lFrame.currentDirectiveIndex=n}function Oc(){return qt.lFrame.currentQueryIndex}function kc(n){qt.lFrame.currentQueryIndex=n}function Za(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function To(n,r,o){if(o&X.SkipSelf){let u=r,h=n;for(;!(u=u.parent,null!==u||o&X.Host||(u=Za(h),null===u||(h=h[15],10&u.type))););if(null===u)return!1;r=u,n=h}const a=qt.lFrame=Fc();return a.currentTNode=r,a.lView=n,!0}function to(n){const r=Fc(),o=n[1];qt.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function Fc(){const n=qt.lFrame,r=null===n?null:n.child;return null===r?ga(n):r}function ga(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function ma(){const n=qt.lFrame;return qt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Lu=ma;function ya(){const n=ma();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Gi(){return qt.lFrame.selectedIndex}function cs(n){qt.lFrame.selectedIndex=n}function Yn(){const n=qt.lFrame;return rs(n.tView,n.selectedIndex)}function Ls(n,r){for(let o=r.directiveStart,a=r.directiveEnd;o<a;o++){const h=n.data[o].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:v,ngAfterViewInit:T,ngAfterViewChecked:x,ngOnDestroy:H}=h;y&&(n.contentHooks||(n.contentHooks=[])).push(-o,y),v&&((n.contentHooks||(n.contentHooks=[])).push(o,v),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,v)),T&&(n.viewHooks||(n.viewHooks=[])).push(-o,T),x&&((n.viewHooks||(n.viewHooks=[])).push(o,x),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,x)),null!=H&&(n.destroyHooks||(n.destroyHooks=[])).push(o,H)}}function Qa(n,r,o){Ao(n,r,3,o)}function Gr(n,r,o,a){(3&n[2])===o&&Ao(n,r,o,a)}function Yo(n,r){let o=n[2];(3&o)===r&&(o&=2047,o+=1,n[2]=o)}function Ao(n,r,o,a){const h=null!=a?a:-1,y=r.length-1;let v=0;for(let T=void 0!==a?65535&n[18]:0;T<y;T++)if("number"==typeof r[T+1]){if(v=r[T],null!=a&&v>=a)break}else r[T]<0&&(n[18]+=65536),(v<h||-1==h)&&(Mr(n,o,r,T),n[18]=(4294901760&n[18])+T+2),T++}function Mr(n,r,o,a){const u=o[a]<0,h=o[a+1],v=n[u?-o[a]:o[a]];if(u){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{h.call(v)}finally{}}}else try{h.call(v)}finally{}}class Ds{constructor(r,o,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=a}}function jc(n,r,o){const a=Ee(n);let u=0;for(;u<o.length;){const h=o[u];if("number"==typeof h){if(0!==h)break;u++;const y=o[u++],v=o[u++],T=o[u++];a?n.setAttribute(r,v,T,y):r.setAttributeNS(y,v,T)}else{const y=h,v=o[++u];ec(y)?a&&n.setProperty(r,y,v):a?n.setAttribute(r,y,v):r.setAttribute(y,v),u++}}return u}function Bc(n){return 3===n||4===n||6===n}function ec(n){return 64===n.charCodeAt(0)}function Vs(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let a=0;a<r.length;a++){const u=r[a];"number"==typeof u?o=u:0===o||au(n,o,u,null,-1===o||2===o?r[++a]:null)}}return n}function au(n,r,o,a,u){let h=0,y=n.length;if(-1===r)y=-1;else for(;h<n.length;){const v=n[h++];if("number"==typeof v){if(v===r){y=-1;break}if(v>r){y=h-1;break}}}for(;h<n.length;){const v=n[h];if("number"==typeof v)break;if(v===o){if(null===a)return void(null!==u&&(n[h+1]=u));if(a===n[h+1])return void(n[h+2]=u)}h++,null!==a&&h++,null!==u&&h++}-1!==y&&(n.splice(y,0,r),h=y+1),n.splice(h++,0,o),null!==a&&n.splice(h++,0,a),null!==u&&n.splice(h++,0,u)}function us(n){return-1!==n}function qi(n){return 32767&n}function va(n,r){let o=function(n){return n>>16}(n),a=r;for(;o>0;)a=a[15],o--;return a}let ro=!0;function tc(n){const r=ro;return ro=n,r}let Gc=0;function Ea(n,r){const o=Ca(n,r);if(-1!==o)return o;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,ba(a.data,n),ba(r,null),ba(a.blueprint,null));const u=Ia(n,r),h=n.injectorIndex;if(us(u)){const y=qi(u),v=va(u,r),T=v[1].data;for(let x=0;x<8;x++)r[h+x]=v[y+x]|T[y+x]}return r[h+8]=u,h}function ba(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Ca(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Ia(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,a=null,u=r;for(;null!==u;){const h=u[1],y=h.type;if(a=2===y?h.declTNode:1===y?u[6]:null,null===a)return-1;if(o++,u=u[15],-1!==a.injectorIndex)return a.injectorIndex|o<<16}return-1}function As(n,r,o){!function(n,r,o){let a;"string"==typeof o?a=o.charCodeAt(0)||0:o.hasOwnProperty(Ne)&&(a=o[Ne]),null==a&&(a=o[Ne]=Gc++);const u=255&a;r.data[n+(u>>5)]|=1<<u}(n,r,o)}function rc(n,r,o){if(o&X.Optional)return n;lt(r,"NodeInjector")}function Ss(n,r,o,a){if(o&X.Optional&&void 0===a&&(a=null),0==(o&(X.Self|X.Host))){const u=n[9],h=We(void 0);try{return u?u.get(r,a,o&X.Optional):wt(r,a,o&X.Optional)}finally{We(h)}}return rc(a,r,o)}function D(n,r,o,a=X.Default,u){if(null!==n){const h=function(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Ne)?n[Ne]:void 0;return"number"==typeof r?r>=0?255&r:b:r}(o);if("function"==typeof h){if(!To(r,n,a))return a&X.Host?rc(u,o,a):Ss(r,o,a,u);try{const y=h(a);if(null!=y||a&X.Optional)return y;lt(o)}finally{Lu()}}else if("number"==typeof h){let y=null,v=Ca(n,r),T=-1,x=a&X.Host?r[16][6]:null;for((-1===v||a&X.SkipSelf)&&(T=-1===v?Ia(n,r):r[v+8],-1!==T&&Fe(a,!1)?(y=r[1],v=qi(T),r=va(T,r)):v=-1);-1!==v;){const H=r[1];if(ae(h,v,H.data)){const q=P(v,r,o,y,a,x);if(q!==C)return q}T=r[v+8],-1!==T&&Fe(a,r[1].data[v+8]===x)&&ae(h,v,r)?(y=H,v=qi(T),r=va(T,r)):v=-1}}}return Ss(r,o,a,u)}const C={};function b(){return new mt(tr(),Ge())}function P(n,r,o,a,u,h){const y=r[1],v=y.data[n+8],H=L(v,y,o,null==a?Ho(v)&&ro:a!=y&&0!=(3&v.type),u&X.Host&&h===v);return null!==H?G(r,y,H,v):C}function L(n,r,o,a,u){const h=n.providerIndexes,y=r.data,v=1048575&h,T=n.directiveStart,H=h>>20,Z=u?v+H:n.directiveEnd;for(let re=a?v:v+H;re<Z;re++){const pe=y[re];if(re<T&&o===pe||re>=T&&pe.type===o)return re}if(u){const re=y[T];if(re&&Vi(re)&&re.type===o)return T}return null}function G(n,r,o,a){let u=n[o];const h=r.data;if(function(n){return n instanceof Ds}(u)){const y=u;y.resolving&&function(n,r){throw new $e("200",`Circular dependency in DI detected for ${n}`)}(tn(h[o]));const v=tc(y.canSeeViewProviders);y.resolving=!0;const T=y.injectImpl?We(y.injectImpl):null;To(n,a,X.Default);try{u=n[o]=y.factory(void 0,h,n,a),r.firstCreatePass&&o>=a.directiveStart&&function(n,r,o){const{ngOnChanges:a,ngOnInit:u,ngDoCheck:h}=r.type.prototype;if(a){const y=Eo(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,y),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,y)}u&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,u),h&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,h),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,h))}(o,h[o],r)}finally{null!==T&&We(T),tc(v),y.resolving=!1,Lu()}}return u}function ae(n,r,o){return!!(o[r+(n>>5)]&1<<n)}function Fe(n,r){return!(n&X.Self||n&X.Host&&r)}class mt{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,a){return D(this._tNode,this._lView,r,a,o)}}function cn(n){return at(()=>{const r=n.prototype.constructor,o=r[oe]||Mt(r),a=Object.prototype;let u=Object.getPrototypeOf(n.prototype).constructor;for(;u&&u!==a;){const h=u[oe]||Mt(u);if(h&&h!==o)return h;u=Object.getPrototypeOf(u)}return h=>new h})}function Mt(n){return Ye(n)?()=>{const r=Mt(xe(n));return r&&r()}:di(n)}function An(n){return function(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const a=o.length;let u=0;for(;u<a;){const h=o[u];if(Bc(h))break;if(0===h)u+=2;else if("number"==typeof h)for(u++;u<a&&"string"==typeof o[u];)u++;else{if(h===r)return o[u+1];u+=2}}}return null}(tr(),n)}const Pi="__parameters__";function Xr(n,r,o){return at(()=>{const a=function(n){return function(...o){if(n){const a=n(...o);for(const u in a)this[u]=a[u]}}}(r);function u(...h){if(this instanceof u)return a.apply(this,h),this;const y=new u(...h);return v.annotation=y,v;function v(T,x,H){const q=T.hasOwnProperty(Pi)?T[Pi]:Object.defineProperty(T,Pi,{value:[]})[Pi];for(;q.length<=H;)q.push(null);return(q[H]=q[H]||[]).push(y),T}}return o&&(u.prototype=Object.create(o.prototype)),u.prototype.ngMetadataName=n,u.annotationCls=u,u})}class br{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Ft({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Rh=new br("AnalyzeForEntryComponents"),or=Function;function so(n,r){void 0===r&&(r=n);for(let o=0;o<n.length;o++){let a=n[o];Array.isArray(a)?(r===n&&(r=n.slice(0,o)),so(a,r)):r!==n&&r.push(a)}return r}function Ro(n,r){n.forEach(o=>Array.isArray(o)?Ro(o,r):r(o))}function lu(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function Da(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function xs(n,r,o){let a=Po(n,r);return a>=0?n[1|a]=o:(a=~a,function(n,r,o,a){let u=n.length;if(u==r)n.push(o,a);else if(1===u)n.push(a,n[0]),n[0]=o;else{for(u--,n.push(n[u-1],n[u]);u>r;)n[u]=n[u-2],u--;n[r]=o,n[r+1]=a}}(n,a,r,o)),a}function Wc(n,r){const o=Po(n,r);if(o>=0)return n[1|o]}function Po(n,r){return function(n,r,o){let a=0,u=n.length>>o;for(;u!==a;){const h=a+(u-a>>1),y=n[h<<o];if(r===y)return h<<o;y>r?u=h:a=h+1}return~(u<<o)}(n,r,1)}const kt={},rn="__NG_DI_FLAG__",Qt="ngTempTokenPath",fi=/\n/gm,ta="__source",Nr=Q({provide:String,useValue:Q});let Sa;function na(n){const r=Sa;return Sa=n,r}function vs(n,r=X.Default){if(void 0===Sa)throw new Error("inject() must be called from an injection context");return null===Sa?wt(n,void 0,r):Sa.get(n,r&X.Optional?null:void 0,r)}function cr(n,r=X.Default){return(de||vs)(xe(n),r)}function ac(n){const r=[];for(let o=0;o<n.length;o++){const a=xe(n[o]);if(Array.isArray(a)){if(0===a.length)throw new Error("Arguments array must have arguments.");let u,h=X.Default;for(let y=0;y<a.length;y++){const v=a[y],T=np(v);"number"==typeof T?-1===T?u=v.token:h|=T:u=v}r.push(cr(u,h))}else r.push(cr(a))}return r}function hu(n,r){return n[rn]=r,n.prototype[rn]=r,n}function np(n){return n[rn]}function Rd(n,r,o,a){const u=n[Qt];throw r[ta]&&u.unshift(r[ta]),n.message=function(n,r,o,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let u=me(r);if(Array.isArray(r))u=r.map(me).join(" -> ");else if("object"==typeof r){let h=[];for(let y in r)if(r.hasOwnProperty(y)){let v=r[y];h.push(y+":"+("string"==typeof v?JSON.stringify(v):me(v)))}u=`{${h.join(", ")}}`}return`${o}${a?"("+a+")":""}[${u}]: ${n.replace(fi,"\n  ")}`}("\n"+n.message,u,o,a),n.ngTokenPath=u,n[Qt]=null,n}const fu=hu(Xr("Inject",n=>({token:n})),-1),Cr=hu(Xr("Optional"),8),Rs=hu(Xr("SkipSelf"),4);let Gu;function gu(n){var r;return(null===(r=function(){if(void 0===Gu&&(Gu=null,vt.trustedTypes))try{Gu=vt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Gu}())||void 0===r?void 0:r.createHTML(n))||n}class Bt{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class kl extends Bt{getTypeName(){return"HTML"}}class Hn extends Bt{getTypeName(){return"Style"}}class um extends Bt{getTypeName(){return"Script"}}class ei extends Bt{getTypeName(){return"URL"}}class yt extends Bt{getTypeName(){return"ResourceURL"}}function Mo(n){return n instanceof Bt?n.changingThisBreaksApplicationSecurity:n}function Ra(n,r){const o=qc(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===r}function qc(n){return n instanceof Bt&&n.getTypeName()||null}function lm(n){return new kl(n)}function Md(n){return new Hn(n)}function dm(n){return new um(n)}function Fl(n){return new ei(n)}function Oh(n){return new yt(n)}class oo{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const o=(new window.DOMParser).parseFromString(gu(r),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(r):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class Fh{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const a=this.inertDocument.createElement("body");o.appendChild(a)}}getInertBodyElement(r){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=gu(r),o;const a=this.inertDocument.createElement("body");return a.innerHTML=gu(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(a),a}stripCustomNsAttrs(r){const o=r.attributes;for(let u=o.length-1;0<u;u--){const y=o.item(u).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&r.removeAttribute(y)}let a=r.firstChild;for(;a;)a.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(a),a=a.nextSibling}}const Nd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ll=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Te(n){return(n=String(n)).match(Nd)||n.match(Ll)?n:"unsafe:"+n}function wi(n){const r={};for(const o of n.split(","))r[o]=!0;return r}function _u(...n){const r={};for(const o of n)for(const a in o)o.hasOwnProperty(a)&&(r[a]=!0);return r}const Ku=wi("area,br,col,hr,img,wbr"),Pa=wi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Lh=wi("rp,rt"),Vh=_u(Ku,_u(Pa,wi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),_u(Lh,wi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),_u(Lh,Pa)),Hh=wi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ls=wi("srcset"),cc=_u(Hh,ls,wi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),wi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ti=wi("script,style,template");class Od{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let o=r.firstChild,a=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?a=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,a&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let u=this.checkClobberedElement(o,o.nextSibling);if(u){o=u;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(r){const o=r.nodeName.toLowerCase();if(!Vh.hasOwnProperty(o))return this.sanitizedSomething=!0,!ti.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const a=r.attributes;for(let u=0;u<a.length;u++){const h=a.item(u),y=h.name,v=y.toLowerCase();if(!cc.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let T=h.value;Hh[v]&&(T=Te(T)),ls[v]&&(n=T,T=(n=String(n)).split(",").map(r=>Te(r.trim())).join(", ")),this.buf.push(" ",y,'="',Hl(T),'"')}var n;return this.buf.push(">"),!0}endElement(r){const o=r.nodeName.toLowerCase();Vh.hasOwnProperty(o)&&!Ku.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(r){this.buf.push(Hl(r))}checkClobberedElement(r,o){if(o&&(r.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return o}}const Ni=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ur=/([^\#-~ |!])/g;function Hl(n){return n.replace(/&/g,"&amp;").replace(Ni,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(ur,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let uc;function Hs(n,r){let o=null;try{uc=uc||function(n){const r=new Fh(n);return function(){try{return!!(new window.DOMParser).parseFromString(gu(""),"text/html")}catch(n){return!1}}()?new oo(r):r}(n);let a=r?String(r):"";o=uc.getInertBodyElement(a);let u=5,h=a;do{if(0===u)throw new Error("Failed to sanitize html because the input is unstable");u--,a=h,h=o.innerHTML,o=uc.getInertBodyElement(a)}while(a!==h);return gu((new Od).sanitizeChildren(Ul(o)||o))}finally{if(o){const a=Ul(o)||o;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function Ul(n){return"content"in n&&function(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var ni=(()=>((ni=ni||{})[ni.NONE=0]="NONE",ni[ni.HTML=1]="HTML",ni[ni.STYLE=2]="STYLE",ni[ni.SCRIPT=3]="SCRIPT",ni[ni.URL=4]="URL",ni[ni.RESOURCE_URL=5]="RESOURCE_URL",ni))();function lc(n){const r=function(){const n=Ge();return n&&n[12]}();return r?r.sanitize(ni.URL,n)||"":Ra(n,"URL")?Mo(n):Te(ct(n))}const Zu="__ngContext__";function qr(n,r){n[Zu]=r}function hc(n){const r=function(n){return n[Zu]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function Ju(n){return n.ngOriginalError}function Fi(n,...r){n.error(...r)}class Oa{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r),a=this._findContext(r),u=(n=r)&&n.ngErrorLogger||Fi;var n;u(this._console,"ERROR",r),o&&u(this._console,"ORIGINAL ERROR",o),a&&u(this._console,"ERROR CONTEXT",a)}_findContext(r){return r?r.ngDebugContext||this._findContext(Ju(r)):null}_findOriginalError(r){let o=r&&Ju(r);for(;o&&Ju(o);)o=Ju(o);return o||null}}const Bh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(vt))();function Li(n){return n instanceof Function?n():n}var ao=(()=>((ao=ao||{})[ao.Important=1]="Important",ao[ao.DashCase=2]="DashCase",ao))();function Yl(n,r){return undefined(n,r)}function _(n){const r=n[3];return gr(r)?r[3]:r}function E(n){return U(n[13])}function O(n){return U(n[4])}function U(n){for(;null!==n&&!gr(n);)n=n[4];return n}function ve(n,r,o,a,u){if(null!=a){let h,y=!1;gr(a)?h=a:Si(a)&&(y=!0,a=a[0]);const v=At(a);0===n&&null!==o?null==u?Kr(r,o,v):bu(r,o,v,u||null,!0):1===n&&null!==o?bu(r,o,v,u||null,!0):2===n?function(n,r,o){const a=qh(n,r);a&&function(n,r,o,a){Ee(n)?n.removeChild(r,o,a):r.removeChild(o)}(n,a,r,o)}(r,v,y):3===n&&r.destroyNode(v),null!=h&&function(n,r,o,a,u){const h=o[7];h!==At(o)&&ve(r,n,a,h,u);for(let v=10;v<o.length;v++){const T=o[v];ii(T[1],T,n,r,a,h)}}(r,n,h,o,u)}}function Pt(n,r,o){return Ee(n)?n.createElement(r,o):null===o?n.createElement(r):n.createElementNS(o,r)}function jd(n,r){const o=n[9],a=o.indexOf(r),u=r[3];1024&r[2]&&(r[2]&=-1025,bo(u,-1)),o.splice(a,1)}function ia(n,r){if(n.length<=10)return;const o=10+r,a=n[o];if(a){const u=a[17];null!==u&&u!==n&&jd(u,a),r>0&&(n[o-1][4]=a[4]);const h=Da(n,10+r);!function(n,r){ii(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const y=h[19];null!==y&&y.detachView(h[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function Bd(n,r){if(!(256&r[2])){const o=r[11];Ee(o)&&o.destroyNode&&ii(n,r,o,3,null,null),function(n){let r=n[13];if(!r)return gc(n[1],n);for(;r;){let o=null;if(Si(r))o=r[13];else{const a=r[10];a&&(o=a)}if(!o){for(;r&&!r[4]&&r!==n;)Si(r)&&gc(r[1],r),r=r[3];null===r&&(r=n),Si(r)&&gc(r[1],r),o=r&&r[4]}r=o}}(r)}}function gc(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let a=0;a<o.length;a+=2){const u=r[o[a]];if(!(u instanceof Ds)){const h=o[a+1];if(Array.isArray(h))for(let y=0;y<h.length;y+=2){const v=u[h[y]],T=h[y+1];try{T.call(v)}finally{}}else try{h.call(u)}finally{}}}}(n,r),function(n,r){const o=n.cleanup,a=r[7];let u=-1;if(null!==o)for(let h=0;h<o.length-1;h+=2)if("string"==typeof o[h]){const y=o[h+1],v="function"==typeof y?y(r):At(r[y]),T=a[u=o[h+2]],x=o[h+3];"boolean"==typeof x?v.removeEventListener(o[h],T,x):x>=0?a[u=x]():a[u=-x].unsubscribe(),h+=2}else{const y=a[u=o[h+1]];o[h].call(y)}if(null!==a){for(let h=u+1;h<a.length;h++)a[h]();r[7]=null}}(n,r),1===r[1].type&&Ee(r[11])&&r[11].destroy();const o=r[17];if(null!==o&&gr(r[3])){o!==r[3]&&jd(o,r);const a=r[19];null!==a&&a.detachView(n)}}}function nl(n,r,o){return function(n,r,o){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return o[0];if(2&a.flags){const u=n.data[a.directiveStart].encapsulation;if(u===Wt.None||u===Wt.Emulated)return null}return mn(a,o)}(n,r.parent,o)}function bu(n,r,o,a,u){Ee(n)?n.insertBefore(r,o,a,u):r.insertBefore(o,a,u)}function Kr(n,r,o){Ee(n)?n.appendChild(r,o):r.appendChild(o)}function Wh(n,r,o,a,u){null!==a?bu(n,r,o,a,u):Kr(n,r,o)}function qh(n,r){return Ee(n)?n.parentNode(r):r.parentNode}let gm=function(n,r,o){return 40&n.type?mn(n,o):null};function Kh(n,r,o,a){const u=nl(n,a,r),h=r[11],v=function(n,r,o){return gm(n,r,o)}(a.parent||r[6],a,r);if(null!=u)if(Array.isArray(o))for(let T=0;T<o.length;T++)Wh(h,u,o[T],v,!1);else Wh(h,u,o,v,!1)}function zh(n,r){if(null!==r){const o=r.type;if(3&o)return mn(r,n);if(4&o)return il(-1,n[r.index]);if(8&o){const a=r.child;if(null!==a)return zh(n,a);{const u=n[r.index];return gr(u)?il(-1,u):At(u)}}if(32&o)return Yl(r,n)()||At(n[r.index]);{const a=mm(n,r);return null!==a?Array.isArray(a)?a[0]:zh(_(n[16]),a):zh(n,r.next)}}return null}function mm(n,r){return null!==r?n[16][6].projection[r.projection]:null}function il(n,r){const o=10+n+1;if(o<r.length){const a=r[o],u=a[1].firstChild;if(null!==u)return zh(a,u)}return r[7]}function ym(n,r,o,a,u,h,y){for(;null!=o;){const v=a[o.index],T=o.type;if(y&&0===r&&(v&&qr(At(v),a),o.flags|=4),64!=(64&o.flags))if(8&T)ym(n,r,o.child,a,u,h,!1),ve(r,n,u,v,h);else if(32&T){const x=Yl(o,a);let H;for(;H=x();)ve(r,n,u,H,h);ve(r,n,u,v,h)}else 16&T?_m(n,r,a,o,u,h):ve(r,n,u,v,h);o=y?o.projectionNext:o.next}}function ii(n,r,o,a,u,h){ym(o,a,n.firstChild,r,u,h,!1)}function _m(n,r,o,a,u,h){const y=o[16],T=y[6].projection[a.projection];if(Array.isArray(T))for(let x=0;x<T.length;x++)ve(r,n,u,T[x],h);else ym(n,r,T,y[3],u,h,!0)}function K_(n,r,o){Ee(n)?n.setAttribute(r,"style",o):r.style.cssText=o}function $s(n,r,o){Ee(n)?""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o):r.className=o}function vm(n,r,o){let a=n.length;for(;;){const u=n.indexOf(r,o);if(-1===u)return u;if(0===u||n.charCodeAt(u-1)<=32){const h=r.length;if(u+h===a||n.charCodeAt(u+h)<=32)return u}o=u+1}}const wm="ng-template";function Jc(n,r,o){let a=0;for(;a<n.length;){let u=n[a++];if(o&&"class"===u){if(u=n[a],-1!==vm(u.toLowerCase(),r,0))return!0}else if(1===u){for(;a<n.length&&"string"==typeof(u=n[a++]);)if(u.toLowerCase()===r)return!0;return!1}}return!1}function Em(n){return 4===n.type&&n.value!==wm}function Zh(n,r,o){return r===(4!==n.type||o?n.value:wm)}function qE(n,r,o){let a=4;const u=n.attrs||[],h=function(n){for(let r=0;r<n.length;r++)if(Bc(n[r]))return r;return n.length}(u);let y=!1;for(let v=0;v<r.length;v++){const T=r[v];if("number"!=typeof T){if(!y)if(4&a){if(a=2|1&a,""!==T&&!Zh(n,T,o)||""===T&&1===r.length){if(mc(a))return!1;y=!0}}else{const x=8&a?T:r[++v];if(8&a&&null!==n.attrs){if(!Jc(n.attrs,x,o)){if(mc(a))return!1;y=!0}continue}const q=bn(8&a?"class":T,u,Em(n),o);if(-1===q){if(mc(a))return!1;y=!0;continue}if(""!==x){let Z;Z=q>h?"":u[q+1].toLowerCase();const re=8&a?Z:null;if(re&&-1!==vm(re,x,0)||2&a&&x!==Z){if(mc(a))return!1;y=!0}}}}else{if(!y&&!mc(a)&&!mc(T))return!1;if(y&&mc(T))continue;y=!1,a=T|1&a}}return mc(a)||y}function mc(n){return 0==(1&n)}function bn(n,r,o,a){if(null===r)return-1;let u=0;if(a||!o){let h=!1;for(;u<r.length;){const y=r[u];if(y===n)return u;if(3===y||6===y)h=!0;else{if(1===y||2===y){let v=r[++u];for(;"string"==typeof v;)v=r[++u];continue}if(4===y)break;if(0===y){u+=4;continue}}u+=h?1:2}return-1}return function(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const a=n[o];if("number"==typeof a)return-1;if(a===r)return o;o++}return-1}(r,n)}function z_(n,r,o=!1){for(let a=0;a<r.length;a++)if(qE(n,r[a],o))return!0;return!1}function bm(n,r){return n?":not("+r.trim()+")":r}function Z_(n){let r=n[0],o=1,a=2,u="",h=!1;for(;o<n.length;){let y=n[o];if("string"==typeof y)if(2&a){const v=n[++o];u+="["+y+(v.length>0?'="'+v+'"':"")+"]"}else 8&a?u+="."+y:4&a&&(u+=" "+y);else""!==u&&!mc(y)&&(r+=bm(h,u),u=""),a=y,h=h||!mc(a);o++}return""!==u&&(r+=bm(h,u)),r}const pn={};function Cm(n){Q_(En(),Ge(),Gi()+n,Ar())}function Q_(n,r,o,a){if(!a)if(3==(3&r[2])){const h=n.preOrderCheckHooks;null!==h&&Qa(r,h,o)}else{const h=n.preOrderHooks;null!==h&&Gr(r,h,0,o)}cs(o)}function Tp(n,r){return n<<17|r<<2}function yc(n){return n>>17&32767}function Im(n){return 2|n}function kr(n){return(131068&n)>>2}function Jh(n,r){return-131069&n|r<<2}function Jl(n){return 1|n}function nv(n,r){const o=n.contentQueries;if(null!==o)for(let a=0;a<o.length;a+=2){const u=o[a],h=o[a+1];if(-1!==h){const y=n.data[h];kc(u),y.contentQueries(2,r[h],h)}}}function rf(n,r,o,a,u,h,y,v,T,x){const H=r.blueprint.slice();return H[0]=u,H[2]=140|a,ss(H),H[3]=H[15]=n,H[8]=o,H[10]=y||n&&n[10],H[11]=v||n&&n[11],H[12]=T||n&&n[12]||null,H[9]=x||n&&n[9]||null,H[6]=h,H[16]=2==r.type?n[16]:H,H}function zd(n,r,o,a,u){let h=n.data[r];if(null===h)h=function(n,r,o,a,u){const h=Ka(),y=fa(),T=n.data[r]=function(n,r,o,a,u,h){return{type:o,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:u,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?h:h&&h.parent,o,r,a,u);return null===n.firstChild&&(n.firstChild=T),null!==h&&(y?null==h.child&&null!==T.parent&&(h.child=T):null===h.next&&(h.next=T)),T}(n,r,o,a,u),qt.lFrame.inI18n&&(h.flags|=64);else if(64&h.type){h.type=o,h.value=a,h.attrs=u;const y=function(){const n=qt.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();h.injectorIndex=null===y?-1:y.injectorIndex}return as(h,!0),h}function Zd(n,r,o,a){if(0===o)return-1;const u=r.length;for(let h=0;h<o;h++)r.push(a),n.blueprint.push(a),n.data.push(null);return u}function Yd(n,r,o){to(r);try{const a=n.viewQuery;null!==a&&Up(1,a,o);const u=n.template;null!==u&&Np(n,r,u,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&nv(n,r),n.staticViewQueries&&Up(2,n.viewQuery,o);const h=n.components;null!==h&&function(n,r){for(let o=0;o<r.length;o++)fv(n,r[o])}(r,h)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,ya()}}function Xl(n,r,o,a){const u=r[2];if(256==(256&u))return;to(r);const h=Ar();try{ss(r),function(n){qt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Np(n,r,o,2,a);const y=3==(3&u);if(!h)if(y){const x=n.preOrderCheckHooks;null!==x&&Qa(r,x,null)}else{const x=n.preOrderHooks;null!==x&&Gr(r,x,0,null),Yo(r,0)}if(function(n){for(let r=E(n);null!==r;r=O(r)){if(!r[2])continue;const o=r[9];for(let a=0;a<o.length;a++){const u=o[a],h=u[3];0==(1024&u[2])&&bo(h,1),u[2]|=1024}}}(r),function(n){for(let r=E(n);null!==r;r=O(r))for(let o=10;o<r.length;o++){const a=r[o],u=a[1];is(a)&&Xl(u,a,u.template,a[8])}}(r),null!==n.contentQueries&&nv(n,r),!h)if(y){const x=n.contentCheckHooks;null!==x&&Qa(r,x)}else{const x=n.contentHooks;null!==x&&Gr(r,x,1),Yo(r,1)}!function(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let a=0;a<o.length;a++){const u=o[a];if(u<0)cs(~u);else{const h=u,y=o[++a],v=o[++a];Fu(y,h),v(2,r[h])}}}finally{cs(-1)}}(n,r);const v=n.components;null!==v&&function(n,r){for(let o=0;o<r.length;o++)hv(n,r[o])}(r,v);const T=n.viewQuery;if(null!==T&&Up(2,T,a),!h)if(y){const x=n.viewCheckHooks;null!==x&&Qa(r,x)}else{const x=n.viewHooks;null!==x&&Gr(r,x,2),Yo(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),h||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,bo(r[3],-1))}finally{ya()}}function ob(n,r,o,a){const u=r[10],h=!Ar(),y=yr(r);try{h&&!y&&u.begin&&u.begin(),y&&Yd(n,r,a),Xl(n,r,o,a)}finally{h&&!y&&u.end&&u.end()}}function Np(n,r,o,a,u){const h=Gi(),y=2&a;try{cs(-1),y&&r.length>20&&Q_(n,r,20,Ar()),o(a,u)}finally{cs(h)}}function sf(n,r,o){!eo()||(function(n,r,o,a){const u=o.directiveStart,h=o.directiveEnd;n.firstCreatePass||Ea(o,r),qr(a,r);const y=o.initialInputs;for(let v=u;v<h;v++){const T=n.data[v],x=Vi(T);x&&fb(r,o,T);const H=G(r,n,v,o);qr(H,r),null!==y&&pb(0,v-u,H,T,0,y),x&&($n(o.index,r)[8]=H)}}(n,r,o,mn(o,r)),128==(128&o.flags)&&function(n,r,o){const a=o.directiveStart,u=o.directiveEnd,y=o.index,v=qt.lFrame.currentDirectiveIndex;try{cs(y);for(let T=a;T<u;T++){const x=n.data[T],H=r[T];za(T),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&cv(x,H)}}finally{cs(-1),za(v)}}(n,r,o))}function of(n,r,o=mn){const a=r.localNames;if(null!==a){let u=r.index+1;for(let h=0;h<a.length;h+=2){const y=a[h+1],v=-1===y?o(r,n):n[y];n[u++]=v}}}function Op(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=_c(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function _c(n,r,o,a,u,h,y,v,T,x){const H=20+a,q=H+u,Z=function(n,r){const o=[];for(let a=0;a<r;a++)o.push(a<n?null:pn);return o}(H,q),re="function"==typeof x?x():x;return Z[1]={type:n,blueprint:Z,template:o,queries:null,viewQuery:v,declTNode:r,data:Z.slice().fill(null,H),bindingStartIndex:H,expandoStartIndex:q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:T,consts:re,incompleteFirstPass:!1}}function al(n,r,o,a){const u=gv(r);null===o?u.push(a):(u.push(o),n.firstCreatePass&&mv(n).push(a,u.length-1))}function cl(n,r,o){for(let a in n)if(n.hasOwnProperty(a)){const u=n[a];(o=null===o?{}:o).hasOwnProperty(a)?o[a].push(r,u):o[a]=[r,u]}return o}function co(n,r,o,a,u,h,y,v){const T=mn(r,o);let H,x=r.inputs;!v&&null!=x&&(H=x[a])?(df(n,o,H,a,u),Ho(r)&&function(n,r){const o=$n(r,n);16&o[2]||(o[2]|=64)}(o,r.index)):3&r.type&&(a=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),u=null!=y?y(u,r.value||"",a):u,Ee(h)?h.setProperty(T,a,u):ec(a)||(T.setProperty?T.setProperty(a,u):T[a]=u))}function td(n,r,o,a){let u=!1;if(eo()){const h=function(n,r,o){const a=n.directiveRegistry;let u=null;if(a)for(let h=0;h<a.length;h++){const y=a[h];z_(o,y.selectors,!1)&&(u||(u=[]),As(Ea(o,r),n,y.type),Vi(y)?(Qd(n,o),u.unshift(y)):u.push(y))}return u}(n,r,o),y=null===a?null:{"":-1};if(null!==h){u=!0,Nm(o,n.data.length,h.length);for(let H=0;H<h.length;H++){const q=h[H];q.providersResolver&&q.providersResolver(q)}let v=!1,T=!1,x=Zd(n,r,h.length,null);for(let H=0;H<h.length;H++){const q=h[H];o.mergedAttrs=Vs(o.mergedAttrs,q.hostAttrs),uv(n,o,r,x,q),rd(x,q,y),null!==q.contentQueries&&(o.flags|=8),(null!==q.hostBindings||null!==q.hostAttrs||0!==q.hostVars)&&(o.flags|=128);const Z=q.type.prototype;!v&&(Z.ngOnChanges||Z.ngOnInit||Z.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),v=!0),!T&&(Z.ngOnChanges||Z.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),T=!0),x++}!function(n,r){const a=r.directiveEnd,u=n.data,h=r.attrs,y=[];let v=null,T=null;for(let x=r.directiveStart;x<a;x++){const H=u[x],q=H.inputs,Z=null===h||Em(r)?null:lv(q,h);y.push(Z),v=cl(q,x,v),T=cl(H.outputs,x,T)}null!==v&&(v.hasOwnProperty("class")&&(r.flags|=16),v.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=y,r.inputs=v,r.outputs=T}(n,o)}y&&function(n,r,o){if(r){const a=n.localNames=[];for(let u=0;u<r.length;u+=2){const h=o[r[u+1]];if(null==h)throw new $e("301",`Export of name '${r[u+1]}' not found!`);a.push(r[u],h)}}}(o,a,y)}return o.mergedAttrs=Vs(o.mergedAttrs,o.attrs),u}function ul(n,r,o,a,u,h){const y=h.hostBindings;if(y){let v=n.hostBindingOpCodes;null===v&&(v=n.hostBindingOpCodes=[]);const T=~r.index;(function(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(v)!=T&&v.push(T),v.push(a,u,y)}}function cv(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Qd(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function rd(n,r,o){if(o){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)o[r.exportAs[a]]=n;Vi(r)&&(o[""]=n)}}function Nm(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}function uv(n,r,o,a,u){n.data[a]=u;const h=u.factory||(u.factory=di(u.type)),y=new Ds(h,Vi(u),null);n.blueprint[a]=y,o[a]=y,ul(n,r,0,a,Zd(n,o,u.hostVars,pn),u)}function fb(n,r,o){const a=mn(r,n),u=Op(o),h=n[10],y=id(n,rf(n,u,null,o.onPush?64:16,a,r,h,h.createRenderer(a,o),null,null));n[r.index]=y}function Fa(n,r,o,a,u,h){const y=mn(n,r);!function(n,r,o,a,u,h,y){if(null==h)Ee(n)?n.removeAttribute(r,u,o):r.removeAttribute(u);else{const v=null==y?ct(h):y(h,a||"",u);Ee(n)?n.setAttribute(r,u,v,o):o?r.setAttributeNS(o,u,v):r.setAttribute(u,v)}}(r[11],y,h,n.value,o,a,u)}function pb(n,r,o,a,u,h){const y=h[r];if(null!==y){const v=a.setInput;for(let T=0;T<y.length;){const x=y[T++],H=y[T++],q=y[T++];null!==v?a.setInput(o,q,x,H):o[H]=q}}}function lv(n,r){let o=null,a=0;for(;a<r.length;){const u=r[a];if(0!==u)if(5!==u){if("number"==typeof u)break;n.hasOwnProperty(u)&&(null===o&&(o=[]),o.push(u,n[u],r[a+1])),a+=2}else a+=2;else a+=4}return o}function uf(n,r,o,a){return new Array(n,!0,!1,r,null,0,a,o,null,null)}function hv(n,r){const o=$n(r,n);if(is(o)){const a=o[1];80&o[2]?Xl(a,o,a.template,o[8]):o[5]>0&&Gs(o)}}function Gs(n){for(let a=E(n);null!==a;a=O(a))for(let u=10;u<a.length;u++){const h=a[u];if(1024&h[2]){const y=h[1];Xl(y,h,y.template,h[8])}else h[5]>0&&Gs(h)}const o=n[1].components;if(null!==o)for(let a=0;a<o.length;a++){const u=$n(o[a],n);is(u)&&u[5]>0&&Gs(u)}}function fv(n,r){const o=$n(r,n),a=o[1];(function(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(a,o),Yd(a,o,o[8])}function id(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Vp(n){for(;n;){n[2]|=64;const r=_(n);if(Uo(n)&&!r)return n;n=r}return null}function Hp(n,r,o){const a=r[10];a.begin&&a.begin();try{Xl(n,r,n.template,o)}catch(u){throw _v(r,u),u}finally{a.end&&a.end()}}function hl(n){!function(n){for(let r=0;r<n.components.length;r++){const o=n.components[r],a=hc(o),u=a[1];ob(u,a,u.template,o)}}(n[8])}function Up(n,r,o){kc(0),r(n,o)}const pv=(()=>Promise.resolve(null))();function gv(n){return n[7]||(n[7]=[])}function mv(n){return n.cleanup||(n.cleanup=[])}function _v(n,r){const o=n[9],a=o?o.get(Oa,null):null;a&&a.handleError(r)}function df(n,r,o,a,u){for(let h=0;h<o.length;){const y=o[h++],v=o[h++],T=r[y],x=n.data[y];null!==x.setInput?x.setInput(T,u,a,v):T[v]=u}}function jp(n,r,o){let a=o?n.styles:null,u=o?n.classes:null,h=0;if(null!==r)for(let y=0;y<r.length;y++){const v=r[y];"number"==typeof v?h=v:1==h?u=Re(u,v):2==h&&(a=Re(a,v+": "+r[++y]+";"))}o?n.styles=a:n.stylesWithoutHost=a,o?n.classes=u:n.classesWithoutHost=u}const La=new br("INJECTOR",-1);class eh{get(r,o=kt){if(o===kt){const a=new Error(`NullInjectorError: No provider for ${me(r)}!`);throw a.name="NullInjectorError",a}return o}}const th=new br("Set Injector scope."),nh={},_b={};let Bp;function wv(){return void 0===Bp&&(Bp=new eh),Bp}function $p(n,r=null,o=null,a){return new ws(n,o,r||wv(),a)}class ws{constructor(r,o,a,u=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];o&&Ro(o,v=>this.processProvider(v,r,o)),Ro([r],v=>this.processInjectorType(v,[],h)),this.records.set(La,od(void 0,this));const y=this.records.get(th);this.scope=null!=y?y.value:null,this.source=u||("object"==typeof r?null:me(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,o=kt,a=X.Default){this.assertNotDestroyed();const u=na(this),h=We(void 0);try{if(!(a&X.SkipSelf)){let v=this.records.get(r);if(void 0===v){const T=("function"==typeof(n=r)||"object"==typeof n&&n instanceof br)&&gn(r);v=T&&this.injectableDefInScope(T)?od(Om(r),nh):null,this.records.set(r,v)}if(null!=v)return this.hydrate(r,v)}return(a&X.Self?wv():this.parent).get(r,o=a&X.Optional&&o===kt?null:o)}catch(y){if("NullInjectorError"===y.name){if((y[Qt]=y[Qt]||[]).unshift(me(r)),u)throw y;return Rd(y,r,"R3InjectorError",this.source)}throw y}finally{We(h),na(u)}var n}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((a,u)=>r.push(me(u))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(r,o,a){if(!(r=xe(r)))return!1;let u=Sn(r);const h=null==u&&r.ngModule||void 0,y=void 0===h?r:h,v=-1!==a.indexOf(y);if(void 0!==h&&(u=Sn(h)),null==u)return!1;if(null!=u.imports&&!v){let H;a.push(y);try{Ro(u.imports,q=>{this.processInjectorType(q,o,a)&&(void 0===H&&(H=[]),H.push(q))})}finally{}if(void 0!==H)for(let q=0;q<H.length;q++){const{ngModule:Z,providers:re}=H[q];Ro(re,pe=>this.processProvider(pe,Z,re||et))}}this.injectorDefTypes.add(y);const T=di(y)||(()=>new y);this.records.set(y,od(T,nh));const x=u.providers;if(null!=x&&!v){const H=r;Ro(x,q=>this.processProvider(q,H,x))}return void 0!==h&&void 0!==r.providers}processProvider(r,o,a){let u=ad(r=xe(r))?r:xe(r&&r.provide);const h=(n=r,bv(n)?od(void 0,n.useValue):od(Ev(n),nh));var n;if(ad(r)||!0!==r.multi)this.records.get(u);else{let y=this.records.get(u);y||(y=od(void 0,nh,!0),y.factory=()=>ac(y.multi),this.records.set(u,y)),u=r,y.multi.push(r)}this.records.set(u,h)}hydrate(r,o){return o.value===nh&&(o.value=_b,o.value=o.factory()),"object"==typeof o.value&&o.value&&null!==(n=o.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(o.value),o.value;var n}injectableDefInScope(r){if(!r.providedIn)return!1;const o=xe(r.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Om(n){const r=gn(n),o=null!==r?r.factory:di(n);if(null!==o)return o;if(n instanceof br)throw new Error(`Token ${me(n)} is missing a \u0275prov definition.`);if(n instanceof Function)return function(n){const r=n.length;if(r>0){const a=function(n,r){const o=[];for(let a=0;a<n;a++)o.push(r);return o}(r,"?");throw new Error(`Can't resolve all parameters for ${me(n)}: (${a.join(", ")}).`)}const o=function(n){const r=n&&(n[Dn]||n[hs]);if(r){const o=function(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),r}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Error("unreachable")}function Ev(n,r,o){let a;if(ad(n)){const u=xe(n);return di(u)||Om(u)}if(bv(n))a=()=>xe(n.useValue);else if(function(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...ac(n.deps||[]));else if(function(n){return!(!n||!n.useExisting)}(n))a=()=>cr(xe(n.useExisting));else{const u=xe(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return di(u)||Om(u);a=()=>new u(...ac(n.deps))}return a}function od(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function bv(n){return null!==n&&"object"==typeof n&&Nr in n}function ad(n){return"function"==typeof n}const Vm=function(n,r,o){return function(n,r=null,o=null,a){const u=$p(n,r,o,a);return u._resolveInjectorDefTypes(),u}({name:o},r,n,o)};let si=(()=>{class n{static create(o,a){return Array.isArray(o)?Vm(o,a,""):Vm(o.providers,o.parent,o.name||"")}}return n.THROW_IF_NOT_FOUND=kt,n.NULL=new eh,n.\u0275prov=Ft({token:n,providedIn:"any",factory:()=>cr(La)}),n.__NG_ELEMENT_ID__=-1,n})();function Km(n,r){Ls(hc(n)[1],tr())}function ld(n){let r=function(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const a=[n];for(;r;){let u;if(Vi(n))u=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Error("Directives cannot inherit Components");u=r.\u0275dir}if(u){if(o){a.push(u);const y=n;y.inputs=fl(n.inputs),y.declaredInputs=fl(n.declaredInputs),y.outputs=fl(n.outputs);const v=u.hostBindings;v&&mf(n,v);const T=u.viewQuery,x=u.contentQueries;if(T&&Zm(n,T),x&&Xp(n,x),ye(n.inputs,u.inputs),ye(n.declaredInputs,u.declaredInputs),ye(n.outputs,u.outputs),Vi(u)&&u.data.animation){const H=n.data;H.animation=(H.animation||[]).concat(u.data.animation)}}const h=u.features;if(h)for(let y=0;y<h.length;y++){const v=h[y];v&&v.ngInherit&&v(n),v===ld&&(o=!1)}}r=Object.getPrototypeOf(r)}!function(n){let r=0,o=null;for(let a=n.length-1;a>=0;a--){const u=n[a];u.hostVars=r+=u.hostVars,u.hostAttrs=Vs(u.hostAttrs,o=Vs(o,u.hostAttrs))}}(a)}function fl(n){return n===je?{}:n===et?[]:n}function Zm(n,r){const o=n.viewQuery;n.viewQuery=o?(a,u)=>{r(a,u),o(a,u)}:r}function Xp(n,r){const o=n.contentQueries;n.contentQueries=o?(a,u,h)=>{r(a,u,h),o(a,u,h)}:r}function mf(n,r){const o=n.hostBindings;n.hostBindings=o?(a,u)=>{r(a,u),o(a,u)}:r}let ih=null;function ko(){if(!ih){const n=vt.Symbol;if(n&&n.iterator)ih=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<r.length;++o){const a=r[o];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(ih=a)}}}return ih}function dd(n){return!!ey(n)&&(Array.isArray(n)||!(n instanceof Map)&&ko()in n)}function ey(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Es(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function ty(n,r,o,a){const u=Ge();return Es(u,Co(),r)&&(En(),Fa(Yn(),u,n,r,o,a)),ty}function gd(n,r,o,a,u,h,y,v){const T=Ge(),x=En(),H=n+20,q=x.firstCreatePass?function(n,r,o,a,u,h,y,v,T){const x=r.consts,H=zd(r,n,4,y||null,$i(x,v));td(r,o,H,$i(x,T)),Ls(r,H);const q=H.tViews=_c(2,H,a,u,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,x);return null!==r.queries&&(r.queries.template(r,H),q.queries=r.queries.embeddedTView(H)),H}(H,x,T,r,o,a,u,h,y):x.data[H];as(q,!1);const Z=T[11].createComment("");Kh(x,T,Z,q),qr(Z,T),id(T,T[H]=uf(Z,T,Z,q)),xi(q)&&sf(x,T,q),null!=y&&of(T,q,v)}function md(n){return function(n,r){return n[r]}(qt.lFrame.contextLView,20+n)}function yf(n,r=X.Default){const o=Ge();return null===o?cr(n,r):D(tr(),o,xe(n),r)}function wy(n,r,o){const a=Ge();return Es(a,Co(),r)&&co(En(),Yn(),a,n,r,a[11],o,!1),wy}function _f(n,r,o,a,u){const y=u?"class":"style";df(n,o,r.inputs[y],y,a)}function vf(n,r,o,a){const u=Ge(),h=En(),y=20+n,v=u[11],T=u[y]=Pt(v,r,qt.lFrame.currentNamespace),x=h.firstCreatePass?function(n,r,o,a,u,h,y){const v=r.consts,x=zd(r,n,2,u,$i(v,h));return td(r,o,x,$i(v,y)),null!==x.attrs&&jp(x,x.attrs,!1),null!==x.mergedAttrs&&jp(x,x.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,x),x}(y,h,u,0,r,o,a):h.data[y];as(x,!0);const H=x.mergedAttrs;null!==H&&jc(v,T,H);const q=x.classes;null!==q&&$s(v,T,q);const Z=x.styles;null!==Z&&K_(v,T,Z),64!=(64&x.flags)&&Kh(h,u,T,x),0===qt.lFrame.elementDepthCount&&qr(T,u),qt.lFrame.elementDepthCount++,xi(x)&&(sf(h,u,x),function(n,r,o){if(Qs(r)){const u=r.directiveEnd;for(let h=r.directiveStart;h<u;h++){const y=n.data[h];y.contentQueries&&y.contentQueries(1,o[h],h)}}}(h,x,u)),null!==a&&of(u,x)}function Ey(){let n=tr();fa()?qt.lFrame.isParent=!1:(n=n.parent,as(n,!1));const r=n;qt.lFrame.elementDepthCount--;const o=En();o.firstCreatePass&&(Ls(o,n),Qs(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(r)&&_f(o,r,Ge(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(r)&&_f(o,r,Ge(),r.stylesWithoutHost,!1)}function cg(n,r,o,a){vf(n,r,o,a),Ey()}function ug(){return Ge()}function Iy(n){return!!n&&"function"==typeof n.then}function lg(n){return!!n&&"function"==typeof n.subscribe}const wf=lg;function Ef(n,r,o,a){const u=Ge(),h=En(),y=tr();return function(n,r,o,a,u,h,y,v){const T=xi(a),H=n.firstCreatePass&&mv(n),q=r[8],Z=gv(r);let re=!0;if(3&a.type||v){const we=mn(a,r),st=v?v(we):we,Ue=Z.length,Gt=v?hn=>v(At(hn[a.index])):a.index;if(Ee(o)){let hn=null;if(!v&&T&&(hn=function(n,r,o,a){const u=n.cleanup;if(null!=u)for(let h=0;h<u.length-1;h+=2){const y=u[h];if(y===o&&u[h+1]===a){const v=r[7],T=u[h+2];return v.length>T?v[T]:null}"string"==typeof y&&(h+=2)}return null}(n,r,u,a.index)),null!==hn)(hn.__ngLastListenerFn__||hn).__ngNextListenerFn__=h,hn.__ngLastListenerFn__=h,re=!1;else{h=bf(a,r,q,h,!1);const Gn=o.listen(st,u,h);Z.push(h,Gn),H&&H.push(u,Gt,Ue,Ue+1)}}else h=bf(a,r,q,h,!0),st.addEventListener(u,h,y),Z.push(h),H&&H.push(u,Gt,Ue,y)}else h=bf(a,r,q,h,!1);const pe=a.outputs;let Me;if(re&&null!==pe&&(Me=pe[u])){const we=Me.length;if(we)for(let st=0;st<we;st+=2){const Os=r[Me[st]][Me[st+1]].subscribe(h),ru=Z.length;Z.push(h,Os),H&&H.push(u,a.index,ru,-(ru+1))}}}(h,u,u[11],y,n,r,!!o,a),Ef}function iw(n,r,o,a){try{return!1!==o(a)}catch(u){return _v(n,u),!1}}function bf(n,r,o,a,u){return function h(y){if(y===Function)return a;const v=2&n.flags?$n(n.index,r):r;0==(32&r[2])&&Vp(v);let T=iw(r,0,a,y),x=h.__ngNextListenerFn__;for(;x;)T=iw(r,0,x,y)&&T,x=x.__ngNextListenerFn__;return u&&!1===T&&(y.preventDefault(),y.returnValue=!1),T}}function Py(n,r,o,a,u){const h=n[o+1],y=null===r;let v=a?yc(h):kr(h),T=!1;for(;0!==v&&(!1===T||y);){const H=n[v+1];My(n[v],r)&&(T=!0,n[v+1]=a?Jl(H):Im(H)),v=a?yc(H):kr(H)}T&&(n[o+1]=a?Im(h):Jl(h))}function My(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Po(n,r)>=0}function Df(n,r){return function(n,r,o,a){const u=Ge(),h=En(),y=function(n){const r=qt.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}(2);h.firstUpdatePass&&function(n,r,o,a){const u=n.data;if(null===u[o+1]){const h=u[Gi()],y=function(n,r){return r>=n.expandoStartIndex}(n,o);(function(n,r){return 0!=(n.flags&(r?16:32))})(h,a)&&null===r&&!y&&(r=!1),r=function(n,r,o,a){const u=function(n){const r=qt.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let h=a?r.residualClasses:r.residualStyles;if(null===u)0===(a?r.classBindings:r.styleBindings)&&(o=Af(o=gg(null,n,r,o,a),r.attrs,a),h=null);else{const y=r.directiveStylingLast;if(-1===y||n[y]!==u)if(o=gg(u,n,r,o,a),null===h){let T=function(n,r,o){const a=o?r.classBindings:r.styleBindings;if(0!==kr(a))return n[yc(a)]}(n,r,a);void 0!==T&&Array.isArray(T)&&(T=gg(null,n,r,T[1],a),T=Af(T,r.attrs,a),function(n,r,o,a){n[yc(o?r.classBindings:r.styleBindings)]=a}(n,r,a,T))}else h=function(n,r,o){let a;const u=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<u;h++)a=Af(a,n[h].hostAttrs,o);return Af(a,r.attrs,o)}(n,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),o}(u,h,r,a),function(n,r,o,a,u,h){let y=h?r.classBindings:r.styleBindings,v=yc(y),T=kr(y);n[a]=o;let H,x=!1;if(Array.isArray(o)){const q=o;H=q[1],(null===H||Po(q,H)>0)&&(x=!0)}else H=o;if(u)if(0!==T){const Z=yc(n[v+1]);n[a+1]=Tp(Z,v),0!==Z&&(n[Z+1]=Jh(n[Z+1],a)),n[v+1]=function(n,r){return 131071&n|r<<17}(n[v+1],a)}else n[a+1]=Tp(v,0),0!==v&&(n[v+1]=Jh(n[v+1],a)),v=a;else n[a+1]=Tp(T,0),0===v?v=a:n[T+1]=Jh(n[T+1],a),T=a;x&&(n[a+1]=Im(n[a+1])),Py(n,H,a,!0),Py(n,H,a,!1),function(n,r,o,a,u){const h=u?n.residualClasses:n.residualStyles;null!=h&&"string"==typeof r&&Po(h,r)>=0&&(o[a+1]=Jl(o[a+1]))}(r,H,n,a,h),y=Tp(v,T),h?r.classBindings=y:r.styleBindings=y}(u,h,r,o,y,a)}}(h,n,y,a),r!==pn&&Es(u,y,r)&&function(n,r,o,a,u,h,y,v){if(!(3&r.type))return;const T=n.data,x=T[v+1];yg(function(n){return 1==(1&n)}(x)?mw(T,r,o,u,kr(x),y):void 0)||(yg(h)||function(n){return 2==(2&n)}(x)&&(h=mw(T,null,o,u,v,y)),function(n,r,o,a,u){const h=Ee(n);if(r)u?h?n.addClass(o,a):o.classList.add(a):h?n.removeClass(o,a):o.classList.remove(a);else{let y=-1===a.indexOf("-")?void 0:ao.DashCase;if(null==u)h?n.removeStyle(o,a,y):o.style.removeProperty(a);else{const v="string"==typeof u&&u.endsWith("!important");v&&(u=u.slice(0,-10),y|=ao.Important),h?n.setStyle(o,a,u,y):o.style.setProperty(a,u,v?"important":"")}}}(a,y,function(n,r){return At(r[n])}(Gi(),o),u,h))}(h,h.data[Gi()],u,u[11],n,u[y+1]=function(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=me(Mo(n)))),n}(r,o),a,y)}(n,r,null,!0),Df}function gg(n,r,o,a,u){let h=null;const y=o.directiveEnd;let v=o.directiveStylingLast;for(-1===v?v=o.directiveStart:v++;v<y&&(h=r[v],a=Af(a,h.hostAttrs,u),h!==n);)v++;return null!==n&&(o.directiveStylingLast=v),a}function Af(n,r,o){const a=o?1:2;let u=-1;if(null!==r)for(let h=0;h<r.length;h++){const y=r[h];"number"==typeof y?u=y:u===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),xs(n,y,!!o||r[++h]))}return void 0===n?null:n}function mw(n,r,o,a,u,h){const y=null===r;let v;for(;u>0;){const T=n[u],x=Array.isArray(T),H=x?T[1]:T,q=null===H;let Z=o[u+1];Z===pn&&(Z=q?et:void 0);let re=q?Wc(Z,a):H===a?Z:void 0;if(x&&!yg(re)&&(re=Wc(T,a)),yg(re)&&(v=re,y))return v;const pe=n[u+1];u=y?yc(pe):kr(pe)}if(null!==r){let T=h?r.residualClasses:r.residualStyles;null!=T&&(v=Wc(T,a))}return v}function yg(n){return void 0!==n}function Jb(n,r=""){const o=Ge(),a=En(),u=n+20,h=a.firstCreatePass?zd(a,u,1,r,null):a.data[u],y=o[u]=function(n,r){return Ee(n)?n.createText(r):n.createTextNode(r)}(o[11],r);Kh(a,o,y,h),as(h,!1)}function Tg(n,r,o){const a=Ge();return Es(a,Co(),r)&&co(En(),Yn(),a,n,r,a[11],o,!0),Tg}const Au=void 0;var Ag=["en",[["a","p"],["AM","PM"],Au],[["AM","PM"],Au,Au],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Au,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Au,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Au,"{1} 'at' {0}",Au],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){const r=Math.floor(Math.abs(n)),o=n.toString().replace(/^[^.]*\.?/,"").length;return 1===r&&0===o?1:5}];let Su={};function vd(n){const r=function(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=Uy(r);if(o)return o;const a=r.split("-")[0];if(o=Uy(a),o)return o;if("en"===a)return Ag;throw new Error(`Missing locale data for the locale "${n}".`)}function xf(n){return vd(n)[Ut.PluralCase]}function Uy(n){return n in Su||(Su[n]=vt.ng&&vt.ng.common&&vt.ng.common.locales&&vt.ng.common.locales[n]),Su[n]}var Ut=(()=>((Ut=Ut||{})[Ut.LocaleId=0]="LocaleId",Ut[Ut.DayPeriodsFormat=1]="DayPeriodsFormat",Ut[Ut.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ut[Ut.DaysFormat=3]="DaysFormat",Ut[Ut.DaysStandalone=4]="DaysStandalone",Ut[Ut.MonthsFormat=5]="MonthsFormat",Ut[Ut.MonthsStandalone=6]="MonthsStandalone",Ut[Ut.Eras=7]="Eras",Ut[Ut.FirstDayOfWeek=8]="FirstDayOfWeek",Ut[Ut.WeekendRange=9]="WeekendRange",Ut[Ut.DateFormat=10]="DateFormat",Ut[Ut.TimeFormat=11]="TimeFormat",Ut[Ut.DateTimeFormat=12]="DateTimeFormat",Ut[Ut.NumberSymbols=13]="NumberSymbols",Ut[Ut.NumberFormats=14]="NumberFormats",Ut[Ut.CurrencyCode=15]="CurrencyCode",Ut[Ut.CurrencySymbol=16]="CurrencySymbol",Ut[Ut.CurrencyName=17]="CurrencyName",Ut[Ut.Currencies=18]="Currencies",Ut[Ut.Directionality=19]="Directionality",Ut[Ut.PluralCase=20]="PluralCase",Ut[Ut.ExtraData=21]="ExtraData",Ut))();const xg="en-US";let Pw=xg;function Mg(n){Jn(n,"Expected localeId to be defined"),"string"==typeof n&&(Pw=n.toLowerCase().replace(/_/g,"-"))}function n_(n,r,o,a,u){if(n=xe(n),Array.isArray(n))for(let h=0;h<n.length;h++)n_(n[h],r,o,a,u);else{const h=En(),y=Ge();let v=ad(n)?n:xe(n.provide),T=Ev(n);const x=tr(),H=1048575&x.providerIndexes,q=x.directiveStart,Z=x.providerIndexes>>20;if(ad(n)||!n.multi){const re=new Ds(T,u,yf),pe=i_(v,r,u?H:H+Z,q);-1===pe?(As(Ea(x,y),h,v),r_(h,n,r.length),r.push(v),x.directiveStart++,x.directiveEnd++,u&&(x.providerIndexes+=1048576),o.push(re),y.push(re)):(o[pe]=re,y[pe]=re)}else{const re=i_(v,r,H+Z,q),pe=i_(v,r,H,H+Z),Me=re>=0&&o[re],we=pe>=0&&o[pe];if(u&&!we||!u&&!Me){As(Ea(x,y),h,v);const st=function(n,r,o,a,u){const h=new Ds(n,o,yf);return h.multi=[],h.index=r,h.componentProviders=0,Kw(h,u,a&&!o),h}(u?zw:SC,o.length,u,a,T);!u&&we&&(o[pe].providerFactory=st),r_(h,n,r.length,0),r.push(v),x.directiveStart++,x.directiveEnd++,u&&(x.providerIndexes+=1048576),o.push(st),y.push(st)}else r_(h,n,re>-1?re:pe,Kw(o[u?pe:re],T,!u&&a));!u&&a&&we&&o[pe].componentProviders++}}}function r_(n,r,o,a){const u=ad(r);if(u||function(n){return!!n.useClass}(r)){const y=(r.useClass||r).prototype.ngOnDestroy;if(y){const v=n.destroyHooks||(n.destroyHooks=[]);if(!u&&r.multi){const T=v.indexOf(o);-1===T?v.push(o,[a,y]):v[T+1].push(a,y)}else v.push(o,y)}}}function Kw(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function i_(n,r,o,a){for(let u=o;u<a;u++)if(r[u]===n)return u;return-1}function SC(n,r,o,a){return s_(this.multi,[])}function zw(n,r,o,a){const u=this.multi;let h;if(this.providerFactory){const y=this.providerFactory.componentProviders,v=G(o,o[1],this.providerFactory.index,a);h=v.slice(0,y),s_(u,h);for(let T=y;T<v.length;T++)h.push(v[T])}else h=[],s_(u,h);return h}function s_(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function o_(n,r=[]){return o=>{o.providersResolver=(a,u)=>function(n,r,o){const a=En();if(a.firstCreatePass){const u=Vi(n);n_(o,a.data,a.blueprint,u,!0),n_(r,a.data,a.blueprint,u,!1)}}(a,u?u(n):n,r)}}class c_{}const Zw="ngComponent";class RC{resolveComponentFactory(r){throw function(n){const r=Error(`No component factory found for ${me(n)}. Did you add it to @NgModule.entryComponents?`);return r[Zw]=n,r}(r)}}let Il=(()=>{class n{}return n.NULL=new RC,n})();function Fg(...n){}function Hf(n,r){return new Ru(mn(n,r))}const OI=function(){return Hf(tr(),Ge())};let Ru=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=OI,n})();function MC(n){return n instanceof Ru?n.nativeElement:n}class u_{}let Qw=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>bs(),n})();const bs=function(){const n=Ge(),o=$n(tr().index,n);return function(n){return n[11]}(Si(o)?o:n)};let Uf=(()=>{class n{}return n.\u0275prov=Ft({token:n,providedIn:"root",factory:()=>null}),n})();class Jw{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const l_=new Jw("12.2.16");class Xw{constructor(){}supports(r){return dd(r)}create(r){return new OC(r)}}const eE=(n,r)=>r;class OC{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||eE}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,a=this._removalsHead,u=0,h=null;for(;o||a;){const y=!a||o&&o.currentIndex<jf(a,u,h)?o:a,v=jf(y,u,h),T=y.currentIndex;if(y===a)u--,a=a._nextRemoved;else if(o=o._next,null==y.previousIndex)u++;else{h||(h=[]);const x=v-u,H=T-u;if(x!=H){for(let Z=0;Z<x;Z++){const re=Z<h.length?h[Z]:h[Z]=0,pe=re+Z;H<=pe&&pe<x&&(h[Z]=re+1)}h[y.previousIndex]=H-x}}v!==T&&r(y,v,T)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!dd(r))throw new Error(`Error trying to diff '${me(r)}'. Only arrays and iterables are allowed`);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let u,h,y,o=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let v=0;v<this.length;v++)h=r[v],y=this._trackByFn(v,h),null!==o&&Object.is(o.trackById,y)?(a&&(o=this._verifyReinsertion(o,h,y,v)),Object.is(o.item,h)||this._addIdentityChange(o,h)):(o=this._mismatch(o,h,y,v),a=!0),o=o._next}else u=0,function(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[ko()]();let a;for(;!(a=o.next()).done;)r(a.value)}}(r,v=>{y=this._trackByFn(u,v),null!==o&&Object.is(o.trackById,y)?(a&&(o=this._verifyReinsertion(o,v,y,u)),Object.is(o.item,v)||this._addIdentityChange(o,v)):(o=this._mismatch(o,v,y,u),a=!0),o=o._next,u++}),this.length=u;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,a,u){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,h,u)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,u))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,h,u)):r=this._addAfter(new kC(o,a),h,u),r}_verifyReinsertion(r,o,a,u){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,u):r.currentIndex!=u&&(r.currentIndex=u,this._addToMoves(r,u)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const u=r._prevRemoved,h=r._nextRemoved;return null===u?this._removalsHead=h:u._nextRemoved=h,null===h?this._removalsTail=u:h._prevRemoved=u,this._insertAfter(r,o,a),this._addToMoves(r,a),r}_moveAfter(r,o,a){return this._unlink(r),this._insertAfter(r,o,a),this._addToMoves(r,a),r}_addAfter(r,o,a){return this._insertAfter(r,o,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,a){const u=null===o?this._itHead:o._next;return r._next=u,r._prev=o,null===u?this._itTail=r:u._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new qs),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,a=r._next;return null===o?this._itHead=a:o._next=a,null===a?this._itTail=o:a._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new qs),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class kC{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class FC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===o||o<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const o=r._prevDup,a=r._nextDup;return null===o?this._head=a:o._nextDup=a,null===a?this._tail=o:a._prevDup=o,null===this._head}}class qs{constructor(){this.map=new Map}put(r){const o=r.trackById;let a=this.map.get(o);a||(a=new FC,this.map.set(o,a)),a.add(r)}get(r,o){const u=this.map.get(r);return u?u.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function jf(n,r,o){const a=n.previousIndex;if(null===a)return a;let u=0;return o&&a<o.length&&(u=o[a]),a+r+u}class d_{constructor(){}supports(r){return r instanceof Map||ey(r)}create(){return new h_}}class h_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||ey(r)))throw new Error(`Error trying to diff '${me(r)}'. Only maps and objects are allowed`)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,u)=>{if(o&&o.key===u)this._maybeAddToChanges(o,a),this._appendAfter=o,o=o._next;else{const h=this._getOrCreateRecordForKey(u,a);o=this._insertBeforeOrAppend(o,h)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let a=o;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const a=r._prev;return o._next=r,o._prev=a,r._prev=o,a&&(a._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const u=this._records.get(r);this._maybeAddToChanges(u,o);const h=u._prev,y=u._next;return h&&(h._next=y),y&&(y._prev=h),u._next=null,u._prev=null,u}const a=new Vg(r);return this._records.set(r,a),a.currentValue=o,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(a=>o(r[a],a))}}class Vg{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Hg(){return new _h([new Xw])}let _h=(()=>{class n{constructor(o){this.factories=o}static create(o,a){if(null!=a){const u=a.factories.slice();o=o.concat(u)}return new n(o)}static extend(o){return{provide:n,useFactory:a=>n.create(o,a||Hg()),deps:[[n,new Rs,new Cr]]}}find(o){const a=this.factories.find(u=>u.supports(o));if(null!=a)return a;throw new Error(`Cannot find a differ supporting object '${o}' of type '${function(n){return n.name||typeof n}(o)}'`)}}return n.\u0275prov=Ft({token:n,providedIn:"root",factory:Hg}),n})();function tE(){return new Ug([new d_])}let Ug=(()=>{class n{constructor(o){this.factories=o}static create(o,a){if(a){const u=a.factories.slice();o=o.concat(u)}return new n(o)}static extend(o){return{provide:n,useFactory:a=>n.create(o,a||tE()),deps:[[n,new Rs,new Cr]]}}find(o){const a=this.factories.find(u=>u.supports(o));if(a)return a;throw new Error(`Cannot find a differ supporting object '${o}'`)}}return n.\u0275prov=Ft({token:n,providedIn:"root",factory:tE}),n})();function jg(n,r,o,a,u=!1){for(;null!==o;){const h=r[o.index];if(null!==h&&a.push(At(h)),gr(h))for(let v=10;v<h.length;v++){const T=h[v],x=T[1].firstChild;null!==x&&jg(T[1],T,x,a)}const y=o.type;if(8&y)jg(n,r,o.child,a);else if(32&y){const v=Yl(o,r);let T;for(;T=v();)a.push(T)}else if(16&y){const v=mm(r,o);if(Array.isArray(v))a.push(...v);else{const T=_(r[16]);jg(T[1],T,v,a,!0)}}o=u?o.projectionNext:o.next}return a}class Bf{constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,o=r[1];return jg(o,r,o.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(gr(r)){const o=r[8],a=o?o.indexOf(this):-1;a>-1&&(ia(r,a),Da(o,a))}this._attachedToViewContainer=!1}Bd(this._lView[1],this._lView)}onDestroy(r){al(this._lView[1],this._lView,null,r)}markForCheck(){Vp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Hp(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(n,r,o){ar(!0);try{Hp(n,r,o)}finally{ar(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var r;this._appRef=null,ii(this._lView[1],r=this._lView,r[11],2,null,null)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=r}}class $f extends Bf{constructor(r){super(r),this._view=r}detectChanges(){hl(this._view)}checkNoChanges(){!function(n){ar(!0);try{hl(n)}finally{ar(!1)}}(this._view)}get context(){return null}}const rE=function(n){return function(n,r,o){if(Ho(n)&&!o){const a=$n(n.index,r);return new Bf(a,a)}return 47&n.type?new Bf(r[16],r):null}(tr(),Ge(),16==(16&n))};let VC=(()=>{class n{}return n.__NG_ELEMENT_ID__=rE,n})();const jC=[new d_],p_=new _h([new Xw]),sE=new Ug(jC),Gf=function(){return vh(tr(),Ge())};let Wf=(()=>{class n{}return n.__NG_ELEMENT_ID__=Gf,n})();const m_=Wf,y_=class extends m_{constructor(r,o,a){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=a}createEmbeddedView(r){const o=this._declarationTContainer.tViews,a=rf(this._declarationLView,o,r,16,null,o.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(a[19]=h.createEmbeddedView(o)),Yd(o,a,r),new Bf(a)}};function vh(n,r){return 4&n.type?new y_(r,n,Hf(n,r)):null}class Tl{}class __{}const GC=function(){return oE(tr(),Ge())};let Bg=(()=>{class n{}return n.__NG_ELEMENT_ID__=GC,n})();const w_=Bg,Gg=class extends w_{constructor(r,o,a){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=a}get element(){return Hf(this._hostTNode,this._hostLView)}get injector(){return new mt(this._hostTNode,this._hostLView)}get parentInjector(){const r=Ia(this._hostTNode,this._hostLView);if(us(r)){const o=va(r,this._hostLView),a=qi(r);return new mt(o[1].data[a+8],o)}return new mt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=Wg(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,o,a){const u=r.createEmbeddedView(o||{});return this.insert(u,a),u}createComponent(r,o,a,u,h){const y=a||this.parentInjector;if(!h&&null==r.ngModule&&y){const T=y.get(Tl,null);T&&(h=T)}const v=r.create(y,u,void 0,h);return this.insert(v.hostView,o),v}insert(r,o){const a=r._lView,u=a[1];if(gr(a[3])){const H=this.indexOf(r);if(-1!==H)this.detach(H);else{const q=a[3],Z=new Gg(q,q[6],q[3]);Z.detach(Z.indexOf(r))}}const h=this._adjustIndex(o),y=this._lContainer;!function(n,r,o,a){const u=10+a,h=o.length;a>0&&(o[u-1][4]=r),a<h-10?(r[4]=o[u],lu(o,10+a,r)):(o.push(r),r[4]=null),r[3]=o;const y=r[17];null!==y&&o!==y&&function(n,r){const o=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===o?n[9]=[r]:o.push(r)}(y,r);const v=r[19];null!==v&&v.insertView(n),r[2]|=128}(u,a,y,h);const v=il(h,y),T=a[11],x=qh(T,y[7]);return null!==x&&function(n,r,o,a,u,h){a[0]=u,a[6]=r,ii(n,a,o,1,u,h)}(u,y[6],T,a,x,v),r.attachToViewContainerRef(),lu(qg(y),h,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=Wg(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),a=ia(this._lContainer,o);a&&(Da(qg(this._lContainer),o),Bd(a[1],a))}detach(r){const o=this._adjustIndex(r,-1),a=ia(this._lContainer,o);return a&&null!=Da(qg(this._lContainer),o)?new Bf(a):null}_adjustIndex(r,o=0){return null==r?this.length+o:r}};function Wg(n){return n[8]}function qg(n){return n[8]||(n[8]=[])}function oE(n,r){let o;const a=r[n.index];if(gr(a))o=a;else{let u;if(8&n.type)u=At(a);else{const h=r[11];u=h.createComment("");const y=mn(n,r);bu(h,qh(h,y),u,function(n,r){return Ee(n)?n.nextSibling(r):r.nextSibling}(h,y),!1)}r[n.index]=o=uf(a,r,u,n),id(r,o)}return new Gg(o,n,r)}const Zf={};class b0 extends Il{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=Nt(r);return new RE(o,this.ngModule)}}function C0(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}const nT=new br("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Bh});class RE extends c_{constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=r.selectors.map(Z_).join(","),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return C0(this.componentDef.inputs)}get outputs(){return C0(this.componentDef.outputs)}create(r,o,a,u){const h=(u=u||this.ngModule)?function(n,r){return{get:(o,a,u)=>{const h=n.get(o,Zf,u);return h!==Zf||a===Zf?h:r.get(o,a,u)}}}(r,u.injector):r,y=h.get(u_,It),v=h.get(Uf,null),T=y.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",H=a?function(n,r,o){if(Ee(n))return n.selectRootElement(r,o===Wt.ShadowDom);let a="string"==typeof r?n.querySelector(r):r;return a.textContent="",a}(T,a,this.componentDef.encapsulation):Pt(y.createRenderer(null,this.componentDef),x,function(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(x)),q=this.componentDef.onPush?576:528,Z=function(n,r){return{components:[],scheduler:n||Bh,clean:pv,playerHandler:r||null,flags:0}}(),re=_c(0,null,null,1,0,null,null,null,null,null),pe=rf(null,re,Z,q,null,null,y,T,v,h);let Me,we;to(pe);try{const st=function(n,r,o,a,u,h){const y=o[1];o[20]=n;const T=zd(y,20,2,"#host",null),x=T.mergedAttrs=r.hostAttrs;null!==x&&(jp(T,x,!0),null!==n&&(jc(u,n,x),null!==T.classes&&$s(u,n,T.classes),null!==T.styles&&K_(u,n,T.styles)));const H=a.createRenderer(n,r),q=rf(o,Op(r),null,r.onPush?64:16,o[20],T,a,H,h||null,null);return y.firstCreatePass&&(As(Ea(T,o),y,r.type),Qd(y,T),Nm(T,o.length,1)),id(o,q),o[20]=q}(H,this.componentDef,pe,y,T);if(H)if(a)jc(T,H,["ng-version",l_.full]);else{const{attrs:Ue,classes:Gt}=function(n){const r=[],o=[];let a=1,u=2;for(;a<n.length;){let h=n[a];if("string"==typeof h)2===u?""!==h&&r.push(h,n[++a]):8===u&&o.push(h);else{if(!mc(u))break;u=h}a++}return{attrs:r,classes:o}}(this.componentDef.selectors[0]);Ue&&jc(T,H,Ue),Gt&&Gt.length>0&&$s(T,H,Gt.join(" "))}if(we=rs(re,20),void 0!==o){const Ue=we.projection=[];for(let Gt=0;Gt<this.ngContentSelectors.length;Gt++){const hn=o[Gt];Ue.push(null!=hn?Array.from(hn):null)}}Me=function(n,r,o,a,u){const h=o[1],y=function(n,r,o){const a=tr();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),uv(n,a,r,Zd(n,r,1,null),o));const u=G(r,n,a.directiveStart,a);qr(u,r);const h=mn(a,r);return h&&qr(h,r),u}(h,o,r);if(a.components.push(y),n[8]=y,u&&u.forEach(T=>T(y,r)),r.contentQueries){const T=tr();r.contentQueries(1,y,T.directiveStart)}const v=tr();return!h.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(cs(v.index),ul(o[1],v,0,v.directiveStart,v.directiveEnd,r),cv(r,y)),y}(st,this.componentDef,pe,Z,[Km]),Yd(re,pe,null)}finally{ya()}return new sT(this.componentType,Me,Hf(we,pe),pe,we)}}class sT extends class{}{constructor(r,o,a,u,h){super(),this.location=a,this._rootLView=u,this._tNode=h,this.instance=o,this.hostView=this.changeDetectorRef=new $f(u),this.componentType=r}get injector(){return new mt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}const e=new Map;class g extends Tl{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new b0(this);const a=ir(r),u=r[te]||null;u&&Mg(u),this._bootstrapComponents=Li(a.bootstrap),this._r3Injector=$p(r,o,[{provide:Tl,useValue:this},{provide:Il,useValue:this.componentFactoryResolver}],me(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,o=si.THROW_IF_NOT_FOUND,a=X.Default){return r===si||r===Tl||r===La?this:this._r3Injector.get(r,o,a)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class m extends __{constructor(r){super(),this.moduleType=r,null!==ir(r)&&function(n){const r=new Set;!function o(a){const u=ir(a,!0),h=u.id;null!==h&&(function(n,r,o){if(r&&r!==o)throw new Error(`Duplicate module registered for ${n} - ${me(r)} vs ${me(r.name)}`)}(h,e.get(h),a),e.set(h,a));const y=Li(u.imports);for(const v of y)r.has(v)||(r.add(v),o(v))}(n)}(r)}create(r){return new g(this.moduleType,r)}}function w(n,r,o){const a=function(){const n=qt.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}()+n,u=Ge();return u[a]===pn?function(n,r,o){return n[r]=o}(u,a,o?r.call(o):r()):function(n,r){return n[r]}(u,a)}function T0(n){return r=>{setTimeout(n,void 0,r)}}const Al=class extends R.xQ{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,a){var u,h,y;let v=r,T=o||(()=>null),x=a;if(r&&"object"==typeof r){const q=r;v=null===(u=q.next)||void 0===u?void 0:u.bind(q),T=null===(h=q.error)||void 0===h?void 0:h.bind(q),x=null===(y=q.complete)||void 0===y?void 0:y.bind(q)}this.__isAsync&&(T=T0(T),v&&(v=T0(v)),x&&(x=T0(x)));const H=super.subscribe({next:v,error:T,complete:x});return r instanceof A.w&&r.add(H),H}};function WD(){return this._results[ko()]()}class PE{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=ko(),a=PE.prototype;a[o]||(a[o]=WD)}get changes(){return this._changes||(this._changes=new Al)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const a=this;a.dirty=!1;const u=so(r);(this._changesDetected=!function(n,r,o){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let u=n[a],h=r[a];if(o&&(u=o(u),h=o(h)),h!==u)return!1}return!0}(a._results,u,o))&&(a._results=u,a.length=u.length,a.last=u[this.length-1],a.first=u[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class D0{constructor(r){this.queryList=r,this.matches=null}clone(){return new D0(this.queryList)}setDirty(){this.queryList.setDirty()}}class A0{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const a=null!==r.contentQueries?r.contentQueries[0]:o.length,u=[];for(let h=0;h<a;h++){const y=o.getByIndex(h);u.push(this.queries[y.indexInDeclarationView].clone())}return new A0(u)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==pT(r,o).matches&&this.queries[o].setDirty()}}class oT{constructor(r,o,a=null){this.predicate=r,this.flags=o,this.read=a}}class S0{constructor(r=[]){this.queries=r}elementStart(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let a=0;a<this.length;a++){const u=null!==o?o.length:0,h=this.getByIndex(a).embeddedTView(r,u);h&&(h.indexInDeclarationView=a,null!==o?o.push(h):o=[h])}return null!==o?new S0(o):null}template(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class x0{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new x0(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==o;)a=a.parent;return o===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const a=this.metadata.predicate;if(Array.isArray(a))for(let u=0;u<a.length;u++){const h=a[u];this.matchTNodeWithReadOption(r,o,zD(o,h)),this.matchTNodeWithReadOption(r,o,L(o,r,h,!1,!1))}else a===Wf?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,L(o,r,a,!1,!1))}matchTNodeWithReadOption(r,o,a){if(null!==a){const u=this.metadata.read;if(null!==u)if(u===Ru||u===Bg||u===Wf&&4&o.type)this.addMatch(o.index,-2);else{const h=L(o,r,u,!1,!1);null!==h&&this.addMatch(o.index,h)}else this.addMatch(o.index,a)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function zD(n,r){const o=n.localNames;if(null!==o)for(let a=0;a<o.length;a+=2)if(o[a]===r)return o[a+1];return null}function YD(n,r,o,a){return-1===o?function(n,r){return 11&n.type?Hf(n,r):4&n.type?vh(n,r):null}(r,n):-2===o?function(n,r,o){return o===Ru?Hf(r,n):o===Wf?vh(r,n):o===Bg?oE(r,n):void 0}(n,r,a):G(n,n[1],o,r)}function aT(n,r,o,a){const u=r[19].queries[a];if(null===u.matches){const h=n.data,y=o.matches,v=[];for(let T=0;T<y.length;T+=2){const x=y[T];v.push(x<0?null:YD(r,h[x],y[T+1],o.metadata.read))}u.matches=v}return u.matches}function R0(n,r,o,a){const u=n.queries.getByIndex(o),h=u.matches;if(null!==h){const y=aT(n,r,u,o);for(let v=0;v<h.length;v+=2){const T=h[v];if(T>0)a.push(y[v/2]);else{const x=h[v+1],H=r[-T];for(let q=10;q<H.length;q++){const Z=H[q];Z[17]===Z[3]&&R0(Z[1],Z,x,a)}if(null!==H[9]){const q=H[9];for(let Z=0;Z<q.length;Z++){const re=q[Z];R0(re[1],re,x,a)}}}}}return a}function cT(n){const r=Ge(),o=En(),a=Oc();kc(a+1);const u=pT(o,a);if(n.dirty&&yr(r)===(2==(2&u.metadata.flags))){if(null===u.matches)n.reset([]);else{const h=u.crossesNgTemplate?R0(o,r,a,[]):aT(o,r,u,a);n.reset(h,MC),n.notifyOnChanges()}return!0}return!1}function uT(n,r,o){const a=En();a.firstCreatePass&&(fT(a,new oT(n,r,o),-1),2==(2&r)&&(a.staticViewQueries=!0)),hT(a,Ge(),r)}function lT(n,r,o,a){const u=En();if(u.firstCreatePass){const h=tr();fT(u,new oT(r,o,a),h.index),function(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(u,n),2==(2&o)&&(u.staticContentQueries=!0)}hT(u,Ge(),o)}function dT(){return n=Ge(),r=Oc(),n[19].queries[r].queryList;var n,r}function hT(n,r,o){const a=new PE(4==(4&o));al(n,r,a,a.destroy),null===r[19]&&(r[19]=new A0),r[19].queries.push(new D0(a))}function fT(n,r,o){null===n.queries&&(n.queries=new S0),n.queries.track(new x0(r,o))}function pT(n,r){return n.queries.getByIndex(r)}const F0=new br("Application Initializer");let em=(()=>{class n{constructor(o){this.appInits=o,this.resolve=Fg,this.reject=Fg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,u)=>{this.resolve=a,this.reject=u})}runInitializers(){if(this.initialized)return;const o=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let u=0;u<this.appInits.length;u++){const h=this.appInits[u]();if(Iy(h))o.push(h);else if(wf(h)){const y=new Promise((v,T)=>{h.subscribe({complete:v,error:T})});o.push(y)}}Promise.all(o).then(()=>{a()}).catch(u=>{this.reject(u)}),0===o.length&&a(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(cr(F0,8))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})();const MT=new br("AppId"),AA={provide:MT,useFactory:function(){return`${L0()}${L0()}${L0()}`},deps:[]};function L0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const NT=new br("Platform Initializer"),OT=new br("Platform ID"),kT=new br("appBootstrapListener");let FT=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})();const OE=new br("LocaleId"),LT=new br("DefaultCurrencyCode");class xA{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}const V0=function(n){return new m(n)},RA=V0,PA=function(n){return Promise.resolve(V0(n))},VT=function(n){const r=V0(n),a=Li(ir(n).declarations).reduce((u,h)=>{const y=Nt(h);return y&&u.push(new RE(y)),u},[]);return new xA(r,a)},MA=VT,NA=function(n){return Promise.resolve(VT(n))};let F_=(()=>{class n{constructor(){this.compileModuleSync=RA,this.compileModuleAsync=PA,this.compileModuleAndAllComponentsSync=MA,this.compileModuleAndAllComponentsAsync=NA}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})();const FA=(()=>Promise.resolve(0))();function H0(n){"undefined"==typeof Zone?FA.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Dc{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Al(!1),this.onMicrotaskEmpty=new Al(!1),this.onStable=new Al(!1),this.onError=new Al(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!a&&o,u.shouldCoalesceRunChangeDetection=a,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function(){let n=vt.requestAnimationFrame,r=vt.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function(n){const r=()=>{!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(vt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,j0(n),n.isCheckStableRunning=!0,U0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),j0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,a,u,h,y,v)=>{try{return HT(n),o.invokeTask(u,h,y,v)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||n.shouldCoalesceRunChangeDetection)&&r(),UT(n)}},onInvoke:(o,a,u,h,y,v,T)=>{try{return HT(n),o.invoke(u,h,y,v,T)}finally{n.shouldCoalesceRunChangeDetection&&r(),UT(n)}},onHasTask:(o,a,u,h)=>{o.hasTask(u,h),a===u&&("microTask"==h.change?(n._hasPendingMicrotasks=h.microTask,j0(n),U0(n)):"macroTask"==h.change&&(n.hasPendingMacrotasks=h.macroTask))},onHandleError:(o,a,u,h)=>(o.handleError(u,h),n.runOutsideAngular(()=>n.onError.emit(h)),!1)})}(u)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Dc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Dc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,o,a){return this._inner.run(r,o,a)}runTask(r,o,a,u){const h=this._inner,y=h.scheduleEventTask("NgZoneEvent: "+u,r,VA,Fg,Fg);try{return h.runTask(y,o,a)}finally{h.cancelTask(y)}}runGuarded(r,o,a){return this._inner.runGuarded(r,o,a)}runOutsideAngular(r){return this._outer.run(r)}}const VA={};function U0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function j0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function HT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function UT(n){n._nesting--,U0(n)}class jA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Al,this.onMicrotaskEmpty=new Al,this.onStable=new Al,this.onError=new Al}run(r,o,a){return r.apply(o,a)}runGuarded(r,o,a){return r.apply(o,a)}runOutsideAngular(r){return r()}runTask(r,o,a,u){return r.apply(o,a)}}let jT=(()=>{class n{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Dc.assertNotInAngularZone(),H0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())H0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(o)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,a,u){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==h),o(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:o,timeoutId:h,updateCb:u})}whenStable(o,a,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,a,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,a,u){return[]}}return n.\u0275fac=function(o){return new(o||n)(cr(Dc))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})(),BT=(()=>{class n{constructor(){this._applications=new Map,B0.addToWindow(this)}registerApplication(o,a){this._applications.set(o,a)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,a=!0){return B0.findTestabilityInTree(this,o,a)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})();class BA{addToWindow(r){}findTestabilityInTree(r,o,a){return null}}function $A(n){B0=n}let B0=new BA,$T=!0,GT=!1;function $0(){return GT=!0,$T}function GA(){if(GT)throw new Error("Cannot enable prod mode after platform setup.");$T=!1}let Nu;const WT=new br("AllowMultipleToken");class QA{constructor(r,o){this.name=r,this.token=o}}function qT(n,r,o=[]){const a=`Platform: ${r}`,u=new br(a);return(h=[])=>{let y=KT();if(!y||y.injector.get(WT,!1))if(n)n(o.concat(h).concat({provide:u,useValue:!0}));else{const v=o.concat(h).concat({provide:u,useValue:!0},{provide:th,useValue:"platform"});!function(n){if(Nu&&!Nu.destroyed&&!Nu.injector.get(WT,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Nu=n.get(zT);const r=n.get(NT,null);r&&r.forEach(o=>o())}(si.create({providers:v,name:a}))}return function(n){const r=KT();if(!r)throw new Error("No platform exists!");if(!r.injector.get(n,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return r}(u)}}function KT(){return Nu&&!Nu.destroyed?Nu:null}let zT=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,a){const v=function(n,r){let o;return o="noop"===n?new jA:("zone.js"===n?void 0:n)||new Dc({enableLongStackTrace:$0(),shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),o}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),T=[{provide:Dc,useValue:v}];return v.run(()=>{const x=si.create({providers:T,parent:this.injector,name:o.moduleType.name}),H=o.create(x),q=H.injector.get(Oa,null);if(!q)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const Z=v.onError.subscribe({next:re=>{q.handleError(re)}});H.onDestroy(()=>{G0(this._modules,H),Z.unsubscribe()})}),function(n,r,o){try{const a=o();return Iy(a)?a.catch(u=>{throw r.runOutsideAngular(()=>n.handleError(u)),u}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(q,v,()=>{const Z=H.injector.get(em);return Z.runInitializers(),Z.donePromise.then(()=>(Mg(H.injector.get(OE,xg)||xg),this._moduleDoBootstrap(H),H))})})}bootstrapModule(o,a=[]){const u=ZT({},a);return function(n,r,o){const a=new m(o);return Promise.resolve(a)}(0,0,o).then(h=>this.bootstrapModuleFactory(h,u))}_moduleDoBootstrap(o){const a=o.injector.get(L_);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(u=>a.bootstrap(u));else{if(!o.instance.ngDoBootstrap)throw new Error(`The module ${me(o.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);o.instance.ngDoBootstrap(a)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(cr(si))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})();function ZT(n,r){return Array.isArray(r)?r.reduce(ZT,n):Object.assign(Object.assign({},n),r)}let L_=(()=>{class n{constructor(o,a,u,h,y){this._zone=o,this._injector=a,this._exceptionHandler=u,this._componentFactoryResolver=h,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new z.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),T=new z.y(x=>{let H;this._zone.runOutsideAngular(()=>{H=this._zone.onStable.subscribe(()=>{Dc.assertNotInAngularZone(),H0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const q=this._zone.onUnstable.subscribe(()=>{Dc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{H.unsubscribe(),q.unsubscribe()}});this.isStable=(0,_e.T)(v,T.pipe(n=>(0,ue.x)()(function(n,r){return function(a){let u;u="function"==typeof n?n:function(){return n};const h=Object.create(a,he.N);return h.source=a,h.subjectFactory=u,h}}(fe)(n))))}bootstrap(o,a){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let u;u=o instanceof c_?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(u.componentType);const h=function(n){return n.isBoundToModule}(u)?void 0:this._injector.get(Tl),v=u.create(si.NULL,[],a||u.selector,h),T=v.location.nativeElement,x=v.injector.get(jT,null),H=x&&v.injector.get(BT);return x&&H&&H.registerApplication(T,x),v.onDestroy(()=>{this.detachView(v.hostView),G0(this.components,v),H&&H.unregisterApplication(T)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const a=o;this._views.push(a),a.attachToAppRef(this)}detachView(o){const a=o;G0(this._views,a),a.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(kT,[]).concat(this._bootstrapListeners).forEach(u=>u(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(o){return new(o||n)(cr(Dc),cr(si),cr(Oa),cr(Il),cr(em))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})();function G0(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}class rS{}class sS{}const oS={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let aS=(()=>{class n{constructor(o,a){this._compiler=o,this._config=a||oS}load(o){return this.loadAndCompile(o)}loadAndCompile(o){let[a,u]=o.split("#");return void 0===u&&(u="default"),j(8255)(a).then(h=>h[u]).then(h=>XT(h,a,u)).then(h=>this._compiler.compileModuleAsync(h))}loadFactory(o){let[a,u]=o.split("#"),h="NgFactory";return void 0===u&&(u="default",h=""),j(8255)(this._config.factoryPathPrefix+a+this._config.factoryPathSuffix).then(y=>y[u+h]).then(y=>XT(y,a,u))}}return n.\u0275fac=function(o){return new(o||n)(cr(F_),cr(sS,8))},n.\u0275prov=Ft({token:n,factory:n.\u0275fac}),n})();function XT(n,r,o){if(!n)throw new Error(`Cannot find '${o}' in '${r}'`);return n}const gS=function(n){return null},yS=qT(null,"core",[{provide:OT,useValue:"unknown"},{provide:zT,deps:[si]},{provide:BT,deps:[]},{provide:FT,deps:[]}]),bS=[{provide:L_,useClass:L_,deps:[Dc,si,Oa,Il,em]},{provide:nT,deps:[Dc],useFactory:function(n){let r=[];return n.onStable.subscribe(()=>{for(;r.length;)r.pop()()}),function(o){r.push(o)}}},{provide:em,useClass:em,deps:[[new Cr,F0]]},{provide:F_,useClass:F_,deps:[]},AA,{provide:_h,useFactory:function(){return p_},deps:[]},{provide:Ug,useFactory:function(){return sE},deps:[]},{provide:OE,useFactory:function(n){return Mg(n=n||"undefined"!=typeof $localize&&$localize.locale||xg),n},deps:[[new fu(OE),new Cr,new Rs]]},{provide:LT,useValue:"USD"}];let IS=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(cr(L_))},n.\u0275mod=dr({type:n}),n.\u0275inj=Yr({providers:bS}),n})()},8939:(ut,Ie,j)=>{"use strict";j.d(Ie,{hO:()=>me,xv:()=>fe,Dh:()=>ue,GT:()=>le,cc:()=>Re,on:()=>Y,pX:()=>he});var R=j(3018),A=j(7841),z=j(411);ut=j.hmd(ut);const _e=["ngOnDestroy"],he=(Ye,Be,$e,bt={})=>new Proxy(Ye,{get:(nt,ct)=>$e.runOutsideAngular(()=>{var tn;if(Ye[ct])return(null===(tn=null==bt?void 0:bt.spy)||void 0===tn?void 0:tn.get)&&bt.spy.get(ct,Ye[ct]),Ye[ct];if(_e.indexOf(ct)>-1)return()=>{};const jt=Be.toPromise().then(Ve=>{const Qe=Ve&&Ve[ct];return"function"==typeof Qe?Qe.bind(Ve):Qe&&Qe.then?Qe.then(lt=>$e.run(()=>lt)):$e.run(()=>Qe)});return new Proxy(()=>{},{get:(Ve,Qe)=>jt[Qe],apply:(Ve,Qe,lt)=>jt.then(Et=>{var Ct;const $t=Et&&Et(...lt);return(null===(Ct=null==bt?void 0:bt.spy)||void 0===Ct?void 0:Ct.apply)&&bt.spy.apply(ct,lt,$t),$t})})})}),le=(Ye,Be)=>{Be.forEach($e=>{Object.getOwnPropertyNames($e.prototype||$e).forEach(bt=>{Object.defineProperty(Ye.prototype,bt,Object.getOwnPropertyDescriptor($e.prototype||$e,bt))})})};class be{constructor(Be){return Be}}const ue=new R.OlP("angularfire2.app.options"),fe=new R.OlP("angularfire2.app.name");function Y(Ye,Be,$e){const nt="object"==typeof $e&&$e||{};nt.name=nt.name||"string"==typeof $e&&$e||"[DEFAULT]";const tn=A.Z.apps.filter(jt=>jt&&jt.name===nt.name)[0]||Be.runOutsideAngular(()=>A.Z.initializeApp(Ye,nt));try{JSON.stringify(Ye)!==JSON.stringify(tn.options)&&Q("error",`${tn.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(jt){}return new be(tn)}const Q=(Ye,...Be)=>{(0,R.X6Q)()&&"undefined"!=typeof console&&console[Ye](...Be)},ye={provide:be,useFactory:Y,deps:[ue,R.R0b,[new R.FiY,fe]]};let me=(()=>{class Ye{constructor($e){A.Z.registerVersion("angularfire",z.q4.full,"core"),A.Z.registerVersion("angularfire",z.q4.full,"app-compat"),A.Z.registerVersion("angular",R.q4F.full,$e.toString())}static initializeApp($e,bt){return{ngModule:Ye,providers:[{provide:ue,useValue:$e},{provide:fe,useValue:bt}]}}}return Ye.\u0275fac=function($e){return new($e||Ye)(R.LFG(R.Lbi))},Ye.\u0275mod=R.oAB({type:Ye}),Ye.\u0275inj=R.cJS({providers:[ye]}),Ye})();function Re(Ye,Be,$e,bt,nt){const[,ct,tn]=globalThis.\u0275AngularfireInstanceCache.find(jt=>jt[0]===Ye)||[];if(ct)return function(Ye,Be){try{return Ye.toString()===Be.toString()}catch($e){return Ye===Be}}(nt,tn)||(xe("error",`${Be} was already initialized on the ${$e} Firebase App with different settings.${Oe?" You may need to reload as Firebase is not HMR aware.":""}`),xe("warn",{is:nt,was:tn})),ct;{const jt=bt();return globalThis.\u0275AngularfireInstanceCache.push([Ye,jt,nt]),jt}}const Oe=!!ut.hot,xe=(Ye,...Be)=>{(0,R.X6Q)()&&"undefined"!=typeof console&&console[Ye](...Be)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},411:(ut,Ie,j)=>{"use strict";j.d(Ie,{q4:()=>Pl,iC:()=>Po,HU:()=>Ad,vb:()=>Da,JM:()=>lu});var R=j(3018),A=j(2329),z=j(8239),_e=j(8026),he=j(3854),le=j(3910),be=j(5422),ue=j(5742);const fe="@firebase/installations",Y="0.5.15",ye=`w:${Y}`,me="FIS_v2",Be=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function $e(S){return S instanceof he.ZR&&S.code.includes("request-failed")}function bt({projectId:S}){return`https://firebaseinstallations.googleapis.com/v1/projects/${S}/installations`}function nt(S){return{token:S.token,requestStatus:2,expiresIn:Et(S.expiresIn),creationTime:Date.now()}}function ct(S,F){return tn.apply(this,arguments)}function tn(){return(tn=(0,z.Z)(function*(S,F){const J=(yield F.json()).error;return Be.create("request-failed",{requestName:S,serverCode:J.code,serverMessage:J.message,serverStatus:J.status})})).apply(this,arguments)}function jt({apiKey:S}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S})}function Ve(S,{refreshToken:F}){const $=jt(S);return $.append("Authorization",function(S){return`${me} ${S}`}(F)),$}function Qe(S){return lt.apply(this,arguments)}function lt(){return(lt=(0,z.Z)(function*(S){const F=yield S();return F.status>=500&&F.status<600?S():F})).apply(this,arguments)}function Et(S){return Number(S.replace("s","000"))}function $t(S,F){return dt.apply(this,arguments)}function dt(){return(dt=(0,z.Z)(function*({appConfig:S,heartbeatServiceProvider:F},{fid:$}){const J=bt(S),ge=jt(S),Se=F.getImmediate({optional:!0});if(Se){const rn=yield Se.getHeartbeatsHeader();rn&&ge.append("x-firebase-client",rn)}const pt={method:"POST",headers:ge,body:JSON.stringify({fid:$,authVersion:me,appId:S.appId,sdkVersion:ye})},kt=yield Qe(()=>fetch(J,pt));if(kt.ok){const rn=yield kt.json();return{fid:rn.fid||$,registrationStatus:2,refreshToken:rn.refreshToken,authToken:nt(rn.authToken)}}throw yield ct("Create Installation",kt)})).apply(this,arguments)}function Un(S){return new Promise(F=>{setTimeout(F,S)})}const oi=/^[cdef][\w-]{21}$/;function Vo(){try{const S=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(S),S[0]=112+S[0]%16;const $=function(S){return function(S){return btoa(String.fromCharCode(...S)).replace(/\+/g,"-").replace(/\//g,"_")}(S).substr(0,22)}(S);return oi.test($)?$:""}catch(S){return""}}function Zr(S){return`${S.appName}!${S.appId}`}const Ci=new Map;function Cs(S,F){const $=Zr(S);rr($,F),function(S,F){const $=(!Hr&&"BroadcastChannel"in self&&(Hr=new BroadcastChannel("[Firebase] FID Change"),Hr.onmessage=S=>{rr(S.data.key,S.data.fid)}),Hr);$&&$.postMessage({key:S,fid:F}),0===Ci.size&&Hr&&(Hr.close(),Hr=null)}($,F)}function rr(S,F){const $=Ci.get(S);if($)for(const J of $)J(F)}let Hr=null;const kn="firebase-installations-store";let tt=null;function Rr(){return tt||(tt=(0,ue.X3)("firebase-installations-database",1,{upgrade:(S,F)=>{0===F&&S.createObjectStore(kn)}})),tt}function Sn(S,F){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,z.Z)(function*(S,F){const $=Zr(S),ge=(yield Rr()).transaction(kn,"readwrite"),Se=ge.objectStore(kn),qe=yield Se.get($);return yield Se.put(F,$),yield ge.done,(!qe||qe.fid!==F.fid)&&Cs(S,F.fid),F})).apply(this,arguments)}function Fn(S){return hs.apply(this,arguments)}function hs(){return(hs=(0,z.Z)(function*(S){const F=Zr(S),J=(yield Rr()).transaction(kn,"readwrite");yield J.objectStore(kn).delete(F),yield J.done})).apply(this,arguments)}function Le(S,F){return X.apply(this,arguments)}function X(){return(X=(0,z.Z)(function*(S,F){const $=Zr(S),ge=(yield Rr()).transaction(kn,"readwrite"),Se=ge.objectStore(kn),qe=yield Se.get($),pt=F(qe);return void 0===pt?yield Se.delete($):yield Se.put(pt,$),yield ge.done,pt&&(!qe||qe.fid!==pt.fid)&&Cs(S,pt.fid),pt})).apply(this,arguments)}function de(S){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,z.Z)(function*(S){let F;const $=yield Le(S.appConfig,J=>{const ge=We(J),Se=wt(S,ge);return F=Se.registrationPromise,Se.installationEntry});return""===$.fid?{installationEntry:yield F}:{installationEntry:$,registrationPromise:F}})).apply(this,arguments)}function We(S){return Wt(S||{fid:Vo(),registrationStatus:0})}function wt(S,F){if(0===F.registrationStatus){if(!navigator.onLine)return{installationEntry:F,registrationPromise:Promise.reject(Be.create("app-offline"))};const $={fid:F.fid,registrationStatus:1,registrationTime:Date.now()},J=function(S,F){return at.apply(this,arguments)}(S,$);return{installationEntry:$,registrationPromise:J}}return 1===F.registrationStatus?{installationEntry:F,registrationPromise:Lt(S)}:{installationEntry:F}}function at(){return(at=(0,z.Z)(function*(S,F){try{const $=yield $t(S,F);return Sn(S.appConfig,$)}catch($){throw $e($)&&409===$.customData.serverCode?yield Fn(S.appConfig):yield Sn(S.appConfig,{fid:F.fid,registrationStatus:0}),$}})).apply(this,arguments)}function Lt(S){return jn.apply(this,arguments)}function jn(){return(jn=(0,z.Z)(function*(S){let F=yield Tr(S.appConfig);for(;1===F.registrationStatus;)yield Un(100),F=yield Tr(S.appConfig);if(0===F.registrationStatus){const{installationEntry:$,registrationPromise:J}=yield de(S);return J||$}return F})).apply(this,arguments)}function Tr(S){return Le(S,F=>{if(!F)throw Be.create("installation-not-found");return Wt(F)})}function Wt(S){return function(S){return 1===S.registrationStatus&&S.registrationTime+1e4<Date.now()}(S)?{fid:S.fid,registrationStatus:0}:S}function ht(S,F){return zt.apply(this,arguments)}function zt(){return(zt=(0,z.Z)(function*({appConfig:S,heartbeatServiceProvider:F},$){const J=Ur(S,$),ge=Ve(S,$),Se=F.getImmediate({optional:!0});if(Se){const rn=yield Se.getHeartbeatsHeader();rn&&ge.append("x-firebase-client",rn)}const pt={method:"POST",headers:ge,body:JSON.stringify({installation:{sdkVersion:ye,appId:S.appId}})},kt=yield Qe(()=>fetch(J,pt));if(kt.ok)return nt(yield kt.json());throw yield ct("Generate Auth Token",kt)})).apply(this,arguments)}function Ur(S,{fid:F}){return`${bt(S)}/${F}/authTokens:generate`}function vt(S){return zn.apply(this,arguments)}function zn(){return(zn=(0,z.Z)(function*(S,F=!1){let $;const J=yield Le(S.appConfig,Se=>{if(!wn(Se))throw Be.create("not-registered");const qe=Se.authToken;if(!F&&ie(qe))return Se;if(1===qe.requestStatus)return $=gt(S,F),Se;{if(!navigator.onLine)throw Be.create("app-offline");const pt=oe(Se);return $=Ot(S,pt),pt}});return $?yield $:J.authToken})).apply(this,arguments)}function gt(S,F){return je.apply(this,arguments)}function je(){return(je=(0,z.Z)(function*(S,F){let $=yield et(S.appConfig);for(;1===$.authToken.requestStatus;)yield Un(100),$=yield et(S.appConfig);const J=$.authToken;return 0===J.requestStatus?vt(S,F):J})).apply(this,arguments)}function et(S){return Le(S,F=>{if(!wn(F))throw Be.create("not-registered");return function(S){return 1===S.requestStatus&&S.requestTime+1e4<Date.now()}(F.authToken)?Object.assign(Object.assign({},F),{authToken:{requestStatus:0}}):F})}function Ot(S,F){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,z.Z)(function*(S,F){try{const $=yield ht(S,F),J=Object.assign(Object.assign({},F),{authToken:$});return yield Sn(S.appConfig,J),$}catch($){if(!$e($)||401!==$.customData.serverCode&&404!==$.customData.serverCode){const J=Object.assign(Object.assign({},F),{authToken:{requestStatus:0}});yield Sn(S.appConfig,J)}else yield Fn(S.appConfig);throw $}})).apply(this,arguments)}function wn(S){return void 0!==S&&2===S.registrationStatus}function ie(S){return 2===S.requestStatus&&!function(S){const F=Date.now();return F<S.creationTime||S.creationTime+S.expiresIn<F+36e5}(S)}function oe(S){const F={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},S),{authToken:F})}function Tt(){return(Tt=(0,z.Z)(function*(S){const F=S,{installationEntry:$,registrationPromise:J}=yield de(F);return J?J.catch(console.error):vt(F).catch(console.error),$.fid})).apply(this,arguments)}function Nn(){return(Nn=(0,z.Z)(function*(S,F=!1){const $=S;return yield jr($),(yield vt($,F)).token})).apply(this,arguments)}function jr(S){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,z.Z)(function*(S){const{registrationPromise:F}=yield de(S);F&&(yield F)})).apply(this,arguments)}function ir(S){return Be.create("missing-app-config-values",{valueName:S})}const Ac="installations";(0,_e._registerComponent)(new le.wA(Ac,S=>{const F=S.getProvider("app").getImmediate(),$=function(S){if(!S||!S.options)throw ir("App Configuration");if(!S.name)throw ir("App Name");const F=["projectId","apiKey","appId"];for(const $ of F)if(!S.options[$])throw ir($);return{appName:S.name,projectId:S.options.projectId,apiKey:S.options.apiKey,appId:S.options.appId}}(F);return{app:F,appConfig:$,heartbeatServiceProvider:(0,_e._getProvider)(F,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,_e._registerComponent)(new le.wA("installations-internal",S=>{const F=S.getProvider("app").getImmediate(),$=(0,_e._getProvider)(F,Ac).getImmediate();return{getId:()=>function(S){return Tt.apply(this,arguments)}($),getToken:ge=>function(S){return Nn.apply(this,arguments)}($,ge)}},"PRIVATE")),(0,_e.registerVersion)(fe,Y),(0,_e.registerVersion)(fe,Y,"esm2017");const Zn="@firebase/remote-config",Wn=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Dr{constructor(F,$,J,ge){this.client=F,this.storage=$,this.storageCache=J,this.logger=ge}isCachedDataFresh(F,$){if(!$)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const J=Date.now()-$,ge=J<=F;return this.logger.debug(`Config fetch cache check. Cache age millis: ${J}. Cache max age millis (minimumFetchIntervalMillis setting): ${F}. Is cache hit: ${ge}.`),ge}fetch(F){var $=this;return(0,z.Z)(function*(){const[J,ge]=yield Promise.all([$.storage.getLastSuccessfulFetchTimestampMillis(),$.storage.getLastSuccessfulFetchResponse()]);if(ge&&$.isCachedDataFresh(F.cacheMaxAgeMillis,J))return ge;F.eTag=ge&&ge.eTag;const Se=yield $.client.fetch(F),qe=[$.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Se.status&&qe.push($.storage.setLastSuccessfulFetchResponse(Se)),yield Promise.all(qe),Se})()}}function Si(S=navigator){return S.languages&&S.languages[0]||S.language}class gr{constructor(F,$,J,ge,Se,qe){this.firebaseInstallations=F,this.sdkVersion=$,this.namespace=J,this.projectId=ge,this.apiKey=Se,this.appId=qe}fetch(F){var $=this;return(0,z.Z)(function*(){var J,ge,Se;const[qe,pt]=yield Promise.all([$.firebaseInstallations.getId(),$.firebaseInstallations.getToken()]),rn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${$.projectId}/namespaces/${$.namespace}:fetch?key=${$.apiKey}`,Qt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":F.eTag||"*"},Kt={sdk_version:$.sdkVersion,app_instance_id:qe,app_instance_id_token:pt,app_id:$.appId,language_code:Si()},fi={method:"POST",headers:Qt,body:JSON.stringify(Kt)},_s=fetch(rn,fi),ta=new Promise((cr,oc)=>{F.signal.addEventListener(()=>{const du=new Error("The operation was aborted.");du.name="AbortError",oc(du)})});let sc;try{yield Promise.race([_s,ta]),sc=yield _s}catch(cr){let oc="fetch-client-network";throw"AbortError"===(null===(J=cr)||void 0===J?void 0:J.name)&&(oc="fetch-timeout"),Wn.create(oc,{originalErrorMessage:null===(ge=cr)||void 0===ge?void 0:ge.message})}let Nr=sc.status;const Sa=sc.headers.get("ETag")||void 0;let na,vs;if(200===sc.status){let cr;try{cr=yield sc.json()}catch(oc){throw Wn.create("fetch-client-parse",{originalErrorMessage:null===(Se=oc)||void 0===Se?void 0:Se.message})}na=cr.entries,vs=cr.state}if("INSTANCE_STATE_UNSPECIFIED"===vs?Nr=500:"NO_CHANGE"===vs?Nr=304:("NO_TEMPLATE"===vs||"EMPTY_CONFIG"===vs)&&(na={}),304!==Nr&&200!==Nr)throw Wn.create("fetch-status",{httpStatus:Nr});return{status:Nr,eTag:Sa,config:na}})()}}class xi{constructor(F,$){this.client=F,this.storage=$}fetch(F){var $=this;return(0,z.Z)(function*(){const J=(yield $.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return $.attemptFetch(F,J)})()}attemptFetch(F,{throttleEndTimeMillis:$,backoffCount:J}){var ge=this;return(0,z.Z)(function*(){yield function(S,F){return new Promise(($,J)=>{const ge=Math.max(F-Date.now(),0),Se=setTimeout($,ge);S.addEventListener(()=>{clearTimeout(Se),J(Wn.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}(F.signal,$);try{const Se=yield ge.client.fetch(F);return yield ge.storage.deleteThrottleMetadata(),Se}catch(Se){if(!function(S){if(!(S instanceof he.ZR&&S.customData))return!1;const F=Number(S.customData.httpStatus);return 429===F||500===F||503===F||504===F}(Se))throw Se;const qe={throttleEndTimeMillis:Date.now()+(0,he.$s)(J),backoffCount:J+1};return yield ge.storage.setThrottleMetadata(qe),ge.attemptFetch(F,qe)}})()}}class ke{constructor(F,$,J,ge,Se){this.app=F,this._client=$,this._storageCache=J,this._storage=ge,this._logger=Se,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Hi(S,F){var $;const J=S.target.error||void 0;return Wn.create(F,{originalErrorMessage:J&&(null===($=J)||void 0===$?void 0:$.message)})}const Ri="app_namespace_store";class ts{constructor(F,$,J,ge=function(){return new Promise((S,F)=>{var $;try{const J=indexedDB.open("firebase_remote_config",1);J.onerror=ge=>{F(Hi(ge,"storage-open"))},J.onsuccess=ge=>{S(ge.target.result)},J.onupgradeneeded=ge=>{0===ge.oldVersion&&ge.target.result.createObjectStore(Ri,{keyPath:"compositeKey"})}}catch(J){F(Wn.create("storage-open",{originalErrorMessage:null===($=J)||void 0===$?void 0:$.message}))}})}()){this.appId=F,this.appName=$,this.namespace=J,this.openDbPromise=ge}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(F){return this.set("last_fetch_status",F)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(F){return this.set("last_successful_fetch_timestamp_millis",F)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(F){return this.set("last_successful_fetch_response",F)}getActiveConfig(){return this.get("active_config")}setActiveConfig(F){return this.set("active_config",F)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(F){return this.set("active_config_etag",F)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(F){return this.set("throttle_metadata",F)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(F){var $=this;return(0,z.Z)(function*(){const J=yield $.openDbPromise;return new Promise((ge,Se)=>{var qe;const kt=J.transaction([Ri],"readonly").objectStore(Ri),rn=$.createCompositeKey(F);try{const Qt=kt.get(rn);Qt.onerror=Kt=>{Se(Hi(Kt,"storage-get"))},Qt.onsuccess=Kt=>{const fi=Kt.target.result;ge(fi?fi.value:void 0)}}catch(Qt){Se(Wn.create("storage-get",{originalErrorMessage:null===(qe=Qt)||void 0===qe?void 0:qe.message}))}})})()}set(F,$){var J=this;return(0,z.Z)(function*(){const ge=yield J.openDbPromise;return new Promise((Se,qe)=>{var pt;const rn=ge.transaction([Ri],"readwrite").objectStore(Ri),Qt=J.createCompositeKey(F);try{const Kt=rn.put({compositeKey:Qt,value:$});Kt.onerror=fi=>{qe(Hi(fi,"storage-set"))},Kt.onsuccess=()=>{Se()}}catch(Kt){qe(Wn.create("storage-set",{originalErrorMessage:null===(pt=Kt)||void 0===pt?void 0:pt.message}))}})})()}delete(F){var $=this;return(0,z.Z)(function*(){const J=yield $.openDbPromise;return new Promise((ge,Se)=>{var qe;const kt=J.transaction([Ri],"readwrite").objectStore(Ri),rn=$.createCompositeKey(F);try{const Qt=kt.delete(rn);Qt.onerror=Kt=>{Se(Hi(Kt,"storage-delete"))},Qt.onsuccess=()=>{ge()}}catch(Qt){Se(Wn.create("storage-delete",{originalErrorMessage:null===(qe=Qt)||void 0===qe?void 0:qe.message}))}})})()}createCompositeKey(F){return[this.appId,this.appName,this.namespace,F].join()}}class Dt{constructor(F){this.storage=F}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var F=this;return(0,z.Z)(function*(){const $=F.storage.getLastFetchStatus(),J=F.storage.getLastSuccessfulFetchTimestampMillis(),ge=F.storage.getActiveConfig(),Se=yield $;Se&&(F.lastFetchStatus=Se);const qe=yield J;qe&&(F.lastSuccessfulFetchTimestampMillis=qe);const pt=yield ge;pt&&(F.activeConfig=pt)})()}setLastFetchStatus(F){return this.lastFetchStatus=F,this.storage.setLastFetchStatus(F)}setLastSuccessfulFetchTimestampMillis(F){return this.lastSuccessfulFetchTimestampMillis=F,this.storage.setLastSuccessfulFetchTimestampMillis(F)}setActiveConfig(F){return this.activeConfig=F,this.storage.setActiveConfig(F)}}function Js(){return vo.apply(this,arguments)}function vo(){return(vo=(0,z.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch(S){return!1}})).apply(this,arguments)}(0,_e._registerComponent)(new le.wA("remote-config",function(F,{instanceIdentifier:$}){const J=F.getProvider("app").getImmediate(),ge=F.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Wn.create("registration-window");if(!(0,he.hl)())throw Wn.create("indexed-db-unavailable");const{projectId:Se,apiKey:qe,appId:pt}=J.options;if(!Se)throw Wn.create("registration-project-id");if(!qe)throw Wn.create("registration-api-key");if(!pt)throw Wn.create("registration-app-id");const kt=new ts(pt,J.name,$=$||"firebase"),rn=new Dt(kt),Qt=new be.Yd(Zn);Qt.logLevel=be.in.ERROR;const Kt=new gr(ge,_e.SDK_VERSION,$,Se,qe,pt),fi=new xi(Kt,kt),_s=new Dr(fi,kt,rn,Qt),ta=new ke(J,_s,rn,kt,Qt);return function(S){const F=(0,he.m9)(S);F._initializePromise||(F._initializePromise=F._storageCache.loadFromStorage().then(()=>{F._isInitializationComplete=!0}))}(ta),ta},"PUBLIC").setMultipleInstances(!0)),(0,_e.registerVersion)(Zn,"0.3.14"),(0,_e.registerVersion)(Zn,"0.3.14","esm2017");const ca="/firebase-messaging-sw.js",xc="/firebase-cloud-messaging-push-scope",jo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",wo="google.c.a.c_id",vr="google.c.a.c_l",Bo="google.c.a.ts",sr="google.c.a.e";var di=(()=>{return(S=di||(di={})).PUSH_RECEIVED="push-received",S.NOTIFICATION_CLICKED="notification-clicked",di;var S})();function ns(S){const F=new Uint8Array(S);return btoa(String.fromCharCode(...F)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ui(S){const $=(S+"=".repeat((4-S.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),J=atob($),ge=new Uint8Array(J.length);for(let Se=0;Se<J.length;++Se)ge[Se]=J.charCodeAt(Se);return ge}const Eo="fcm_token_details_db",Qr="fcm_token_object_Store";function $o(S){return yi.apply(this,arguments)}function yi(){return yi=(0,z.Z)(function*(S){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Se=>Se.name).includes(Eo))return null;let F=null;return(yield(0,ue.X3)(Eo,5,{upgrade:(J=(0,z.Z)(function*(ge,Se,qe,pt){var kt;if(Se<2||!ge.objectStoreNames.contains(Qr))return;const rn=pt.objectStore(Qr),Qt=yield rn.index("fcmSenderId").get(S);if(yield rn.clear(),Qt)if(2===Se){const Kt=Qt;if(!Kt.auth||!Kt.p256dh||!Kt.endpoint)return;F={token:Kt.fcmToken,createTime:null!==(kt=Kt.createTime)&&void 0!==kt?kt:Date.now(),subscriptionOptions:{auth:Kt.auth,p256dh:Kt.p256dh,endpoint:Kt.endpoint,swScope:Kt.swScope,vapidKey:"string"==typeof Kt.vapidKey?Kt.vapidKey:ns(Kt.vapidKey)}}}else if(3===Se){const Kt=Qt;F={token:Kt.fcmToken,createTime:Kt.createTime,subscriptionOptions:{auth:ns(Kt.auth),p256dh:ns(Kt.p256dh),endpoint:Kt.endpoint,swScope:Kt.swScope,vapidKey:ns(Kt.vapidKey)}}}else if(4===Se){const Kt=Qt;F={token:Kt.fcmToken,createTime:Kt.createTime,subscriptionOptions:{auth:ns(Kt.auth),p256dh:ns(Kt.p256dh),endpoint:Kt.endpoint,swScope:Kt.swScope,vapidKey:ns(Kt.vapidKey)}}}}),function(Se,qe,pt,kt){return J.apply(this,arguments)})})).close(),yield(0,ue.Lj)(Eo),yield(0,ue.Lj)("fcm_vapid_details_db"),yield(0,ue.Lj)("undefined"),la(F)?F:null;var J}),yi.apply(this,arguments)}function la(S){if(!S||!S.subscriptionOptions)return!1;const{subscriptionOptions:F}=S;return"number"==typeof S.createTime&&S.createTime>0&&"string"==typeof S.token&&S.token.length>0&&"string"==typeof F.auth&&F.auth.length>0&&"string"==typeof F.p256dh&&F.p256dh.length>0&&"string"==typeof F.endpoint&&F.endpoint.length>0&&"string"==typeof F.swScope&&F.swScope.length>0&&"string"==typeof F.vapidKey&&F.vapidKey.length>0}const Ln="firebase-messaging-store";let Bi=null;function k(){return Bi||(Bi=(0,ue.X3)("firebase-messaging-database",1,{upgrade:(S,F)=>{0===F&&S.createObjectStore(Ln)}})),Bi}function B(S){return N.apply(this,arguments)}function N(){return(N=(0,z.Z)(function*(S){const F=It(S),J=yield(yield k()).transaction(Ln).objectStore(Ln).get(F);if(J)return J;{const ge=yield $o(S.appConfig.senderId);if(ge)return yield W(S,ge),ge}})).apply(this,arguments)}function W(S,F){return se.apply(this,arguments)}function se(){return(se=(0,z.Z)(function*(S,F){const $=It(S),ge=(yield k()).transaction(Ln,"readwrite");return yield ge.objectStore(Ln).put(F,$),yield ge.done,F})).apply(this,arguments)}function Ee(S){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,z.Z)(function*(S){const F=It(S),J=(yield k()).transaction(Ln,"readwrite");yield J.objectStore(Ln).delete(F),yield J.done})).apply(this,arguments)}function It({appConfig:S}){return S.appId}const At=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Vn(S,F){return fn.apply(this,arguments)}function fn(){return(fn=(0,z.Z)(function*(S,F){var $;const J=yield $n(S),ge=is(F),Se={method:"POST",headers:J,body:JSON.stringify(ge)};let qe;try{qe=yield(yield fetch(hi(S.appConfig),Se)).json()}catch(pt){throw At.create("token-subscribe-failed",{errorInfo:null===($=pt)||void 0===$?void 0:$.toString()})}if(qe.error)throw At.create("token-subscribe-failed",{errorInfo:qe.error.message});if(!qe.token)throw At.create("token-subscribe-no-token");return qe.token})).apply(this,arguments)}function Bn(S,F){return mn.apply(this,arguments)}function mn(){return(mn=(0,z.Z)(function*(S,F){var $;const J=yield $n(S),ge=is(F.subscriptionOptions),Se={method:"PATCH",headers:J,body:JSON.stringify(ge)};let qe;try{qe=yield(yield fetch(`${hi(S.appConfig)}/${F.token}`,Se)).json()}catch(pt){throw At.create("token-update-failed",{errorInfo:null===($=pt)||void 0===$?void 0:$.toString()})}if(qe.error)throw At.create("token-update-failed",{errorInfo:qe.error.message});if(!qe.token)throw At.create("token-update-no-token");return qe.token})).apply(this,arguments)}function mr(S,F){return rs.apply(this,arguments)}function rs(){return(rs=(0,z.Z)(function*(S,F){var $;const ge={method:"DELETE",headers:yield $n(S)};try{const qe=yield(yield fetch(`${hi(S.appConfig)}/${F}`,ge)).json();if(qe.error)throw At.create("token-unsubscribe-failed",{errorInfo:qe.error.message})}catch(Se){throw At.create("token-unsubscribe-failed",{errorInfo:null===($=Se)||void 0===$?void 0:$.toString()})}})).apply(this,arguments)}function hi({projectId:S}){return`https://fcmregistrations.googleapis.com/v1/projects/${S}/registrations`}function $n(S){return yr.apply(this,arguments)}function yr(){return(yr=(0,z.Z)(function*({appConfig:S,installations:F}){const $=yield F.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":S.apiKey,"x-goog-firebase-installations-auth":`FIS ${$}`})})).apply(this,arguments)}function is({p256dh:S,auth:F,endpoint:$,vapidKey:J}){const ge={web:{endpoint:$,auth:F,p256dh:S}};return J!==jo&&(ge.web.applicationPubKey=J),ge}const Xs=6048e5;function $i(S){return ss.apply(this,arguments)}function ss(){return(ss=(0,z.Z)(function*(S){const F=yield eo(S.swRegistration,S.vapidKey),$={vapidKey:S.vapidKey,swScope:S.swRegistration.scope,endpoint:F.endpoint,auth:ns(F.getKey("auth")),p256dh:ns(F.getKey("p256dh"))},J=yield B(S.firebaseDependencies);if(J){if(qa(J.subscriptionOptions,$))return Date.now()>=J.createTime+Xs?Sl(S,{token:J.token,createTime:Date.now(),subscriptionOptions:$}):J.token;try{yield mr(S.firebaseDependencies,J.token)}catch(ge){console.warn(ge)}return Go(S.firebaseDependencies,$)}return Go(S.firebaseDependencies,$)})).apply(this,arguments)}function bo(S){return qt.apply(this,arguments)}function qt(){return(qt=(0,z.Z)(function*(S){const F=yield B(S.firebaseDependencies);F&&(yield mr(S.firebaseDependencies,F.token),yield Ee(S.firebaseDependencies));const $=yield S.swRegistration.pushManager.getSubscription();return!$||$.unsubscribe()})).apply(this,arguments)}function Sl(S,F){return ha.apply(this,arguments)}function ha(){return(ha=(0,z.Z)(function*(S,F){try{const $=yield Bn(S.firebaseDependencies,F),J=Object.assign(Object.assign({},F),{token:$,createTime:Date.now()});return yield W(S.firebaseDependencies,J),$}catch($){throw yield bo(S),$}})).apply(this,arguments)}function Go(S,F){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,z.Z)(function*(S,F){const J={token:yield Vn(S,F),createTime:Date.now(),subscriptionOptions:F};return yield W(S,J),J.token})).apply(this,arguments)}function eo(S,F){return qo.apply(this,arguments)}function qo(){return(qo=(0,z.Z)(function*(S,F){return(yield S.pushManager.getSubscription())||S.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ui(F)})})).apply(this,arguments)}function qa(S,F){return F.vapidKey===S.vapidKey&&F.endpoint===S.endpoint&&F.auth===S.auth&&F.p256dh===S.p256dh}function Ge(S){const F={from:S.from,collapseKey:S.collapse_key,messageId:S.fcmMessageId};return function(S,F){if(!F.notification)return;S.notification={};const $=F.notification.title;$&&(S.notification.title=$);const J=F.notification.body;J&&(S.notification.body=J);const ge=F.notification.image;ge&&(S.notification.image=ge)}(F,S),function(S,F){!F.data||(S.data=F.data)}(F,S),function(S,F){var $,J,ge,Se,qe;if(!F.fcmOptions&&!(null===($=F.notification)||void 0===$?void 0:$.click_action))return;S.fcmOptions={};const pt=null!==(ge=null===(J=F.fcmOptions)||void 0===J?void 0:J.link)&&void 0!==ge?ge:null===(Se=F.notification)||void 0===Se?void 0:Se.click_action;pt&&(S.fcmOptions.link=pt);const kt=null===(qe=F.fcmOptions)||void 0===qe?void 0:qe.analytics_label;kt&&(S.fcmOptions.analyticsLabel=kt)}(F,S),F}function Ka(S){return"object"==typeof S&&!!S&&wo in S}function os(S,F){const $=[];for(let J=0;J<S.length;J++)$.push(S.charAt(J)),J<F.length&&$.push(F.charAt(J));return $.join("")}function fa(S){return At.create("missing-app-config-values",{valueName:S})}os("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),os("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ts{constructor(F,$,J){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ge=function(S){if(!S||!S.options)throw fa("App Configuration Object");if(!S.name)throw fa("App Name");const F=["projectId","apiKey","appId","messagingSenderId"],{options:$}=S;for(const J of F)if(!$[J])throw fa(J);return{appName:S.name,projectId:$.projectId,apiKey:$.apiKey,appId:$.appId,senderId:$.messagingSenderId}}(F);this.firebaseDependencies={app:F,appConfig:ge,installations:$,analyticsProvider:J}}_delete(){return Promise.resolve()}}function iu(S){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,z.Z)(function*(S){var F;try{S.swRegistration=yield navigator.serviceWorker.register(ca,{scope:xc}),S.swRegistration.update().catch(()=>{})}catch($){throw At.create("failed-service-worker-registration",{browserErrorMessage:null===(F=$)||void 0===F?void 0:F.message})}})).apply(this,arguments)}function Ar(S,F){return ar.apply(this,arguments)}function ar(){return(ar=(0,z.Z)(function*(S,F){if(!F&&!S.swRegistration&&(yield iu(S)),F||!S.swRegistration){if(!(F instanceof ServiceWorkerRegistration))throw At.create("invalid-sw-registration");S.swRegistration=F}})).apply(this,arguments)}function Sr(S,F){return _i.apply(this,arguments)}function _i(){return(_i=(0,z.Z)(function*(S,F){F?S.vapidKey=F:S.vapidKey||(S.vapidKey=jo)})).apply(this,arguments)}function Co(){return(Co=(0,z.Z)(function*(S,F){if(!navigator)throw At.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw At.create("permission-blocked");return yield Sr(S,null==F?void 0:F.vapidKey),yield Ar(S,null==F?void 0:F.serviceWorkerRegistration),$i(S)})).apply(this,arguments)}function gs(S,F,$){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,z.Z)(function*(S,F,$){const J=Nc(F);(yield S.firebaseDependencies.analyticsProvider.get()).logEvent(J,{message_id:$[wo],message_name:$[vr],message_time:$[Bo],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Nc(S){switch(S){case di.NOTIFICATION_CLICKED:return"notification_open";case di.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function zo(){return(zo=(0,z.Z)(function*(S,F){const $=F.data;if(!$.isFirebaseMessaging)return;S.onMessageHandler&&$.messageType===di.PUSH_RECEIVED&&("function"==typeof S.onMessageHandler?S.onMessageHandler(Ge($)):S.onMessageHandler.next(Ge($)));const J=$.data;Ka(J)&&"1"===J[sr]&&(yield gs(S,$.messageType,J))})).apply(this,arguments)}const za="@firebase/messaging";function To(){return to.apply(this,arguments)}function to(){return(to=(0,z.Z)(function*(){try{yield(0,he.eu)()}catch(S){return!1}return"undefined"!=typeof window&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,_e._registerComponent)(new le.wA("messaging",S=>{const F=new Ts(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),S.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",$=>function(S,F){return zo.apply(this,arguments)}(F,$)),F},"PUBLIC")),(0,_e._registerComponent)(new le.wA("messaging-internal",S=>{const F=S.getProvider("messaging").getImmediate();return{getToken:J=>function(S,F){return Co.apply(this,arguments)}(F,J)}},"PRIVATE")),(0,_e.registerVersion)(za,"0.9.19"),(0,_e.registerVersion)(za,"0.9.19","esm2017");const cs="analytics",Yn="firebase_id",no="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Do="https://www.googletagmanager.com/gtag/js",wr=new be.Yd("@firebase/analytics");function su(S){return Promise.all(S.map(F=>F.catch($=>$)))}function Ls(S,F){const $=document.createElement("script");$.src=`${Do}?l=${S}&id=${F}`,$.async=!0,document.head.appendChild($)}function Gr(S,F,$,J,ge,Se){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,z.Z)(function*(S,F,$,J,ge,Se){const qe=J[ge];try{if(qe)yield F[qe];else{const kt=(yield su($)).find(rn=>rn.measurementId===ge);kt&&(yield F[kt.appId])}}catch(pt){wr.error(pt)}S("config",ge,Se)})).apply(this,arguments)}function Ao(S,F,$,J,ge){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,z.Z)(function*(S,F,$,J,ge){try{let Se=[];if(ge&&ge.send_to){let qe=ge.send_to;Array.isArray(qe)||(qe=[qe]);const pt=yield su($);for(const kt of qe){const rn=pt.find(Kt=>Kt.measurementId===kt),Qt=rn&&F[rn.appId];if(!Qt){Se=[];break}Se.push(Qt)}}0===Se.length&&(Se=Object.values(F)),yield Promise.all(Se),S("event",J,ge||{})}catch(Se){wr.error(Se)}})).apply(this,arguments)}function Ja(S){const F=window.document.getElementsByTagName("script");for(const $ of Object.values(F))if($.src&&$.src.includes(Do)&&$.src.includes(S))return $;return null}const nr=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Uc=new class{constructor(F={},$=1e3){this.throttleMetadata=F,this.intervalMillis=$}getThrottleMetadata(F){return this.throttleMetadata[F]}setThrottleMetadata(F,$){this.throttleMetadata[F]=$}deleteThrottleMetadata(F){delete this.throttleMetadata[F]}};function Xa(S){return new Headers({Accept:"application/json","x-goog-api-key":S})}function jc(S){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,z.Z)(function*(S){var F;const{appId:$,apiKey:J}=S,ge={method:"GET",headers:Xa(J)},Se=no.replace("{app-id}",$),qe=yield fetch(Se,ge);if(200!==qe.status&&304!==qe.status){let pt="";try{const kt=yield qe.json();(null===(F=kt.error)||void 0===F?void 0:F.message)&&(pt=kt.error.message)}catch(kt){}throw nr.create("config-fetch-failed",{httpStatus:qe.status,responseMessage:pt})}return qe.json()})).apply(this,arguments)}function ec(S){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,z.Z)(function*(S,F=Uc,$){const{appId:J,apiKey:ge,measurementId:Se}=S.options;if(!J)throw nr.create("no-app-id");if(!ge){if(Se)return{measurementId:Se,appId:J};throw nr.create("no-api-key")}const qe=F.getThrottleMetadata(J)||{backoffCount:0,throttleEndTimeMillis:Date.now()},pt=new va;return setTimeout((0,z.Z)(function*(){pt.abort()}),void 0!==$?$:6e4),au({appId:J,apiKey:ge,measurementId:Se},qe,pt,F)})).apply(this,arguments)}function au(S,F,$){return us.apply(this,arguments)}function us(){return(us=(0,z.Z)(function*(S,{throttleEndTimeMillis:F,backoffCount:$},J,ge=Uc){var Se,qe;const{appId:pt,measurementId:kt}=S;try{yield qi(J,F)}catch(rn){if(kt)return wr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${kt} provided in the "measurementId" field in the local Firebase config. [${null===(Se=rn)||void 0===Se?void 0:Se.message}]`),{appId:pt,measurementId:kt};throw rn}try{const rn=yield jc(S);return ge.deleteThrottleMetadata(pt),rn}catch(rn){const Qt=rn;if(!$c(Qt)){if(ge.deleteThrottleMetadata(pt),kt)return wr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${kt} provided in the "measurementId" field in the local Firebase config. [${null==Qt?void 0:Qt.message}]`),{appId:pt,measurementId:kt};throw rn}const Kt=503===Number(null===(qe=null==Qt?void 0:Qt.customData)||void 0===qe?void 0:qe.httpStatus)?(0,he.$s)($,ge.intervalMillis,30):(0,he.$s)($,ge.intervalMillis),fi={throttleEndTimeMillis:Date.now()+Kt,backoffCount:$+1};return ge.setThrottleMetadata(pt,fi),wr.debug(`Calling attemptFetch again in ${Kt} millis`),au(S,fi,J,ge)}})).apply(this,arguments)}function qi(S,F){return new Promise(($,J)=>{const ge=Math.max(F-Date.now(),0),Se=setTimeout($,ge);S.addEventListener(()=>{clearTimeout(Se),J(nr.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}function $c(S){if(!(S instanceof he.ZR&&S.customData))return!1;const F=Number(S.customData.httpStatus);return 429===F||500===F||503===F||504===F}class va{constructor(){this.listeners=[]}addEventListener(F){this.listeners.push(F)}abort(){this.listeners.forEach(F=>F())}}let ro,As;function nc(){return(nc=(0,z.Z)(function*(S,F,$,J,ge){if(ge&&ge.global)S("event",$,J);else{const Se=yield F;S("event",$,Object.assign(Object.assign({},J),{send_to:Se}))}})).apply(this,arguments)}function Ki(S){As=S}function rc(S){ro=S}function Ss(){return D.apply(this,arguments)}function D(){return(D=(0,z.Z)(function*(){var S;if(!(0,he.hl)())return wr.warn(nr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(F){return wr.warn(nr.create("indexeddb-unavailable",{errorInfo:null===(S=F)||void 0===S?void 0:S.toString()}).message),!1}return!0})).apply(this,arguments)}function b(){return(b=(0,z.Z)(function*(S,F,$,J,ge,Se,qe){var pt;const kt=ec(S);kt.then(_s=>{$[_s.measurementId]=_s.appId,S.options.measurementId&&_s.measurementId!==S.options.measurementId&&wr.warn(`The measurement ID in the local Firebase config (${S.options.measurementId}) does not match the measurement ID fetched from the server (${_s.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_s=>wr.error(_s)),F.push(kt);const rn=Ss().then(_s=>{if(_s)return J.getId()}),[Qt,Kt]=yield Promise.all([kt,rn]);Ja(Se)||Ls(Se,Qt.measurementId),As&&(ge("consent","default",As),Ki(void 0)),ge("js",new Date);const fi=null!==(pt=null==qe?void 0:qe.config)&&void 0!==pt?pt:{};return fi.origin="firebase",fi.update=!0,null!=Kt&&(fi[Yn]=Kt),ge("config",Qt.measurementId,fi),ro&&(ge("set",ro),rc(void 0)),Qt.measurementId})).apply(this,arguments)}class P{constructor(F){this.app=F}_delete(){return delete L[this.app.options.appId],Promise.resolve()}}let L={},G=[];const ee={};let mt,cn,ae="dataLayer",Mt=!1;function Pi(S,F,$){!function(){const S=[];if((0,he.ru)()&&S.push("This is a browser extension environment."),(0,he.zI)()||S.push("Cookies are not available."),S.length>0){const F=S.map((J,ge)=>`(${ge+1}) ${J}`).join(" "),$=nr.create("invalid-analytics-context",{errorInfo:F});wr.warn($.message)}}();const J=S.options.appId;if(!J)throw nr.create("no-app-id");if(!S.options.apiKey){if(!S.options.measurementId)throw nr.create("no-api-key");wr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${S.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=L[J])throw nr.create("already-exists",{id:J});if(!Mt){!function(S){let F=[];Array.isArray(window[S])?F=window[S]:window[S]=F}(ae);const{wrappedGtag:Se,gtagCore:qe}=function(S,F,$,J,ge){let Se=function(...qe){window[J].push(arguments)};return window[ge]&&"function"==typeof window[ge]&&(Se=window[ge]),window[ge]=function(S,F,$,J){function Se(){return(Se=(0,z.Z)(function*(qe,pt,kt){try{"event"===qe?yield Ao(S,F,$,pt,kt):"config"===qe?yield Gr(S,F,$,J,pt,kt):"consent"===qe?S("consent","update",kt):S("set",pt)}catch(rn){wr.error(rn)}})).apply(this,arguments)}return function(qe,pt,kt){return Se.apply(this,arguments)}}(Se,S,F,$),{gtagCore:Se,wrappedGtag:window[ge]}}(L,G,ee,ae,"gtag");cn=Se,mt=qe,Mt=!0}return L[J]=function(S,F,$,J,ge,Se,qe){return b.apply(this,arguments)}(S,G,ee,F,mt,ae,$),new P(S)}function Qo(){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,z.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch(S){return!1}})).apply(this,arguments)}const Rl="@firebase/analytics";(0,_e._registerComponent)(new le.wA(cs,(F,{options:$})=>Pi(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),$),"PUBLIC")),(0,_e._registerComponent)(new le.wA("analytics-internal",function(F){try{const $=F.getProvider(cs).getImmediate();return{logEvent:(J,ge,Se)=>function(S,F,$,J){S=(0,he.m9)(S),function(S,F,$,J,ge){return nc.apply(this,arguments)}(cn,L[S.app.options.appId],F,$,J).catch(ge=>wr.error(ge))}($,J,ge,Se)}}catch($){throw nr.create("interop-component-reg-failed",{reason:$})}},"PRIVATE")),(0,_e.registerVersion)(Rl,"0.8.3"),(0,_e.registerVersion)(Rl,"0.8.3","esm2017");var Xf=j(7771),ep=j(3637),uu=j(3342),Hu=j(3101),Uu=j(309);const Pl=new R.GfV("7.4.1"),Ml="__angularfire_symbol__analyticsIsSupportedValue",io="__angularfire_symbol__analyticsIsSupported",Jo="__angularfire_symbol__remoteConfigIsSupportedValue",Wr="__angularfire_symbol__remoteConfigIsSupported",or="__angularfire_symbol__messagingIsSupportedValue",ic="__angularfire_symbol__messagingIsSupported";function lu(S,F,$){if(F){if(1===F.length)return F[0];const Se=F.filter(qe=>qe.app===$);if(1===Se.length)return Se[0]}return $.container.getProvider(S).getImmediate({optional:!0})}globalThis[io]||(globalThis[io]=Qo().then(S=>globalThis[Ml]=S).catch(()=>globalThis[Ml]=!1)),globalThis[ic]||(globalThis[ic]=To().then(S=>globalThis[or]=S).catch(()=>globalThis[or]=!1)),globalThis[Wr]||(globalThis[Wr]=Js().then(S=>globalThis[Jo]=S).catch(()=>globalThis[Jo]=!1));const Da=(S,F)=>{const $=F?[F]:(0,A.C6)(),J=[];return $.forEach(ge=>{ge.container.getProvider(S).instances.forEach(qe=>{J.includes(qe)||J.push(qe)})}),J};function Mi(){}class Bu{constructor(F,$=Xf.N){this.zone=F,this.delegate=$}now(){return this.delegate.now()}schedule(F,$,J){const ge=this.zone;return this.delegate.schedule(function(qe){ge.runGuarded(()=>{F.apply(this,[qe])})},$,J)}}class Xo{constructor(F){this.zone=F,this.task=null}call(F,$){const J=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Mi,{},Mi,Mi)),$.pipe((0,uu.b)({next:J,complete:J,error:J})).subscribe(F).add(J)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ad=(()=>{class S{constructor($){this.ngZone=$,this.outsideAngular=$.runOutsideAngular(()=>new Bu(Zone.current)),this.insideAngular=$.run(()=>new Bu(Zone.current,ep.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return S.\u0275fac=function($){return new($||S)(R.LFG(R.R0b))},S.\u0275prov=R.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function ea(){const S=globalThis.\u0275AngularFireScheduler;if(!S)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return S}function Po(S){return ea(),function(S){return function($){return($=$.lift(new Xo(S.ngZone))).pipe((0,Hu.R)(S.outsideAngular),(0,Uu.QV)(S.insideAngular))}}(ea())(S)}},4363:(ut,Ie,j)=>{"use strict";j.d(Ie,{F0:()=>Mr,rH:()=>Ja,Od:()=>_a,Bz:()=>tc,lC:()=>Hc});var R=j(8583),A=j(3018),z=j(9765),_e=j(7971);class he extends z.xQ{constructor(C){super(),this._value=C}get value(){return this.getValue()}_subscribe(C){const b=super._subscribe(C);return b&&!b.closed&&C.next(this._value),b}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new _e.N;return this._value}next(C){super.next(this._value=C)}}var le=j(4869),be=j(9796),ue=j(7393);class fe extends ue.L{notifyNext(C,b,P,L,G){this.destination.next(b)}notifyError(C,b){this.destination.error(C)}notifyComplete(C){this.destination.complete()}}class Y extends ue.L{constructor(C,b,P){super(),this.parent=C,this.outerValue=b,this.outerIndex=P,this.index=0}_next(C){this.parent.notifyNext(this.outerValue,C,this.outerIndex,this.index++,this)}_error(C){this.parent.notifyError(C,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Q=j(7444),ye=j(7574);function me(D,C,b,P,L=new Y(D,b,P)){if(!L.closed)return C instanceof ye.y?C.subscribe(L):(0,Q.s)(C)(L)}var Re=j(6693);const He={};class xe{constructor(C){this.resultSelector=C}call(C,b){return b.subscribe(new Ye(C,this.resultSelector))}}class Ye extends fe{constructor(C,b){super(C),this.resultSelector=b,this.active=0,this.values=[],this.observables=[]}_next(C){this.values.push(He),this.observables.push(C)}_complete(){const C=this.observables,b=C.length;if(0===b)this.destination.complete();else{this.active=b,this.toRespond=b;for(let P=0;P<b;P++)this.add(me(this,C[P],void 0,P))}}notifyComplete(C){0==(this.active-=1)&&this.destination.complete()}notifyNext(C,b,P){const L=this.values,ee=this.toRespond?L[P]===He?--this.toRespond:this.toRespond:0;L[P]=b,0===ee&&(this.resultSelector?this._tryResultSelector(L):this.destination.next(L.slice()))}_tryResultSelector(C){let b;try{b=this.resultSelector.apply(this,C)}catch(P){return void this.destination.error(P)}this.destination.next(b)}}var Be=j(4402),$e=j(9193);function bt(D){return new ye.y(C=>{let b;try{b=D()}catch(L){return void C.error(L)}return(b?(0,Be.D)(b):(0,$e.c)()).subscribe(C)})}var nt=j(5917),ct=j(3410),tn=j(8071),jt=j(2441),Ve=j(5345);function Qe(D){return function(b){const P=new lt(D),L=b.lift(P);return P.caught=L}}class lt{constructor(C){this.selector=C}call(C,b){return b.subscribe(new Et(C,this.selector,this.caught))}}class Et extends Ve.Ds{constructor(C,b,P){super(C),this.selector=b,this.caught=P}error(C){if(!this.isStopped){let b;try{b=this.selector(C,this.caught)}catch(G){return void super.error(G)}this._unsubscribeAndRecycle();const P=new Ve.IY(this);this.add(P);const L=(0,Ve.ft)(b,P);L!==P&&this.add(L)}}}var Ct=j(5435),$t=j(7108);function dt(D){return function(b){return 0===D?(0,$e.c)():b.lift(new Un(D))}}class Un{constructor(C){if(this.total=C,this.total<0)throw new $t.W}call(C,b){return b.subscribe(new Lr(C,this.total))}}class Lr extends ue.L{constructor(C,b){super(C),this.total=b,this.ring=new Array,this.count=0}_next(C){const b=this.ring,P=this.total,L=this.count++;b.length<P?b.push(C):b[L%P]=C}_complete(){const C=this.destination;let b=this.count;if(b>0){const P=this.count>=this.total?this.total:this.count,L=this.ring;for(let G=0;G<P;G++){const ee=b++%P;C.next(L[ee])}}C.complete()}}var oi=j(4635),Vr=j(5242),Vo=j(4487),Zr=j(5319);class Cs{constructor(C){this.callback=C}call(C,b){return b.subscribe(new Jn(C,this.callback))}}class Jn extends ue.L{constructor(C,b){super(C),this.add(new Zr.w(b))}}var St=j(8002),rr=j(3190),Ii=j(5257),Hr=j(9761),Ft=j(2145),Kn=j(4612),Yr=j(8049),gn=j(9773),kn=j(3342),tt=j(1307),Rr=j(3282);class Sn{constructor(C,b){this.id=C,this.url=b}}class Dn extends Sn{constructor(C,b,P="imperative",L=null){super(C,b),this.navigationTrigger=P,this.restoredState=L}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Fn extends Sn{constructor(C,b,P){super(C,b),this.urlAfterRedirects=P}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class hs extends Sn{constructor(C,b,P){super(C,b),this.reason=P}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Le extends Sn{constructor(C,b,P){super(C,b),this.error=P}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class X extends Sn{constructor(C,b,P,L){super(C,b),this.urlAfterRedirects=P,this.state=L}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class de extends Sn{constructor(C,b,P,L){super(C,b),this.urlAfterRedirects=P,this.state=L}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ze extends Sn{constructor(C,b,P,L,G){super(C,b),this.urlAfterRedirects=P,this.state=L,this.shouldActivate=G}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class We extends Sn{constructor(C,b,P,L){super(C,b),this.urlAfterRedirects=P,this.state=L}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wt extends Sn{constructor(C,b,P,L){super(C,b),this.urlAfterRedirects=P,this.state=L}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ot{constructor(C){this.route=C}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class at{constructor(C){this.route=C}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Lt{constructor(C){this.snapshot=C}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jn{constructor(C){this.snapshot=C}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tr{constructor(C){this.snapshot=C}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wt{constructor(C){this.snapshot=C}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class un{constructor(C,b,P){this.routerEvent=C,this.position=b,this.anchor=P}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ht="primary";class zt{constructor(C){this.params=C||{}}has(C){return Object.prototype.hasOwnProperty.call(this.params,C)}get(C){if(this.has(C)){const b=this.params[C];return Array.isArray(b)?b[0]:b}return null}getAll(C){if(this.has(C)){const b=this.params[C];return Array.isArray(b)?b:[b]}return[]}get keys(){return Object.keys(this.params)}}function Ur(D){return new zt(D)}const vt="ngNavigationCancelingError";function zn(D){const C=Error("NavigationCancelingError: "+D);return C[vt]=!0,C}function je(D,C,b){const P=b.path.split("/");if(P.length>D.length||"full"===b.pathMatch&&(C.hasChildren()||P.length<D.length))return null;const L={};for(let G=0;G<P.length;G++){const ee=P[G],ae=D[G];if(ee.startsWith(":"))L[ee.substring(1)]=ae;else if(ee!==ae.path)return null}return{consumed:D.slice(0,P.length),posParams:L}}function Ot(D,C){const b=D?Object.keys(D):void 0,P=C?Object.keys(C):void 0;if(!b||!P||b.length!=P.length)return!1;let L;for(let G=0;G<b.length;G++)if(L=b[G],!Jt(D[L],C[L]))return!1;return!0}function Jt(D,C){if(Array.isArray(D)&&Array.isArray(C)){if(D.length!==C.length)return!1;const b=[...D].sort(),P=[...C].sort();return b.every((L,G)=>P[G]===L)}return D===C}function wn(D){return Array.prototype.concat.apply([],D)}function ie(D){return D.length>0?D[D.length-1]:null}function oe(D,C){for(const b in D)D.hasOwnProperty(b)&&C(D[b],b)}function Ne(D){return(0,A.CqO)(D)?D:(0,A.QGY)(D)?(0,Be.D)(Promise.resolve(D)):(0,nt.of)(D)}const Tt={exact:function Pr(D,C,b){if(!ir(D.segments,C.segments)||!Is(D.segments,C.segments,b)||D.numberOfChildren!==C.numberOfChildren)return!1;for(const P in C.children)if(!D.children[P]||!Pr(D.children[P],C.children[P],b))return!1;return!0},subset:Yt},nn={exact:function(D,C){return Ot(D,C)},subset:function(D,C){return Object.keys(C).length<=Object.keys(D).length&&Object.keys(C).every(b=>Jt(D[b],C[b]))},ignored:()=>!0};function Nn(D,C,b){return Tt[b.paths](D.root,C.root,b.matrixParams)&&nn[b.queryParams](D.queryParams,C.queryParams)&&!("exact"===b.fragment&&D.fragment!==C.fragment)}function Yt(D,C,b){return Br(D,C,C.segments,b)}function Br(D,C,b,P){if(D.segments.length>b.length){const L=D.segments.slice(0,b.length);return!(!ir(L,b)||C.hasChildren()||!Is(L,b,P))}if(D.segments.length===b.length){if(!ir(D.segments,b)||!Is(D.segments,b,P))return!1;for(const L in C.children)if(!D.children[L]||!Yt(D.children[L],C.children[L],P))return!1;return!0}{const L=b.slice(0,D.segments.length),G=b.slice(D.segments.length);return!!(ir(D.segments,L)&&Is(D.segments,L,P)&&D.children[ht])&&Br(D.children[ht],C,G,P)}}function Is(D,C,b){return C.every((P,L)=>nn[b](D[L].parameters,P.parameters))}class ai{constructor(C,b,P){this.root=C,this.queryParams=b,this.fragment=P}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ur(this.queryParams)),this._queryParamMap}toString(){return on.serialize(this)}}class Nt{constructor(C,b){this.segments=C,this.children=b,this.parent=null,oe(b,(P,L)=>P.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rn(this)}}class Ti{constructor(C,b){this.path=C,this.parameters=b}get parameterMap(){return this._parameterMap||(this._parameterMap=Ur(this.parameters)),this._parameterMap}toString(){return Xt(this)}}function ir(D,C){return D.length===C.length&&D.every((b,P)=>b.path===C[P].path)}class Di{}class ft{parse(C){const b=new On(C);return new ai(b.parseRootSegment(),b.parseQueryParams(),b.parseFragment())}serialize(C){const b=`/${Zn(C.root,!0)}`,P=function(D){const C=Object.keys(D).map(b=>{const P=D[b];return Array.isArray(P)?P.map(L=>`${hr(b)}=${hr(L)}`).join("&"):`${hr(b)}=${hr(P)}`}).filter(b=>!!b);return C.length?`?${C.join("&")}`:""}(C.queryParams);var D;return`${b}${P}${"string"==typeof C.fragment?`#${D=C.fragment,encodeURI(D)}`:""}`}}const on=new ft;function Rn(D){return D.segments.map(C=>Xt(C)).join("/")}function Zn(D,C){if(!D.hasChildren())return Rn(D);if(C){const b=D.children[ht]?Zn(D.children[ht],!1):"",P=[];return oe(D.children,(L,G)=>{G!==ht&&P.push(`${G}:${Zn(L,!1)}`)}),P.length>0?`${b}(${P.join("//")})`:b}{const b=function(D,C){let b=[];return oe(D.children,(P,L)=>{L===ht&&(b=b.concat(C(P,L)))}),oe(D.children,(P,L)=>{L!==ht&&(b=b.concat(C(P,L)))}),b}(D,(P,L)=>L===ht?[Zn(D.children[ht],!1)]:[`${L}:${Zn(P,!1)}`]);return 1===Object.keys(D.children).length&&null!=D.children[ht]?`${Rn(D)}/${b[0]}`:`${Rn(D)}/(${b.join("//")})`}}function ci(D){return encodeURIComponent(D).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hr(D){return ci(D).replace(/%3B/gi,";")}function Pn(D){return ci(D).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wn(D){return decodeURIComponent(D)}function Zs(D){return Wn(D.replace(/\+/g,"%20"))}function Xt(D){return`${Pn(D.path)}${function(D){return Object.keys(D).map(C=>`;${Pn(C)}=${Pn(D[C])}`).join("")}(D.parameters)}`}const Wa=/^[^\/()?;=#]+/;function ui(D){const C=D.match(Wa);return C?C[0]:""}const li=/^[^=?&#]+/,Xn=/^[^?&#]+/;class On{constructor(C){this.url=C,this.remaining=C}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Nt([],{}):new Nt([],this.parseChildren())}parseQueryParams(){const C={};if(this.consumeOptional("?"))do{this.parseQueryParam(C)}while(this.consumeOptional("&"));return C}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const C=[];for(this.peekStartsWith("(")||C.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),C.push(this.parseSegment());let b={};this.peekStartsWith("/(")&&(this.capture("/"),b=this.parseParens(!0));let P={};return this.peekStartsWith("(")&&(P=this.parseParens(!1)),(C.length>0||Object.keys(b).length>0)&&(P[ht]=new Nt(C,b)),P}parseSegment(){const C=ui(this.remaining);if(""===C&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(C),new Ti(Wn(C),this.parseMatrixParams())}parseMatrixParams(){const C={};for(;this.consumeOptional(";");)this.parseParam(C);return C}parseParam(C){const b=ui(this.remaining);if(!b)return;this.capture(b);let P="";if(this.consumeOptional("=")){const L=ui(this.remaining);L&&(P=L,this.capture(P))}C[Wn(b)]=Wn(P)}parseQueryParam(C){const b=function(D){const C=D.match(li);return C?C[0]:""}(this.remaining);if(!b)return;this.capture(b);let P="";if(this.consumeOptional("=")){const ee=function(D){const C=D.match(Xn);return C?C[0]:""}(this.remaining);ee&&(P=ee,this.capture(P))}const L=Zs(b),G=Zs(P);if(C.hasOwnProperty(L)){let ee=C[L];Array.isArray(ee)||(ee=[ee],C[L]=ee),ee.push(G)}else C[L]=G}parseParens(C){const b={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const P=ui(this.remaining),L=this.remaining[P.length];if("/"!==L&&")"!==L&&";"!==L)throw new Error(`Cannot parse url '${this.url}'`);let G;P.indexOf(":")>-1?(G=P.substr(0,P.indexOf(":")),this.capture(G),this.capture(":")):C&&(G=ht);const ee=this.parseChildren();b[G]=1===Object.keys(ee).length?ee[ht]:new Nt([],ee),this.consumeOptional("//")}return b}peekStartsWith(C){return this.remaining.startsWith(C)}consumeOptional(C){return!!this.peekStartsWith(C)&&(this.remaining=this.remaining.substring(C.length),!0)}capture(C){if(!this.consumeOptional(C))throw new Error(`Expected "${C}".`)}}class Xi{constructor(C){this._root=C}get root(){return this._root.value}parent(C){const b=this.pathFromRoot(C);return b.length>1?b[b.length-2]:null}children(C){const b=fs(C,this._root);return b?b.children.map(P=>P.value):[]}firstChild(C){const b=fs(C,this._root);return b&&b.children.length>0?b.children[0].value:null}siblings(C){const b=pr(C,this._root);return b.length<2?[]:b[b.length-2].children.map(L=>L.value).filter(L=>L!==C)}pathFromRoot(C){return pr(C,this._root).map(b=>b.value)}}function fs(D,C){if(D===C.value)return C;for(const b of C.children){const P=fs(D,b);if(P)return P}return null}function pr(D,C){if(D===C.value)return[C];for(const b of C.children){const P=pr(D,b);if(P.length)return P.unshift(C),P}return[]}class Ai{constructor(C,b){this.value=C,this.children=b}toString(){return`TreeNode(${this.value})`}}function Fs(D){const C={};return D&&D.children.forEach(b=>C[b.value.outlet]=b),C}class es extends Xi{constructor(C,b){super(C),this.snapshot=b,xi(this,C)}toString(){return this.snapshot.toString()}}function er(D,C){const b=function(D,C){const ee=new Qs([],{},{},"",{},ht,C,null,D.root,-1,{});return new Ho("",new Ai(ee,[]))}(D,C),P=new he([new Ti("",{})]),L=new he({}),G=new he({}),ee=new he({}),ae=new he(""),Fe=new Dr(P,L,ee,ae,G,ht,C,b.root);return Fe.snapshot=b.root,new es(new Ai(Fe,[]),b)}class Dr{constructor(C,b,P,L,G,ee,ae,Fe){this.url=C,this.params=b,this.queryParams=P,this.fragment=L,this.data=G,this.outlet=ee,this.component=ae,this._futureSnapshot=Fe}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,St.U)(C=>Ur(C)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,St.U)(C=>Ur(C)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Si(D,C="emptyOnly"){const b=D.pathFromRoot;let P=0;if("always"!==C)for(P=b.length-1;P>=1;){const L=b[P],G=b[P-1];if(L.routeConfig&&""===L.routeConfig.path)P--;else{if(G.component)break;P--}}return function(D){return D.reduce((C,b)=>({params:Object.assign(Object.assign({},C.params),b.params),data:Object.assign(Object.assign({},C.data),b.data),resolve:Object.assign(Object.assign({},C.resolve),b._resolvedData)}),{params:{},data:{},resolve:{}})}(b.slice(P))}class Qs{constructor(C,b,P,L,G,ee,ae,Fe,mt,cn,Mt){this.url=C,this.params=b,this.queryParams=P,this.fragment=L,this.data=G,this.outlet=ee,this.component=ae,this.routeConfig=Fe,this._urlSegment=mt,this._lastPathIndex=cn,this._resolve=Mt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ur(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ur(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(P=>P.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ho extends Xi{constructor(C,b){super(b),this.url=C,xi(this,b)}toString(){return Vi(this._root)}}function xi(D,C){C.value._routerState=D,C.children.forEach(b=>xi(D,b))}function Vi(D){const C=D.children.length>0?` { ${D.children.map(Vi).join(", ")} } `:"";return`${D.value}${C}`}function Uo(D){if(D.snapshot){const C=D.snapshot,b=D._futureSnapshot;D.snapshot=b,Ot(C.queryParams,b.queryParams)||D.queryParams.next(b.queryParams),C.fragment!==b.fragment&&D.fragment.next(b.fragment),Ot(C.params,b.params)||D.params.next(b.params),function(D,C){if(D.length!==C.length)return!1;for(let b=0;b<D.length;++b)if(!Ot(D[b],C[b]))return!1;return!0}(C.url,b.url)||D.url.next(b.url),Ot(C.data,b.data)||D.data.next(b.data)}else D.snapshot=D._futureSnapshot,D.data.next(D._futureSnapshot.data)}function ke(D,C){const b=Ot(D.params,C.params)&&function(D,C){return ir(D,C)&&D.every((b,P)=>Ot(b.parameters,C[P].parameters))}(D.url,C.url);return b&&!(!D.parent!=!C.parent)&&(!D.parent||ke(D.parent,C.parent))}function Ri(D,C,b){if(b&&D.shouldReuseRoute(C.value,b.value.snapshot)){const P=b.value;P._futureSnapshot=C.value;const L=function(D,C,b){return C.children.map(P=>{for(const L of b.children)if(D.shouldReuseRoute(P.value,L.value.snapshot))return Ri(D,P,L);return Ri(D,P)})}(D,C,b);return new Ai(P,L)}{if(D.shouldAttach(C.value)){const G=D.retrieve(C.value);if(null!==G){const ee=G.route;return ps(C,ee),ee}}const P=function(D){return new Dr(new he(D.url),new he(D.params),new he(D.queryParams),new he(D.fragment),new he(D.data),D.outlet,D.component,D)}(C.value),L=C.children.map(G=>Ri(D,G));return new Ai(P,L)}}function ps(D,C){if(D.value.routeConfig!==C.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(D.children.length!==C.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");C.value._futureSnapshot=D.value;for(let b=0;b<D.children.length;++b)ps(D.children[b],C.children[b])}function Dt(D){return"object"==typeof D&&null!=D&&!D.outlets&&!D.segmentPath}function yo(D){return"object"==typeof D&&null!=D&&D.outlets}function Zt(D,C,b,P,L){let G={};return P&&oe(P,(ee,ae)=>{G[ae]=Array.isArray(ee)?ee.map(Fe=>`${Fe}`):`${ee}`}),new ai(b.root===D?C:_o(b.root,D,C),G,L)}function _o(D,C,b){const P={};return oe(D.children,(L,G)=>{P[G]=L===C?b:_o(L,C,b)}),new Nt(D.segments,P)}class Js{constructor(C,b,P){if(this.isAbsolute=C,this.numberOfDoubleDots=b,this.commands=P,C&&P.length>0&&Dt(P[0]))throw new Error("Root segment cannot have matrix parameters");const L=P.find(yo);if(L&&L!==ie(P))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ca{constructor(C,b,P){this.segmentGroup=C,this.processChildren=b,this.index=P}}function wo(D,C,b){if(D||(D=new Nt([],{})),0===D.segments.length&&D.hasChildren())return vr(D,C,b);const P=function(D,C,b){let P=0,L=C;const G={match:!1,pathIndex:0,commandIndex:0};for(;L<D.segments.length;){if(P>=b.length)return G;const ee=D.segments[L],ae=b[P];if(yo(ae))break;const Fe=`${ae}`,mt=P<b.length-1?b[P+1]:null;if(L>0&&void 0===Fe)break;if(Fe&&mt&&"object"==typeof mt&&void 0===mt.outlets){if(!ns(Fe,mt,ee))return G;P+=2}else{if(!ns(Fe,{},ee))return G;P++}L++}return{match:!0,pathIndex:L,commandIndex:P}}(D,C,b),L=b.slice(P.commandIndex);if(P.match&&P.pathIndex<D.segments.length){const G=new Nt(D.segments.slice(0,P.pathIndex),{});return G.children[ht]=new Nt(D.segments.slice(P.pathIndex),D.children),vr(G,0,L)}return P.match&&0===L.length?new Nt(D.segments,{}):P.match&&!D.hasChildren()?sr(D,C,b):P.match?vr(D,0,L):sr(D,C,b)}function vr(D,C,b){if(0===b.length)return new Nt(D.segments,{});{const P=function(D){return yo(D[0])?D[0].outlets:{[ht]:D}}(b),L={};return oe(P,(G,ee)=>{"string"==typeof G&&(G=[G]),null!==G&&(L[ee]=wo(D.children[ee],C,G))}),oe(D.children,(G,ee)=>{void 0===P[ee]&&(L[ee]=G)}),new Nt(D.segments,L)}}function sr(D,C,b){const P=D.segments.slice(0,C);let L=0;for(;L<b.length;){const G=b[L];if(yo(G)){const Fe=mi(G.outlets);return new Nt(P,Fe)}if(0===L&&Dt(b[0])){P.push(new Ti(D.segments[C].path,di(b[0]))),L++;continue}const ee=yo(G)?G.outlets[ht]:`${G}`,ae=L<b.length-1?b[L+1]:null;ee&&ae&&Dt(ae)?(P.push(new Ti(ee,di(ae))),L+=2):(P.push(new Ti(ee,{})),L++)}return new Nt(P,{})}function mi(D){const C={};return oe(D,(b,P)=>{"string"==typeof b&&(b=[b]),null!==b&&(C[P]=sr(new Nt([],{}),0,b))}),C}function di(D){const C={};return oe(D,(b,P)=>C[P]=`${b}`),C}function ns(D,C,b){return D==b.path&&Ot(C,b.parameters)}class Eo{constructor(C,b,P,L){this.routeReuseStrategy=C,this.futureState=b,this.currState=P,this.forwardEvent=L}activate(C){const b=this.futureState._root,P=this.currState?this.currState._root:null;this.deactivateChildRoutes(b,P,C),Uo(this.futureState.root),this.activateChildRoutes(b,P,C)}deactivateChildRoutes(C,b,P){const L=Fs(b);C.children.forEach(G=>{const ee=G.value.outlet;this.deactivateRoutes(G,L[ee],P),delete L[ee]}),oe(L,(G,ee)=>{this.deactivateRouteAndItsChildren(G,P)})}deactivateRoutes(C,b,P){const L=C.value,G=b?b.value:null;if(L===G)if(L.component){const ee=P.getContext(L.outlet);ee&&this.deactivateChildRoutes(C,b,ee.children)}else this.deactivateChildRoutes(C,b,P);else G&&this.deactivateRouteAndItsChildren(b,P)}deactivateRouteAndItsChildren(C,b){this.routeReuseStrategy.shouldDetach(C.value.snapshot)?this.detachAndStoreRouteSubtree(C,b):this.deactivateRouteAndOutlet(C,b)}detachAndStoreRouteSubtree(C,b){const P=b.getContext(C.value.outlet);if(P&&P.outlet){const L=P.outlet.detach(),G=P.children.onOutletDeactivated();this.routeReuseStrategy.store(C.value.snapshot,{componentRef:L,route:C,contexts:G})}}deactivateRouteAndOutlet(C,b){const P=b.getContext(C.value.outlet),L=P&&C.value.component?P.children:b,G=Fs(C);for(const ee of Object.keys(G))this.deactivateRouteAndItsChildren(G[ee],L);P&&P.outlet&&(P.outlet.deactivate(),P.children.onOutletDeactivated(),P.attachRef=null,P.resolver=null,P.route=null)}activateChildRoutes(C,b,P){const L=Fs(b);C.children.forEach(G=>{this.activateRoutes(G,L[G.value.outlet],P),this.forwardEvent(new Wt(G.value.snapshot))}),C.children.length&&this.forwardEvent(new jn(C.value.snapshot))}activateRoutes(C,b,P){const L=C.value,G=b?b.value:null;if(Uo(L),L===G)if(L.component){const ee=P.getOrCreateContext(L.outlet);this.activateChildRoutes(C,b,ee.children)}else this.activateChildRoutes(C,b,P);else if(L.component){const ee=P.getOrCreateContext(L.outlet);if(this.routeReuseStrategy.shouldAttach(L.snapshot)){const ae=this.routeReuseStrategy.retrieve(L.snapshot);this.routeReuseStrategy.store(L.snapshot,null),ee.children.onOutletReAttached(ae.contexts),ee.attachRef=ae.componentRef,ee.route=ae.route.value,ee.outlet&&ee.outlet.attach(ae.componentRef,ae.route.value),ua(ae.route)}else{const ae=function(D){for(let C=D.parent;C;C=C.parent){const b=C.routeConfig;if(b&&b._loadedConfig)return b._loadedConfig;if(b&&b.component)return null}return null}(L.snapshot),Fe=ae?ae.module.componentFactoryResolver:null;ee.attachRef=null,ee.route=L,ee.resolver=Fe,ee.outlet&&ee.outlet.activateWith(L,Fe),this.activateChildRoutes(C,null,ee.children)}}else this.activateChildRoutes(C,null,P)}}function ua(D){Uo(D.value),D.children.forEach(ua)}class $o{constructor(C,b){this.routes=C,this.module=b}}function yi(D){return"function"==typeof D}function ji(D){return D instanceof ai}const B=Symbol("INITIAL_VALUE");function N(){return(0,rr.w)(D=>function(...D){let C,b;return(0,le.K)(D[D.length-1])&&(b=D.pop()),"function"==typeof D[D.length-1]&&(C=D.pop()),1===D.length&&(0,be.k)(D[0])&&(D=D[0]),(0,Re.n)(D,b).lift(new xe(C))}(D.map(C=>C.pipe((0,Ii.q)(1),(0,Hr.O)(B)))).pipe((0,Ft.R)((C,b)=>{let P=!1;return b.reduce((L,G,ee)=>L!==B?L:(G===B&&(P=!0),P||!1!==G&&ee!==b.length-1&&!ji(G)?L:G),C)},B),(0,Ct.h)(C=>C!==B),(0,St.U)(C=>ji(C)?C:!0===C),(0,Ii.q)(1)))}let W=(()=>{class D{}return D.\u0275fac=function(b){return new(b||D)},D.\u0275cmp=A.Xpm({type:D,selectors:[["ng-component"]],decls:1,vars:0,template:function(b,P){1&b&&A._UZ(0,"router-outlet")},directives:function(){return[Hc]},encapsulation:2}),D})();function se(D,C=""){for(let b=0;b<D.length;b++){const P=D[b];Ee(P,Ke(C,P))}}function Ee(D,C){D.children&&se(D.children,C)}function Ke(D,C){return C?D||C.path?D&&!C.path?`${D}/`:!D&&C.path?C.path:`${D}/${C.path}`:"":D}function It(D){const C=D.children&&D.children.map(It),b=C?Object.assign(Object.assign({},D),{children:C}):Object.assign({},D);return!b.component&&(C||b.loadChildren)&&b.outlet&&b.outlet!==ht&&(b.component=W),b}function en(D){return D.outlet||ht}function At(D,C){const b=D.filter(P=>en(P)===C);return b.push(...D.filter(P=>en(P)!==C)),b}const Vn={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function fn(D,C,b){var P;if(""===C.path)return"full"===C.pathMatch&&(D.hasChildren()||b.length>0)?Object.assign({},Vn):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const G=(C.matcher||je)(b,D,C);if(!G)return Object.assign({},Vn);const ee={};oe(G.posParams,(Fe,mt)=>{ee[mt]=Fe.path});const ae=G.consumed.length>0?Object.assign(Object.assign({},ee),G.consumed[G.consumed.length-1].parameters):ee;return{matched:!0,consumedSegments:G.consumed,lastChild:G.consumed.length,parameters:ae,positionalParamSegments:null!==(P=G.posParams)&&void 0!==P?P:{}}}function Bn(D,C,b,P,L="corrected"){if(b.length>0&&function(D,C,b){return b.some(P=>$n(D,C,P)&&en(P)!==ht)}(D,b,P)){const ee=new Nt(C,function(D,C,b,P){const L={};L[ht]=P,P._sourceSegment=D,P._segmentIndexShift=C.length;for(const G of b)if(""===G.path&&en(G)!==ht){const ee=new Nt([],{});ee._sourceSegment=D,ee._segmentIndexShift=C.length,L[en(G)]=ee}return L}(D,C,P,new Nt(b,D.children)));return ee._sourceSegment=D,ee._segmentIndexShift=C.length,{segmentGroup:ee,slicedSegments:[]}}if(0===b.length&&function(D,C,b){return b.some(P=>$n(D,C,P))}(D,b,P)){const ee=new Nt(D.segments,function(D,C,b,P,L,G){const ee={};for(const ae of P)if($n(D,b,ae)&&!L[en(ae)]){const Fe=new Nt([],{});Fe._sourceSegment=D,Fe._segmentIndexShift="legacy"===G?D.segments.length:C.length,ee[en(ae)]=Fe}return Object.assign(Object.assign({},L),ee)}(D,C,b,P,D.children,L));return ee._sourceSegment=D,ee._segmentIndexShift=C.length,{segmentGroup:ee,slicedSegments:b}}const G=new Nt(D.segments,D.children);return G._sourceSegment=D,G._segmentIndexShift=C.length,{segmentGroup:G,slicedSegments:b}}function $n(D,C,b){return(!(D.hasChildren()||C.length>0)||"full"!==b.pathMatch)&&""===b.path}function yr(D,C,b,P){return!!(en(D)===P||P!==ht&&$n(C,b,D))&&("**"===D.path||fn(C,D,b).matched)}function is(D,C,b){return 0===C.length&&!D.children[b]}class Xs{constructor(C){this.segmentGroup=C||null}}class $i{constructor(C){this.urlTree=C}}function ss(D){return new ye.y(C=>C.error(new Xs(D)))}function bo(D){return new ye.y(C=>C.error(new $i(D)))}function qt(D){return new ye.y(C=>C.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${D}'`)))}class Go{constructor(C,b,P,L,G){this.configLoader=b,this.urlSerializer=P,this.urlTree=L,this.config=G,this.allowRedirects=!0,this.ngModule=C.get(A.h0i)}apply(){const C=Bn(this.urlTree.root,[],[],this.config).segmentGroup,b=new Nt(C.segments,C.children);return this.expandSegmentGroup(this.ngModule,this.config,b,ht).pipe((0,St.U)(G=>this.createUrlTree(eo(G),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Qe(G=>{if(G instanceof $i)return this.allowRedirects=!1,this.match(G.urlTree);throw G instanceof Xs?this.noMatchError(G):G}))}match(C){return this.expandSegmentGroup(this.ngModule,this.config,C.root,ht).pipe((0,St.U)(L=>this.createUrlTree(eo(L),C.queryParams,C.fragment))).pipe(Qe(L=>{throw L instanceof Xs?this.noMatchError(L):L}))}noMatchError(C){return new Error(`Cannot match any routes. URL Segment: '${C.segmentGroup}'`)}createUrlTree(C,b,P){const L=C.segments.length>0?new Nt([],{[ht]:C}):C;return new ai(L,b,P)}expandSegmentGroup(C,b,P,L){return 0===P.segments.length&&P.hasChildren()?this.expandChildren(C,b,P).pipe((0,St.U)(G=>new Nt([],G))):this.expandSegment(C,P,b,P.segments,L,!0)}expandChildren(C,b,P){const L=[];for(const G of Object.keys(P.children))"primary"===G?L.unshift(G):L.push(G);return(0,Be.D)(L).pipe((0,Kn.b)(G=>{const ee=P.children[G],ae=At(b,G);return this.expandSegmentGroup(C,ae,ee,G).pipe((0,St.U)(Fe=>({segment:Fe,outlet:G})))}),(0,Ft.R)((G,ee)=>(G[ee.outlet]=ee.segment,G),{}),function(D,C){const b=arguments.length>=2;return P=>P.pipe(D?(0,Ct.h)((L,G)=>D(L,G,P)):Vo.y,dt(1),b?(0,Vr.d)(C):(0,oi.T)(()=>new ct.K))}())}expandSegment(C,b,P,L,G,ee){return(0,Be.D)(P).pipe((0,Kn.b)(ae=>this.expandSegmentAgainstRoute(C,b,P,ae,L,G,ee).pipe(Qe(mt=>{if(mt instanceof Xs)return(0,nt.of)(null);throw mt}))),(0,Yr.P)(ae=>!!ae),Qe((ae,Fe)=>{if(ae instanceof ct.K||"EmptyError"===ae.name){if(is(b,L,G))return(0,nt.of)(new Nt([],{}));throw new Xs(b)}throw ae}))}expandSegmentAgainstRoute(C,b,P,L,G,ee,ae){return yr(L,b,G,ee)?void 0===L.redirectTo?this.matchSegmentAgainstRoute(C,b,L,G,ee):ae&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(C,b,P,L,G,ee):ss(b):ss(b)}expandSegmentAgainstRouteUsingRedirect(C,b,P,L,G,ee){return"**"===L.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(C,P,L,ee):this.expandRegularSegmentAgainstRouteUsingRedirect(C,b,P,L,G,ee)}expandWildCardWithParamsAgainstRouteUsingRedirect(C,b,P,L){const G=this.applyRedirectCommands([],P.redirectTo,{});return P.redirectTo.startsWith("/")?bo(G):this.lineralizeSegments(P,G).pipe((0,gn.zg)(ee=>{const ae=new Nt(ee,{});return this.expandSegment(C,ae,b,ee,L,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(C,b,P,L,G,ee){const{matched:ae,consumedSegments:Fe,lastChild:mt,positionalParamSegments:cn}=fn(b,L,G);if(!ae)return ss(b);const Mt=this.applyRedirectCommands(Fe,L.redirectTo,cn);return L.redirectTo.startsWith("/")?bo(Mt):this.lineralizeSegments(L,Mt).pipe((0,gn.zg)(An=>this.expandSegment(C,b,P,An.concat(G.slice(mt)),ee,!1)))}matchSegmentAgainstRoute(C,b,P,L,G){if("**"===P.path)return P.loadChildren?(P._loadedConfig?(0,nt.of)(P._loadedConfig):this.configLoader.load(C.injector,P)).pipe((0,St.U)(An=>(P._loadedConfig=An,new Nt(L,{})))):(0,nt.of)(new Nt(L,{}));const{matched:ee,consumedSegments:ae,lastChild:Fe}=fn(b,P,L);if(!ee)return ss(b);const mt=L.slice(Fe);return this.getChildConfig(C,P,L).pipe((0,gn.zg)(Mt=>{const An=Mt.module,an=Mt.routes,{segmentGroup:Pi,slicedSegments:Jr}=Bn(b,ae,mt,an),Er=new Nt(Pi.segments,Pi.children);if(0===Jr.length&&Er.hasChildren())return this.expandChildren(An,an,Er).pipe((0,St.U)(cu=>new Nt(ae,cu)));if(0===an.length&&0===Jr.length)return(0,nt.of)(new Nt(ae,{}));const Qo=en(P)===G;return this.expandSegment(An,Er,an,Jr,Qo?ht:G,!0).pipe((0,St.U)(xo=>new Nt(ae.concat(xo.segments),xo.children)))}))}getChildConfig(C,b,P){return b.children?(0,nt.of)(new $o(b.children,C)):b.loadChildren?void 0!==b._loadedConfig?(0,nt.of)(b._loadedConfig):this.runCanLoadGuards(C.injector,b,P).pipe((0,gn.zg)(L=>{return L?this.configLoader.load(C.injector,b).pipe((0,St.U)(G=>(b._loadedConfig=G,G))):(D=b,new ye.y(C=>C.error(zn(`Cannot load children because the guard of the route "path: '${D.path}'" returned false`))));var D})):(0,nt.of)(new $o([],C))}runCanLoadGuards(C,b,P){const L=b.canLoad;if(!L||0===L.length)return(0,nt.of)(!0);const G=L.map(ee=>{const ae=C.get(ee);let Fe;if((D=ae)&&yi(D.canLoad))Fe=ae.canLoad(b,P);else{if(!yi(ae))throw new Error("Invalid CanLoad guard");Fe=ae(b,P)}var D;return Ne(Fe)});return(0,nt.of)(G).pipe(N(),(0,kn.b)(ee=>{if(!ji(ee))return;const ae=zn(`Redirecting to "${this.urlSerializer.serialize(ee)}"`);throw ae.url=ee,ae}),(0,St.U)(ee=>!0===ee))}lineralizeSegments(C,b){let P=[],L=b.root;for(;;){if(P=P.concat(L.segments),0===L.numberOfChildren)return(0,nt.of)(P);if(L.numberOfChildren>1||!L.children[ht])return qt(C.redirectTo);L=L.children[ht]}}applyRedirectCommands(C,b,P){return this.applyRedirectCreatreUrlTree(b,this.urlSerializer.parse(b),C,P)}applyRedirectCreatreUrlTree(C,b,P,L){const G=this.createSegmentGroup(C,b.root,P,L);return new ai(G,this.createQueryParams(b.queryParams,this.urlTree.queryParams),b.fragment)}createQueryParams(C,b){const P={};return oe(C,(L,G)=>{if("string"==typeof L&&L.startsWith(":")){const ae=L.substring(1);P[G]=b[ae]}else P[G]=L}),P}createSegmentGroup(C,b,P,L){const G=this.createSegments(C,b.segments,P,L);let ee={};return oe(b.children,(ae,Fe)=>{ee[Fe]=this.createSegmentGroup(C,ae,P,L)}),new Nt(G,ee)}createSegments(C,b,P,L){return b.map(G=>G.path.startsWith(":")?this.findPosParam(C,G,L):this.findOrReturn(G,P))}findPosParam(C,b,P){const L=P[b.path.substring(1)];if(!L)throw new Error(`Cannot redirect to '${C}'. Cannot find '${b.path}'.`);return L}findOrReturn(C,b){let P=0;for(const L of b){if(L.path===C.path)return b.splice(P),L;P++}return C}}function eo(D){const C={};for(const P of Object.keys(D.children)){const G=eo(D.children[P]);(G.segments.length>0||G.hasChildren())&&(C[P]=G)}return function(D){if(1===D.numberOfChildren&&D.children[ht]){const C=D.children[ht];return new Nt(D.segments.concat(C.segments),C.children)}return D}(new Nt(D.segments,C))}class qa{constructor(C){this.path=C,this.route=this.path[this.path.length-1]}}class Ge{constructor(C,b){this.component=C,this.route=b}}function En(D,C,b){const P=D._root;return os(P,C?C._root:null,b,[P.value])}function tr(D,C,b){const P=function(D){if(!D)return null;for(let C=D.parent;C;C=C.parent){const b=C.routeConfig;if(b&&b._loadedConfig)return b._loadedConfig}return null}(C);return(P?P.module.injector:b).get(D)}function os(D,C,b,P,L={canDeactivateChecks:[],canActivateChecks:[]}){const G=Fs(C);return D.children.forEach(ee=>{(function(D,C,b,P,L={canDeactivateChecks:[],canActivateChecks:[]}){const G=D.value,ee=C?C.value:null,ae=b?b.getContext(D.value.outlet):null;if(ee&&G.routeConfig===ee.routeConfig){const Fe=function(D,C,b){if("function"==typeof b)return b(D,C);switch(b){case"pathParamsChange":return!ir(D.url,C.url);case"pathParamsOrQueryParamsChange":return!ir(D.url,C.url)||!Ot(D.queryParams,C.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ke(D,C)||!Ot(D.queryParams,C.queryParams);default:return!ke(D,C)}}(ee,G,G.routeConfig.runGuardsAndResolvers);Fe?L.canActivateChecks.push(new qa(P)):(G.data=ee.data,G._resolvedData=ee._resolvedData),os(D,C,G.component?ae?ae.children:null:b,P,L),Fe&&ae&&ae.outlet&&ae.outlet.isActivated&&L.canDeactivateChecks.push(new Ge(ae.outlet.component,ee))}else ee&&Ts(C,ae,L),L.canActivateChecks.push(new qa(P)),os(D,null,G.component?ae?ae.children:null:b,P,L)})(ee,G[ee.value.outlet],b,P.concat([ee.value]),L),delete G[ee.value.outlet]}),oe(G,(ee,ae)=>Ts(ee,b.getContext(ae),L)),L}function Ts(D,C,b){const P=Fs(D),L=D.value;oe(P,(G,ee)=>{Ts(G,L.component?C?C.children.getContext(ee):null:C,b)}),b.canDeactivateChecks.push(new Ge(L.component&&C&&C.outlet&&C.outlet.isActivated?C.outlet.component:null,L))}class gs{}function Mc(D){return new ye.y(C=>C.error(D))}class Fu{constructor(C,b,P,L,G,ee){this.rootComponentType=C,this.config=b,this.urlTree=P,this.url=L,this.paramsInheritanceStrategy=G,this.relativeLinkResolution=ee}recognize(){const C=Bn(this.urlTree.root,[],[],this.config.filter(ee=>void 0===ee.redirectTo),this.relativeLinkResolution).segmentGroup,b=this.processSegmentGroup(this.config,C,ht);if(null===b)return null;const P=new Qs([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ht,this.rootComponentType,null,this.urlTree.root,-1,{}),L=new Ai(P,b),G=new Ho(this.url,L);return this.inheritParamsAndData(G._root),G}inheritParamsAndData(C){const b=C.value,P=Si(b,this.paramsInheritanceStrategy);b.params=Object.freeze(P.params),b.data=Object.freeze(P.data),C.children.forEach(L=>this.inheritParamsAndData(L))}processSegmentGroup(C,b,P){return 0===b.segments.length&&b.hasChildren()?this.processChildren(C,b):this.processSegment(C,b,b.segments,P)}processChildren(C,b){const P=[];for(const G of Object.keys(b.children)){const ee=b.children[G],ae=At(C,G),Fe=this.processSegmentGroup(ae,ee,G);if(null===Fe)return null;P.push(...Fe)}const L=Oc(P);return L.sort((C,b)=>C.value.outlet===ht?-1:b.value.outlet===ht?1:C.value.outlet.localeCompare(b.value.outlet)),L}processSegment(C,b,P,L){for(const G of C){const ee=this.processSegmentAgainstRoute(G,b,P,L);if(null!==ee)return ee}return is(b,P,L)?[]:null}processSegmentAgainstRoute(C,b,P,L){if(C.redirectTo||!yr(C,b,P,L))return null;let G,ee=[],ae=[];if("**"===C.path){const an=P.length>0?ie(P).parameters:{};G=new Qs(P,an,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,to(C),en(C),C.component,C,Za(b),To(b)+P.length,Fc(C))}else{const an=fn(b,C,P);if(!an.matched)return null;ee=an.consumedSegments,ae=P.slice(an.lastChild),G=new Qs(ee,an.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,to(C),en(C),C.component,C,Za(b),To(b)+ee.length,Fc(C))}const Fe=(D=C).children?D.children:D.loadChildren?D._loadedConfig.routes:[],{segmentGroup:mt,slicedSegments:cn}=Bn(b,ee,ae,Fe.filter(an=>void 0===an.redirectTo),this.relativeLinkResolution);var D;if(0===cn.length&&mt.hasChildren()){const an=this.processChildren(Fe,mt);return null===an?null:[new Ai(G,an)]}if(0===Fe.length&&0===cn.length)return[new Ai(G,[])];const Mt=en(C)===L,An=this.processSegment(Fe,mt,cn,Mt?ht:L);return null===An?null:[new Ai(G,An)]}}function Io(D){const C=D.value.routeConfig;return C&&""===C.path&&void 0===C.redirectTo}function Oc(D){const C=[],b=new Set;for(const P of D){if(!Io(P)){C.push(P);continue}const L=C.find(G=>P.value.routeConfig===G.value.routeConfig);void 0!==L?(L.children.push(...P.children),b.add(L)):C.push(P)}for(const P of b){const L=Oc(P.children);C.push(new Ai(P.value,L))}return C.filter(P=>!b.has(P))}function Za(D){let C=D;for(;C._sourceSegment;)C=C._sourceSegment;return C}function To(D){let C=D,b=C._segmentIndexShift?C._segmentIndexShift:0;for(;C._sourceSegment;)C=C._sourceSegment,b+=C._segmentIndexShift?C._segmentIndexShift:0;return b-1}function to(D){return D.data||{}}function Fc(D){return D.resolve||{}}function Zo(D){return(0,rr.w)(C=>{const b=D(C);return b?(0,Be.D)(b).pipe((0,St.U)(()=>C)):(0,nt.of)(C)})}class Yn extends class{shouldDetach(C){return!1}store(C,b){}shouldAttach(C){return!1}retrieve(C){return null}shouldReuseRoute(C,b){return C.routeConfig===b.routeConfig}}{}const Ya=new A.OlP("ROUTES");class Vu{constructor(C,b,P,L){this.loader=C,this.compiler=b,this.onLoadStartListener=P,this.onLoadEndListener=L}load(C,b){if(b._loader$)return b._loader$;this.onLoadStartListener&&this.onLoadStartListener(b);const L=this.loadModuleFactory(b.loadChildren).pipe((0,St.U)(G=>{this.onLoadEndListener&&this.onLoadEndListener(b);const ee=G.create(C);return new $o(wn(ee.injector.get(Ya,void 0,A.XFs.Self|A.XFs.Optional)).map(It),ee)}),Qe(G=>{throw b._loader$=void 0,G}));return b._loader$=new jt.c(L,()=>new z.xQ).pipe((0,tt.x)()),b._loader$}loadModuleFactory(C){return"string"==typeof C?(0,Be.D)(this.loader.load(C)):Ne(C()).pipe((0,gn.zg)(b=>b instanceof A.YKP?(0,nt.of)(b):(0,Be.D)(this.compiler.compileModuleAsync(b))))}}class no{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Do,this.attachRef=null}}class Do{constructor(){this.contexts=new Map}onChildOutletCreated(C,b){const P=this.getOrCreateContext(C);P.outlet=b,this.contexts.set(C,P)}onChildOutletDestroyed(C){const b=this.getContext(C);b&&(b.outlet=null,b.attachRef=null)}onOutletDeactivated(){const C=this.contexts;return this.contexts=new Map,C}onOutletReAttached(C){this.contexts=C}getOrCreateContext(C){let b=this.getContext(C);return b||(b=new no,this.contexts.set(C,b)),b}getContext(C){return this.contexts.get(C)||null}}class su{shouldProcessUrl(C){return!0}extract(C){return C}merge(C,b){return C}}function Ls(D){throw D}function Qa(D,C,b){return C.parse("/")}function Gr(D,C){return(0,nt.of)(null)}const Yo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ao={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Mr=(()=>{class D{constructor(b,P,L,G,ee,ae,Fe,mt){this.rootComponentType=b,this.urlSerializer=P,this.rootContexts=L,this.location=G,this.config=mt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new z.xQ,this.errorHandler=Ls,this.malformedUriErrorHandler=Qa,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Gr,afterPreactivation:Gr},this.urlHandlingStrategy=new su,this.routeReuseStrategy=new Yn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=ee.get(A.h0i),this.console=ee.get(A.c2e);const An=ee.get(A.R0b);this.isNgZoneEnabled=An instanceof A.R0b&&A.R0b.isInAngularZone(),this.resetConfig(mt),this.currentUrlTree=new ai(new Nt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Vu(ae,Fe,an=>this.triggerEvent(new ot(an)),an=>this.triggerEvent(new at(an))),this.routerState=er(this.currentUrlTree,this.rootComponentType),this.transitions=new he({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var b;return null===(b=this.location.getState())||void 0===b?void 0:b.\u0275routerPageId}setupNavigations(b){const P=this.events;return b.pipe((0,Ct.h)(L=>0!==L.id),(0,St.U)(L=>Object.assign(Object.assign({},L),{extractedUrl:this.urlHandlingStrategy.extract(L.rawUrl)})),(0,rr.w)(L=>{let G=!1,ee=!1;return(0,nt.of)(L).pipe((0,kn.b)(ae=>{this.currentNavigation={id:ae.id,initialUrl:ae.currentRawUrl,extractedUrl:ae.extractedUrl,trigger:ae.source,extras:ae.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,rr.w)(ae=>{const Fe=this.browserUrlTree.toString(),mt=!this.navigated||ae.extractedUrl.toString()!==Fe||Fe!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||mt)&&this.urlHandlingStrategy.shouldProcessUrl(ae.rawUrl))return Ds(ae.source)&&(this.browserUrlTree=ae.extractedUrl),(0,nt.of)(ae).pipe((0,rr.w)(Mt=>{const An=this.transitions.getValue();return P.next(new Dn(Mt.id,this.serializeUrl(Mt.extractedUrl),Mt.source,Mt.restoredState)),An!==this.transitions.getValue()?$e.E:Promise.resolve(Mt)}),function(D,C,b,P){return(0,rr.w)(L=>function(D,C,b,P,L){return new Go(D,C,b,P,L).apply()}(D,C,b,L.extractedUrl,P).pipe((0,St.U)(G=>Object.assign(Object.assign({},L),{urlAfterRedirects:G}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,kn.b)(Mt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Mt.urlAfterRedirects})}),function(D,C,b,P,L){return(0,gn.zg)(G=>function(D,C,b,P,L="emptyOnly",G="legacy"){try{const ee=new Fu(D,C,b,P,L,G).recognize();return null===ee?Mc(new gs):(0,nt.of)(ee)}catch(ee){return Mc(ee)}}(D,C,G.urlAfterRedirects,b(G.urlAfterRedirects),P,L).pipe((0,St.U)(ee=>Object.assign(Object.assign({},G),{targetSnapshot:ee}))))}(this.rootComponentType,this.config,Mt=>this.serializeUrl(Mt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,kn.b)(Mt=>{"eager"===this.urlUpdateStrategy&&(Mt.extras.skipLocationChange||this.setBrowserUrl(Mt.urlAfterRedirects,Mt),this.browserUrlTree=Mt.urlAfterRedirects);const An=new X(Mt.id,this.serializeUrl(Mt.extractedUrl),this.serializeUrl(Mt.urlAfterRedirects),Mt.targetSnapshot);P.next(An)}));if(mt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:An,extractedUrl:an,source:Pi,restoredState:Jr,extras:Er}=ae,Qo=new Dn(An,this.serializeUrl(an),Pi,Jr);P.next(Qo);const Xr=er(an,this.rootComponentType).snapshot;return(0,nt.of)(Object.assign(Object.assign({},ae),{targetSnapshot:Xr,urlAfterRedirects:an,extras:Object.assign(Object.assign({},Er),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=ae.rawUrl,this.browserUrlTree=ae.urlAfterRedirects,ae.resolve(null),$e.E}),Zo(ae=>{const{targetSnapshot:Fe,id:mt,extractedUrl:cn,rawUrl:Mt,extras:{skipLocationChange:An,replaceUrl:an}}=ae;return this.hooks.beforePreactivation(Fe,{navigationId:mt,appliedUrlTree:cn,rawUrlTree:Mt,skipLocationChange:!!An,replaceUrl:!!an})}),(0,kn.b)(ae=>{const Fe=new de(ae.id,this.serializeUrl(ae.extractedUrl),this.serializeUrl(ae.urlAfterRedirects),ae.targetSnapshot);this.triggerEvent(Fe)}),(0,St.U)(ae=>Object.assign(Object.assign({},ae),{guards:En(ae.targetSnapshot,ae.currentSnapshot,this.rootContexts)})),function(D,C){return(0,gn.zg)(b=>{const{targetSnapshot:P,currentSnapshot:L,guards:{canActivateChecks:G,canDeactivateChecks:ee}}=b;return 0===ee.length&&0===G.length?(0,nt.of)(Object.assign(Object.assign({},b),{guardsResult:!0})):function(D,C,b,P){return(0,Be.D)(D).pipe((0,gn.zg)(L=>function(D,C,b,P,L){const G=C&&C.routeConfig?C.routeConfig.canDeactivate:null;if(!G||0===G.length)return(0,nt.of)(!0);const ee=G.map(ae=>{const Fe=tr(ae,C,L);let mt;if(function(D){return D&&yi(D.canDeactivate)}(Fe))mt=Ne(Fe.canDeactivate(D,C,b,P));else{if(!yi(Fe))throw new Error("Invalid CanDeactivate guard");mt=Ne(Fe(D,C,b,P))}return mt.pipe((0,Yr.P)())});return(0,nt.of)(ee).pipe(N())}(L.component,L.route,b,C,P)),(0,Yr.P)(L=>!0!==L,!0))}(ee,P,L,D).pipe((0,gn.zg)(ae=>ae&&function(D){return"boolean"==typeof D}(ae)?function(D,C,b,P){return(0,Be.D)(C).pipe((0,Kn.b)(L=>(0,tn.z)(function(D,C){return null!==D&&C&&C(new Lt(D)),(0,nt.of)(!0)}(L.route.parent,P),function(D,C){return null!==D&&C&&C(new Tr(D)),(0,nt.of)(!0)}(L.route,P),function(D,C,b){const P=C[C.length-1],G=C.slice(0,C.length-1).reverse().map(ee=>function(D){const C=D.routeConfig?D.routeConfig.canActivateChild:null;return C&&0!==C.length?{node:D,guards:C}:null}(ee)).filter(ee=>null!==ee).map(ee=>bt(()=>{const ae=ee.guards.map(Fe=>{const mt=tr(Fe,ee.node,b);let cn;if(function(D){return D&&yi(D.canActivateChild)}(mt))cn=Ne(mt.canActivateChild(P,D));else{if(!yi(mt))throw new Error("Invalid CanActivateChild guard");cn=Ne(mt(P,D))}return cn.pipe((0,Yr.P)())});return(0,nt.of)(ae).pipe(N())}));return(0,nt.of)(G).pipe(N())}(D,L.path,b),function(D,C,b){const P=C.routeConfig?C.routeConfig.canActivate:null;if(!P||0===P.length)return(0,nt.of)(!0);const L=P.map(G=>bt(()=>{const ee=tr(G,C,b);let ae;if(function(D){return D&&yi(D.canActivate)}(ee))ae=Ne(ee.canActivate(C,D));else{if(!yi(ee))throw new Error("Invalid CanActivate guard");ae=Ne(ee(C,D))}return ae.pipe((0,Yr.P)())}));return(0,nt.of)(L).pipe(N())}(D,L.route,b))),(0,Yr.P)(L=>!0!==L,!0))}(P,G,D,C):(0,nt.of)(ae)),(0,St.U)(ae=>Object.assign(Object.assign({},b),{guardsResult:ae})))})}(this.ngModule.injector,ae=>this.triggerEvent(ae)),(0,kn.b)(ae=>{if(ji(ae.guardsResult)){const mt=zn(`Redirecting to "${this.serializeUrl(ae.guardsResult)}"`);throw mt.url=ae.guardsResult,mt}const Fe=new Ze(ae.id,this.serializeUrl(ae.extractedUrl),this.serializeUrl(ae.urlAfterRedirects),ae.targetSnapshot,!!ae.guardsResult);this.triggerEvent(Fe)}),(0,Ct.h)(ae=>!!ae.guardsResult||(this.restoreHistory(ae),this.cancelNavigationTransition(ae,""),!1)),Zo(ae=>{if(ae.guards.canActivateChecks.length)return(0,nt.of)(ae).pipe((0,kn.b)(Fe=>{const mt=new We(Fe.id,this.serializeUrl(Fe.extractedUrl),this.serializeUrl(Fe.urlAfterRedirects),Fe.targetSnapshot);this.triggerEvent(mt)}),(0,rr.w)(Fe=>{let mt=!1;return(0,nt.of)(Fe).pipe(function(D,C){return(0,gn.zg)(b=>{const{targetSnapshot:P,guards:{canActivateChecks:L}}=b;if(!L.length)return(0,nt.of)(b);let G=0;return(0,Be.D)(L).pipe((0,Kn.b)(ee=>function(D,C,b,P){return function(D,C,b,P){const L=Object.keys(D);if(0===L.length)return(0,nt.of)({});const G={};return(0,Be.D)(L).pipe((0,gn.zg)(ee=>function(D,C,b,P){const L=tr(D,C,P);return Ne(L.resolve?L.resolve(C,b):L(C,b))}(D[ee],C,b,P).pipe((0,kn.b)(ae=>{G[ee]=ae}))),dt(1),(0,gn.zg)(()=>Object.keys(G).length===L.length?(0,nt.of)(G):$e.E))}(D._resolve,D,C,P).pipe((0,St.U)(G=>(D._resolvedData=G,D.data=Object.assign(Object.assign({},D.data),Si(D,b).resolve),null)))}(ee.route,P,D,C)),(0,kn.b)(()=>G++),dt(1),(0,gn.zg)(ee=>G===L.length?(0,nt.of)(b):$e.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,kn.b)({next:()=>mt=!0,complete:()=>{mt||(this.restoreHistory(Fe),this.cancelNavigationTransition(Fe,"At least one route resolver didn't emit any value."))}}))}),(0,kn.b)(Fe=>{const mt=new wt(Fe.id,this.serializeUrl(Fe.extractedUrl),this.serializeUrl(Fe.urlAfterRedirects),Fe.targetSnapshot);this.triggerEvent(mt)}))}),Zo(ae=>{const{targetSnapshot:Fe,id:mt,extractedUrl:cn,rawUrl:Mt,extras:{skipLocationChange:An,replaceUrl:an}}=ae;return this.hooks.afterPreactivation(Fe,{navigationId:mt,appliedUrlTree:cn,rawUrlTree:Mt,skipLocationChange:!!An,replaceUrl:!!an})}),(0,St.U)(ae=>{const Fe=function(D,C,b){const P=Ri(D,C._root,b?b._root:void 0);return new es(P,C)}(this.routeReuseStrategy,ae.targetSnapshot,ae.currentRouterState);return Object.assign(Object.assign({},ae),{targetRouterState:Fe})}),(0,kn.b)(ae=>{this.currentUrlTree=ae.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ae.urlAfterRedirects,ae.rawUrl),this.routerState=ae.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ae.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ae),this.browserUrlTree=ae.urlAfterRedirects)}),((D,C,b)=>(0,St.U)(P=>(new Eo(C,P.targetRouterState,P.currentRouterState,b).activate(D),P)))(this.rootContexts,this.routeReuseStrategy,ae=>this.triggerEvent(ae)),(0,kn.b)({next(){G=!0},complete(){G=!0}}),function(D){return C=>C.lift(new Cs(D))}(()=>{var ae;if(!G&&!ee){const Fe=`Navigation ID ${L.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(L),this.cancelNavigationTransition(L,Fe)):this.cancelNavigationTransition(L,Fe)}(null===(ae=this.currentNavigation)||void 0===ae?void 0:ae.id)===L.id&&(this.currentNavigation=null)}),Qe(ae=>{if(ee=!0,function(D){return D&&D[vt]}(ae)){const Fe=ji(ae.url);Fe||(this.navigated=!0,this.restoreHistory(L,!0));const mt=new hs(L.id,this.serializeUrl(L.extractedUrl),ae.message);P.next(mt),Fe?setTimeout(()=>{const cn=this.urlHandlingStrategy.merge(ae.url,this.rawUrlTree),Mt={skipLocationChange:L.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ds(L.source)};this.scheduleNavigation(cn,"imperative",null,Mt,{resolve:L.resolve,reject:L.reject,promise:L.promise})},0):L.resolve(!1)}else{this.restoreHistory(L,!0);const Fe=new Le(L.id,this.serializeUrl(L.extractedUrl),ae);P.next(Fe);try{L.resolve(this.errorHandler(ae))}catch(mt){L.reject(mt)}}return $e.E}))}))}resetRootComponentType(b){this.rootComponentType=b,this.routerState.root.component=this.rootComponentType}getTransition(){const b=this.transitions.value;return b.urlAfterRedirects=this.browserUrlTree,b}setTransition(b){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),b))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(b=>{const P=this.extractLocationChangeInfoFromEvent(b);this.shouldScheduleNavigation(this.lastLocationChangeInfo,P)&&setTimeout(()=>{const{source:L,state:G,urlTree:ee}=P,ae={replaceUrl:!0};if(G){const Fe=Object.assign({},G);delete Fe.navigationId,delete Fe.\u0275routerPageId,0!==Object.keys(Fe).length&&(ae.state=Fe)}this.scheduleNavigation(ee,L,G,ae)},0),this.lastLocationChangeInfo=P}))}extractLocationChangeInfoFromEvent(b){var P;return{source:"popstate"===b.type?"popstate":"hashchange",urlTree:this.parseUrl(b.url),state:(null===(P=b.state)||void 0===P?void 0:P.navigationId)?b.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(b,P){if(!b)return!0;const L=P.urlTree.toString()===b.urlTree.toString();return P.transitionId!==b.transitionId||!L||!("hashchange"===P.source&&"popstate"===b.source||"popstate"===P.source&&"hashchange"===b.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(b){this.events.next(b)}resetConfig(b){se(b),this.config=b.map(It),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(b,P={}){const{relativeTo:L,queryParams:G,fragment:ee,queryParamsHandling:ae,preserveFragment:Fe}=P,mt=L||this.routerState.root,cn=Fe?this.currentUrlTree.fragment:ee;let Mt=null;switch(ae){case"merge":Mt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),G);break;case"preserve":Mt=this.currentUrlTree.queryParams;break;default:Mt=G||null}return null!==Mt&&(Mt=this.removeEmptyProps(Mt)),function(D,C,b,P,L){if(0===b.length)return Zt(C.root,C.root,C,P,L);const G=function(D){if("string"==typeof D[0]&&1===D.length&&"/"===D[0])return new Js(!0,0,D);let C=0,b=!1;const P=D.reduce((L,G,ee)=>{if("object"==typeof G&&null!=G){if(G.outlets){const ae={};return oe(G.outlets,(Fe,mt)=>{ae[mt]="string"==typeof Fe?Fe.split("/"):Fe}),[...L,{outlets:ae}]}if(G.segmentPath)return[...L,G.segmentPath]}return"string"!=typeof G?[...L,G]:0===ee?(G.split("/").forEach((ae,Fe)=>{0==Fe&&"."===ae||(0==Fe&&""===ae?b=!0:".."===ae?C++:""!=ae&&L.push(ae))}),L):[...L,G]},[]);return new Js(b,C,P)}(b);if(G.toRoot())return Zt(C.root,new Nt([],{}),C,P,L);const ee=function(D,C,b){if(D.isAbsolute)return new ca(C.root,!0,0);if(-1===b.snapshot._lastPathIndex){const G=b.snapshot._urlSegment;return new ca(G,G===C.root,0)}const P=Dt(D.commands[0])?0:1;return function(D,C,b){let P=D,L=C,G=b;for(;G>L;){if(G-=L,P=P.parent,!P)throw new Error("Invalid number of '../'");L=P.segments.length}return new ca(P,!1,L-G)}(b.snapshot._urlSegment,b.snapshot._lastPathIndex+P,D.numberOfDoubleDots)}(G,C,D),ae=ee.processChildren?vr(ee.segmentGroup,ee.index,G.commands):wo(ee.segmentGroup,ee.index,G.commands);return Zt(ee.segmentGroup,ae,C,P,L)}(mt,this.currentUrlTree,b,Mt,null!=cn?cn:null)}navigateByUrl(b,P={skipLocationChange:!1}){const L=ji(b)?b:this.parseUrl(b),G=this.urlHandlingStrategy.merge(L,this.rawUrlTree);return this.scheduleNavigation(G,"imperative",null,P)}navigate(b,P={skipLocationChange:!1}){return function(D){for(let C=0;C<D.length;C++){const b=D[C];if(null==b)throw new Error(`The requested path contains ${b} segment at index ${C}`)}}(b),this.navigateByUrl(this.createUrlTree(b,P),P)}serializeUrl(b){return this.urlSerializer.serialize(b)}parseUrl(b){let P;try{P=this.urlSerializer.parse(b)}catch(L){P=this.malformedUriErrorHandler(L,this.urlSerializer,b)}return P}isActive(b,P){let L;if(L=!0===P?Object.assign({},Yo):!1===P?Object.assign({},Ao):P,ji(b))return Nn(this.currentUrlTree,b,L);const G=this.parseUrl(b);return Nn(this.currentUrlTree,G,L)}removeEmptyProps(b){return Object.keys(b).reduce((P,L)=>{const G=b[L];return null!=G&&(P[L]=G),P},{})}processNavigations(){this.navigations.subscribe(b=>{this.navigated=!0,this.lastSuccessfulId=b.id,this.currentPageId=b.targetPageId,this.events.next(new Fn(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,b.resolve(!0)},b=>{this.console.warn(`Unhandled Navigation Error: ${b}`)})}scheduleNavigation(b,P,L,G,ee){var ae,Fe;if(this.disposed)return Promise.resolve(!1);const mt=this.getTransition(),cn=Ds(P)&&mt&&!Ds(mt.source),an=(this.lastSuccessfulId===mt.id||this.currentNavigation?mt.rawUrl:mt.urlAfterRedirects).toString()===b.toString();if(cn&&an)return Promise.resolve(!0);let Pi,Jr,Er;ee?(Pi=ee.resolve,Jr=ee.reject,Er=ee.promise):Er=new Promise((xo,cu)=>{Pi=xo,Jr=cu});const Qo=++this.navigationId;let Xr;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(L=this.location.getState()),Xr=L&&L.\u0275routerPageId?L.\u0275routerPageId:G.replaceUrl||G.skipLocationChange?null!==(ae=this.browserPageId)&&void 0!==ae?ae:0:(null!==(Fe=this.browserPageId)&&void 0!==Fe?Fe:0)+1):Xr=0,this.setTransition({id:Qo,targetPageId:Xr,source:P,restoredState:L,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:b,extras:G,resolve:Pi,reject:Jr,promise:Er,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Er.catch(xo=>Promise.reject(xo))}setBrowserUrl(b,P){const L=this.urlSerializer.serialize(b),G=Object.assign(Object.assign({},P.extras.state),this.generateNgRouterState(P.id,P.targetPageId));this.location.isCurrentPathEqualTo(L)||P.extras.replaceUrl?this.location.replaceState(L,"",G):this.location.go(L,"",G)}restoreHistory(b,P=!1){var L,G;if("computed"===this.canceledNavigationResolution){const ee=this.currentPageId-b.targetPageId;"popstate"!==b.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(L=this.currentNavigation)||void 0===L?void 0:L.finalUrl)||0===ee?this.currentUrlTree===(null===(G=this.currentNavigation)||void 0===G?void 0:G.finalUrl)&&0===ee&&(this.resetState(b),this.browserUrlTree=b.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ee)}else"replace"===this.canceledNavigationResolution&&(P&&this.resetState(b),this.resetUrlToCurrentUrlTree())}resetState(b){this.routerState=b.currentRouterState,this.currentUrlTree=b.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,b.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(b,P){const L=new hs(b.id,this.serializeUrl(b.extractedUrl),P);this.triggerEvent(L),b.resolve(!1)}generateNgRouterState(b,P){return"computed"===this.canceledNavigationResolution?{navigationId:b,\u0275routerPageId:P}:{navigationId:b}}}return D.\u0275fac=function(b){return new(b||D)(A.LFG(A.DyG),A.LFG(Di),A.LFG(Do),A.LFG(R.Ye),A.LFG(A.zs3),A.LFG(A.v3s),A.LFG(A.Sil),A.LFG(void 0))},D.\u0275prov=A.Yz7({token:D,factory:D.\u0275fac}),D})();function Ds(D){return"imperative"!==D}let Ja=(()=>{class D{constructor(b,P,L,G,ee){this.router=b,this.route=P,this.commands=[],this.onChanges=new z.xQ,null==L&&G.setAttribute(ee.nativeElement,"tabindex","0")}ngOnChanges(b){this.onChanges.next(this)}set routerLink(b){this.commands=null!=b?Array.isArray(b)?b:[b]:[]}onClick(){const b={skipLocationChange:nr(this.skipLocationChange),replaceUrl:nr(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,b),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:nr(this.preserveFragment)})}}return D.\u0275fac=function(b){return new(b||D)(A.Y36(Mr),A.Y36(Dr),A.$8M("tabindex"),A.Y36(A.Qsj),A.Y36(A.SBq))},D.\u0275dir=A.lG2({type:D,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(b,P){1&b&&A.NdJ("click",function(){return P.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[A.TTD]}),D})(),Vc=(()=>{class D{constructor(b,P,L){this.router=b,this.route=P,this.locationStrategy=L,this.commands=[],this.onChanges=new z.xQ,this.subscription=b.events.subscribe(G=>{G instanceof Fn&&this.updateTargetUrlAndHref()})}set routerLink(b){this.commands=null!=b?Array.isArray(b)?b:[b]:[]}ngOnChanges(b){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(b,P,L,G,ee){if(0!==b||P||L||G||ee||"string"==typeof this.target&&"_self"!=this.target)return!0;const ae={skipLocationChange:nr(this.skipLocationChange),replaceUrl:nr(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,ae),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:nr(this.preserveFragment)})}}return D.\u0275fac=function(b){return new(b||D)(A.Y36(Mr),A.Y36(Dr),A.Y36(R.S$))},D.\u0275dir=A.lG2({type:D,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(b,P){1&b&&A.NdJ("click",function(G){return P.onClick(G.button,G.ctrlKey,G.shiftKey,G.altKey,G.metaKey)}),2&b&&(A.Ikx("href",P.href,A.LSH),A.uIk("target",P.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[A.TTD]}),D})();function nr(D){return""===D||!!D}let _a=(()=>{class D{constructor(b,P,L,G,ee,ae){this.router=b,this.element=P,this.renderer=L,this.cdr=G,this.link=ee,this.linkWithHref=ae,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=b.events.subscribe(Fe=>{Fe instanceof Fn&&this.update()})}ngAfterContentInit(){(0,nt.of)(this.links.changes,this.linksWithHrefs.changes,(0,nt.of)(null)).pipe((0,Rr.J)()).subscribe(b=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var b;null===(b=this.linkInputChangesSubscription)||void 0===b||b.unsubscribe();const P=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(L=>!!L).map(L=>L.onChanges);this.linkInputChangesSubscription=(0,Be.D)(P).pipe((0,Rr.J)()).subscribe(L=>{this.isActive!==this.isLinkActive(this.router)(L)&&this.update()})}set routerLinkActive(b){const P=Array.isArray(b)?b:b.split(" ");this.classes=P.filter(L=>!!L)}ngOnChanges(b){this.update()}ngOnDestroy(){var b;this.routerEventsSubscription.unsubscribe(),null===(b=this.linkInputChangesSubscription)||void 0===b||b.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const b=this.hasActiveLinks();this.isActive!==b&&(this.isActive=b,this.cdr.markForCheck(),this.classes.forEach(P=>{b?this.renderer.addClass(this.element.nativeElement,P):this.renderer.removeClass(this.element.nativeElement,P)}))})}isLinkActive(b){const P=function(D){return!!D.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return L=>b.isActive(L.urlTree,P)}hasActiveLinks(){const b=this.isLinkActive(this.router);return this.link&&b(this.link)||this.linkWithHref&&b(this.linkWithHref)||this.links.some(b)||this.linksWithHrefs.some(b)}}return D.\u0275fac=function(b){return new(b||D)(A.Y36(Mr),A.Y36(A.SBq),A.Y36(A.Qsj),A.Y36(A.sBO),A.Y36(Ja,8),A.Y36(Vc,8))},D.\u0275dir=A.lG2({type:D,selectors:[["","routerLinkActive",""]],contentQueries:function(b,P,L){if(1&b&&(A.Suo(L,Ja,5),A.Suo(L,Vc,5)),2&b){let G;A.iGM(G=A.CRH())&&(P.links=G),A.iGM(G=A.CRH())&&(P.linksWithHrefs=G)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[A.TTD]}),D})(),Hc=(()=>{class D{constructor(b,P,L,G,ee){this.parentContexts=b,this.location=P,this.resolver=L,this.changeDetector=ee,this.activated=null,this._activatedRoute=null,this.activateEvents=new A.vpe,this.deactivateEvents=new A.vpe,this.name=G||ht,b.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const b=this.parentContexts.getContext(this.name);b&&b.route&&(b.attachRef?this.attach(b.attachRef,b.route):this.activateWith(b.route,b.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const b=this.activated;return this.activated=null,this._activatedRoute=null,b}attach(b,P){this.activated=b,this._activatedRoute=P,this.location.insert(b.hostView)}deactivate(){if(this.activated){const b=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(b)}}activateWith(b,P){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=b;const ee=(P=P||this.resolver).resolveComponentFactory(b._futureSnapshot.routeConfig.component),ae=this.parentContexts.getOrCreateContext(this.name).children,Fe=new Uc(b,ae,this.location.injector);this.activated=this.location.createComponent(ee,this.location.length,Fe),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return D.\u0275fac=function(b){return new(b||D)(A.Y36(Do),A.Y36(A.s_b),A.Y36(A._Vd),A.$8M("name"),A.Y36(A.sBO))},D.\u0275dir=A.lG2({type:D,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),D})();class Uc{constructor(C,b,P){this.route=C,this.childContexts=b,this.parent=P}get(C,b){return C===Dr?this.route:C===Do?this.childContexts:this.parent.get(C,b)}}class Xa{}class Bc{preload(C,b){return(0,nt.of)(null)}}let ec=(()=>{class D{constructor(b,P,L,G,ee){this.router=b,this.injector=G,this.preloadingStrategy=ee,this.loader=new Vu(P,L,mt=>b.triggerEvent(new ot(mt)),mt=>b.triggerEvent(new at(mt)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ct.h)(b=>b instanceof Fn),(0,Kn.b)(()=>this.preload())).subscribe(()=>{})}preload(){const b=this.injector.get(A.h0i);return this.processRoutes(b,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(b,P){const L=[];for(const G of P)if(G.loadChildren&&!G.canLoad&&G._loadedConfig){const ee=G._loadedConfig;L.push(this.processRoutes(ee.module,ee.routes))}else G.loadChildren&&!G.canLoad?L.push(this.preloadConfig(b,G)):G.children&&L.push(this.processRoutes(b,G.children));return(0,Be.D)(L).pipe((0,Rr.J)(),(0,St.U)(G=>{}))}preloadConfig(b,P){return this.preloadingStrategy.preload(P,()=>(P._loadedConfig?(0,nt.of)(P._loadedConfig):this.loader.load(b.injector,P)).pipe((0,gn.zg)(G=>(P._loadedConfig=G,this.processRoutes(G.module,G.routes)))))}}return D.\u0275fac=function(b){return new(b||D)(A.LFG(Mr),A.LFG(A.v3s),A.LFG(A.Sil),A.LFG(A.zs3),A.LFG(Xa))},D.\u0275prov=A.Yz7({token:D,factory:D.\u0275fac}),D})(),Vs=(()=>{class D{constructor(b,P,L={}){this.router=b,this.viewportScroller=P,this.options=L,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},L.scrollPositionRestoration=L.scrollPositionRestoration||"disabled",L.anchorScrolling=L.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(b=>{b instanceof Dn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=b.navigationTrigger,this.restoredId=b.restoredState?b.restoredState.navigationId:0):b instanceof Fn&&(this.lastId=b.id,this.scheduleScrollEvent(b,this.router.parseUrl(b.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(b=>{b instanceof un&&(b.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(b.position):b.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(b.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(b,P){this.router.triggerEvent(new un(b,"popstate"===this.lastSource?this.store[this.restoredId]:null,P))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return D.\u0275fac=function(b){return new(b||D)(A.LFG(Mr),A.LFG(R.EM),A.LFG(void 0))},D.\u0275prov=A.Yz7({token:D,factory:D.\u0275fac}),D})();const us=new A.OlP("ROUTER_CONFIGURATION"),qi=new A.OlP("ROUTER_FORROOT_GUARD"),va=[R.Ye,{provide:Di,useClass:ft},{provide:Mr,useFactory:function(D,C,b,P,L,G,ee,ae={},Fe,mt){const cn=new Mr(null,D,C,b,P,L,G,wn(ee));return Fe&&(cn.urlHandlingStrategy=Fe),mt&&(cn.routeReuseStrategy=mt),function(D,C){D.errorHandler&&(C.errorHandler=D.errorHandler),D.malformedUriErrorHandler&&(C.malformedUriErrorHandler=D.malformedUriErrorHandler),D.onSameUrlNavigation&&(C.onSameUrlNavigation=D.onSameUrlNavigation),D.paramsInheritanceStrategy&&(C.paramsInheritanceStrategy=D.paramsInheritanceStrategy),D.relativeLinkResolution&&(C.relativeLinkResolution=D.relativeLinkResolution),D.urlUpdateStrategy&&(C.urlUpdateStrategy=D.urlUpdateStrategy)}(ae,cn),ae.enableTracing&&cn.events.subscribe(Mt=>{var An,an;null===(An=console.group)||void 0===An||An.call(console,`Router Event: ${Mt.constructor.name}`),console.log(Mt.toString()),console.log(Mt),null===(an=console.groupEnd)||void 0===an||an.call(console)}),cn},deps:[Di,Do,R.Ye,A.zs3,A.v3s,A.Sil,Ya,us,[class{},new A.FiY],[class{},new A.FiY]]},Do,{provide:Dr,useFactory:function(D){return D.routerState.root},deps:[Mr]},{provide:A.v3s,useClass:A.EAV},ec,Bc,class{preload(C,b){return b().pipe(Qe(()=>(0,nt.of)(null)))}},{provide:us,useValue:{enableTracing:!1}}];function ro(){return new A.PXZ("Router",Mr)}let tc=(()=>{class D{constructor(b,P){}static forRoot(b,P){return{ngModule:D,providers:[va,Gc(b),{provide:qi,useFactory:ms,deps:[[Mr,new A.FiY,new A.tp0]]},{provide:us,useValue:P||{}},{provide:R.S$,useFactory:So,deps:[R.lw,[new A.tBr(R.mr),new A.FiY],us]},{provide:Vs,useFactory:nc,deps:[Mr,R.EM,us]},{provide:Xa,useExisting:P&&P.preloadingStrategy?P.preloadingStrategy:Bc},{provide:A.PXZ,multi:!0,useFactory:ro},[Ca,{provide:A.ip1,multi:!0,useFactory:Ia,deps:[Ca]},{provide:Ki,useFactory:As,deps:[Ca]},{provide:A.tb,multi:!0,useExisting:Ki}]]}}static forChild(b){return{ngModule:D,providers:[Gc(b)]}}}return D.\u0275fac=function(b){return new(b||D)(A.LFG(qi,8),A.LFG(Mr,8))},D.\u0275mod=A.oAB({type:D}),D.\u0275inj=A.cJS({}),D})();function nc(D,C,b){return b.scrollOffset&&C.setOffset(b.scrollOffset),new Vs(D,C,b)}function So(D,C,b={}){return b.useHash?new R.Do(D,C):new R.b0(D,C)}function ms(D){return"guarded"}function Gc(D){return[{provide:A.deG,multi:!0,useValue:D},{provide:Ya,multi:!0,useValue:D}]}let Ca=(()=>{class D{constructor(b){this.injector=b,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new z.xQ}appInitializer(){return this.injector.get(R.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let P=null;const L=new Promise(ae=>P=ae),G=this.injector.get(Mr),ee=this.injector.get(us);return"disabled"===ee.initialNavigation?(G.setUpLocationChangeListener(),P(!0)):"enabled"===ee.initialNavigation||"enabledBlocking"===ee.initialNavigation?(G.hooks.afterPreactivation=()=>this.initNavigation?(0,nt.of)(null):(this.initNavigation=!0,P(!0),this.resultOfPreactivationDone),G.initialNavigation()):P(!0),L})}bootstrapListener(b){const P=this.injector.get(us),L=this.injector.get(ec),G=this.injector.get(Vs),ee=this.injector.get(Mr),ae=this.injector.get(A.z2F);b===ae.components[0]&&(("enabledNonBlocking"===P.initialNavigation||void 0===P.initialNavigation)&&ee.initialNavigation(),L.setUpPreloading(),G.init(),ee.resetRootComponentType(ae.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return D.\u0275fac=function(b){return new(b||D)(A.LFG(A.zs3))},D.\u0275prov=A.Yz7({token:D,factory:D.\u0275fac}),D})();function Ia(D){return D.appInitializer.bind(D)}function As(D){return D.bootstrapListener.bind(D)}const Ki=new A.OlP("Router Initializer")},3854:(ut,Ie,j)=>{"use strict";j.d(Ie,{BH:()=>Vr,LL:()=>Ci,ZR:()=>Zr,zI:()=>Ve,US:()=>le,tV:()=>fe,L:()=>ue,$s:()=>et,r3:()=>gn,Sg:()=>Vo,ne:()=>Ze,vZ:()=>Sn,ZB:()=>Q,pd:()=>X,aH:()=>Lr,Pz:()=>oi,m9:()=>wn,z$:()=>me,jU:()=>Oe,ru:()=>xe,xb:()=>tt,w1:()=>$e,hl:()=>tn,uI:()=>Re,UG:()=>He,b$:()=>Ye,G6:()=>ct,xO:()=>hs,zd:()=>Le,eu:()=>jt});const _e=function(ie){const te=[];let oe=0;for(let Ne=0;Ne<ie.length;Ne++){let De=ie.charCodeAt(Ne);De<128?te[oe++]=De:De<2048?(te[oe++]=De>>6|192,te[oe++]=63&De|128):55296==(64512&De)&&Ne+1<ie.length&&56320==(64512&ie.charCodeAt(Ne+1))?(De=65536+((1023&De)<<10)+(1023&ie.charCodeAt(++Ne)),te[oe++]=De>>18|240,te[oe++]=De>>12&63|128,te[oe++]=De>>6&63|128,te[oe++]=63&De|128):(te[oe++]=De>>12|224,te[oe++]=De>>6&63|128,te[oe++]=63&De|128)}return te},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ie,te){if(!Array.isArray(ie))throw Error("encodeByteArray takes an array as a parameter");this.init_();const oe=te?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ne=[];for(let De=0;De<ie.length;De+=3){const Tt=ie[De],nn=De+1<ie.length,Nn=nn?ie[De+1]:0,jr=De+2<ie.length,Pr=jr?ie[De+2]:0;let Br=(15&Nn)<<2|Pr>>6,Is=63&Pr;jr||(Is=64,nn||(Br=64)),Ne.push(oe[Tt>>2],oe[(3&Tt)<<4|Nn>>4],oe[Br],oe[Is])}return Ne.join("")},encodeString(ie,te){return this.HAS_NATIVE_SUPPORT&&!te?btoa(ie):this.encodeByteArray(_e(ie),te)},decodeString(ie,te){return this.HAS_NATIVE_SUPPORT&&!te?atob(ie):function(ie){const te=[];let oe=0,Ne=0;for(;oe<ie.length;){const De=ie[oe++];if(De<128)te[Ne++]=String.fromCharCode(De);else if(De>191&&De<224){const Tt=ie[oe++];te[Ne++]=String.fromCharCode((31&De)<<6|63&Tt)}else if(De>239&&De<365){const jr=((7&De)<<18|(63&ie[oe++])<<12|(63&ie[oe++])<<6|63&ie[oe++])-65536;te[Ne++]=String.fromCharCode(55296+(jr>>10)),te[Ne++]=String.fromCharCode(56320+(1023&jr))}else{const Tt=ie[oe++],nn=ie[oe++];te[Ne++]=String.fromCharCode((15&De)<<12|(63&Tt)<<6|63&nn)}}return te.join("")}(this.decodeStringToByteArray(ie,te))},decodeStringToByteArray(ie,te){this.init_();const oe=te?this.charToByteMapWebSafe_:this.charToByteMap_,Ne=[];for(let De=0;De<ie.length;){const Tt=oe[ie.charAt(De++)],Nn=De<ie.length?oe[ie.charAt(De)]:0;++De;const Pr=De<ie.length?oe[ie.charAt(De)]:64;++De;const Yt=De<ie.length?oe[ie.charAt(De)]:64;if(++De,null==Tt||null==Nn||null==Pr||null==Yt)throw Error();Ne.push(Tt<<2|Nn>>4),64!==Pr&&(Ne.push(Nn<<4&240|Pr>>2),64!==Yt&&Ne.push(Pr<<6&192|Yt))}return Ne},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ie=0;ie<this.ENCODED_VALS.length;ie++)this.byteToCharMap_[ie]=this.ENCODED_VALS.charAt(ie),this.charToByteMap_[this.byteToCharMap_[ie]]=ie,this.byteToCharMapWebSafe_[ie]=this.ENCODED_VALS_WEBSAFE.charAt(ie),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ie]]=ie,ie>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ie)]=ie,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ie)]=ie)}}},ue=function(ie){return function(ie){const te=_e(ie);return le.encodeByteArray(te,!0)}(ie).replace(/\./g,"")},fe=function(ie){try{return le.decodeString(ie,!0)}catch(te){console.error("base64Decode failed: ",te)}return null};function Q(ie,te){if(!(te instanceof Object))return te;switch(te.constructor){case Date:return new Date(te.getTime());case Object:void 0===ie&&(ie={});break;case Array:ie=[];break;default:return te}for(const oe in te)!te.hasOwnProperty(oe)||!ye(oe)||(ie[oe]=Q(ie[oe],te[oe]));return ie}function ye(ie){return"__proto__"!==ie}function me(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Re(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(me())}function He(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ie){return!1}}function Oe(){return"object"==typeof self&&self.self===self}function xe(){const ie="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ie&&void 0!==ie.id}function Ye(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function $e(){const ie=me();return ie.indexOf("MSIE ")>=0||ie.indexOf("Trident/")>=0}function ct(){return!He()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tn(){return"object"==typeof indexedDB}function jt(){return new Promise((ie,te)=>{try{let oe=!0;const Ne="validate-browser-context-for-indexeddb-analytics-module",De=self.indexedDB.open(Ne);De.onsuccess=()=>{De.result.close(),oe||self.indexedDB.deleteDatabase(Ne),ie(!0)},De.onupgradeneeded=()=>{oe=!1},De.onerror=()=>{var Tt;te((null===(Tt=De.error)||void 0===Tt?void 0:Tt.message)||"")}}catch(oe){te(oe)}})}function Ve(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const $t=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const ie=process.env.__FIREBASE_DEFAULTS__;return ie?JSON.parse(ie):void 0})()||(()=>{if("undefined"==typeof document)return;let ie;try{ie=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(oe){return}const te=ie&&fe(ie[1]);return te&&JSON.parse(te)})()}catch(ie){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ie}`)}},Lr=()=>{var ie;return null===(ie=$t())||void 0===ie?void 0:ie.config},oi=ie=>{var te;return null===(te=$t())||void 0===te?void 0:te[`_${ie}`]};class Vr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((te,oe)=>{this.resolve=te,this.reject=oe})}wrapCallback(te){return(oe,Ne)=>{oe?this.reject(oe):this.resolve(Ne),"function"==typeof te&&(this.promise.catch(()=>{}),1===te.length?te(oe):te(oe,Ne))}}}function Vo(ie,te){if(ie.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ne=te||"demo-project",De=ie.iat||0,Tt=ie.sub||ie.user_id;if(!Tt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const nn=Object.assign({iss:`https://securetoken.google.com/${Ne}`,aud:Ne,iat:De,exp:De+3600,auth_time:De,sub:Tt,user_id:Tt,firebase:{sign_in_provider:"custom",identities:{}}},ie);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(nn)),""].join(".")}class Zr extends Error{constructor(te,oe,Ne){super(oe),this.code=te,this.customData=Ne,this.name="FirebaseError",Object.setPrototypeOf(this,Zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ci.prototype.create)}}class Ci{constructor(te,oe,Ne){this.service=te,this.serviceName=oe,this.errors=Ne}create(te,...oe){const Ne=oe[0]||{},De=`${this.service}/${te}`,Tt=this.errors[te],nn=Tt?function(ie,te){return ie.replace(Jn,(oe,Ne)=>{const De=te[Ne];return null!=De?String(De):`<${Ne}?>`})}(Tt,Ne):"Error";return new Zr(De,`${this.serviceName}: ${nn} (${De}).`,Ne)}}const Jn=/\{\$([^}]+)}/g;function gn(ie,te){return Object.prototype.hasOwnProperty.call(ie,te)}function tt(ie){for(const te in ie)if(Object.prototype.hasOwnProperty.call(ie,te))return!1;return!0}function Sn(ie,te){if(ie===te)return!0;const oe=Object.keys(ie),Ne=Object.keys(te);for(const De of oe){if(!Ne.includes(De))return!1;const Tt=ie[De],nn=te[De];if(Dn(Tt)&&Dn(nn)){if(!Sn(Tt,nn))return!1}else if(Tt!==nn)return!1}for(const De of Ne)if(!oe.includes(De))return!1;return!0}function Dn(ie){return null!==ie&&"object"==typeof ie}function hs(ie){const te=[];for(const[oe,Ne]of Object.entries(ie))Array.isArray(Ne)?Ne.forEach(De=>{te.push(encodeURIComponent(oe)+"="+encodeURIComponent(De))}):te.push(encodeURIComponent(oe)+"="+encodeURIComponent(Ne));return te.length?"&"+te.join("&"):""}function Le(ie){const te={};return ie.replace(/^\?/,"").split("&").forEach(Ne=>{if(Ne){const[De,Tt]=Ne.split("=");te[decodeURIComponent(De)]=decodeURIComponent(Tt)}}),te}function X(ie){const te=ie.indexOf("?");if(!te)return"";const oe=ie.indexOf("#",te);return ie.substring(te,oe>0?oe:void 0)}function Ze(ie,te){const oe=new We(ie,te);return oe.subscribe.bind(oe)}class We{constructor(te,oe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=oe,this.task.then(()=>{te(this)}).catch(Ne=>{this.error(Ne)})}next(te){this.forEachObserver(oe=>{oe.next(te)})}error(te){this.forEachObserver(oe=>{oe.error(te)}),this.close(te)}complete(){this.forEachObserver(te=>{te.complete()}),this.close()}subscribe(te,oe,Ne){let De;if(void 0===te&&void 0===oe&&void 0===Ne)throw new Error("Missing Observer.");De=function(ie,te){if("object"!=typeof ie||null===ie)return!1;for(const oe of["next","error","complete"])if(oe in ie&&"function"==typeof ie[oe])return!0;return!1}(te)?te:{next:te,error:oe,complete:Ne},void 0===De.next&&(De.next=at),void 0===De.error&&(De.error=at),void 0===De.complete&&(De.complete=at);const Tt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?De.error(this.finalError):De.complete()}catch(nn){}}),this.observers.push(De),Tt}unsubscribeOne(te){void 0===this.observers||void 0===this.observers[te]||(delete this.observers[te],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(te){if(!this.finalized)for(let oe=0;oe<this.observers.length;oe++)this.sendOne(oe,te)}sendOne(te,oe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[te])try{oe(this.observers[te])}catch(Ne){"undefined"!=typeof console&&console.error&&console.error(Ne)}})}close(te){this.finalized||(this.finalized=!0,void 0!==te&&(this.finalError=te),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function at(){}function et(ie,te=1e3,oe=2){const Ne=te*Math.pow(oe,ie),De=Math.round(.5*Ne*(Math.random()-.5)*2);return Math.min(144e5,Ne+De)}function wn(ie){return ie&&ie._delegate?ie._delegate:ie}},2329:(ut,Ie,j)=>{"use strict";j.d(Ie,{Mq:()=>R.getApp,C6:()=>R.getApps});var R=j(8026);(0,R.registerVersion)("firebase","9.12.1","app")},7841:(ut,Ie,j)=>{"use strict";j.d(Ie,{Z:()=>R.Z});var R=j(3394);R.Z.registerVersion("firebase","9.12.1","app-compat")},8241:(ut,Ie,j)=>{"use strict";j.r(Ie);var R=j(8239),A=j(3394),z=j(3854),_e=j(8026),he=j(5422);function fe(_,f){var p={};for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&f.indexOf(E)<0&&(p[E]=_[E]);if(null!=_&&"function"==typeof Object.getOwnPropertySymbols){var O=0;for(E=Object.getOwnPropertySymbols(_);O<E.length;O++)f.indexOf(E[O])<0&&Object.prototype.propertyIsEnumerable.call(_,E[O])&&(p[E[O]]=_[E[O]])}return p}var Un=j(3910);const Cs=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Jn=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},St=new z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ii=new he.Yd("@firebase/auth");function Hr(_,...f){Ii.logLevel<=he.in.ERROR&&Ii.error(`Auth (${_e.SDK_VERSION}): ${_}`,...f)}function Ft(_,...f){throw kn(_,...f)}function Kn(_,...f){return kn(_,...f)}function Yr(_,f,p){const E=Object.assign(Object.assign({},Jn()),{[f]:p});return new z.LL("auth","Firebase",E).create(f,{appName:_.name})}function gn(_,f,p){if(!(f instanceof p))throw p.name!==f.constructor.name&&Ft(_,"argument-error"),Yr(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function kn(_,...f){if("string"!=typeof _){const p=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(p,...E)}return St.create(_,...f)}function tt(_,f,...p){if(!_)throw kn(f,...p)}function Rr(_){const f="INTERNAL ASSERTION FAILED: "+_;throw Hr(f),new Error(f)}function Sn(_,f){_||Rr(f)}const Dn=new Map;function Fn(_){Sn(_ instanceof Function,"Expected a class definition");let f=Dn.get(_);return f?(Sn(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,Dn.set(_,f),f)}function X(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function de(){return"http:"===Ze()||"https:"===Ze()}function Ze(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class ot{constructor(f,p){this.shortDelay=f,this.longDelay=p,Sn(p>f,"Short delay should be less than long delay!"),this.isMobile=(0,z.uI)()||(0,z.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(de()||(0,z.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function at(_,f){Sn(_.emulator,"Emulator should always be set here");const{url:p}=_.emulator;return f?`${p}${f.startsWith("/")?f.slice(1):f}`:p}class Lt{static initialize(f,p,E){this.fetchImpl=f,p&&(this.headersImpl=p),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const jn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Tr=new ot(3e4,6e4);function Wt(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function un(_,f,p,E){return ht.apply(this,arguments)}function ht(){return(ht=(0,R.Z)(function*(_,f,p,E,O={}){return zt(_,O,(0,R.Z)(function*(){let U={},ne={};E&&("GET"===f?ne=E:U={body:JSON.stringify(E)});const ve=(0,z.xO)(Object.assign({key:_.config.apiKey},ne)).slice(1),rt=yield _._getAdditionalHeaders();return rt["Content-Type"]="application/json",_.languageCode&&(rt["X-Firebase-Locale"]=_.languageCode),Lt.fetch()(gt(_,_.config.apiHost,p,ve),Object.assign({method:f,headers:rt,referrerPolicy:"no-referrer"},U))}))})).apply(this,arguments)}function zt(_,f,p){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,R.Z)(function*(_,f,p){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},jn),f);try{const O=new je(_),U=yield Promise.race([p(),O.promise]);O.clearNetworkTimeout();const ne=yield U.json();if("needConfirmation"in ne)throw et(_,"account-exists-with-different-credential",ne);if(U.ok&&!("errorMessage"in ne))return ne;{const ve=U.ok?ne.errorMessage:ne.error.message,[rt,Xe]=ve.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===rt)throw et(_,"credential-already-in-use",ne);if("EMAIL_EXISTS"===rt)throw et(_,"email-already-in-use",ne);if("USER_DISABLED"===rt)throw et(_,"user-disabled",ne);const Rt=E[rt]||rt.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw Yr(_,Rt,Xe);Ft(_,Rt)}}catch(O){if(O instanceof z.ZR)throw O;Ft(_,"network-request-failed")}})).apply(this,arguments)}function vt(_,f,p,E){return zn.apply(this,arguments)}function zn(){return(zn=(0,R.Z)(function*(_,f,p,E,O={}){const U=yield un(_,f,p,E,O);return"mfaPendingCredential"in U&&Ft(_,"multi-factor-auth-required",{_serverResponse:U}),U})).apply(this,arguments)}function gt(_,f,p,E){const O=`${f}${p}?${E}`;return _.config.emulator?at(_.config,O):`${_.config.apiScheme}://${O}`}class je{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((p,E)=>{this.timer=setTimeout(()=>E(Kn(this.auth,"network-request-failed")),Tr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function et(_,f,p){const E={appName:_.name};p.email&&(E.email=p.email),p.phoneNumber&&(E.phoneNumber=p.phoneNumber);const O=Kn(_,f,E);return O.customData._tokenResponse=p,O}function Jt(){return(Jt=(0,R.Z)(function*(_,f){return un(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function wn(_,f){return ie.apply(this,arguments)}function ie(){return(ie=(0,R.Z)(function*(_,f){return un(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function te(_,f){return oe.apply(this,arguments)}function oe(){return(oe=(0,R.Z)(function*(_,f){return un(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Ne(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function nn(){return(nn=(0,R.Z)(function*(_,f=!1){const p=(0,z.m9)(_),E=yield p.getIdToken(f),O=jr(E);tt(O&&O.exp&&O.auth_time&&O.iat,p.auth,"internal-error");const U="object"==typeof O.firebase?O.firebase:void 0,ne=null==U?void 0:U.sign_in_provider;return{claims:O,token:E,authTime:Ne(Nn(O.auth_time)),issuedAtTime:Ne(Nn(O.iat)),expirationTime:Ne(Nn(O.exp)),signInProvider:ne||null,signInSecondFactor:(null==U?void 0:U.sign_in_second_factor)||null}})).apply(this,arguments)}function Nn(_){return 1e3*Number(_)}function jr(_){var f;const[p,E,O]=_.split(".");if(void 0===p||void 0===E||void 0===O)return Hr("JWT malformed, contained fewer than 3 sections"),null;try{const U=(0,z.tV)(E);return U?JSON.parse(U):(Hr("Failed to decode base64 JWT payload"),null)}catch(U){return Hr("Caught error parsing JWT payload as JSON",null===(f=U)||void 0===f?void 0:f.toString()),null}}function dr(_,f){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,R.Z)(function*(_,f,p=!1){if(p)return f;try{return yield f}catch(E){throw E instanceof z.ZR&&Br(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}function Br({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Is{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var p;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const O=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,O)}}schedule(f=!1){var p=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,R.Z)(function*(){yield p.iteration()}),E)}iteration(){var f=this;return(0,R.Z)(function*(){var p;try{yield f.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(p=E)||void 0===p?void 0:p.code)&&f.schedule(!0))}f.schedule()})()}}class ai{constructor(f,p){this.createdAt=f,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ne(this.lastLoginAt),this.creationTime=Ne(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Nt(_){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,R.Z)(function*(_){var f;const p=_.auth,E=yield _.getIdToken(),O=yield dr(_,te(p,{idToken:E}));tt(null==O?void 0:O.users.length,p,"internal-error");const U=O.users[0];_._notifyReloadListener(U);const ne=(null===(f=U.providerUserInfo)||void 0===f?void 0:f.length)?Di(U.providerUserInfo):[],ve=Ac(_.providerData,ne),Rt=!!_.isAnonymous&&!(_.email&&U.passwordHash||(null==ve?void 0:ve.length)),Pt={uid:U.localId,displayName:U.displayName||null,photoURL:U.photoUrl||null,email:U.email||null,emailVerified:U.emailVerified||!1,phoneNumber:U.phoneNumber||null,tenantId:U.tenantId||null,providerData:ve,metadata:new ai(U.createdAt,U.lastLoginAt),isAnonymous:Rt};Object.assign(_,Pt)})).apply(this,arguments)}function ir(){return(ir=(0,R.Z)(function*(_){const f=(0,z.m9)(_);yield Nt(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ac(_,f){return[..._.filter(E=>!f.some(O=>O.providerId===E.providerId)),...f]}function Di(_){return _.map(f=>{var{providerId:p}=f,E=fe(f,["providerId"]);return{providerId:p,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function on(){return(on=(0,R.Z)(function*(_,f){const p=yield zt(_,{},(0,R.Z)(function*(){const E=(0,z.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:O,apiKey:U}=_.config,ne=gt(_,O,"/v1/token",`key=${U}`),ve=yield _._getAdditionalHeaders();return ve["Content-Type"]="application/x-www-form-urlencoded",Lt.fetch()(ne,{method:"POST",headers:ve,body:E})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Rn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){tt(f.idToken,"internal-error"),tt(void 0!==f.idToken,"internal-error"),tt(void 0!==f.refreshToken,"internal-error");const p="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function(_){const f=jr(_);return tt(f,"internal-error"),tt(void 0!==f.exp,"internal-error"),tt(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,p)}getToken(f,p=!1){var E=this;return(0,R.Z)(function*(){return tt(!E.accessToken||E.refreshToken,f,"user-token-expired"),p||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,p){var E=this;return(0,R.Z)(function*(){const{accessToken:O,refreshToken:U,expiresIn:ne}=yield function(_,f){return on.apply(this,arguments)}(f,p);E.updateTokensAndExpiration(O,U,Number(ne))})()}updateTokensAndExpiration(f,p,E){this.refreshToken=p||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,p){const{refreshToken:E,accessToken:O,expirationTime:U}=p,ne=new Rn;return E&&(tt("string"==typeof E,"internal-error",{appName:f}),ne.refreshToken=E),O&&(tt("string"==typeof O,"internal-error",{appName:f}),ne.accessToken=O),U&&(tt("number"==typeof U,"internal-error",{appName:f}),ne.expirationTime=U),ne}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Rn,this.toJSON())}_performRefresh(){return Rr("not implemented")}}function Zn(_,f){tt("string"==typeof _||void 0===_,"internal-error",{appName:f})}class ci{constructor(f){var{uid:p,auth:E,stsTokenManager:O}=f,U=fe(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Is(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=E,this.stsTokenManager=O,this.accessToken=O.accessToken,this.displayName=U.displayName||null,this.email=U.email||null,this.emailVerified=U.emailVerified||!1,this.phoneNumber=U.phoneNumber||null,this.photoURL=U.photoURL||null,this.isAnonymous=U.isAnonymous||!1,this.tenantId=U.tenantId||null,this.providerData=U.providerData?[...U.providerData]:[],this.metadata=new ai(U.createdAt||void 0,U.lastLoginAt||void 0)}getIdToken(f){var p=this;return(0,R.Z)(function*(){const E=yield dr(p,p.stsTokenManager.getToken(p.auth,f));return tt(E,p.auth,"internal-error"),p.accessToken!==E&&(p.accessToken=E,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),E})()}getIdTokenResult(f){return function(_){return nn.apply(this,arguments)}(this,f)}reload(){return function(_){return ir.apply(this,arguments)}(this)}_assign(f){this!==f&&(tt(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(p=>Object.assign({},p)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new ci(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,p=!1){var E=this;return(0,R.Z)(function*(){let O=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),O=!0),p&&(yield Nt(E)),yield E.auth._persistUserIfCurrent(E),O&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,R.Z)(function*(){const p=yield f.getIdToken();return yield dr(f,function(_,f){return Jt.apply(this,arguments)}(f.auth,{idToken:p})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,p){var E,O,U,ne,ve,rt,Xe,Rt;const Pt=null!==(E=p.displayName)&&void 0!==E?E:void 0,In=null!==(O=p.email)&&void 0!==O?O:void 0,Zi=null!==(U=p.phoneNumber)&&void 0!==U?U:void 0,zc=null!==(ne=p.photoURL)&&void 0!==ne?ne:void 0,Ql=null!==(ve=p.tenantId)&&void 0!==ve?ve:void 0,Zc=null!==(rt=p._redirectEventId)&&void 0!==rt?rt:void 0,Yc=null!==(Xe=p.createdAt)&&void 0!==Xe?Xe:void 0,jd=null!==(Rt=p.lastLoginAt)&&void 0!==Rt?Rt:void 0,{uid:ia,emailVerified:Bd,isAnonymous:gc,providerData:$d,stsTokenManager:Gh}=p;tt(ia&&Gh,f,"internal-error");const nl=Rn.fromJSON(this.name,Gh);tt("string"==typeof ia,f,"internal-error"),Zn(Pt,f.name),Zn(In,f.name),tt("boolean"==typeof Bd,f,"internal-error"),tt("boolean"==typeof gc,f,"internal-error"),Zn(Zi,f.name),Zn(zc,f.name),Zn(Ql,f.name),Zn(Zc,f.name),Zn(Yc,f.name),Zn(jd,f.name);const Gd=new ci({uid:ia,auth:f,email:In,emailVerified:Bd,displayName:Pt,isAnonymous:gc,photoURL:zc,phoneNumber:Zi,tenantId:Ql,stsTokenManager:nl,createdAt:Yc,lastLoginAt:jd});return $d&&Array.isArray($d)&&(Gd.providerData=$d.map(bu=>Object.assign({},bu))),Zc&&(Gd._redirectEventId=Zc),Gd}static _fromIdTokenResponse(f,p,E=!1){return(0,R.Z)(function*(){const O=new Rn;O.updateFromServerResponse(p);const U=new ci({uid:p.localId,auth:f,stsTokenManager:O,isAnonymous:E});return yield Nt(U),U})()}}const fr=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,R.Z)(function*(){return!0})()}_set(p,E){var O=this;return(0,R.Z)(function*(){O.storage[p]=E})()}_get(p){var E=this;return(0,R.Z)(function*(){const O=E.storage[p];return void 0===O?null:O})()}_remove(p){var E=this;return(0,R.Z)(function*(){delete E.storage[p]})()}_addListener(p,E){}_removeListener(p,E){}}return _.type="NONE",_})();function Pn(_,f,p){return`firebase:${_}:${f}:${p}`}class Wn{constructor(f,p,E){this.persistence=f,this.auth=p,this.userKey=E;const{config:O,name:U}=this.auth;this.fullUserKey=Pn(this.userKey,O.apiKey,U),this.fullPersistenceKey=Pn("persistence",O.apiKey,U),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,R.Z)(function*(){const p=yield f.persistence._get(f.fullUserKey);return p?ci._fromJSON(f.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var p=this;return(0,R.Z)(function*(){if(p.persistence===f)return;const E=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=f,E?p.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,p,E="authUser"){return(0,R.Z)(function*(){if(!p.length)return new Wn(Fn(fr),f,E);const O=(yield Promise.all(p.map(function(){var Xe=(0,R.Z)(function*(Rt){if(yield Rt._isAvailable())return Rt});return function(Rt){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let U=O[0]||Fn(fr);const ne=Pn(E,f.config.apiKey,f.name);let ve=null;for(const Xe of p)try{const Rt=yield Xe._get(ne);if(Rt){const Pt=ci._fromJSON(f,Rt);Xe!==U&&(ve=Pt),U=Xe;break}}catch(Rt){}const rt=O.filter(Xe=>Xe._shouldAllowMigration);return U._shouldAllowMigration&&rt.length?(U=rt[0],ve&&(yield U._set(ne,ve.toJSON())),yield Promise.all(p.map(function(){var Xe=(0,R.Z)(function*(Rt){if(Rt!==U)try{yield Rt._remove(ne)}catch(Pt){}});return function(Rt){return Xe.apply(this,arguments)}}())),new Wn(U,f,E)):new Wn(U,f,E)})()}}function Zs(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Wa(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Xt(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(li(f))return"Blackberry";if(mo(f))return"Webos";if(Ys(f))return"Safari";if((f.includes("chrome/")||ks(f))&&!f.includes("edge/"))return"Chrome";if(ui(f))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Xt(_=(0,z.z$)()){return/firefox\//i.test(_)}function Ys(_=(0,z.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function ks(_=(0,z.z$)()){return/crios\//i.test(_)}function Wa(_=(0,z.z$)()){return/iemobile/i.test(_)}function ui(_=(0,z.z$)()){return/android/i.test(_)}function li(_=(0,z.z$)()){return/blackberry/i.test(_)}function mo(_=(0,z.z$)()){return/webos/i.test(_)}function Xn(_=(0,z.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function fs(_=(0,z.z$)()){return Xn(_)||ui(_)||mo(_)||li(_)||/windows phone/i.test(_)||Wa(_)}function Ai(_,f=[]){let p;switch(_){case"Browser":p=Zs((0,z.z$)());break;case"Worker":p=`${Zs((0,z.z$)())}-${_}`;break;default:p=_}const E=f.length?f.join(","):"FirebaseCore-web";return`${p}/JsCore/${_e.SDK_VERSION}/${E}`}class Fs{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,p){const E=U=>new Promise((ne,ve)=>{try{ne(f(U))}catch(rt){ve(rt)}});E.onAbort=p,this.queue.push(E);const O=this.queue.length-1;return()=>{this.queue[O]=()=>Promise.resolve()}}runMiddleware(f){var p=this;return(0,R.Z)(function*(){var E;if(p.auth.currentUser===f)return;const O=[];try{for(const U of p.queue)yield U(f),U.onAbort&&O.push(U.onAbort)}catch(U){O.reverse();for(const ne of O)try{ne()}catch(ve){}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=U)||void 0===E?void 0:E.message})}})()}}class es{constructor(f,p,E){this.app=f,this.heartbeatServiceProvider=p,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $r(this),this.idTokenSubscription=new $r(this),this.beforeStateQueue=new Fs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=St,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,p){var E=this;return p&&(this._popupRedirectResolver=Fn(p)),this._initializationPromise=this.queue((0,R.Z)(function*(){var O,U;if(!E._deleted&&(E.persistenceManager=yield Wn.create(E,f),!E._deleted)){if(null===(O=E._popupRedirectResolver)||void 0===O?void 0:O._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(ne){}yield E.initializeCurrentUser(p),E.lastNotifiedUid=(null===(U=E.currentUser)||void 0===U?void 0:U.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,R.Z)(function*(){if(f._deleted)return;const p=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||p){if(f.currentUser&&p&&f.currentUser.uid===p.uid)return f._currentUser._assign(p),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(p,!0)}})()}initializeCurrentUser(f){var p=this;return(0,R.Z)(function*(){var E;const O=yield p.assertedPersistence.getCurrentUser();let U=O,ne=!1;if(f&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const ve=null===(E=p.redirectUser)||void 0===E?void 0:E._redirectEventId,rt=null==U?void 0:U._redirectEventId,Xe=yield p.tryRedirectSignIn(f);(!ve||ve===rt)&&(null==Xe?void 0:Xe.user)&&(U=Xe.user,ne=!0)}if(!U)return p.directlySetCurrentUser(null);if(!U._redirectEventId){if(ne)try{yield p.beforeStateQueue.runMiddleware(U)}catch(ve){U=O,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(ve))}return U?p.reloadAndSetCurrentUserOrClear(U):p.directlySetCurrentUser(null)}return tt(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===U._redirectEventId?p.directlySetCurrentUser(U):p.reloadAndSetCurrentUserOrClear(U)})()}tryRedirectSignIn(f){var p=this;return(0,R.Z)(function*(){let E=null;try{E=yield p._popupRedirectResolver._completeRedirectFn(p,f,!0)}catch(O){yield p._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var p=this;return(0,R.Z)(function*(){var E;try{yield Nt(f)}catch(O){if("auth/network-request-failed"!==(null===(E=O)||void 0===E?void 0:E.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,R.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var p=this;return(0,R.Z)(function*(){const E=f?(0,z.m9)(f):null;return E&&tt(E.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(E&&E._clone(p))})()}_updateCurrentUser(f,p=!1){var E=this;return(0,R.Z)(function*(){if(!E._deleted)return f&&tt(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),p||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,R.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,R.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var p=this;return this.queue((0,R.Z)(function*(){yield p.assertedPersistence.setPersistence(Fn(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new z.LL("auth","Firebase",f())}onAuthStateChanged(f,p,E){return this.registerStateListener(this.authStateSubscription,f,p,E)}beforeAuthStateChanged(f,p){return this.beforeStateQueue.pushCallback(f,p)}onIdTokenChanged(f,p,E){return this.registerStateListener(this.idTokenSubscription,f,p,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,p){var E=this;return(0,R.Z)(function*(){const O=yield E.getOrInitRedirectPersistenceManager(p);return null===f?O.removeCurrentUser():O.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var p=this;return(0,R.Z)(function*(){if(!p.redirectPersistenceManager){const E=f&&Fn(f)||p._popupRedirectResolver;tt(E,p,"argument-error"),p.redirectPersistenceManager=yield Wn.create(p,[Fn(E._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(f){var p=this;return(0,R.Z)(function*(){var E,O;return p._isInitialized&&(yield p.queue((0,R.Z)(function*(){}))),(null===(E=p._currentUser)||void 0===E?void 0:E._redirectEventId)===f?p._currentUser:(null===(O=p.redirectUser)||void 0===O?void 0:O._redirectEventId)===f?p.redirectUser:null})()}_persistUserIfCurrent(f){var p=this;return(0,R.Z)(function*(){if(f===p.currentUser)return p.queue((0,R.Z)(function*(){return p.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(p=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,p,E,O){if(this._deleted)return()=>{};const U="function"==typeof p?p:p.next.bind(p),ne=this._isInitialized?Promise.resolve():this._initializationPromise;return tt(ne,this,"internal-error"),ne.then(()=>U(this.currentUser)),"function"==typeof p?f.addObserver(p,E,O):f.addObserver(p)}directlySetCurrentUser(f){var p=this;return(0,R.Z)(function*(){p.currentUser&&p.currentUser!==f&&p._currentUser._stopProactiveRefresh(),f&&p.isProactiveRefreshEnabled&&f._startProactiveRefresh(),p.currentUser=f,f?yield p.assertedPersistence.setCurrentUser(f):yield p.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Ai(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,R.Z)(function*(){var p;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const O=yield null===(p=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return O&&(E["X-Firebase-Client"]=O),E})()}}function er(_){return(0,z.m9)(_)}class $r{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,z.ne)(p=>this.observer=p)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Si(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function Qs(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class xi{constructor(f,p){this.providerId=f,this.signInMethod=p}toJSON(){return Rr("not implemented")}_getIdTokenResponse(f){return Rr("not implemented")}_linkToIdToken(f,p){return Rr("not implemented")}_getReauthenticationResolver(f){return Rr("not implemented")}}function Vi(_,f){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,R.Z)(function*(_,f){return un(_,"POST","/v1/accounts:resetPassword",Wt(_,f))})).apply(this,arguments)}function ke(_,f){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,R.Z)(function*(_,f){return un(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ri(_,f){return ps.apply(this,arguments)}function ps(){return(ps=(0,R.Z)(function*(_,f){return un(_,"POST","/v1/accounts:update",Wt(_,f))})).apply(this,arguments)}function Sc(){return(Sc=(0,R.Z)(function*(_,f){return vt(_,"POST","/v1/accounts:signInWithPassword",Wt(_,f))})).apply(this,arguments)}function ts(_,f){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,R.Z)(function*(_,f){return un(_,"POST","/v1/accounts:sendOobCode",Wt(_,f))})).apply(this,arguments)}function yo(_,f){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,R.Z)(function*(_,f){return ts(_,f)})).apply(this,arguments)}function _o(_,f){return Js.apply(this,arguments)}function Js(){return(Js=(0,R.Z)(function*(_,f){return ts(_,f)})).apply(this,arguments)}function vo(_,f){return ca.apply(this,arguments)}function ca(){return(ca=(0,R.Z)(function*(_,f){return ts(_,f)})).apply(this,arguments)}function xc(_,f){return jo.apply(this,arguments)}function jo(){return(jo=(0,R.Z)(function*(_,f){return ts(_,f)})).apply(this,arguments)}function wo(){return(wo=(0,R.Z)(function*(_,f){return vt(_,"POST","/v1/accounts:signInWithEmailLink",Wt(_,f))})).apply(this,arguments)}function Bo(){return(Bo=(0,R.Z)(function*(_,f){return vt(_,"POST","/v1/accounts:signInWithEmailLink",Wt(_,f))})).apply(this,arguments)}class sr extends xi{constructor(f,p,E,O=null){super("password",E),this._email=f,this._password=p,this._tenantId=O}static _fromEmailAndPassword(f,p){return new sr(f,p,"password")}static _fromEmailAndCode(f,p,E=null){return new sr(f,p,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(f){var p=this;return(0,R.Z)(function*(){switch(p.signInMethod){case"password":return function(_,f){return Sc.apply(this,arguments)}(f,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function(_,f){return wo.apply(this,arguments)}(f,{email:p._email,oobCode:p._password});default:Ft(f,"internal-error")}})()}_linkToIdToken(f,p){var E=this;return(0,R.Z)(function*(){switch(E.signInMethod){case"password":return ke(f,{idToken:p,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(_,f){return Bo.apply(this,arguments)}(f,{idToken:p,email:E._email,oobCode:E._password});default:Ft(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function mi(_,f){return di.apply(this,arguments)}function di(){return(di=(0,R.Z)(function*(_,f){return vt(_,"POST","/v1/accounts:signInWithIdp",Wt(_,f))})).apply(this,arguments)}class Ui extends xi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const p=new Ui(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(p.idToken=f.idToken),f.accessToken&&(p.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(p.nonce=f.nonce),f.pendingToken&&(p.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(p.accessToken=f.oauthToken,p.secret=f.oauthTokenSecret):Ft("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:O}=p,U=fe(p,["providerId","signInMethod"]);if(!E||!O)return null;const ne=new Ui(E,O);return ne.idToken=U.idToken||void 0,ne.accessToken=U.accessToken||void 0,ne.secret=U.secret,ne.nonce=U.nonce,ne.pendingToken=U.pendingToken||null,ne}_getIdTokenResponse(f){return mi(f,this.buildRequest())}_linkToIdToken(f,p){const E=this.buildRequest();return E.idToken=p,mi(f,E)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,mi(f,p)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),f.postBody=(0,z.xO)(p)}return f}}function Eo(_,f){return ua.apply(this,arguments)}function ua(){return(ua=(0,R.Z)(function*(_,f){return un(_,"POST","/v1/accounts:sendVerificationCode",Wt(_,f))})).apply(this,arguments)}function $o(){return($o=(0,R.Z)(function*(_,f){return vt(_,"POST","/v1/accounts:signInWithPhoneNumber",Wt(_,f))})).apply(this,arguments)}function la(){return(la=(0,R.Z)(function*(_,f){const p=yield vt(_,"POST","/v1/accounts:signInWithPhoneNumber",Wt(_,f));if(p.temporaryProof)throw et(_,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const ji={USER_NOT_FOUND:"user-not-found"};function Ln(){return(Ln=(0,R.Z)(function*(_,f){return vt(_,"POST","/v1/accounts:signInWithPhoneNumber",Wt(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),ji)})).apply(this,arguments)}class Bi extends xi{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,p){return new Bi({verificationId:f,verificationCode:p})}static _fromTokenResponse(f,p){return new Bi({phoneNumber:f,temporaryProof:p})}_getIdTokenResponse(f){return function(_,f){return $o.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,p){return function(_,f){return la.apply(this,arguments)}(f,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function(_,f){return Ln.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:p,verificationId:E,verificationCode:O}=this.params;return f&&p?{temporaryProof:f,phoneNumber:p}:{sessionInfo:E,code:O}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:p,verificationCode:E,phoneNumber:O,temporaryProof:U}=f;return E||p||O||U?new Bi({verificationId:p,verificationCode:E,phoneNumber:O,temporaryProof:U}):null}}class N{constructor(f){var p,E,O,U,ne,ve;const rt=(0,z.zd)((0,z.pd)(f)),Xe=null!==(p=rt.apiKey)&&void 0!==p?p:null,Rt=null!==(E=rt.oobCode)&&void 0!==E?E:null,Pt=function(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(O=rt.mode)&&void 0!==O?O:null);tt(Xe&&Rt&&Pt,"argument-error"),this.apiKey=Xe,this.operation=Pt,this.code=Rt,this.continueUrl=null!==(U=rt.continueUrl)&&void 0!==U?U:null,this.languageCode=null!==(ne=rt.languageCode)&&void 0!==ne?ne:null,this.tenantId=null!==(ve=rt.tenantId)&&void 0!==ve?ve:null}static parseLink(f){const p=function(_){const f=(0,z.zd)((0,z.pd)(_)).link,p=f?(0,z.zd)((0,z.pd)(f)).deep_link_id:null,E=(0,z.zd)((0,z.pd)(_)).deep_link_id;return(E?(0,z.zd)((0,z.pd)(E)).link:null)||E||p||f||_}(f);try{return new N(p)}catch(E){return null}}}let se=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(p,E){return sr._fromEmailAndPassword(p,E)}static credentialWithLink(p,E){const O=N.parseLink(E);return tt(O,"argument-error"),sr._fromEmailAndCode(p,O.code,O.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Ee{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Ke extends Ee{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class It extends Ke{static credentialFromJSON(f){const p="string"==typeof f?JSON.parse(f):f;return tt("providerId"in p&&"signInMethod"in p,"argument-error"),Ui._fromParams(p)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return tt(f.idToken||f.accessToken,"argument-error"),Ui._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return It.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return It.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:p,oauthAccessToken:E,oauthTokenSecret:O,pendingToken:U,nonce:ne,providerId:ve}=f;if(!E&&!O&&!p&&!U||!ve)return null;try{return new It(ve)._credential({idToken:p,accessToken:E,nonce:ne,pendingToken:U})}catch(rt){return null}}}let en=(()=>{class _ extends Ke{constructor(){super("facebook.com")}static credential(p){return Ui._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch(E){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),At=(()=>{class _ extends Ke{constructor(){super("google.com"),this.addScope("profile")}static credential(p,E){return Ui._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:E})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:E,oauthAccessToken:O}=p;if(!E&&!O)return null;try{return _.credential(E,O)}catch(U){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Vn=(()=>{class _ extends Ke{constructor(){super("github.com")}static credential(p){return Ui._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return _.credential(p.oauthAccessToken)}catch(E){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Bn extends xi{constructor(f,p){super(f,f),this.pendingToken=p}_getIdTokenResponse(f){return mi(f,this.buildRequest())}_linkToIdToken(f,p){const E=this.buildRequest();return E.idToken=p,mi(f,E)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,mi(f,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:O,pendingToken:U}=p;return E&&O&&U&&E===O?new Bn(E,U):null}static _create(f,p){return new Bn(f,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class mr extends Ee{constructor(f){tt(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return mr.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return mr.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const p=Bn.fromJSON(f);return tt(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:p,providerId:E}=f;if(!p||!E)return null;try{return Bn._create(E,p)}catch(O){return null}}}let rs=(()=>{class _ extends Ke{constructor(){super("twitter.com")}static credential(p,E){return Ui._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:E})}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:E,oauthTokenSecret:O}=p;if(!E||!O)return null;try{return _.credential(E,O)}catch(U){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function hi(_,f){return $n.apply(this,arguments)}function $n(){return($n=(0,R.Z)(function*(_,f){return vt(_,"POST","/v1/accounts:signUp",Wt(_,f))})).apply(this,arguments)}class yr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,p,E,O=!1){return(0,R.Z)(function*(){const U=yield ci._fromIdTokenResponse(f,E,O),ne=is(E);return new yr({user:U,providerId:ne,_tokenResponse:E,operationType:p})})()}static _forOperation(f,p,E){return(0,R.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const O=is(E);return new yr({user:f,providerId:O,_tokenResponse:E,operationType:p})})()}}function is(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function $i(){return($i=(0,R.Z)(function*(_){var f;const p=er(_);if(yield p._initializationPromise,null===(f=p.currentUser)||void 0===f?void 0:f.isAnonymous)return new yr({user:p.currentUser,providerId:null,operationType:"signIn"});const E=yield hi(p,{returnSecureToken:!0}),O=yield yr._fromIdTokenResponse(p,"signIn",E,!0);return yield p._updateCurrentUser(O.user),O})).apply(this,arguments)}class ss extends z.ZR{constructor(f,p,E,O){var U;super(p.code,p.message),this.operationType=E,this.user=O,Object.setPrototypeOf(this,ss.prototype),this.customData={appName:f.name,tenantId:null!==(U=f.tenantId)&&void 0!==U?U:void 0,_serverResponse:p.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,p,E,O){return new ss(f,p,E,O)}}function bo(_,f,p,E){return("reauthenticate"===f?p._getReauthenticationResolver(_):p._getIdTokenResponse(_)).catch(U=>{throw"auth/multi-factor-auth-required"===U.code?ss._fromErrorAndOperation(_,U,f,E):U})}function qt(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function ha(){return(ha=(0,R.Z)(function*(_,f){const p=(0,z.m9)(_);yield eo(!0,p,f);const{providerUserInfo:E}=yield wn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[f]}),O=qt(E||[]);return p.providerData=p.providerData.filter(U=>O.has(U.providerId)),O.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Go(_,f){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,R.Z)(function*(_,f,p=!1){const E=yield dr(_,f._linkToIdToken(_.auth,yield _.getIdToken()),p);return yr._forOperation(_,"link",E)})).apply(this,arguments)}function eo(_,f,p){return qo.apply(this,arguments)}function qo(){return(qo=(0,R.Z)(function*(_,f,p){yield Nt(f);const O=!1===_?"provider-already-linked":"no-such-provider";tt(qt(f.providerData).has(p)===_,f.auth,O)})).apply(this,arguments)}function qa(_,f){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,R.Z)(function*(_,f,p=!1){var E;const{auth:O}=_,U="reauthenticate";try{const ne=yield dr(_,bo(O,U,f,_),p);tt(ne.idToken,O,"internal-error");const ve=jr(ne.idToken);tt(ve,O,"internal-error");const{sub:rt}=ve;return tt(_.uid===rt,O,"user-mismatch"),yr._forOperation(_,U,ne)}catch(ne){throw"auth/user-not-found"===(null===(E=ne)||void 0===E?void 0:E.code)&&Ft(O,"user-mismatch"),ne}})).apply(this,arguments)}function En(_,f){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,R.Z)(function*(_,f,p=!1){const E="signIn",O=yield bo(_,E,f),U=yield yr._fromIdTokenResponse(_,E,O);return p||(yield _._updateCurrentUser(U.user)),U})).apply(this,arguments)}function tr(_,f){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,R.Z)(function*(_,f){return En(er(_),f)})).apply(this,arguments)}function os(_,f){return as.apply(this,arguments)}function as(){return(as=(0,R.Z)(function*(_,f){const p=(0,z.m9)(_);return yield eo(!1,p,f.providerId),Go(p,f)})).apply(this,arguments)}function fa(_,f){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,R.Z)(function*(_,f){return qa((0,z.m9)(_),f)})).apply(this,arguments)}function iu(_,f){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,R.Z)(function*(_,f){return vt(_,"POST","/v1/accounts:signInWithCustomToken",Wt(_,f))})).apply(this,arguments)}function ar(){return(ar=(0,R.Z)(function*(_,f){const p=er(_),E=yield iu(p,{token:f,returnSecureToken:!0}),O=yield yr._fromIdTokenResponse(p,"signIn",E);return yield p._updateCurrentUser(O.user),O})).apply(this,arguments)}class Sr{constructor(f,p){this.factorId=f,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(f,p){return"phoneInfo"in p?_i._fromServerResponse(f,p):Ft(f,"internal-error")}}class _i extends Sr{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,p){return new _i(p)}}function pa(_,f,p){var E;tt((null===(E=p.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),tt(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=p.url,f.dynamicLinkDomain=p.dynamicLinkDomain,f.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(tt(p.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=p.iOS.bundleId),p.android&&(tt(p.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=p.android.installApp,f.androidMinimumVersionCode=p.android.minimumVersion,f.androidPackageName=p.android.packageName)}function gs(){return(gs=(0,R.Z)(function*(_,f,p){const E=(0,z.m9)(_),O={requestType:"PASSWORD_RESET",email:f};p&&pa(E,O,p),yield _o(E,O)})).apply(this,arguments)}function Nc(){return(Nc=(0,R.Z)(function*(_,f,p){yield Vi((0,z.m9)(_),{oobCode:f,newPassword:p})})).apply(this,arguments)}function zo(){return(zo=(0,R.Z)(function*(_,f){yield Ri((0,z.m9)(_),{oobCode:f})})).apply(this,arguments)}function za(_,f){return Io.apply(this,arguments)}function Io(){return(Io=(0,R.Z)(function*(_,f){const p=(0,z.m9)(_),E=yield Vi(p,{oobCode:f}),O=E.requestType;switch(tt(O,p,"internal-error"),O){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":tt(E.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":tt(E.mfaInfo,p,"internal-error");default:tt(E.email,p,"internal-error")}let U=null;return E.mfaInfo&&(U=Sr._fromServerResponse(er(p),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:U},operation:O}})).apply(this,arguments)}function kc(){return(kc=(0,R.Z)(function*(_,f){const{data:p}=yield za((0,z.m9)(_),f);return p.email})).apply(this,arguments)}function To(){return(To=(0,R.Z)(function*(_,f,p){const E=er(_),O=yield hi(E,{returnSecureToken:!0,email:f,password:p}),U=yield yr._fromIdTokenResponse(E,"signIn",O);return yield E._updateCurrentUser(U.user),U})).apply(this,arguments)}function ga(){return(ga=(0,R.Z)(function*(_,f,p){const E=(0,z.m9)(_),O={requestType:"EMAIL_SIGNIN",email:f};tt(p.handleCodeInApp,E,"argument-error"),p&&pa(E,O,p),yield vo(E,O)})).apply(this,arguments)}function ya(){return(ya=(0,R.Z)(function*(_,f,p){const E=(0,z.m9)(_),O=se.credentialWithLink(f,p||X());return tt(O._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),tr(E,O)})).apply(this,arguments)}function Lc(_,f){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,R.Z)(function*(_,f){return un(_,"POST","/v1/accounts:createAuthUri",Wt(_,f))})).apply(this,arguments)}function cs(){return(cs=(0,R.Z)(function*(_,f){const E={identifier:f,continueUri:de()?X():"http://localhost"},{signinMethods:O}=yield Lc((0,z.m9)(_),E);return O||[]})).apply(this,arguments)}function Ya(){return(Ya=(0,R.Z)(function*(_,f){const p=(0,z.m9)(_),O={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&pa(p.auth,O,f);const{email:U}=yield yo(p.auth,O);U!==_.email&&(yield _.reload())})).apply(this,arguments)}function no(){return(no=(0,R.Z)(function*(_,f,p){const E=(0,z.m9)(_),U={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};p&&pa(E.auth,U,p);const{email:ne}=yield xc(E.auth,U);ne!==_.email&&(yield _.reload())})).apply(this,arguments)}function Do(_,f){return wr.apply(this,arguments)}function wr(){return(wr=(0,R.Z)(function*(_,f){return un(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ls(){return(Ls=(0,R.Z)(function*(_,{displayName:f,photoURL:p}){if(void 0===f&&void 0===p)return;const E=(0,z.m9)(_),U={idToken:yield E.getIdToken(),displayName:f,photoUrl:p,returnSecureToken:!0},ne=yield dr(E,Do(E.auth,U));E.displayName=ne.displayName||null,E.photoURL=ne.photoUrl||null;const ve=E.providerData.find(({providerId:rt})=>"password"===rt);ve&&(ve.displayName=E.displayName,ve.photoURL=E.photoURL),yield E._updateTokensIfNecessary(ne)})).apply(this,arguments)}function Yo(_,f,p){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,R.Z)(function*(_,f,p){const{auth:E}=_,U={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(U.email=f),p&&(U.password=p);const ne=yield dr(_,ke(E,U));yield _._updateTokensIfNecessary(ne,!0)})).apply(this,arguments)}class Wi{constructor(f,p,E={}){this.isNewUser=f,this.providerId=p,this.profile=E}}class Ds extends Wi{constructor(f,p,E,O){super(f,p,E),this.username=O}}class Ja extends Wi{constructor(f,p){super(f,"facebook.com",p)}}class Vc extends Ds{constructor(f,p){super(f,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class nr extends Wi{constructor(f,p){super(f,"google.com",p)}}class _a extends Ds{constructor(f,p,E){super(f,"twitter.com",p,E)}}function ou(_){const{user:f,_tokenResponse:p}=_;return f.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function(_){var f,p;if(!_)return null;const{providerId:E}=_,O=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},U=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&(null==_?void 0:_.idToken)){const ne=null===(p=null===(f=jr(_.idToken))||void 0===f?void 0:f.firebase)||void 0===p?void 0:p.sign_in_provider;if(ne)return new Wi(U,"anonymous"!==ne&&"custom"!==ne?ne:null)}if(!E)return null;switch(E){case"facebook.com":return new Ja(U,O);case"github.com":return new Vc(U,O);case"google.com":return new nr(U,O);case"twitter.com":return new _a(U,O,_.screenName||null);case"custom":case"anonymous":return new Wi(U,null);default:return new Wi(U,E,O)}}(p)}class qi{constructor(f,p,E){this.type=f,this.credential=p,this.auth=E}static _fromIdtoken(f,p){return new qi("enroll",f,p)}static _fromMfaPendingCredential(f){return new qi("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var p,E;if(null==f?void 0:f.multiFactorSession){if(null===(p=f.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return qi._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(E=f.multiFactorSession)||void 0===E?void 0:E.idToken)return qi._fromIdtoken(f.multiFactorSession.idToken)}return null}}class $c{constructor(f,p,E){this.session=f,this.hints=p,this.signInResolver=E}static _fromError(f,p){const E=er(f),O=p.customData._serverResponse,U=(O.mfaInfo||[]).map(ve=>Sr._fromServerResponse(E,ve));tt(O.mfaPendingCredential,E,"internal-error");const ne=qi._fromMfaPendingCredential(O.mfaPendingCredential);return new $c(ne,U,function(){var ve=(0,R.Z)(function*(rt){const Xe=yield rt._process(E,ne);delete O.mfaInfo,delete O.mfaPendingCredential;const Rt=Object.assign(Object.assign({},O),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(p.operationType){case"signIn":const Pt=yield yr._fromIdTokenResponse(E,p.operationType,Rt);return yield E._updateCurrentUser(Pt.user),Pt;case"reauthenticate":return tt(p.user,E,"internal-error"),yr._forOperation(p.user,p.operationType,Rt);default:Ft(E,"internal-error")}});return function(rt){return ve.apply(this,arguments)}}())}resolveSignIn(f){var p=this;return(0,R.Z)(function*(){return p.signInResolver(f)})()}}function ro(_,f){return un(_,"POST","/v2/accounts/mfaEnrollment:start",Wt(_,f))}class So{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(E=>Sr._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new So(f)}getSession(){var f=this;return(0,R.Z)(function*(){return qi._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,p){var E=this;return(0,R.Z)(function*(){const O=f,U=yield E.getSession(),ne=yield dr(E.user,O._process(E.user.auth,U,p));return yield E.user._updateTokensIfNecessary(ne),E.user.reload()})()}unenroll(f){var p=this;return(0,R.Z)(function*(){var E;const O="string"==typeof f?f:f.uid,U=yield p.user.getIdToken(),ne=yield dr(p.user,function(_,f){return un(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Wt(_,f))}(p.user.auth,{idToken:U,mfaEnrollmentId:O}));p.enrolledFactors=p.enrolledFactors.filter(({uid:ve})=>ve!==O),yield p.user._updateTokensIfNecessary(ne);try{yield p.user.reload()}catch(ve){if("auth/user-token-expired"!==(null===(E=ve)||void 0===E?void 0:E.code))throw ve}})()}}const ms=new WeakMap,wa="__sak";class Ea{constructor(f,p){this.storageRetriever=f,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(wa,"1"),this.storage.removeItem(wa),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,p){return this.storage.setItem(f,JSON.stringify(p)),Promise.resolve()}_get(f){const p=this.storage.getItem(f);return Promise.resolve(p?JSON.parse(p):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ki=(()=>{class _ extends Ea{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,E)=>this.onStorageEvent(p,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const _=(0,z.z$)();return Ys(_)||Xn(_)}()&&function(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=fs(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const E of Object.keys(this.listeners)){const O=this.storage.getItem(E),U=this.localCache[E];O!==U&&p(E,U,O)}}onStorageEvent(p,E=!1){if(!p.key)return void this.forAllChangedKeys((ve,rt,Xe)=>{this.notifyListeners(ve,Xe)});const O=p.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ve=this.storage.getItem(O);if(p.newValue!==ve)null!==p.newValue?this.storage.setItem(O,p.newValue):this.storage.removeItem(O);else if(this.localCache[O]===p.newValue&&!E)return}const U=()=>{const ve=this.storage.getItem(O);!E&&this.localCache[O]===ve||this.notifyListeners(O,ve)},ne=this.storage.getItem(O);(0,z.w1)()&&10===document.documentMode&&ne!==p.newValue&&p.newValue!==p.oldValue?setTimeout(U,10):U()}notifyListeners(p,E){this.localCache[p]=E;const O=this.listeners[p];if(O)for(const U of Array.from(O))U(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,E,O)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:E,newValue:O}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,E){var O=()=>super._set,U=this;return(0,R.Z)(function*(){yield O().call(U,p,E),U.localCache[p]=JSON.stringify(E)})()}_get(p){var E=()=>super._get,O=this;return(0,R.Z)(function*(){const U=yield E().call(O,p);return O.localCache[p]=JSON.stringify(U),U})()}_remove(p){var E=()=>super._remove,O=this;return(0,R.Z)(function*(){yield E().call(O,p),delete O.localCache[p]})()}}return _.type="LOCAL",_})(),Ss=(()=>{class _ extends Ea{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,E){}_removeListener(p,E){}}return _.type="SESSION",_})();let C=(()=>{class _{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const E=this.receivers.find(U=>U.isListeningto(p));if(E)return E;const O=new _(p);return this.receivers.push(O),O}isListeningto(p){return this.eventTarget===p}handleEvent(p){var E=this;return(0,R.Z)(function*(){const O=p,{eventId:U,eventType:ne,data:ve}=O.data,rt=E.handlersMap[ne];if(!(null==rt?void 0:rt.size))return;O.ports[0].postMessage({status:"ack",eventId:U,eventType:ne});const Xe=Array.from(rt).map(function(){var Pt=(0,R.Z)(function*(In){return In(O.origin,ve)});return function(In){return Pt.apply(this,arguments)}}()),Rt=yield function(_){return Promise.all(_.map(function(){var f=(0,R.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(E){return{fulfilled:!1,reason:E}}});return function(p){return f.apply(this,arguments)}}()))}(Xe);O.ports[0].postMessage({status:"done",eventId:U,eventType:ne,response:Rt})})()}_subscribe(p,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(E)}_unsubscribe(p,E){this.handlersMap[p]&&E&&this.handlersMap[p].delete(E),(!E||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function b(_="",f=10){let p="";for(let E=0;E<f;E++)p+=Math.floor(10*Math.random());return _+p}class P{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,p,E=50){var O=this;return(0,R.Z)(function*(){const U="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!U)throw new Error("connection_unavailable");let ne,ve;return new Promise((rt,Xe)=>{const Rt=b("",20);U.port1.start();const Pt=setTimeout(()=>{Xe(new Error("unsupported_event"))},E);ve={messageChannel:U,onMessage(In){const Zi=In;if(Zi.data.eventId===Rt)switch(Zi.data.status){case"ack":clearTimeout(Pt),ne=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(ne),rt(Zi.data.response);break;default:clearTimeout(Pt),clearTimeout(ne),Xe(new Error("invalid_response"))}}},O.handlers.add(ve),U.port1.addEventListener("message",ve.onMessage),O.target.postMessage({eventType:f,eventId:Rt,data:p},[U.port2])}).finally(()=>{ve&&O.removeMessageHandler(ve)})})()}}function L(){return window}function ee(){return void 0!==L().WorkerGlobalScope&&"function"==typeof L().importScripts}function Fe(){return(Fe=(0,R.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const Mt="firebaseLocalStorageDb",an="firebaseLocalStorage",Pi="fbase_key";class Jr{constructor(f){this.request=f}toPromise(){return new Promise((f,p)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Er(_,f){return _.transaction([an],f?"readwrite":"readonly").objectStore(an)}function Xr(){const _=indexedDB.open(Mt,1);return new Promise((f,p)=>{_.addEventListener("error",()=>{p(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(an,{keyPath:Pi})}catch(O){p(O)}}),_.addEventListener("success",(0,R.Z)(function*(){const E=_.result;E.objectStoreNames.contains(an)?f(E):(E.close(),yield function(){const _=indexedDB.deleteDatabase(Mt);return new Jr(_).toPromise()}(),f(yield Xr()))}))})}function xo(_,f,p){return cu.apply(this,arguments)}function cu(){return(cu=(0,R.Z)(function*(_,f,p){const E=Er(_,!0).put({[Pi]:f,value:p});return new Jr(E).toPromise()})).apply(this,arguments)}function Dd(){return(Dd=(0,R.Z)(function*(_,f){const p=Er(_,!1).get(f),E=yield new Jr(p).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function xl(_,f){const p=Er(_,!0).delete(f);return new Jr(p).toPromise()}const Ta=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,R.Z)(function*(){return p.db||(p.db=yield Xr()),p.db})()}_withRetries(p){var E=this;return(0,R.Z)(function*(){let O=0;for(;;)try{const U=yield E._openDb();return yield p(U)}catch(U){if(O++>3)throw U;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,R.Z)(function*(){return ee()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,R.Z)(function*(){p.receiver=C._getInstance(ee()?self:null),p.receiver._subscribe("keyChanged",function(){var E=(0,R.Z)(function*(O,U){return{keyProcessed:(yield p._poll()).includes(U.key)}});return function(O,U){return E.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var E=(0,R.Z)(function*(O,U){return["keyChanged"]});return function(O,U){return E.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,R.Z)(function*(){var E,O;if(p.activeServiceWorker=yield function(){return Fe.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new P(p.activeServiceWorker);const U=yield p.sender._send("ping",{},800);!U||(null===(E=U[0])||void 0===E?void 0:E.fulfilled)&&(null===(O=U[0])||void 0===O?void 0:O.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var E=this;return(0,R.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:p},E.serviceWorkerReceiverAvailable?800:50)}catch(O){}})()}_isAvailable(){return(0,R.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Xr();return yield xo(p,wa,"1"),yield xl(p,wa),!0}catch(p){}return!1})()}_withPendingWrite(p){var E=this;return(0,R.Z)(function*(){E.pendingWrites++;try{yield p()}finally{E.pendingWrites--}})()}_set(p,E){var O=this;return(0,R.Z)(function*(){return O._withPendingWrite((0,R.Z)(function*(){return yield O._withRetries(U=>xo(U,p,E)),O.localCache[p]=E,O.notifyServiceWorker(p)}))})()}_get(p){var E=this;return(0,R.Z)(function*(){const O=yield E._withRetries(U=>function(_,f){return Dd.apply(this,arguments)}(U,p));return E.localCache[p]=O,O})()}_remove(p){var E=this;return(0,R.Z)(function*(){return E._withPendingWrite((0,R.Z)(function*(){return yield E._withRetries(O=>xl(O,p)),delete E.localCache[p],E.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,R.Z)(function*(){const E=yield p._withRetries(ne=>{const ve=Er(ne,!1).getAll();return new Jr(ve).toPromise()});if(!E)return[];if(0!==p.pendingWrites)return[];const O=[],U=new Set;for(const{fbase_key:ne,value:ve}of E)U.add(ne),JSON.stringify(p.localCache[ne])!==JSON.stringify(ve)&&(p.notifyListeners(ne,ve),O.push(ne));for(const ne of Object.keys(p.localCache))p.localCache[ne]&&!U.has(ne)&&(p.notifyListeners(ne,null),O.push(ne));return O})()}notifyListeners(p,E){this.localCache[p]=E;const O=this.listeners[p];if(O)for(const U of Array.from(O))U(E)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,R.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function Jf(_,f){return un(_,"POST","/v2/accounts/mfaSignIn:start",Wt(_,f))}function uu(){return(uu=(0,R.Z)(function*(_){return(yield un(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Uu(_){return new Promise((f,p)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=f,E.onerror=O=>{const U=Kn("internal-error");U.customData=O,p(U)},E.type="text/javascript",E.charset="UTF-8",function(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(E)})}function Pl(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Jo=1e12;class Wr{constructor(f){this.auth=f,this.counter=Jo,this._widgets=new Map}render(f,p){const E=this.counter;return this._widgets.set(E,new or(f,this.auth.name,p||{})),this.counter++,E}reset(f){var p;const E=f||Jo;null===(p=this._widgets.get(E))||void 0===p||p.delete(),this._widgets.delete(E)}getResponse(f){var p;return(null===(p=this._widgets.get(f||Jo))||void 0===p?void 0:p.getResponse())||""}execute(f){var p=this;return(0,R.Z)(function*(){var E;return null===(E=p._widgets.get(f||Jo))||void 0===E||E.execute(),""})()}}class or{constructor(f,p,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const O="string"==typeof f?document.getElementById(f):f;tt(O,"argument-error",{appName:p}),this.container=O,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(_){const f=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<50;E++)f.push(p.charAt(Math.floor(Math.random()*p.length)));return f.join("")}();const{callback:f,"expired-callback":p}=this.params;if(f)try{f(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ju=Pl("rcb"),tp=new ot(3e4,6e4);class Ro{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(f=L().grecaptcha)||void 0===f?void 0:f.render)}load(f,p=""){return tt((_=p).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_),f,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(L().grecaptcha):new Promise((E,O)=>{const U=L().setTimeout(()=>{O(Kn(f,"network-request-failed"))},tp.get());L()[ju]=()=>{L().clearTimeout(U),delete L()[ju];const ve=L().grecaptcha;if(!ve)return void O(Kn(f,"internal-error"));const rt=ve.render;ve.render=(Xe,Rt)=>{const Pt=rt(Xe,Rt);return this.counter++,Pt},this.hostLanguage=p,E(ve)},Uu(`https://www.google.com/recaptcha/api.js??${(0,z.xO)({onload:ju,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(U),O(Kn(f,"internal-error"))})});var _}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var p;return!!(null===(p=L().grecaptcha)||void 0===p?void 0:p.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Da{load(f){return(0,R.Z)(function*(){return new Wr(f)})()}clearedOneInstance(){}}const Mi="recaptcha",Bu={theme:"light",type:"image"};class Xo{constructor(f,p=Object.assign({},Bu),E){this.parameters=p,this.type=Mi,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=er(E),this.isInvisible="invisible"===this.parameters.size,tt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const O="string"==typeof f?document.getElementById(f):f;tt(O,this.auth,"argument-error"),this.container=O,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Da:new Ro,this.validateStartingState()}verify(){var f=this;return(0,R.Z)(function*(){f.assertNotDestroyed();const p=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(p)||new Promise(U=>{const ne=ve=>{!ve||(f.tokenChangeListeners.delete(ne),U(ve))};f.tokenChangeListeners.add(ne),f.isInvisible&&E.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){tt(!this.parameters.sitekey,this.auth,"argument-error"),tt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),tt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return p=>{if(this.tokenChangeListeners.forEach(E=>E(p)),"function"==typeof f)f(p);else if("string"==typeof f){const E=L()[f];"function"==typeof E&&E(p)}}}assertNotDestroyed(){tt(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,R.Z)(function*(){if(yield f.init(),!f.widgetId){let p=f.container;if(!f.isInvisible){const E=document.createElement("div");p.appendChild(E),p=E}f.widgetId=f.getAssertedRecaptcha().render(p,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,R.Z)(function*(){tt(de()&&!ee(),f.auth,"internal-error"),yield function(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const p=yield function(_){return uu.apply(this,arguments)}(f.auth);tt(p,f.auth,"internal-error"),f.parameters.sitekey=p})()}getAssertedRecaptcha(){return tt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ea{constructor(f,p){this.verificationId=f,this.onConfirmation=p}confirm(f){const p=Bi._fromVerification(this.verificationId,f);return this.onConfirmation(p)}}function ys(){return(ys=(0,R.Z)(function*(_,f,p){const E=er(_),O=yield Aa(E,f,(0,z.m9)(p));return new ea(O,U=>tr(E,U))})).apply(this,arguments)}function Wc(){return(Wc=(0,R.Z)(function*(_,f,p){const E=(0,z.m9)(_);yield eo(!1,E,"phone");const O=yield Aa(E.auth,f,(0,z.m9)(p));return new ea(O,U=>os(E,U))})).apply(this,arguments)}function Nl(){return(Nl=(0,R.Z)(function*(_,f,p){const E=(0,z.m9)(_),O=yield Aa(E.auth,f,(0,z.m9)(p));return new ea(O,U=>fa(E,U))})).apply(this,arguments)}function Aa(_,f,p){return xd.apply(this,arguments)}function xd(){return(xd=(0,R.Z)(function*(_,f,p){var E;const O=yield p.verify();try{let U;if(tt("string"==typeof O,_,"argument-error"),tt(p.type===Mi,_,"argument-error"),U="string"==typeof f?{phoneNumber:f}:f,"session"in U){const ne=U.session;if("phoneNumber"in U)return tt("enroll"===ne.type,_,"internal-error"),(yield ro(_,{idToken:ne.credential,phoneEnrollmentInfo:{phoneNumber:U.phoneNumber,recaptchaToken:O}})).phoneSessionInfo.sessionInfo;{tt("signin"===ne.type,_,"internal-error");const ve=(null===(E=U.multiFactorHint)||void 0===E?void 0:E.uid)||U.multiFactorUid;return tt(ve,_,"missing-multi-factor-info"),(yield Jf(_,{mfaPendingCredential:ne.credential,mfaEnrollmentId:ve,phoneSignInInfo:{recaptchaToken:O}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ne}=yield Eo(_,{phoneNumber:U.phoneNumber,recaptchaToken:O});return ne}}finally{p._reset()}})).apply(this,arguments)}function F(){return(F=(0,R.Z)(function*(_,f){yield Go((0,z.m9)(_),f)})).apply(this,arguments)}let $=(()=>{class _{constructor(p){this.providerId=_.PROVIDER_ID,this.auth=er(p)}verifyPhoneNumber(p,E){return Aa(this.auth,p,(0,z.m9)(E))}static credential(p,E){return Bi._fromVerification(p,E)}static credentialFromResult(p){return _.credentialFromTaggedObject(p)}static credentialFromError(p){return _.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:E,temporaryProof:O}=p;return E&&O?Bi._fromTokenResponse(E,O):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function J(_,f){return f?Fn(f):(tt(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class ge extends xi{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return mi(f,this._buildIdpRequest())}_linkToIdToken(f,p){return mi(f,this._buildIdpRequest(p))}_getReauthenticationResolver(f){return mi(f,this._buildIdpRequest())}_buildIdpRequest(f){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(p.idToken=f),p}}function Se(_){return En(_.auth,new ge(_),_.bypassAuthState)}function qe(_){const{auth:f,user:p}=_;return tt(p,f,"internal-error"),qa(p,new ge(_),_.bypassAuthState)}function pt(_){return kt.apply(this,arguments)}function kt(){return(kt=(0,R.Z)(function*(_){const{auth:f,user:p}=_;return tt(p,f,"internal-error"),Go(p,new ge(_),_.bypassAuthState)})).apply(this,arguments)}class rn{constructor(f,p,E,O,U=!1){this.auth=f,this.resolver=E,this.user=O,this.bypassAuthState=U,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var f=this;return new Promise(function(){var p=(0,R.Z)(function*(E,O){f.pendingPromise={resolve:E,reject:O};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(U){f.reject(U)}});return function(E,O){return p.apply(this,arguments)}}())}onAuthEvent(f){var p=this;return(0,R.Z)(function*(){const{urlResponse:E,sessionId:O,postBody:U,tenantId:ne,error:ve,type:rt}=f;if(ve)return void p.reject(ve);const Xe={auth:p.auth,requestUri:E,sessionId:O,tenantId:ne||void 0,postBody:U||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(rt)(Xe))}catch(Rt){p.reject(Rt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Se;case"linkViaPopup":case"linkViaRedirect":return pt;case"reauthViaPopup":case"reauthViaRedirect":return qe;default:Ft(this.auth,"internal-error")}}resolve(f){Sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Sn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Qt=new ot(2e3,1e4);function fi(){return(fi=(0,R.Z)(function*(_,f,p){const E=er(_);gn(_,f,Ee);const O=J(E,p);return new Sa(E,"signInViaPopup",f,O).executeNotNull()})).apply(this,arguments)}function ta(){return(ta=(0,R.Z)(function*(_,f,p){const E=(0,z.m9)(_);gn(E.auth,f,Ee);const O=J(E.auth,p);return new Sa(E.auth,"reauthViaPopup",f,O,E).executeNotNull()})).apply(this,arguments)}function Nr(){return(Nr=(0,R.Z)(function*(_,f,p){const E=(0,z.m9)(_);gn(E.auth,f,Ee);const O=J(E.auth,p);return new Sa(E.auth,"linkViaPopup",f,O,E).executeNotNull()})).apply(this,arguments)}let Sa=(()=>{class _ extends rn{constructor(p,E,O,U,ne){super(p,E,U,ne),this.provider=O,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var p=this;return(0,R.Z)(function*(){const E=yield p.execute();return tt(E,p.auth,"internal-error"),E})()}onExecution(){var p=this;return(0,R.Z)(function*(){Sn(1===p.filter.length,"Popup operations only handle one event");const E=b();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],E),p.authWindow.associatedEvent=E,p.resolver._originValidation(p.auth).catch(O=>{p.reject(O)}),p.resolver._isIframeWebStorageSupported(p.auth,O=>{O||p.reject(Kn(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(Kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const p=()=>{var E,O;this.pollId=(null===(O=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===O?void 0:O.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Kn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Qt.get())};p()}}return _.currentPopupAction=null,_})();const vs=new Map;class cr extends rn{constructor(f,p,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,p=this;return(0,R.Z)(function*(){let E=vs.get(p.auth._key());if(!E){try{const U=(yield function(_,f){return du.apply(this,arguments)}(p.resolver,p.auth))?yield f().call(p):null;E=()=>Promise.resolve(U)}catch(O){E=()=>Promise.reject(O)}vs.set(p.auth._key(),E)}return p.bypassAuthState||vs.set(p.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var p=()=>super.onAuthEvent,E=this;return(0,R.Z)(function*(){if("signInViaRedirect"===f.type)return p().call(E,f);if("unknown"!==f.type){if(f.eventId){const O=yield E.auth._redirectUserForId(f.eventId);if(O)return E.user=O,p().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,R.Z)(function*(){})()}cleanUp(){}}function du(){return(du=(0,R.Z)(function*(_,f){const p=om(f),E=$u(_);if(!(yield E._isAvailable()))return!1;const O="true"===(yield E._get(p));return yield E._remove(p),O})).apply(this,arguments)}function ac(_,f){return hu.apply(this,arguments)}function hu(){return(hu=(0,R.Z)(function*(_,f){return $u(_)._set(om(f),"true")})).apply(this,arguments)}function Rd(_,f){vs.set(_._key(),f)}function $u(_){return Fn(_._redirectPersistence)}function om(_){return Pn("pendingRedirect",_.config.apiKey,_.name)}function ra(){return(ra=(0,R.Z)(function*(_,f,p){const E=er(_);gn(_,f,Ee);const O=J(E,p);return yield ac(O,E),O._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function Pd(){return(Pd=(0,R.Z)(function*(_,f,p){const E=(0,z.m9)(_);gn(E.auth,f,Ee);const O=J(E.auth,p);yield ac(O,E.auth);const U=yield _t(E);return O._openRedirect(E.auth,f,"reauthViaRedirect",U)})).apply(this,arguments)}function xa(){return(xa=(0,R.Z)(function*(_,f,p){const E=(0,z.m9)(_);gn(E.auth,f,Ee);const O=J(E.auth,p);yield eo(!1,E,f.providerId),yield ac(O,E.auth);const U=yield _t(E);return O._openRedirect(E.auth,f,"linkViaRedirect",U)})).apply(this,arguments)}function xt(){return(xt=(0,R.Z)(function*(_,f){return yield er(_)._initializationPromise,Vt(_,f,!1)})).apply(this,arguments)}function Vt(_,f){return pu.apply(this,arguments)}function pu(){return(pu=(0,R.Z)(function*(_,f,p=!1){const E=er(_),O=J(E,f),ne=yield new cr(E,O,p).execute();return ne&&!p&&(delete ne.user._redirectEventId,yield E._persistUserIfCurrent(ne.user),yield E._setRedirectUser(null,f)),ne})).apply(this,arguments)}function _t(_){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,R.Z)(function*(_){const f=b(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class vi{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let p=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(p=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ip(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=f,p=!0)),p}sendToConsumer(f,p){var E;if(f.error&&!ip(f)){const O=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";p.onError(Kn(this.auth,O))}else p.onAuthEvent(f)}isEventForConsumer(f,p){const E=null===p.eventId||!!f.eventId&&f.eventId===p.eventId;return p.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rp(f))}saveEventToCache(f){this.cachedEventUids.add(rp(f)),this.lastProcessedEventTime=Date.now()}}function rp(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function ip({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===(null==f?void 0:f.code)}function sp(_){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,R.Z)(function*(_,f={}){return un(_,"GET","/v1/projects",f)})).apply(this,arguments)}const Nh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gu=/^https?/;function op(){return(op=(0,R.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield sp(_);for(const p of f)try{if($_(p))return}catch(E){}Ft(_,"unauthorized-domain")})).apply(this,arguments)}function $_(_){const f=X(),{protocol:p,hostname:E}=new URL(f);if(_.startsWith("chrome-extension://")){const ne=new URL(_);return""===ne.hostname&&""===E?"chrome-extension:"===p&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===p&&ne.hostname===E}if(!gu.test(p))return!1;if(Nh.test(_))return E===_;const O=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+O+"|"+O+")$","i").test(E)}const Ol=new ot(3e4,6e4);function sn(){const _=L().___jsl;if(null==_?void 0:_.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let p=0;p<_.CP.length;p++)_.CP[p]=null}let Wu=null;function xr(_){return Wu=Wu||function(_){return new Promise((f,p)=>{var E,O,U;function ne(){sn(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{sn(),p(Kn(_,"network-request-failed"))},timeout:Ol.get()})}if(null===(O=null===(E=L().gapi)||void 0===E?void 0:E.iframes)||void 0===O?void 0:O.Iframe)f(gapi.iframes.getContext());else{if(!(null===(U=L().gapi)||void 0===U?void 0:U.load)){const ve=Pl("iframefcb");return L()[ve]=()=>{gapi.load?ne():p(Kn(_,"network-request-failed"))},Uu(`https://apis.google.com/js/api.js?onload=${ve}`).catch(rt=>p(rt))}ne()}}).catch(f=>{throw Wu=null,f})}(_),Wu}const Bt=new ot(5e3,15e3),um={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ei=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yt(_){const f=_.config;tt(f.authDomain,_,"auth-domain-config-required");const p=f.emulator?at(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,E={apiKey:f.apiKey,appName:_.name,v:_e.SDK_VERSION},O=ei.get(_.config.apiHost);O&&(E.eid=O);const U=_._getFrameworks();return U.length&&(E.fw=U.join(",")),`${p}?${(0,z.xO)(E).slice(1)}`}function Ra(){return Ra=(0,R.Z)(function*(_){const f=yield xr(_),p=L().gapi;return tt(p,_,"internal-error"),f.open({where:document.body,url:yt(_),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:um,dontclear:!0},E=>new Promise(function(){var O=(0,R.Z)(function*(U,ne){yield E.restyle({setHideOnLeave:!1});const ve=Kn(_,"network-request-failed"),rt=L().setTimeout(()=>{ne(ve)},Bt.get());function Xe(){L().clearTimeout(rt),U(E)}E.ping(Xe).then(Xe,()=>{ne(ve)})});return function(U,ne){return O.apply(this,arguments)}}()))}),Ra.apply(this,arguments)}const qc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Oh{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Nd(_,f,p,E,O,U){tt(_.config.authDomain,_,"auth-domain-config-required"),tt(_.config.apiKey,_,"invalid-api-key");const ne={apiKey:_.config.apiKey,appName:_.name,authType:p,redirectUrl:E,v:_e.SDK_VERSION,eventId:O};if(f instanceof Ee){f.setDefaultLanguage(_.languageCode),ne.providerId=f.providerId||"",(0,z.xb)(f.getCustomParameters())||(ne.customParameters=JSON.stringify(f.getCustomParameters()));for(const[rt,Xe]of Object.entries(U||{}))ne[rt]=Xe}if(f instanceof Ke){const rt=f.getScopes().filter(Xe=>""!==Xe);rt.length>0&&(ne.scopes=rt.join(","))}_.tenantId&&(ne.tid=_.tenantId);const ve=ne;for(const rt of Object.keys(ve))void 0===ve[rt]&&delete ve[rt];return`${function({config:_}){return _.emulator?at(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,z.xO)(ve).slice(1)}`}const Ll="webStorageSupport";class _u extends class{constructor(f){this.factorId=f}_process(f,p,E){switch(p.type){case"enroll":return this._finalizeEnroll(f,p.credential,E);case"signin":return this._finalizeSignIn(f,p.credential);default:return Rr("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new _u(f)}_finalizeEnroll(f,p,E){return function(_,f){return un(_,"POST","/v2/accounts/mfaEnrollment:finalize",Wt(_,f))}(f,{idToken:p,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,p){return function(_,f){return un(_,"POST","/v2/accounts/mfaSignIn:finalize",Wt(_,f))}(f,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ku=(()=>{class _{constructor(){}static assertion(p){return _u._fromCredential(p)}}return _.FACTOR_ID="phone",_})();var _,Pa="@firebase/auth",Lh="0.20.10";class zu{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var p=this;return(0,R.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const p=this.auth.onIdTokenChanged(E=>{var O;f((null===(O=E)||void 0===O?void 0:O.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,p),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const p=this.internalListeners.get(f);!p||(this.internalListeners.delete(f),p(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function cc(){return window}function Ni(){return Ni=(0,R.Z)(function*(_,f,p){var E;const{BuildInfo:O}=cc();Sn(f.sessionId,"AuthEvent did not contain a session ID");const U=yield ni(f.sessionId),ne={};return Xn()?ne.ibi=O.packageName:ui()?ne.apn=O.packageName:Ft(_,"operation-not-supported-in-this-environment"),O.displayName&&(ne.appDisplayName=O.displayName),ne.sessionId=U,Nd(_,p,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,ne)}),Ni.apply(this,arguments)}function Hl(){return Hl=(0,R.Z)(function*(_){const{BuildInfo:f}=cc(),p={};Xn()?p.iosBundleId=f.packageName:ui()?p.androidPackageName=f.packageName:Ft(_,"operation-not-supported-in-this-environment"),yield sp(_,p)}),Hl.apply(this,arguments)}function Ul(){return Ul=(0,R.Z)(function*(_,f,p){const{cordova:E}=cc();let O=()=>{};try{yield new Promise((U,ne)=>{let ve=null;function rt(){var Pt;U();const In=null===(Pt=E.plugins.browsertab)||void 0===Pt?void 0:Pt.close;"function"==typeof In&&In(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function Xe(){ve||(ve=window.setTimeout(()=>{ne(Kn(_,"redirect-cancelled-by-user"))},2e3))}function Rt(){"visible"===(null==document?void 0:document.visibilityState)&&Xe()}f.addPassiveListener(rt),document.addEventListener("resume",Xe,!1),ui()&&document.addEventListener("visibilitychange",Rt,!1),O=()=>{f.removePassiveListener(rt),document.removeEventListener("resume",Xe,!1),document.removeEventListener("visibilitychange",Rt,!1),ve&&window.clearTimeout(ve)}})}finally{O()}}),Ul.apply(this,arguments)}function ni(_){return Ma.apply(this,arguments)}function Ma(){return Ma=(0,R.Z)(function*(_){const f=ri(_),p=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(p)).map(O=>O.toString(16).padStart(2,"0")).join("")}),Ma.apply(this,arguments)}function ri(_){if(Sn(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),p=new Uint8Array(f);for(let E=0;E<_.length;E++)p[E]=_.charCodeAt(E);return p}(0,z.Pz)("authIdTokenMaxAge"),_="Browser",(0,_e._registerComponent)(new Un.wA("auth",(f,{options:p})=>{const E=f.getProvider("app").getImmediate(),O=f.getProvider("heartbeat"),{apiKey:U,authDomain:ne}=E.options;return((ve,rt)=>{tt(U&&!U.includes(":"),"invalid-api-key",{appName:ve.name}),tt(!(null==ne?void 0:ne.includes(":")),"argument-error",{appName:ve.name});const Xe={apiKey:U,authDomain:ne,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ai(_)},Rt=new es(ve,rt,Xe);return function(_,f){const p=(null==f?void 0:f.persistence)||[],E=(Array.isArray(p)?p:[p]).map(Fn);(null==f?void 0:f.errorMap)&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(E,null==f?void 0:f.popupRedirectResolver)}(Rt,p),Rt})(E,O)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,p,E)=>{f.getProvider("auth-internal").initialize()})),(0,_e._registerComponent)(new Un.wA("auth-internal",f=>{const p=er(f.getProvider("auth").getImmediate());return new zu(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,_e.registerVersion)(Pa,Lh,void 0),(0,_e.registerVersion)(Pa,Lh,"esm2017");class kd extends vi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(f)),super.onEvent(f)}initialized(){var f=this;return(0,R.Z)(function*(){yield f.initPromise})()}}function lp(_){return Na.apply(this,arguments)}function Na(){return Na=(0,R.Z)(function*(_){const f=yield Uh()._get(Us(_));return f&&(yield Uh()._remove(Us(_))),f}),Na.apply(this,arguments)}function Fd(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const E=Math.floor(Math.random()*f.length);_.push(f.charAt(E))}return _.join("")}function Uh(){return Fn(Ki)}function Us(_){return Pn("authEvent",_.config.apiKey,_.name)}function js(_){if(!(null==_?void 0:_.includes("?")))return{};const[f,...p]=_.split("?");return(0,z.zd)(p.join("?"))}function hc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Kn("no-auth-event")}}function wu(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function Qu(_=(0,z.z$)()){return!("file:"!==wu()&&"ionic:"!==wu()&&"capacitor:"!==wu()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Wl(){try{const _=self.localStorage,f=b();if(_)return _.setItem(f,"1"),_.removeItem(f),!function(_=(0,z.z$)()){return(0,z.w1)()&&11===(null==document?void 0:document.documentMode)||function(_=(0,z.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,z.hl)()}catch(_){return ql()&&(0,z.hl)()}return!1}function ql(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ki(){return("http:"===wu()||"https:"===wu()||(0,z.ru)()||Qu())&&!((0,z.b$)()||(0,z.UG)())&&Wl()&&!ql()}function pp(){return Qu()&&"undefined"!=typeof document}function Ju(){return Ju=(0,R.Z)(function*(){return!!pp()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})}),Ju.apply(this,arguments)}const Fi={LOCAL:"local",NONE:"none",SESSION:"session"},Oa=tt,Xu="persistence";function el(_){return Hd.apply(this,arguments)}function Hd(){return Hd=(0,R.Z)(function*(_){yield _._initializationPromise;const f=pi(),p=Pn(Xu,_.config.apiKey,_.name);f&&f.setItem(p,_._getPersistence())}),Hd.apply(this,arguments)}function pi(){var _;try{return(null===(_="undefined"!=typeof window?window:null)||void 0===_?void 0:_.sessionStorage)||null}catch(f){return null}}const No=tt;class fc{constructor(){this.browserResolver=Fn(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ss,this._completeRedirectFn=Vt,this._overrideRedirectResult=Rd}_openPopup(f,p,E,O){var U=this;return(0,R.Z)(function*(){var ne;Sn(null===(ne=U.eventManagers[f._key()])||void 0===ne?void 0:ne.manager,"_initialize() not called before _openPopup()");const ve=Nd(f,p,E,X(),O);return function(_,f,p,E=500,O=600){const U=Math.max((window.screen.availHeight-O)/2,0).toString(),ne=Math.max((window.screen.availWidth-E)/2,0).toString();let ve="";const rt=Object.assign(Object.assign({},qc),{width:E.toString(),height:O.toString(),top:U,left:ne}),Xe=(0,z.z$)().toLowerCase();p&&(ve=ks(Xe)?"_blank":p),Xt(Xe)&&(f=f||"http://localhost",rt.scrollbars="yes");const Rt=Object.entries(rt).reduce((In,[Zi,zc])=>`${In}${Zi}=${zc},`,"");if(function(_=(0,z.z$)()){var f;return Xn(_)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Xe)&&"_self"!==ve)return function(_,f){const p=document.createElement("a");p.href=_,p.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(E)}(f||"",ve),new Oh(null);const Pt=window.open(f||"",ve,Rt);tt(Pt,_,"popup-blocked");try{Pt.focus()}catch(In){}return new Oh(Pt)}(f,ve,b())})()}_openRedirect(f,p,E,O){var U=this;return(0,R.Z)(function*(){return yield U._originValidation(f),_=Nd(f,p,E,X(),O),L().location.href=_,new Promise(()=>{});var _})()}_initialize(f){const p=f._key();if(this.eventManagers[p]){const{manager:O,promise:U}=this.eventManagers[p];return O?Promise.resolve(O):(Sn(U,"If manager is not set, promise should be"),U)}const E=this.initAndGetManager(f);return this.eventManagers[p]={promise:E},E.catch(()=>{delete this.eventManagers[p]}),E}initAndGetManager(f){var p=this;return(0,R.Z)(function*(){const E=yield function(_){return Ra.apply(this,arguments)}(f),O=new vi(f);return E.register("authEvent",U=>(tt(null==U?void 0:U.authEvent,f,"invalid-auth-event"),{status:O.onEvent(U.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[f._key()]={manager:O},p.iframes[f._key()]=E,O})()}_isIframeWebStorageSupported(f,p){this.iframes[f._key()].send(Ll,{type:Ll},O=>{var U;const ne=null===(U=null==O?void 0:O[0])||void 0===U?void 0:U[Ll];void 0!==ne&&p(!!ne),Ft(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function(_){return op.apply(this,arguments)}(f)),this.originValidationPromises[p]}get _shouldInitProactively(){return fs()||Ys()||Xn()}}),this.cordovaResolver=Fn(class{constructor(){this._redirectPersistence=Ss,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Vt,this._overrideRedirectResult=Rd}_initialize(f){var p=this;return(0,R.Z)(function*(){const E=f._key();let O=p.eventManagers.get(E);return O||(O=new kd(f),p.eventManagers.set(E,O),p.attachCallbackListeners(f,O)),O})()}_openPopup(f){Ft(f,"operation-not-supported-in-this-environment")}_openRedirect(f,p,E,O){var U=this;return(0,R.Z)(function*(){!function(_){var f,p,E,O,U,ne,ve,rt,Xe,Rt;const Pt=cc();tt("function"==typeof(null===(f=null==Pt?void 0:Pt.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),tt(void 0!==(null===(p=null==Pt?void 0:Pt.BuildInfo)||void 0===p?void 0:p.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),tt("function"==typeof(null===(U=null===(O=null===(E=null==Pt?void 0:Pt.cordova)||void 0===E?void 0:E.plugins)||void 0===O?void 0:O.browsertab)||void 0===U?void 0:U.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tt("function"==typeof(null===(rt=null===(ve=null===(ne=null==Pt?void 0:Pt.cordova)||void 0===ne?void 0:ne.plugins)||void 0===ve?void 0:ve.browsertab)||void 0===rt?void 0:rt.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tt("function"==typeof(null===(Rt=null===(Xe=null==Pt?void 0:Pt.cordova)||void 0===Xe?void 0:Xe.InAppBrowser)||void 0===Rt?void 0:Rt.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const ne=yield U._initialize(f);yield ne.initialized(),ne.resetRedirect(),vs.clear(),yield U._originValidation(f);const ve=function(_,f,p=null){return{type:f,eventId:p,urlResponse:null,sessionId:Fd(),postBody:null,tenantId:_.tenantId,error:Kn(_,"no-auth-event")}}(f,E,O);yield function(_,f){return Uh()._set(Us(_),f)}(f,ve);const rt=yield function(_,f,p){return Ni.apply(this,arguments)}(f,ve,p),Xe=yield function(_){const{cordova:f}=cc();return new Promise(p=>{f.plugins.browsertab.isAvailable(E=>{let O=null;E?f.plugins.browsertab.openUrl(_):O=f.InAppBrowser.open(_,function(_=(0,z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),p(O)})})}(rt);return function(_,f,p){return Ul.apply(this,arguments)}(f,ne,Xe)})()}_isIframeWebStorageSupported(f,p){throw new Error("Method not implemented.")}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function(_){return Hl.apply(this,arguments)}(f)),this.originValidationPromises[p]}attachCallbackListeners(f,p){const{universalLinks:E,handleOpenURL:O,BuildInfo:U}=cc(),ne=setTimeout((0,R.Z)(function*(){yield lp(f),p.onEvent(hc())}),500),ve=function(){var Rt=(0,R.Z)(function*(Pt){clearTimeout(ne);const In=yield lp(f);let Zi=null;In&&(null==Pt?void 0:Pt.url)&&(Zi=function(_,f){var p,E;const O=function(_){const f=js(_),p=f.link?decodeURIComponent(f.link):void 0,E=js(p).link,O=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return js(O).link||O||E||p||_}(f);if(O.includes("/__/auth/callback")){const U=js(O),ne=U.firebaseError?function(_){try{return JSON.parse(_)}catch(f){return null}}(decodeURIComponent(U.firebaseError)):null,ve=null===(E=null===(p=null==ne?void 0:ne.code)||void 0===p?void 0:p.split("auth/"))||void 0===E?void 0:E[1],rt=ve?Kn(ve):null;return rt?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:rt,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:O,postBody:null}}return null}(In,Pt.url)),p.onEvent(Zi||hc())});return function(In){return Rt.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,ve);const rt=O,Xe=`${U.packageName.toLowerCase()}://`;cc().handleOpenURL=function(){var Rt=(0,R.Z)(function*(Pt){if(Pt.toLowerCase().startsWith(Xe)&&ve({url:Pt}),"function"==typeof rt)try{rt(Pt)}catch(In){console.error(In)}});return function(Pt){return Rt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ss,this._completeRedirectFn=Vt,this._overrideRedirectResult=Rd}_initialize(f){var p=this;return(0,R.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,p,E,O){var U=this;return(0,R.Z)(function*(){return yield U.selectUnderlyingResolver(),U.assertedUnderlyingResolver._openPopup(f,p,E,O)})()}_openRedirect(f,p,E,O){var U=this;return(0,R.Z)(function*(){return yield U.selectUnderlyingResolver(),U.assertedUnderlyingResolver._openRedirect(f,p,E,O)})()}_isIframeWebStorageSupported(f,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,p)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return pp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return No(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,R.Z)(function*(){if(f.underlyingResolver)return;const p=yield function(){return Ju.apply(this,arguments)}();f.underlyingResolver=p?f.cordovaResolver:f.browserResolver})()}}function yp(_){return _.unwrap()}function vp(_){return Bh(_)}function Bh(_){const{_tokenResponse:f}=_ instanceof z.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof z.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return $.credentialFromResult(_);const p=f.providerId;if(!p||"password"===p)return null;let E;switch(p){case"google.com":E=At;break;case"facebook.com":E=en;break;case"github.com":E=Vn;break;case"twitter.com":E=rs;break;default:const{oauthIdToken:O,oauthAccessToken:U,oauthTokenSecret:ne,pendingToken:ve,nonce:rt}=f;return U||ne||O||ve?ve?p.startsWith("saml.")?Bn._create(p,ve):Ui._fromParams({providerId:p,signInMethod:p,pendingToken:ve,idToken:O,accessToken:U}):new It(p).credential({idToken:O,accessToken:U,rawNonce:rt}):null}return _ instanceof z.ZR?E.credentialFromError(_):E.credentialFromResult(_)}function Bs(_,f){return f.catch(p=>{throw p instanceof z.ZR&&function(_,f){var p,E;const O=null===(p=f.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=f)||void 0===E?void 0:E.code))f.resolver=new tl(_,function(_,f){var p;const E=(0,z.m9)(_),O=f;return tt(f.customData.operationType,E,"argument-error"),tt(null===(p=O.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,E,"argument-error"),$c._fromError(E,O)}(_,f));else if(O){const U=Bh(f),ne=f;U&&(ne.credential=U,ne.tenantId=O.tenantId||void 0,ne.email=O.email||void 0,ne.phoneNumber=O.phoneNumber||void 0)}}(_,p),p}).then(p=>{const O=p.user;return{operationType:p.operationType,credential:vp(p),additionalUserInfo:ou(p),user:Li.getOrCreate(O)}})}function ka(_,f){return Kc.apply(this,arguments)}function Kc(){return Kc=(0,R.Z)(function*(_,f){const p=yield f;return{verificationId:p.verificationId,confirm:E=>Bs(_,p.confirm(E))}}),Kc.apply(this,arguments)}class tl{constructor(f,p){this.resolver=p,this.auth=function(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Bs(yp(this.auth),this.resolver.resolveSignIn(f))}}class Li{constructor(f){this._delegate=f,this.multiFactor=function(_){const f=(0,z.m9)(_);return ms.has(f)||ms.set(f,So._fromUser(f)),ms.get(f)}(f)}static getOrCreate(f){return Li.USER_MAP.has(f)||Li.USER_MAP.set(f,new Li(f)),Li.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var p=this;return(0,R.Z)(function*(){return Bs(p.auth,os(p._delegate,f))})()}linkWithPhoneNumber(f,p){var E=this;return(0,R.Z)(function*(){return ka(E.auth,function(_,f,p){return Wc.apply(this,arguments)}(E._delegate,f,p))})()}linkWithPopup(f){var p=this;return(0,R.Z)(function*(){return Bs(p.auth,function(_,f,p){return Nr.apply(this,arguments)}(p._delegate,f,fc))})()}linkWithRedirect(f){var p=this;return(0,R.Z)(function*(){return yield el(er(p.auth)),function(_,f,p){return function(_,f,p){return xa.apply(this,arguments)}(_,f,p)}(p._delegate,f,fc)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var p=this;return(0,R.Z)(function*(){return Bs(p.auth,fa(p._delegate,f))})()}reauthenticateWithPhoneNumber(f,p){return ka(this.auth,function(_,f,p){return Nl.apply(this,arguments)}(this._delegate,f,p))}reauthenticateWithPopup(f){return Bs(this.auth,function(_,f,p){return ta.apply(this,arguments)}(this._delegate,f,fc))}reauthenticateWithRedirect(f){var p=this;return(0,R.Z)(function*(){return yield el(er(p.auth)),function(_,f,p){return function(_,f,p){return Pd.apply(this,arguments)}(_,f,p)}(p._delegate,f,fc)})()}sendEmailVerification(f){return function(_,f){return Ya.apply(this,arguments)}(this._delegate,f)}unlink(f){var p=this;return(0,R.Z)(function*(){return yield function(_,f){return ha.apply(this,arguments)}(p._delegate,f),p})()}updateEmail(f){return function(_,f){return Yo((0,z.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function(_,f){return Yo((0,z.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function(_,f){return F.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function(_,f){return Ls.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,p){return function(_,f,p){return no.apply(this,arguments)}(this._delegate,f,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Li.USER_MAP=new WeakMap;const Kl=tt;let pc=(()=>{class _{constructor(p,E){if(this.app=p,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:O}=p.options;Kl(O,"invalid-api-key",{appName:p.name}),Kl(O,"invalid-api-key",{appName:p.name});const U="undefined"!=typeof window?fc:void 0;this._delegate=E.initialize({options:{persistence:zl(O,p.name),popupRedirectResolver:U}}),this._delegate._updateErrorMap(Cs),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Li.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,E){!function(_,f,p){const E=er(_);tt(E._canInitEmulator,E,"emulator-config-failed"),tt(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const O=!!(null==p?void 0:p.disableWarnings),U=Si(f),{host:ne,port:ve}=function(_){const f=Si(_),p=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!p)return{host:"",port:null};const E=p[2].split("@").pop()||"",O=/^(\[[^\]]+\])(:|$)/.exec(E);if(O){const U=O[1];return{host:U,port:Qs(E.substr(U.length+1))}}{const[U,ne]=E.split(":");return{host:U,port:Qs(ne)}}}(f);E.config.emulator={url:`${U}//${ne}${null===ve?"":`:${ve}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:ne,port:ve,protocol:U.replace(":",""),options:Object.freeze({disableWarnings:O})}),O||function(){function _(){const f=document.createElement("p"),p=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,p,E)}applyActionCode(p){return function(_,f){return zo.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return za(this._delegate,p)}confirmPasswordReset(p,E){return function(_,f,p){return Nc.apply(this,arguments)}(this._delegate,p,E)}createUserWithEmailAndPassword(p,E){var O=this;return(0,R.Z)(function*(){return Bs(O._delegate,function(_,f,p){return To.apply(this,arguments)}(O._delegate,p,E))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function(_,f){return cs.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function(_,f){const p=N.parseLink(f);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,R.Z)(function*(){Kl(ki(),p._delegate,"operation-not-supported-in-this-environment");const E=yield function(_,f){return xt.apply(this,arguments)}(p._delegate,fc);return E?Bs(p._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function(_,f){er(_)._logFramework(f)}(this._delegate,p)}onAuthStateChanged(p,E,O){const{next:U,error:ne,complete:ve}=Ud(p,E,O);return this._delegate.onAuthStateChanged(U,ne,ve)}onIdTokenChanged(p,E,O){const{next:U,error:ne,complete:ve}=Ud(p,E,O);return this._delegate.onIdTokenChanged(U,ne,ve)}sendSignInLinkToEmail(p,E){return function(_,f,p){return ga.apply(this,arguments)}(this._delegate,p,E)}sendPasswordResetEmail(p,E){return function(_,f,p){return gs.apply(this,arguments)}(this._delegate,p,E||void 0)}setPersistence(p){var E=this;return(0,R.Z)(function*(){let O;switch(function(_,f){Oa(Object.values(Fi).includes(f),_,"invalid-persistence-type"),(0,z.b$)()?Oa(f!==Fi.SESSION,_,"unsupported-persistence-type"):(0,z.UG)()?Oa(f===Fi.NONE,_,"unsupported-persistence-type"):ql()?Oa(f===Fi.NONE||f===Fi.LOCAL&&(0,z.hl)(),_,"unsupported-persistence-type"):Oa(f===Fi.NONE||Wl(),_,"unsupported-persistence-type")}(E._delegate,p),p){case Fi.SESSION:O=Ss;break;case Fi.LOCAL:O=(yield Fn(Ta)._isAvailable())?Ta:Ki;break;case Fi.NONE:O=fr;break;default:return Ft("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(O)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Bs(this._delegate,function(_){return $i.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Bs(this._delegate,tr(this._delegate,p))}signInWithCustomToken(p){return Bs(this._delegate,function(_,f){return ar.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,E){return Bs(this._delegate,function(_,f,p){return tr((0,z.m9)(_),se.credential(f,p))}(this._delegate,p,E))}signInWithEmailLink(p,E){return Bs(this._delegate,function(_,f,p){return ya.apply(this,arguments)}(this._delegate,p,E))}signInWithPhoneNumber(p,E){return ka(this._delegate,function(_,f,p){return ys.apply(this,arguments)}(this._delegate,p,E))}signInWithPopup(p){var E=this;return(0,R.Z)(function*(){return Kl(ki(),E._delegate,"operation-not-supported-in-this-environment"),Bs(E._delegate,function(_,f,p){return fi.apply(this,arguments)}(E._delegate,p,fc))})()}signInWithRedirect(p){var E=this;return(0,R.Z)(function*(){return Kl(ki(),E._delegate,"operation-not-supported-in-this-environment"),yield el(E._delegate),function(_,f,p){return function(_,f,p){return ra.apply(this,arguments)}(_,f,p)}(E._delegate,p,fc)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function(_,f){return kc.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=Fi,_})();function Ud(_,f,p){let E=_;"function"!=typeof _&&({next:E,error:f,complete:p}=_);const O=E;return{next:ne=>O(ne&&Li.getOrCreate(ne)),error:f,complete:p}}function zl(_,f){const p=function(_,f){const p=pi();if(!p)return[];const E=Pn(Xu,_,f);switch(p.getItem(E)){case Fi.NONE:return[fr];case Fi.LOCAL:return[Ta,Ss];case Fi.SESSION:return[Ss];default:return[]}}(_,f);if("undefined"!=typeof self&&!p.includes(Ta)&&p.push(Ta),"undefined"!=typeof window)for(const E of[Ki,Ss])p.includes(E)||p.push(E);return p.includes(fr)||p.push(fr),p}class ao{constructor(){this.providerId="phone",this._delegate=new $(yp(A.Z.auth()))}static credential(f,p){return $.credential(f,p)}verifyPhoneNumber(f,p){return this._delegate.verifyPhoneNumber(f,p)}unwrap(){return this._delegate}}ao.PHONE_SIGN_IN_METHOD=$.PHONE_SIGN_IN_METHOD,ao.PROVIDER_ID=$.PROVIDER_ID;const Zl=tt;class Yl{constructor(f,p,E=A.Z.app()){var O;Zl(null===(O=E.options)||void 0===O?void 0:O.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Xo(f,p,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(_){_.INTERNAL.registerComponent(new Un.wA("auth-compat",f=>{const p=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new pc(p,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:se,FacebookAuthProvider:en,GithubAuthProvider:Vn,GoogleAuthProvider:At,OAuthProvider:It,SAMLAuthProvider:mr,PhoneAuthProvider:ao,PhoneMultiFactorGenerator:Ku,RecaptchaVerifier:Yl,TwitterAuthProvider:rs,Auth:pc,AuthCredential:xi,Error:z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.23")}(A.Z)},7574:(ut,Ie,j)=>{"use strict";j.d(Ie,{y:()=>Q});var R=j(7393),z=j(9181),_e=j(6490),le=j(6554),be=j(4487);var Y=j(2494);let Q=(()=>{class me{constructor(He){this._isScalar=!1,He&&(this._subscribe=He)}lift(He){const Oe=new me;return Oe.source=this,Oe.operator=He,Oe}subscribe(He,Oe,xe){const{operator:Ye}=this,Be=function(me,Re,He){if(me){if(me instanceof R.L)return me;if(me[z.b])return me[z.b]()}return me||Re||He?new R.L(me,Re,He):new R.L(_e.c)}(He,Oe,xe);if(Be.add(Ye?Ye.call(Be,this.source):this.source||Y.v.useDeprecatedSynchronousErrorHandling&&!Be.syncErrorThrowable?this._subscribe(Be):this._trySubscribe(Be)),Y.v.useDeprecatedSynchronousErrorHandling&&Be.syncErrorThrowable&&(Be.syncErrorThrowable=!1,Be.syncErrorThrown))throw Be.syncErrorValue;return Be}_trySubscribe(He){try{return this._subscribe(He)}catch(Oe){Y.v.useDeprecatedSynchronousErrorHandling&&(He.syncErrorThrown=!0,He.syncErrorValue=Oe),function(me){for(;me;){const{closed:Re,destination:He,isStopped:Oe}=me;if(Re||Oe)return!1;me=He&&He instanceof R.L?He:null}return!0}(He)?He.error(Oe):console.warn(Oe)}}forEach(He,Oe){return new(Oe=ye(Oe))((xe,Ye)=>{let Be;Be=this.subscribe($e=>{try{He($e)}catch(bt){Ye(bt),Be&&Be.unsubscribe()}},Ye,xe)})}_subscribe(He){const{source:Oe}=this;return Oe&&Oe.subscribe(He)}[le.L](){return this}pipe(...He){return 0===He.length?this:function(me){return 0===me.length?be.y:1===me.length?me[0]:function(He){return me.reduce((Oe,xe)=>xe(Oe),He)}}(He)(this)}toPromise(He){return new(He=ye(He))((Oe,xe)=>{let Ye;this.subscribe(Be=>Ye=Be,Be=>xe(Be),()=>Oe(Ye))})}}return me.create=Re=>new me(Re),me})();function ye(me){if(me||(me=Y.v.Promise||Promise),!me)throw new Error("no Promise impl found");return me}},6490:(ut,Ie,j)=>{"use strict";j.d(Ie,{c:()=>z});var R=j(2494),A=j(4449);const z={closed:!0,next(_e){},error(_e){if(R.v.useDeprecatedSynchronousErrorHandling)throw _e;(0,A.z)(_e)},complete(){}}},9765:(ut,Ie,j)=>{"use strict";j.d(Ie,{Yc:()=>be,xQ:()=>ue});var R=j(7574),A=j(7393),z=j(5319),_e=j(7971),he=j(8858),le=j(9181);class be extends A.L{constructor(Q){super(Q),this.destination=Q}}let ue=(()=>{class Y extends R.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[le.b](){return new be(this)}lift(ye){const me=new fe(this,this);return me.operator=ye,me}next(ye){if(this.closed)throw new _e.N;if(!this.isStopped){const{observers:me}=this,Re=me.length,He=me.slice();for(let Oe=0;Oe<Re;Oe++)He[Oe].next(ye)}}error(ye){if(this.closed)throw new _e.N;this.hasError=!0,this.thrownError=ye,this.isStopped=!0;const{observers:me}=this,Re=me.length,He=me.slice();for(let Oe=0;Oe<Re;Oe++)He[Oe].error(ye);this.observers.length=0}complete(){if(this.closed)throw new _e.N;this.isStopped=!0;const{observers:ye}=this,me=ye.length,Re=ye.slice();for(let He=0;He<me;He++)Re[He].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(ye){if(this.closed)throw new _e.N;return super._trySubscribe(ye)}_subscribe(ye){if(this.closed)throw new _e.N;return this.hasError?(ye.error(this.thrownError),z.w.EMPTY):this.isStopped?(ye.complete(),z.w.EMPTY):(this.observers.push(ye),new he.W(this,ye))}asObservable(){const ye=new R.y;return ye.source=this,ye}}return Y.create=(Q,ye)=>new fe(Q,ye),Y})();class fe extends ue{constructor(Q,ye){super(),this.destination=Q,this.source=ye}next(Q){const{destination:ye}=this;ye&&ye.next&&ye.next(Q)}error(Q){const{destination:ye}=this;ye&&ye.error&&this.destination.error(Q)}complete(){const{destination:Q}=this;Q&&Q.complete&&this.destination.complete()}_subscribe(Q){const{source:ye}=this;return ye?this.source.subscribe(Q):z.w.EMPTY}}},8858:(ut,Ie,j)=>{"use strict";j.d(Ie,{W:()=>A});var R=j(5319);class A extends R.w{constructor(_e,he){super(),this.subject=_e,this.subscriber=he,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const _e=this.subject,he=_e.observers;if(this.subject=null,!he||0===he.length||_e.isStopped||_e.closed)return;const le=he.indexOf(this.subscriber);-1!==le&&he.splice(le,1)}}},7393:(ut,Ie,j)=>{"use strict";j.d(Ie,{L:()=>be});var R=j(9105),A=j(6490),z=j(5319),_e=j(9181),he=j(2494),le=j(4449);class be extends z.w{constructor(Y,Q,ye){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=A.c;break;case 1:if(!Y){this.destination=A.c;break}if("object"==typeof Y){Y instanceof be?(this.syncErrorThrowable=Y.syncErrorThrowable,this.destination=Y,Y.add(this)):(this.syncErrorThrowable=!0,this.destination=new ue(this,Y));break}default:this.syncErrorThrowable=!0,this.destination=new ue(this,Y,Q,ye)}}[_e.b](){return this}static create(Y,Q,ye){const me=new be(Y,Q,ye);return me.syncErrorThrowable=!1,me}next(Y){this.isStopped||this._next(Y)}error(Y){this.isStopped||(this.isStopped=!0,this._error(Y))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(Y){this.destination.next(Y)}_error(Y){this.destination.error(Y),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:Y}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=Y,this}}class ue extends be{constructor(Y,Q,ye,me){super(),this._parentSubscriber=Y;let Re,He=this;(0,R.m)(Q)?Re=Q:Q&&(Re=Q.next,ye=Q.error,me=Q.complete,Q!==A.c&&(He=Object.create(Q),(0,R.m)(He.unsubscribe)&&this.add(He.unsubscribe.bind(He)),He.unsubscribe=this.unsubscribe.bind(this))),this._context=He,this._next=Re,this._error=ye,this._complete=me}next(Y){if(!this.isStopped&&this._next){const{_parentSubscriber:Q}=this;he.v.useDeprecatedSynchronousErrorHandling&&Q.syncErrorThrowable?this.__tryOrSetError(Q,this._next,Y)&&this.unsubscribe():this.__tryOrUnsub(this._next,Y)}}error(Y){if(!this.isStopped){const{_parentSubscriber:Q}=this,{useDeprecatedSynchronousErrorHandling:ye}=he.v;if(this._error)ye&&Q.syncErrorThrowable?(this.__tryOrSetError(Q,this._error,Y),this.unsubscribe()):(this.__tryOrUnsub(this._error,Y),this.unsubscribe());else if(Q.syncErrorThrowable)ye?(Q.syncErrorValue=Y,Q.syncErrorThrown=!0):(0,le.z)(Y),this.unsubscribe();else{if(this.unsubscribe(),ye)throw Y;(0,le.z)(Y)}}}complete(){if(!this.isStopped){const{_parentSubscriber:Y}=this;if(this._complete){const Q=()=>this._complete.call(this._context);he.v.useDeprecatedSynchronousErrorHandling&&Y.syncErrorThrowable?(this.__tryOrSetError(Y,Q),this.unsubscribe()):(this.__tryOrUnsub(Q),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(Y,Q){try{Y.call(this._context,Q)}catch(ye){if(this.unsubscribe(),he.v.useDeprecatedSynchronousErrorHandling)throw ye;(0,le.z)(ye)}}__tryOrSetError(Y,Q,ye){if(!he.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{Q.call(this._context,ye)}catch(me){return he.v.useDeprecatedSynchronousErrorHandling?(Y.syncErrorValue=me,Y.syncErrorThrown=!0,!0):((0,le.z)(me),!0)}return!1}_unsubscribe(){const{_parentSubscriber:Y}=this;this._context=null,this._parentSubscriber=null,Y.unsubscribe()}}},5319:(ut,Ie,j)=>{"use strict";j.d(Ie,{w:()=>le});var R=j(9796),A=j(1555),z=j(9105);const he=(()=>{function ue(fe){return Error.call(this),this.message=fe?`${fe.length} errors occurred during unsubscription:\n${fe.map((Y,Q)=>`${Q+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=fe,this}return ue.prototype=Object.create(Error.prototype),ue})();class le{constructor(fe){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,fe&&(this._ctorUnsubscribe=!0,this._unsubscribe=fe)}unsubscribe(){let fe;if(this.closed)return;let{_parentOrParents:Y,_ctorUnsubscribe:Q,_unsubscribe:ye,_subscriptions:me}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,Y instanceof le)Y.remove(this);else if(null!==Y)for(let Re=0;Re<Y.length;++Re)Y[Re].remove(this);if((0,z.m)(ye)){Q&&(this._unsubscribe=void 0);try{ye.call(this)}catch(Re){fe=Re instanceof he?be(Re.errors):[Re]}}if((0,R.k)(me)){let Re=-1,He=me.length;for(;++Re<He;){const Oe=me[Re];if((0,A.K)(Oe))try{Oe.unsubscribe()}catch(xe){fe=fe||[],xe instanceof he?fe=fe.concat(be(xe.errors)):fe.push(xe)}}}if(fe)throw new he(fe)}add(fe){let Y=fe;if(!fe)return le.EMPTY;switch(typeof fe){case"function":Y=new le(fe);case"object":if(Y===this||Y.closed||"function"!=typeof Y.unsubscribe)return Y;if(this.closed)return Y.unsubscribe(),Y;if(!(Y instanceof le)){const me=Y;Y=new le,Y._subscriptions=[me]}break;default:throw new Error("unrecognized teardown "+fe+" added to Subscription.")}let{_parentOrParents:Q}=Y;if(null===Q)Y._parentOrParents=this;else if(Q instanceof le){if(Q===this)return Y;Y._parentOrParents=[Q,this]}else{if(-1!==Q.indexOf(this))return Y;Q.push(this)}const ye=this._subscriptions;return null===ye?this._subscriptions=[Y]:ye.push(Y),Y}remove(fe){const Y=this._subscriptions;if(Y){const Q=Y.indexOf(fe);-1!==Q&&Y.splice(Q,1)}}}var ue;function be(ue){return ue.reduce((fe,Y)=>fe.concat(Y instanceof he?Y.errors:Y),[])}le.EMPTY=((ue=new le).closed=!0,ue)},2494:(ut,Ie,j)=>{"use strict";j.d(Ie,{v:()=>A});let R=!1;const A={Promise:void 0,set useDeprecatedSynchronousErrorHandling(z){if(z){const _e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+_e.stack)}else R&&console.log("RxJS: Back to a better error behavior. Thank you. <3");R=z},get useDeprecatedSynchronousErrorHandling(){return R}}},5345:(ut,Ie,j)=>{"use strict";j.d(Ie,{IY:()=>_e,Ds:()=>le,ft:()=>ue});var R=j(7393),A=j(7574),z=j(7444);class _e extends R.L{constructor(Y){super(),this.parent=Y}_next(Y){this.parent.notifyNext(Y)}_error(Y){this.parent.notifyError(Y),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class le extends R.L{notifyNext(Y){this.destination.next(Y)}notifyError(Y){this.destination.error(Y)}notifyComplete(){this.destination.complete()}}function ue(fe,Y){if(Y.closed)return;if(fe instanceof A.y)return fe.subscribe(Y);let Q;try{Q=(0,z.s)(fe)(Y)}catch(ye){Y.error(ye)}return Q}},2441:(ut,Ie,j)=>{"use strict";j.d(Ie,{c:()=>he,N:()=>le});var R=j(9765),A=j(7574),z=j(5319),_e=j(1307);class he extends A.y{constructor(Q,ye){super(),this.source=Q,this.subjectFactory=ye,this._refCount=0,this._isComplete=!1}_subscribe(Q){return this.getSubject().subscribe(Q)}getSubject(){const Q=this._subject;return(!Q||Q.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let Q=this._connection;return Q||(this._isComplete=!1,Q=this._connection=new z.w,Q.add(this.source.subscribe(new be(this.getSubject(),this))),Q.closed&&(this._connection=null,Q=z.w.EMPTY)),Q}refCount(){return(0,_e.x)()(this)}}const le=(()=>{const Y=he.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:Y._subscribe},_isComplete:{value:Y._isComplete,writable:!0},getSubject:{value:Y.getSubject},connect:{value:Y.connect},refCount:{value:Y.refCount}}})();class be extends R.Yc{constructor(Q,ye){super(Q),this.connectable=ye}_error(Q){this._unsubscribe(),super._error(Q)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const Q=this.connectable;if(Q){this.connectable=null;const ye=Q._connection;Q._refCount=0,Q._subject=null,Q._connection=null,ye&&ye.unsubscribe()}}}},8071:(ut,Ie,j)=>{"use strict";j.d(Ie,{z:()=>_e});var R=j(5917),A=j(3282);function _e(...he){return(0,A.J)(1)((0,R.of)(...he))}},9193:(ut,Ie,j)=>{"use strict";j.d(Ie,{E:()=>A,c:()=>z});var R=j(7574);const A=new R.y(he=>he.complete());function z(he){return he?function(he){return new R.y(le=>he.schedule(()=>le.complete()))}(he):A}},4402:(ut,Ie,j)=>{"use strict";j.d(Ie,{D:()=>He});var R=j(7574),A=j(7444),z=j(5319),_e=j(6554),be=j(4087),ue=j(377),Q=j(4072),ye=j(9489);function He(Oe,xe){return xe?function(Oe,xe){if(null!=Oe){if(function(Oe){return Oe&&"function"==typeof Oe[_e.L]}(Oe))return function(Oe,xe){return new R.y(Ye=>{const Be=new z.w;return Be.add(xe.schedule(()=>{const $e=Oe[_e.L]();Be.add($e.subscribe({next(bt){Be.add(xe.schedule(()=>Ye.next(bt)))},error(bt){Be.add(xe.schedule(()=>Ye.error(bt)))},complete(){Be.add(xe.schedule(()=>Ye.complete()))}}))})),Be})}(Oe,xe);if((0,Q.t)(Oe))return function(Oe,xe){return new R.y(Ye=>{const Be=new z.w;return Be.add(xe.schedule(()=>Oe.then($e=>{Be.add(xe.schedule(()=>{Ye.next($e),Be.add(xe.schedule(()=>Ye.complete()))}))},$e=>{Be.add(xe.schedule(()=>Ye.error($e)))}))),Be})}(Oe,xe);if((0,ye.z)(Oe))return(0,be.r)(Oe,xe);if(function(Oe){return Oe&&"function"==typeof Oe[ue.hZ]}(Oe)||"string"==typeof Oe)return function(Oe,xe){if(!Oe)throw new Error("Iterable cannot be null");return new R.y(Ye=>{const Be=new z.w;let $e;return Be.add(()=>{$e&&"function"==typeof $e.return&&$e.return()}),Be.add(xe.schedule(()=>{$e=Oe[ue.hZ](),Be.add(xe.schedule(function(){if(Ye.closed)return;let bt,nt;try{const ct=$e.next();bt=ct.value,nt=ct.done}catch(ct){return void Ye.error(ct)}nt?Ye.complete():(Ye.next(bt),this.schedule())}))})),Be})}(Oe,xe)}throw new TypeError((null!==Oe&&typeof Oe||Oe)+" is not observable")}(Oe,xe):Oe instanceof R.y?Oe:new R.y((0,A.s)(Oe))}},6693:(ut,Ie,j)=>{"use strict";j.d(Ie,{n:()=>_e});var R=j(7574),A=j(5015),z=j(4087);function _e(he,le){return le?(0,z.r)(he,le):new R.y((0,A.V)(he))}},6682:(ut,Ie,j)=>{"use strict";j.d(Ie,{T:()=>he});var R=j(7574),A=j(4869),z=j(3282),_e=j(6693);function he(...le){let be=Number.POSITIVE_INFINITY,ue=null,fe=le[le.length-1];return(0,A.K)(fe)?(ue=le.pop(),le.length>1&&"number"==typeof le[le.length-1]&&(be=le.pop())):"number"==typeof fe&&(be=le.pop()),null===ue&&1===le.length&&le[0]instanceof R.y?le[0]:(0,z.J)(be)((0,_e.n)(le,ue))}},5917:(ut,Ie,j)=>{"use strict";j.d(Ie,{of:()=>_e});var R=j(4869),A=j(6693),z=j(4087);function _e(...he){let le=he[he.length-1];return(0,R.K)(le)?(he.pop(),(0,z.r)(he,le)):(0,A.n)(he)}},4612:(ut,Ie,j)=>{"use strict";j.d(Ie,{b:()=>A});var R=j(9773);function A(z,_e){return(0,R.zg)(z,_e,1)}},5242:(ut,Ie,j)=>{"use strict";j.d(Ie,{d:()=>A});var R=j(7393);function A(he=null){return le=>le.lift(new z(he))}class z{constructor(le){this.defaultValue=le}call(le,be){return be.subscribe(new _e(le,this.defaultValue))}}class _e extends R.L{constructor(le,be){super(le),this.defaultValue=be,this.isEmpty=!0}_next(le){this.isEmpty=!1,this.destination.next(le)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},5435:(ut,Ie,j)=>{"use strict";j.d(Ie,{h:()=>A});var R=j(7393);function A(he,le){return function(ue){return ue.lift(new z(he,le))}}class z{constructor(le,be){this.predicate=le,this.thisArg=be}call(le,be){return be.subscribe(new _e(le,this.predicate,this.thisArg))}}class _e extends R.L{constructor(le,be,ue){super(le),this.predicate=be,this.thisArg=ue,this.count=0}_next(le){let be;try{be=this.predicate.call(this.thisArg,le,this.count++)}catch(ue){return void this.destination.error(ue)}be&&this.destination.next(le)}}},8049:(ut,Ie,j)=>{"use strict";j.d(Ie,{P:()=>be});var R=j(3410),A=j(5435),z=j(5257),_e=j(5242),he=j(4635),le=j(4487);function be(ue,fe){const Y=arguments.length>=2;return Q=>Q.pipe(ue?(0,A.h)((ye,me)=>ue(ye,me,Q)):le.y,(0,z.q)(1),Y?(0,_e.d)(fe):(0,he.T)(()=>new R.K))}},8002:(ut,Ie,j)=>{"use strict";j.d(Ie,{U:()=>A});var R=j(7393);function A(he,le){return function(ue){if("function"!=typeof he)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ue.lift(new z(he,le))}}class z{constructor(le,be){this.project=le,this.thisArg=be}call(le,be){return be.subscribe(new _e(le,this.project,this.thisArg))}}class _e extends R.L{constructor(le,be,ue){super(le),this.project=be,this.count=0,this.thisArg=ue||this}_next(le){let be;try{be=this.project.call(this.thisArg,le,this.count++)}catch(ue){return void this.destination.error(ue)}this.destination.next(be)}}},3282:(ut,Ie,j)=>{"use strict";j.d(Ie,{J:()=>z});var R=j(9773),A=j(4487);function z(_e=Number.POSITIVE_INFINITY){return(0,R.zg)(A.y,_e)}},9773:(ut,Ie,j)=>{"use strict";j.d(Ie,{zg:()=>_e});var R=j(8002),A=j(4402),z=j(5345);function _e(ue,fe,Y=Number.POSITIVE_INFINITY){return"function"==typeof fe?Q=>Q.pipe(_e((ye,me)=>(0,A.D)(ue(ye,me)).pipe((0,R.U)((Re,He)=>fe(ye,Re,me,He))),Y)):("number"==typeof fe&&(Y=fe),Q=>Q.lift(new he(ue,Y)))}class he{constructor(fe,Y=Number.POSITIVE_INFINITY){this.project=fe,this.concurrent=Y}call(fe,Y){return Y.subscribe(new le(fe,this.project,this.concurrent))}}class le extends z.Ds{constructor(fe,Y,Q=Number.POSITIVE_INFINITY){super(fe),this.project=Y,this.concurrent=Q,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(fe){this.active<this.concurrent?this._tryNext(fe):this.buffer.push(fe)}_tryNext(fe){let Y;const Q=this.index++;try{Y=this.project(fe,Q)}catch(ye){return void this.destination.error(ye)}this.active++,this._innerSub(Y)}_innerSub(fe){const Y=new z.IY(this),Q=this.destination;Q.add(Y);const ye=(0,z.ft)(fe,Y);ye!==Y&&Q.add(ye)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(fe){this.destination.next(fe)}notifyComplete(){const fe=this.buffer;this.active--,fe.length>0?this._next(fe.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(ut,Ie,j)=>{"use strict";j.d(Ie,{ht:()=>Q,QV:()=>fe});var R=j(7393),A=j(9193),z=j(5917),_e=j(7574);class ue{constructor(Re,He,Oe){this.kind=Re,this.value=He,this.error=Oe,this.hasValue="N"===Re}observe(Re){switch(this.kind){case"N":return Re.next&&Re.next(this.value);case"E":return Re.error&&Re.error(this.error);case"C":return Re.complete&&Re.complete()}}do(Re,He,Oe){switch(this.kind){case"N":return Re&&Re(this.value);case"E":return He&&He(this.error);case"C":return Oe&&Oe()}}accept(Re,He,Oe){return Re&&"function"==typeof Re.next?this.observe(Re):this.do(Re,He,Oe)}toObservable(){switch(this.kind){case"N":return(0,z.of)(this.value);case"E":return me=this.error,new _e.y(He=>He.error(me));case"C":return(0,A.c)()}var me;throw new Error("unexpected notification kind value")}static createNext(Re){return void 0!==Re?new ue("N",Re):ue.undefinedValueNotification}static createError(Re){return new ue("E",void 0,Re)}static createComplete(){return ue.completeNotification}}function fe(me,Re=0){return function(Oe){return Oe.lift(new Y(me,Re))}}ue.completeNotification=new ue("C"),ue.undefinedValueNotification=new ue("N",void 0);class Y{constructor(Re,He=0){this.scheduler=Re,this.delay=He}call(Re,He){return He.subscribe(new Q(Re,this.scheduler,this.delay))}}class Q extends R.L{constructor(Re,He,Oe=0){super(Re),this.scheduler=He,this.delay=Oe}static dispatch(Re){const{notification:He,destination:Oe}=Re;He.observe(Oe),this.unsubscribe()}scheduleMessage(Re){this.destination.add(this.scheduler.schedule(Q.dispatch,this.delay,new ye(Re,this.destination)))}_next(Re){this.scheduleMessage(ue.createNext(Re))}_error(Re){this.scheduleMessage(ue.createError(Re)),this.unsubscribe()}_complete(){this.scheduleMessage(ue.createComplete()),this.unsubscribe()}}class ye{constructor(Re,He){this.notification=Re,this.destination=He}}},1307:(ut,Ie,j)=>{"use strict";j.d(Ie,{x:()=>A});var R=j(7393);function A(){return function(le){return le.lift(new z(le))}}class z{constructor(le){this.connectable=le}call(le,be){const{connectable:ue}=this;ue._refCount++;const fe=new _e(le,ue),Y=be.subscribe(fe);return fe.closed||(fe.connection=ue.connect()),Y}}class _e extends R.L{constructor(le,be){super(le),this.connectable=be}_unsubscribe(){const{connectable:le}=this;if(!le)return void(this.connection=null);this.connectable=null;const be=le._refCount;if(be<=0)return void(this.connection=null);if(le._refCount=be-1,be>1)return void(this.connection=null);const{connection:ue}=this,fe=le._connection;this.connection=null,fe&&(!ue||fe===ue)&&fe.unsubscribe()}}},2145:(ut,Ie,j)=>{"use strict";j.d(Ie,{R:()=>A});var R=j(7393);function A(he,le){let be=!1;return arguments.length>=2&&(be=!0),function(fe){return fe.lift(new z(he,le,be))}}class z{constructor(le,be,ue=!1){this.accumulator=le,this.seed=be,this.hasSeed=ue}call(le,be){return be.subscribe(new _e(le,this.accumulator,this.seed,this.hasSeed))}}class _e extends R.L{constructor(le,be,ue,fe){super(le),this.accumulator=be,this._seed=ue,this.hasSeed=fe,this.index=0}get seed(){return this._seed}set seed(le){this.hasSeed=!0,this._seed=le}_next(le){if(this.hasSeed)return this._tryNext(le);this.seed=le,this.destination.next(le)}_tryNext(le){const be=this.index++;let ue;try{ue=this.accumulator(this.seed,le,be)}catch(fe){this.destination.error(fe)}this.seed=ue,this.destination.next(ue)}}},9761:(ut,Ie,j)=>{"use strict";j.d(Ie,{O:()=>z});var R=j(8071),A=j(4869);function z(..._e){const he=_e[_e.length-1];return(0,A.K)(he)?(_e.pop(),le=>(0,R.z)(_e,le,he)):le=>(0,R.z)(_e,le)}},3101:(ut,Ie,j)=>{"use strict";j.d(Ie,{R:()=>xe});var R=j(7574);let A=1;const z=Promise.resolve(),_e={};function he(Be){return Be in _e&&(delete _e[Be],!0)}const le={setImmediate(Be){const $e=A++;return _e[$e]=!0,z.then(()=>he($e)&&Be()),$e},clearImmediate(Be){he(Be)}};var ue=j(6465),Y=j(6102);const me=new class extends Y.v{flush($e){this.active=!0,this.scheduled=void 0;const{actions:bt}=this;let nt,ct=-1,tn=bt.length;$e=$e||bt.shift();do{if(nt=$e.execute($e.state,$e.delay))break}while(++ct<tn&&($e=bt.shift()));if(this.active=!1,nt){for(;++ct<tn&&($e=bt.shift());)$e.unsubscribe();throw nt}}}(class extends ue.o{constructor($e,bt){super($e,bt),this.scheduler=$e,this.work=bt}requestAsyncId($e,bt,nt=0){return null!==nt&&nt>0?super.requestAsyncId($e,bt,nt):($e.actions.push(this),$e.scheduled||($e.scheduled=le.setImmediate($e.flush.bind($e,null))))}recycleAsyncId($e,bt,nt=0){if(null!==nt&&nt>0||null===nt&&this.delay>0)return super.recycleAsyncId($e,bt,nt);0===$e.actions.length&&(le.clearImmediate(bt),$e.scheduled=void 0)}});var Re=j(9796);class Oe extends R.y{constructor($e,bt=0,nt=me){var Be;super(),this.source=$e,this.delayTime=bt,this.scheduler=nt,(!(!(0,Re.k)(Be=bt)&&Be-parseFloat(Be)+1>=0)||bt<0)&&(this.delayTime=0),(!nt||"function"!=typeof nt.schedule)&&(this.scheduler=me)}static create($e,bt=0,nt=me){return new Oe($e,bt,nt)}static dispatch($e){const{source:bt,subscriber:nt}=$e;return this.add(bt.subscribe(nt))}_subscribe($e){return this.scheduler.schedule(Oe.dispatch,this.delayTime,{source:this.source,subscriber:$e})}}function xe(Be,$e=0){return function(nt){return nt.lift(new Ye(Be,$e))}}class Ye{constructor($e,bt){this.scheduler=$e,this.delay=bt}call($e,bt){return new Oe(bt,this.delay,this.scheduler).subscribe($e)}}},3190:(ut,Ie,j)=>{"use strict";j.d(Ie,{w:()=>_e});var R=j(8002),A=j(4402),z=j(5345);function _e(be,ue){return"function"==typeof ue?fe=>fe.pipe(_e((Y,Q)=>(0,A.D)(be(Y,Q)).pipe((0,R.U)((ye,me)=>ue(Y,ye,Q,me))))):fe=>fe.lift(new he(be))}class he{constructor(ue){this.project=ue}call(ue,fe){return fe.subscribe(new le(ue,this.project))}}class le extends z.Ds{constructor(ue,fe){super(ue),this.project=fe,this.index=0}_next(ue){let fe;const Y=this.index++;try{fe=this.project(ue,Y)}catch(Q){return void this.destination.error(Q)}this._innerSub(fe)}_innerSub(ue){const fe=this.innerSubscription;fe&&fe.unsubscribe();const Y=new z.IY(this),Q=this.destination;Q.add(Y),this.innerSubscription=(0,z.ft)(ue,Y),this.innerSubscription!==Y&&Q.add(this.innerSubscription)}_complete(){const{innerSubscription:ue}=this;(!ue||ue.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(ue){this.destination.next(ue)}}},5257:(ut,Ie,j)=>{"use strict";j.d(Ie,{q:()=>_e});var R=j(7393),A=j(7108),z=j(9193);function _e(be){return ue=>0===be?(0,z.c)():ue.lift(new he(be))}class he{constructor(ue){if(this.total=ue,this.total<0)throw new A.W}call(ue,fe){return fe.subscribe(new le(ue,this.total))}}class le extends R.L{constructor(ue,fe){super(ue),this.total=fe,this.count=0}_next(ue){const fe=this.total,Y=++this.count;Y<=fe&&(this.destination.next(ue),Y===fe&&(this.destination.complete(),this.unsubscribe()))}}},3342:(ut,Ie,j)=>{"use strict";j.d(Ie,{b:()=>_e});var R=j(7393);function A(){}var z=j(9105);function _e(be,ue,fe){return function(Q){return Q.lift(new he(be,ue,fe))}}class he{constructor(ue,fe,Y){this.nextOrObserver=ue,this.error=fe,this.complete=Y}call(ue,fe){return fe.subscribe(new le(ue,this.nextOrObserver,this.error,this.complete))}}class le extends R.L{constructor(ue,fe,Y,Q){super(ue),this._tapNext=A,this._tapError=A,this._tapComplete=A,this._tapError=Y||A,this._tapComplete=Q||A,(0,z.m)(fe)?(this._context=this,this._tapNext=fe):fe&&(this._context=fe,this._tapNext=fe.next||A,this._tapError=fe.error||A,this._tapComplete=fe.complete||A)}_next(ue){try{this._tapNext.call(this._context,ue)}catch(fe){return void this.destination.error(fe)}this.destination.next(ue)}_error(ue){try{this._tapError.call(this._context,ue)}catch(fe){return void this.destination.error(fe)}this.destination.error(ue)}_complete(){try{this._tapComplete.call(this._context)}catch(ue){return void this.destination.error(ue)}return this.destination.complete()}}},4635:(ut,Ie,j)=>{"use strict";j.d(Ie,{T:()=>z});var R=j(3410),A=j(7393);function z(be=le){return ue=>ue.lift(new _e(be))}class _e{constructor(ue){this.errorFactory=ue}call(ue,fe){return fe.subscribe(new he(ue,this.errorFactory))}}class he extends A.L{constructor(ue,fe){super(ue),this.errorFactory=fe,this.hasValue=!1}_next(ue){this.hasValue=!0,this.destination.next(ue)}_complete(){if(this.hasValue)return this.destination.complete();{let ue;try{ue=this.errorFactory()}catch(fe){ue=fe}this.destination.error(ue)}}}function le(){return new R.K}},4087:(ut,Ie,j)=>{"use strict";j.d(Ie,{r:()=>z});var R=j(7574),A=j(5319);function z(_e,he){return new R.y(le=>{const be=new A.w;let ue=0;return be.add(he.schedule(function(){ue!==_e.length?(le.next(_e[ue++]),le.closed||be.add(this.schedule())):le.complete()})),be})}},6465:(ut,Ie,j)=>{"use strict";j.d(Ie,{o:()=>z});var R=j(5319);class A extends R.w{constructor(he,le){super()}schedule(he,le=0){return this}}class z extends A{constructor(he,le){super(he,le),this.scheduler=he,this.work=le,this.pending=!1}schedule(he,le=0){if(this.closed)return this;this.state=he;const be=this.id,ue=this.scheduler;return null!=be&&(this.id=this.recycleAsyncId(ue,be,le)),this.pending=!0,this.delay=le,this.id=this.id||this.requestAsyncId(ue,this.id,le),this}requestAsyncId(he,le,be=0){return setInterval(he.flush.bind(he,this),be)}recycleAsyncId(he,le,be=0){if(null!==be&&this.delay===be&&!1===this.pending)return le;clearInterval(le)}execute(he,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const be=this._execute(he,le);if(be)return be;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,le){let ue,be=!1;try{this.work(he)}catch(fe){be=!0,ue=!!fe&&fe||new Error(fe)}if(be)return this.unsubscribe(),ue}_unsubscribe(){const he=this.id,le=this.scheduler,be=le.actions,ue=be.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ue&&be.splice(ue,1),null!=he&&(this.id=this.recycleAsyncId(le,he,null)),this.delay=null}}},6102:(ut,Ie,j)=>{"use strict";j.d(Ie,{v:()=>A});let R=(()=>{class z{constructor(he,le=z.now){this.SchedulerAction=he,this.now=le}schedule(he,le=0,be){return new this.SchedulerAction(this,he).schedule(be,le)}}return z.now=()=>Date.now(),z})();class A extends R{constructor(_e,he=R.now){super(_e,()=>A.delegate&&A.delegate!==this?A.delegate.now():he()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(_e,he=0,le){return A.delegate&&A.delegate!==this?A.delegate.schedule(_e,he,le):super.schedule(_e,he,le)}flush(_e){const{actions:he}=this;if(this.active)return void he.push(_e);let le;this.active=!0;do{if(le=_e.execute(_e.state,_e.delay))break}while(_e=he.shift());if(this.active=!1,le){for(;_e=he.shift();)_e.unsubscribe();throw le}}}},3637:(ut,Ie,j)=>{"use strict";j.d(Ie,{z:()=>z});var R=j(6465);const z=new(j(6102).v)(R.o)},7771:(ut,Ie,j)=>{"use strict";j.d(Ie,{c:()=>le,N:()=>he});var R=j(6465),z=j(6102);const he=new class extends z.v{}(class extends R.o{constructor(ue,fe){super(ue,fe),this.scheduler=ue,this.work=fe}schedule(ue,fe=0){return fe>0?super.schedule(ue,fe):(this.delay=fe,this.state=ue,this.scheduler.flush(this),this)}execute(ue,fe){return fe>0||this.closed?super.execute(ue,fe):this._execute(ue,fe)}requestAsyncId(ue,fe,Y=0){return null!==Y&&Y>0||null===Y&&this.delay>0?super.requestAsyncId(ue,fe,Y):ue.flush(this)}}),le=he},377:(ut,Ie,j)=>{"use strict";j.d(Ie,{hZ:()=>A});const A="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(ut,Ie,j)=>{"use strict";j.d(Ie,{L:()=>R});const R="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(ut,Ie,j)=>{"use strict";j.d(Ie,{b:()=>R});const R="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7108:(ut,Ie,j)=>{"use strict";j.d(Ie,{W:()=>A});const A=(()=>{function z(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return z.prototype=Object.create(Error.prototype),z})()},3410:(ut,Ie,j)=>{"use strict";j.d(Ie,{K:()=>A});const A=(()=>{function z(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return z.prototype=Object.create(Error.prototype),z})()},7971:(ut,Ie,j)=>{"use strict";j.d(Ie,{N:()=>A});const A=(()=>{function z(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return z.prototype=Object.create(Error.prototype),z})()},4449:(ut,Ie,j)=>{"use strict";function R(A){setTimeout(()=>{throw A},0)}j.d(Ie,{z:()=>R})},4487:(ut,Ie,j)=>{"use strict";function R(A){return A}j.d(Ie,{y:()=>R})},9796:(ut,Ie,j)=>{"use strict";j.d(Ie,{k:()=>R});const R=Array.isArray||(A=>A&&"number"==typeof A.length)},9489:(ut,Ie,j)=>{"use strict";j.d(Ie,{z:()=>R});const R=A=>A&&"number"==typeof A.length&&"function"!=typeof A},9105:(ut,Ie,j)=>{"use strict";function R(A){return"function"==typeof A}j.d(Ie,{m:()=>R})},1555:(ut,Ie,j)=>{"use strict";function R(A){return null!==A&&"object"==typeof A}j.d(Ie,{K:()=>R})},4072:(ut,Ie,j)=>{"use strict";function R(A){return!!A&&"function"!=typeof A.subscribe&&"function"==typeof A.then}j.d(Ie,{t:()=>R})},4869:(ut,Ie,j)=>{"use strict";function R(A){return A&&"function"==typeof A.schedule}j.d(Ie,{K:()=>R})},7444:(ut,Ie,j)=>{"use strict";j.d(Ie,{s:()=>Q});var R=j(5015),A=j(4449),_e=j(377),le=j(6554),ue=j(9489),fe=j(4072),Y=j(1555);const Q=ye=>{if(ye&&"function"==typeof ye[le.L])return(ye=>me=>{const Re=ye[le.L]();if("function"!=typeof Re.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Re.subscribe(me)})(ye);if((0,ue.z)(ye))return(0,R.V)(ye);if((0,fe.t)(ye))return(ye=>me=>(ye.then(Re=>{me.closed||(me.next(Re),me.complete())},Re=>me.error(Re)).then(null,A.z),me))(ye);if(ye&&"function"==typeof ye[_e.hZ])return(ye=>me=>{const Re=ye[_e.hZ]();for(;;){let He;try{He=Re.next()}catch(Oe){return me.error(Oe),me}if(He.done){me.complete();break}if(me.next(He.value),me.closed)break}return"function"==typeof Re.return&&me.add(()=>{Re.return&&Re.return()}),me})(ye);{const Re=`You provided ${(0,Y.K)(ye)?"an invalid object":`'${ye}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Re)}}},5015:(ut,Ie,j)=>{"use strict";j.d(Ie,{V:()=>R});const R=A=>z=>{for(let _e=0,he=A.length;_e<he&&!z.closed;_e++)z.next(A[_e]);z.complete()}},3363:(ut,Ie,j)=>{"use strict";j.d(Ie,{f:()=>A});var R=j(3018);let A=(()=>{class z{constructor(){}scrollToContactForm(he){console.log(he),he.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}getResumeDownload(he,le){let be=document.createElement("a");be.download=he,be.href=le,be.click()}openSocialHandle(he){switch(he){case"github":window.open("https://github.com/ShreyasAmbre","blank");break;case"linkedin":window.open("https://www.linkedin.com/in/shreyas-ambre-3928b71a7","blank");break;case"whatsapp":window.open("https://wa.me/8149421528","blank");break;case"gmail":window.open("https://mail.google.com/mail/?view=cm&fs=1&to=email@domain.example","blank")}}}return z.\u0275fac=function(he){return new(he||z)},z.\u0275prov=R.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"}),z})()},2128:(ut,Ie,j)=>{"use strict";var R=j(8583),A=j(3018);class z extends R.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class _e extends z{static makeCurrent(){(0,R.HT)(new _e)}onAndCancel(e,t,s){return e.addEventListener(t,s,!1),()=>{e.removeEventListener(t,s,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(he=he||document.querySelector("base"),he?he.getAttribute("href"):null);return null==t?null:function(i){be=be||document.createElement("a"),be.setAttribute("href",i);const e=be.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){he=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return(0,R.Mx)(document.cookie,e)}}let be,he=null;const fe=new A.OlP("TRANSITION_ID"),Q=[{provide:A.ip1,useFactory:function(i,e,t){return()=>{t.get(A.CZH).donePromise.then(()=>{const s=(0,R.q)(),c=e.querySelectorAll(`style[ng-transition="${i}"]`);for(let l=0;l<c.length;l++)s.remove(c[l])})}},deps:[fe,R.K0,A.zs3],multi:!0}];class ye{static init(){(0,A.VLi)(new ye)}addToWindow(e){A.dqk.getAngularTestability=(s,c=!0)=>{const l=e.findTestabilityInTree(s,c);if(null==l)throw new Error("Could not find testability for element.");return l},A.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),A.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),A.dqk.frameworkStabilizers||(A.dqk.frameworkStabilizers=[]),A.dqk.frameworkStabilizers.push(s=>{const c=A.dqk.getAllAngularTestabilities();let l=c.length,d=!1;const g=function(m){d=d||m,l--,0==l&&s(d)};c.forEach(function(m){m.whenStable(g)})})}findTestabilityInTree(e,t,s){if(null==t)return null;const c=e.getTestability(t);return null!=c?c:s?(0,R.q)().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let me=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=A.Yz7({token:i,factory:i.\u0275fac}),i})();const Et=new A.OlP("EventManagerPlugins");let Ct=(()=>{class i{constructor(t,s){this._zone=s,this._eventNameToPlugin=new Map,t.forEach(c=>c.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,s,c){return this._findPluginFor(s).addEventListener(t,s,c)}addGlobalEventListener(t,s,c){return this._findPluginFor(s).addGlobalEventListener(t,s,c)}getZone(){return this._zone}_findPluginFor(t){const s=this._eventNameToPlugin.get(t);if(s)return s;const c=this._plugins;for(let l=0;l<c.length;l++){const d=c[l];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return i.\u0275fac=function(t){return new(t||i)(A.LFG(Et),A.LFG(A.R0b))},i.\u0275prov=A.Yz7({token:i,factory:i.\u0275fac}),i})();class $t{constructor(e){this._doc=e}addGlobalEventListener(e,t,s){const c=(0,R.q)().getGlobalEventTarget(this._doc,e);if(!c)throw new Error(`Unsupported event target ${c} for event ${t}`);return this.addEventListener(c,t,s)}}let dt=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(t){const s=new Set;t.forEach(c=>{this._stylesSet.has(c)||(this._stylesSet.add(c),s.add(c))}),this.onStylesAdded(s)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=A.Yz7({token:i,factory:i.\u0275fac}),i})(),Un=(()=>{class i extends dt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,s,c){t.forEach(l=>{const d=this._doc.createElement("style");d.textContent=l,c.push(s.appendChild(d))})}addHost(t){const s=[];this._addStylesToHost(this._stylesSet,t,s),this._hostNodes.set(t,s)}removeHost(t){const s=this._hostNodes.get(t);s&&s.forEach(Lr),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((s,c)=>{this._addStylesToHost(t,c,s)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Lr))}}return i.\u0275fac=function(t){return new(t||i)(A.LFG(R.K0))},i.\u0275prov=A.Yz7({token:i,factory:i.\u0275fac}),i})();function Lr(i){(0,R.q)().remove(i)}const oi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Vr=/%COMP%/g;function St(i,e,t){for(let s=0;s<e.length;s++){let c=e[s];Array.isArray(c)?St(i,c,t):(c=c.replace(Vr,i),t.push(c))}return t}function rr(i){return e=>{if("__ngUnwrap__"===e)return i;!1===i(e)&&(e.preventDefault(),e.returnValue=!1)}}let Hr=(()=>{class i{constructor(t,s,c){this.eventManager=t,this.sharedStylesHost=s,this.appId=c,this.rendererByCompId=new Map,this.defaultRenderer=new Ft(t)}createRenderer(t,s){if(!t||!s)return this.defaultRenderer;switch(s.encapsulation){case A.ifc.Emulated:{let c=this.rendererByCompId.get(s.id);return c||(c=new kn(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,c)),c.applyToHost(t),c}case 1:case A.ifc.ShadowDom:return new tt(this.eventManager,this.sharedStylesHost,t,s);default:if(!this.rendererByCompId.has(s.id)){const c=St(s.id,s.styles,[]);this.sharedStylesHost.addStyles(c),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(t){return new(t||i)(A.LFG(Ct),A.LFG(Un),A.LFG(A.AFp))},i.\u0275prov=A.Yz7({token:i,factory:i.\u0275fac}),i})();class Ft{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(oi[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,s){e&&e.insertBefore(t,s)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let s="string"==typeof e?document.querySelector(e):e;if(!s)throw new Error(`The selector "${e}" did not match any elements`);return t||(s.textContent=""),s}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,s,c){if(c){t=c+":"+t;const l=oi[c];l?e.setAttributeNS(l,t,s):e.setAttribute(t,s)}else e.setAttribute(t,s)}removeAttribute(e,t,s){if(s){const c=oi[s];c?e.removeAttributeNS(c,t):e.removeAttribute(`${s}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,s,c){c&(A.JOm.DashCase|A.JOm.Important)?e.style.setProperty(t,s,c&A.JOm.Important?"important":""):e.style[t]=s}removeStyle(e,t,s){s&A.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,s){e[t]=s}setValue(e,t){e.nodeValue=t}listen(e,t,s){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,rr(s)):this.eventManager.addEventListener(e,t,rr(s))}}class kn extends Ft{constructor(e,t,s,c){super(e),this.component=s;const l=St(c+"-"+s.id,s.styles,[]);t.addStyles(l),this.contentAttr="_ngcontent-%COMP%".replace(Vr,c+"-"+s.id),this.hostAttr=function(i){return"_nghost-%COMP%".replace(Vr,i)}(c+"-"+s.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const s=super.createElement(e,t);return super.setAttribute(s,this.contentAttr,""),s}}class tt extends Ft{constructor(e,t,s,c){super(e),this.sharedStylesHost=t,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=St(c.id,c.styles,[]);for(let d=0;d<l.length;d++){const g=document.createElement("style");g.textContent=l[d],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,s){return super.insertBefore(this.nodeOrShadowRoot(e),t,s)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Rr=(()=>{class i extends $t{constructor(t){super(t)}supports(t){return!0}addEventListener(t,s,c){return t.addEventListener(s,c,!1),()=>this.removeEventListener(t,s,c)}removeEventListener(t,s,c){return t.removeEventListener(s,c)}}return i.\u0275fac=function(t){return new(t||i)(A.LFG(R.K0))},i.\u0275prov=A.Yz7({token:i,factory:i.\u0275fac}),i})();const wt=["alt","control","meta","shift"],at={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Lt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ht={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let zt=(()=>{class i extends $t{constructor(t){super(t)}supports(t){return null!=i.parseEventName(t)}addEventListener(t,s,c){const l=i.parseEventName(s),d=i.eventCallback(l.fullKey,c,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,R.q)().onAndCancel(t,l.domEventName,d))}static parseEventName(t){const s=t.toLowerCase().split("."),c=s.shift();if(0===s.length||"keydown"!==c&&"keyup"!==c)return null;const l=i._normalizeKey(s.pop());let d="";if(wt.forEach(m=>{const w=s.indexOf(m);w>-1&&(s.splice(w,1),d+=m+".")}),d+=l,0!=s.length||0===l.length)return null;const g={};return g.domEventName=c,g.fullKey=d,g}static getEventFullKey(t){let s="",c=function(i){let e=i.key;if(null==e){if(e=i.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===i.location&&Lt.hasOwnProperty(e)&&(e=Lt[e]))}return at[e]||e}(t);return c=c.toLowerCase()," "===c?c="space":"."===c&&(c="dot"),wt.forEach(l=>{l!=c&&ht[l](t)&&(s+=l+".")}),s+=c,s}static eventCallback(t,s,c){return l=>{i.getEventFullKey(l)===t&&c.runGuarded(()=>s(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return i.\u0275fac=function(t){return new(t||i)(A.LFG(R.K0))},i.\u0275prov=A.Yz7({token:i,factory:i.\u0275fac}),i})();const Ne=(0,A.eFA)(A._c5,"browser",[{provide:A.Lbi,useValue:R.bD},{provide:A.g9A,useValue:function(){_e.makeCurrent(),ye.init()},multi:!0},{provide:R.K0,useFactory:function(){return(0,A.RDi)(document),document},deps:[]}]),De=[[],{provide:A.zSh,useValue:"root"},{provide:A.qLn,useFactory:function(){return new A.qLn},deps:[]},{provide:Et,useClass:Rr,multi:!0,deps:[R.K0,A.R0b,A.Lbi]},{provide:Et,useClass:zt,multi:!0,deps:[R.K0]},[],{provide:Hr,useClass:Hr,deps:[Ct,Un,A.AFp]},{provide:A.FYo,useExisting:Hr},{provide:dt,useExisting:Un},{provide:Un,useClass:Un,deps:[R.K0]},{provide:A.dDg,useClass:A.dDg,deps:[A.R0b]},{provide:Ct,useClass:Ct,deps:[Et,A.R0b]},{provide:R.JF,useClass:me,deps:[]},[]];let Tt=(()=>{class i{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:i,providers:[{provide:A.AFp,useValue:t.appId},{provide:fe,useExisting:A.AFp},Q]}}}return i.\u0275fac=function(t){return new(t||i)(A.LFG(i,12))},i.\u0275mod=A.oAB({type:i}),i.\u0275inj=A.cJS({providers:De,imports:[R.ez,A.hGG]}),i})();"undefined"!=typeof window&&window;var fr=j(4363);const Pn=["heading"],Wn=function(){return["home"]},Zs=function(){return["contact"]};let Xt=(()=>{class i{constructor(t){this.elementRef=t,this.i=0,this.headingTxt="Portfolio",this.speed=100,this.len=this.headingTxt.length}ngOnInit(){}ngAfterViewInit(){}typingEffect(){this.i<this.len&&(this.heading.nativeElement.innerHTML+=this.headingTxt.charAt(this.i),this.i++,setTimeout(()=>this.typingEffect(),this.speed))}}return i.\u0275fac=function(t){return new(t||i)(A.Y36(A.SBq))},i.\u0275cmp=A.Xpm({type:i,selectors:[["app-header"]],viewQuery:function(t,s){if(1&t&&A.Gf(Pn,7),2&t){let c;A.iGM(c=A.CRH())&&(s.heading=c.first)}},decls:14,vars:4,consts:[[1,"container-fluid","shadow","bg-white","rounded"],[1,"container"],[1,"d-flex","flex-wrap","justify-content-center","py-3","mb-3"],[1,"d-flex","align-items-center","mb-3","mb-md-0","me-md-auto","text-dark","text-decoration-none"],["src","assets/images/shreyasambre-logo.PNG","alt","logo",2,"height","41px"],[1,"nav","nav-pills"],[1,"nav-item","subTitleFont",3,"routerLink"],["routerLinkActive","navBtn",1,"nav-link"]],template:function(t,s){1&t&&(A.TgZ(0,"div",0),A.TgZ(1,"main"),A.TgZ(2,"div",1),A.TgZ(3,"header",2),A.TgZ(4,"a",3),A._UZ(5,"img",4),A.qZA(),A.TgZ(6,"ul",5),A.TgZ(7,"li",6),A.TgZ(8,"a",7),A._uU(9,"Home"),A.qZA(),A.qZA(),A.TgZ(10,"li",6),A.TgZ(11,"a",7),A.TgZ(12,"b"),A._uU(13,"Contact"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA()),2&t&&(A.xp6(7),A.Q6J("routerLink",A.DdM(2,Wn)),A.xp6(3),A.Q6J("routerLink",A.DdM(3,Zs)))},directives:[fr.rH,fr.Od],styles:[".navBtn[_ngcontent-%COMP%]{background-color:var(--btn-background-color);color:var(--btn-color)!important;border-radius:5px}.navtitles[_ngcontent-%COMP%]{color:var(--text-color);font-size:26px}.shadow[_ngcontent-%COMP%]{box-shadow:0 .5rem 1rem #0000001a!important}"]}),i})();var Ys=j(3363);let ks=(()=>{class i{constructor(t){this.service=t}ngOnInit(){}downloadResume(){this.service.getResumeDownload("Shreyas-Ambre-Resume-v3","assets/docs/Shreyas-Ambre-Resume-v3.pdf")}}return i.\u0275fac=function(t){return new(t||i)(A.Y36(Ys.f))},i.\u0275cmp=A.Xpm({type:i,selectors:[["app-footer"]],decls:17,vars:0,consts:[[1,"page-footer","font-small",2,"background","#053F5C","color","#ffffff"],[1,"container-fluid",2,"background-color","#f1faff"],[1,"container"],[1,"row","py-5","justify-content-between"],[1,"col-6"],[1,"contactTitle","titleFont"],[1,"col-4","text-end","align-self-center"],["type","button",1,"btnClass","homeBtnClass","my-2","mx-2",3,"click"],[1,"footer-copyright","text-center","py-3"],[1,"subTitleFont"],[1,"primary"]],template:function(t,s){1&t&&(A.TgZ(0,"footer",0),A.TgZ(1,"div",1),A.TgZ(2,"div",2),A.TgZ(3,"div",3),A.TgZ(4,"div",4),A.TgZ(5,"h2",5),A._uU(6,"Lets's get in touch"),A.qZA(),A.qZA(),A.TgZ(7,"div",6),A.TgZ(8,"button",7),A.NdJ("click",function(){return s.downloadResume()}),A.TgZ(9,"b"),A._uU(10,"Download Resume"),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.TgZ(11,"div",8),A.TgZ(12,"b",9),A._uU(13," \xa9 2022 Copyright: "),A.TgZ(14,"span",10),A._uU(15,"Shreyas Ambre."),A.qZA(),A._uU(16," All Right Reserved "),A.qZA(),A.qZA(),A.qZA())},styles:['.contactTitle[_ngcontent-%COMP%]{color:var( --secondary-color );font-family:"Poppins",Sans-serif;font-size:52px;font-weight:600;line-height:1.3em}.homeBtnClass[_ngcontent-%COMP%]{width:175px!important;height:45px!important}']}),i})();const ui=[{path:"",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=A.Xpm({type:i,selectors:[["app-index"]],decls:3,vars:0,template:function(t,s){1&t&&(A._UZ(0,"app-header"),A._UZ(1,"router-outlet"),A._UZ(2,"app-footer"))},directives:[Xt,fr.lC,ks],styles:[""]}),i})(),children:[{path:"home",loadChildren:()=>j.e(585).then(j.bind(j,6585)).then(i=>i.HomeModule)},{path:"about",loadChildren:()=>j.e(351).then(j.bind(j,2351)).then(i=>i.AboutModule)},{path:"contact",loadChildren:()=>j.e(802).then(j.bind(j,1802)).then(i=>i.ContactModule)},{path:"**",redirectTo:"home",pathMatch:"full"}]}];let li=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=A.oAB({type:i}),i.\u0275inj=A.cJS({imports:[[fr.Bz.forRoot(ui)],fr.Bz]}),i})(),mo=(()=>{class i{constructor(){this.title="shreyasAmbrePortfolio"}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=A.Xpm({type:i,selectors:[["app-root"]],decls:1,vars:0,template:function(t,s){1&t&&A._UZ(0,"router-outlet")},directives:[fr.lC],styles:[""]}),i})();var Xn=j(8939),Ji=j(3637),On=j(7574),Xi=j(4402),fs=j(5917),pr=j(411),Ai=j(9761),Fs=j(7393);function es(){return i=>i.lift(new er)}class er{call(e,t){return t.subscribe(new $r(e))}}class $r extends Fs.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var Dr=j(8002),Si=j(2145);class Qs{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new Ho(e,this.compare,this.keySelector))}}class Ho extends Fs.L{constructor(e,t,s){super(e),this.keySelector=s,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:c}=this;t=c?c(e):e}catch(c){return this.destination.error(c)}let s=!1;if(this.hasKey)try{const{compare:c}=this;s=c(this.key,t)}catch(c){return this.destination.error(c)}else this.hasKey=!0;s||(this.key=t,this.destination.next(e))}}var Dt,xi=j(5435),Uo=(j(8241),j(3394)),ke=j(8239),Hi=j(8026),Ri=j(3910),ps=j(5422),xn=j(3854),Sc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ts={},yo=yo||{},Zt=Sc||self;function _o(){}function Js(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function vo(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var xc="closure_uid_"+(1e9*Math.random()>>>0),jo=0;function Rc(i,e,t){return i.call.apply(i.bind,arguments)}function wo(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,s),i.apply(e,c)}}return function(){return i.apply(e,arguments)}}function vr(i,e,t){return(vr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Rc:wo).apply(null,arguments)}function Bo(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function sr(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(s,c,l){for(var d=Array(arguments.length-2),g=2;g<arguments.length;g++)d[g-2]=arguments[g];return e.prototype[c].apply(s,d)}}function mi(){this.s=this.s,this.o=this.o}var ns={};mi.prototype.s=!1,mi.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function(i){return Object.prototype.hasOwnProperty.call(i,xc)&&i[xc]||(i[xc]=++jo)}(this);delete ns[i]}},mi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ui=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function Eo(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function ua(i,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(Js(s)){const c=i.length||0,l=s.length||0;i.length=c+l;for(let d=0;d<l;d++)i[c+d]=s[d]}else i.push(s)}}function Qr(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Qr.prototype.h=function(){this.defaultPrevented=!0};var $o=function(){if(!Zt.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Zt.addEventListener("test",_o,e),Zt.removeEventListener("test",_o,e)}catch(t){}return i}();function yi(i){return/^[\s\xa0]*$/.test(i)}var la=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function ji(i,e){return i<e?-1:i>e?1:0}function da(){var i=Zt.navigator;return i&&(i=i.userAgent)?i:""}function Ln(i){return-1!=da().indexOf(i)}function Bi(i){return Bi[" "](i),i}Bi[" "]=_o;var en,i,B=Ln("Opera"),N=Ln("Trident")||Ln("MSIE"),W=Ln("Edge"),se=W||N,Ee=Ln("Gecko")&&!(-1!=da().toLowerCase().indexOf("webkit")&&!Ln("Edge"))&&!(Ln("Trident")||Ln("MSIE"))&&!Ln("Edge"),Ke=-1!=da().toLowerCase().indexOf("webkit")&&!Ln("Edge");function It(){var i=Zt.document;return i?i.documentMode:void 0}e:{var At="",Vn=(i=da(),Ee?/rv:([^\);]+)(\)|;)/.exec(i):W?/Edge\/([\d\.]+)/.exec(i):N?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Ke?/WebKit\/(\S+)/.exec(i):B?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Vn&&(At=Vn?Vn[1]:""),N){var fn=It();if(null!=fn&&fn>parseFloat(At)){en=String(fn);break e}}en=At}var Bn={};function mn(){return e=Bn,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let i=0;const e=la(String(en)).split("."),t=la("9").split("."),s=Math.max(e.length,t.length);for(let d=0;0==i&&d<s;d++){var c=e[d]||"",l=t[d]||"";do{if(c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==c[0].length&&0==l[0].length)break;i=ji(0==c[1].length?0:parseInt(c[1],10),0==l[1].length?0:parseInt(l[1],10))||ji(0==c[2].length,0==l[2].length)||ji(c[2],l[2]),c=c[3],l=l[3]}while(0==i)}return 0<=i}();var e}var hi=Zt.document&&N&&(It()||parseInt(en,10))||void 0;function $n(i,e){if(Qr.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Ee){e:{try{Bi(e.nodeName);var c=!0;break e}catch(l){}c=!1}c||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:yr[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&$n.X.h.call(this)}}sr($n,Qr);var yr={2:"touch",3:"pen",4:"mouse"};$n.prototype.h=function(){$n.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var is="closure_listenable_"+(1e6*Math.random()|0),Xs=0;function $i(i,e,t,s,c){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ha=c,this.key=++Xs,this.ba=this.ea=!1}function ss(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function bo(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function qt(i){const e={};for(const t in i)e[t]=i[t];return e}const Sl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ha(i,e){let t,s;for(let c=1;c<arguments.length;c++){for(t in s=arguments[c],s)i[t]=s[t];for(let l=0;l<Sl.length;l++)t=Sl[l],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function Go(i){this.src=i,this.g={},this.h=0}function Wo(i,e){var t=e.type;if(t in i.g){var l,s=i.g[t],c=Ui(s,e);(l=0<=c)&&Array.prototype.splice.call(s,c,1),l&&(ss(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function eo(i,e,t,s){for(var c=0;c<i.length;++c){var l=i[c];if(!l.ba&&l.listener==e&&l.capture==!!t&&l.ha==s)return c}return-1}Go.prototype.add=function(i,e,t,s,c){var l=i.toString();(i=this.g[l])||(i=this.g[l]=[],this.h++);var d=eo(i,e,s,c);return-1<d?(e=i[d],t||(e.ea=!1)):((e=new $i(e,this.src,l,!!s,c)).ea=t,i.push(e)),e};var qo="closure_lm_"+(1e6*Math.random()|0),qa={};function Ge(i,e,t,s,c){if(s&&s.once)return tr(i,e,t,s,c);if(Array.isArray(e)){for(var l=0;l<e.length;l++)Ge(i,e[l],t,s,c);return null}return t=Ko(t),i&&i[is]?i.N(e,t,vo(s)?!!s.capture:!!s,c):En(i,e,t,!1,s,c)}function En(i,e,t,s,c,l){if(!e)throw Error("Invalid event type");var d=vo(c)?!!c.capture:!!c,g=Ts(i);if(g||(i[qo]=g=new Go(i)),(t=g.add(e,t,s,d,l)).proxy)return t;if(s=function(){const e=fa;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)$o||(c=d),void 0===c&&(c=!1),i.addEventListener(e.toString(),s,c);else if(i.attachEvent)i.attachEvent(as(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function tr(i,e,t,s,c){if(Array.isArray(e)){for(var l=0;l<e.length;l++)tr(i,e[l],t,s,c);return null}return t=Ko(t),i&&i[is]?i.O(e,t,vo(s)?!!s.capture:!!s,c):En(i,e,t,!0,s,c)}function Ka(i,e,t,s,c){if(Array.isArray(e))for(var l=0;l<e.length;l++)Ka(i,e[l],t,s,c);else s=vo(s)?!!s.capture:!!s,t=Ko(t),i&&i[is]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=eo(l=i.g[e],t,s,c))&&(ss(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete i.g[e],i.h--))):i&&(i=Ts(i))&&(e=i.g[e.toString()],i=-1,e&&(i=eo(e,t,s,c)),(t=-1<i?e[i]:null)&&os(t))}function os(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[is])Wo(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(as(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Ts(e))?(Wo(t,i),0==t.h&&(t.src=null,e[qo]=null)):ss(i)}}}function as(i){return i in qa?qa[i]:qa[i]="on"+i}function fa(i,e){if(i.ba)i=!0;else{e=new $n(e,this);var t=i.listener,s=i.ha||i.src;i.ea&&os(i),i=t.call(s,e)}return i}function Ts(i){return(i=i[qo])instanceof Go?i:null}var iu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ko(i){return"function"==typeof i?i:(i[iu]||(i[iu]=function(e){return i.handleEvent(e)}),i[iu])}function Ar(){mi.call(this),this.i=new Go(this),this.P=this,this.I=null}function ar(i,e){var t,s=i.I;if(s)for(t=[];s;s=s.I)t.push(s);if(i=i.P,s=e.type||e,"string"==typeof e)e=new Qr(e,i);else if(e instanceof Qr)e.target=e.target||i;else{var c=e;ha(e=new Qr(s,i),c)}if(c=!0,t)for(var l=t.length-1;0<=l;l--){var d=e.g=t[l];c=Sr(d,s,!0,e)&&c}if(c=Sr(d=e.g=i,s,!0,e)&&c,c=Sr(d,s,!1,e)&&c,t)for(l=0;l<t.length;l++)c=Sr(d=e.g=t[l],s,!1,e)&&c}function Sr(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var c=!0,l=0;l<e.length;++l){var d=e[l];if(d&&!d.ba&&d.capture==t){var g=d.listener,m=d.ha||d.src;d.ea&&Wo(i.i,d),c=!1!==g.call(m,s)&&c}}return c&&!s.defaultPrevented}sr(Ar,mi),Ar.prototype[is]=!0,Ar.prototype.removeEventListener=function(i,e,t,s){Ka(this,i,e,t,s)},Ar.prototype.M=function(){if(Ar.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)ss(t[s]);delete i.g[e],i.h--}}this.I=null},Ar.prototype.N=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},Ar.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var _i=Zt.JSON.stringify;function pa(){var i=Oc;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var zo,gs=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Mc,i=>i.reset());class Mc{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Nc(i){Zt.setTimeout(()=>{throw i},0)}function Fu(i,e){zo||function(){var i=Zt.Promise.resolve(void 0);zo=function(){i.then(kc)}}(),Io||(zo(),Io=!0),Oc.add(i,e)}var Io=!1,Oc=new class{constructor(){this.h=this.g=null}add(e,t){const s=gs.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function kc(){for(var i;i=pa();){try{i.h.call(i.g)}catch(t){Nc(t)}var e=gs;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Io=!1}function Za(i,e){Ar.call(this),this.h=i||1,this.g=e||Zt,this.j=vr(this.lb,this),this.l=Date.now()}function To(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function to(i,e,t){if("function"==typeof i)t&&(i=vr(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=vr(i.handleEvent,i)}return 2147483647<Number(e)?-1:Zt.setTimeout(i,e||0)}function Fc(i){i.g=to(()=>{i.g=null,i.i&&(i.i=!1,Fc(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}sr(Za,Ar),(Dt=Za.prototype).ca=!1,Dt.R=null,Dt.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ar(this,"tick"),this.ca&&(To(this),this.start()))}},Dt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Dt.M=function(){Za.X.M.call(this),To(this),delete this.g};class ga extends mi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Fc(this)}M(){super.M(),this.g&&(Zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ma(i){mi.call(this),this.h=i,this.g={}}sr(ma,mi);var Lu=[];function ya(i,e,t,s){Array.isArray(t)||(t&&(Lu[0]=t.toString()),t=Lu);for(var c=0;c<t.length;c++){var l=Ge(e,t[c],s||i.handleEvent,!1,i.h||i);if(!l)break;i.g[l.key]=l}}function Lc(i){bo(i.g,function(e,t){this.g.hasOwnProperty(t)&&os(e)},i),i.g={}}function Zo(){this.g=!0}function Yn(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var c=s[1];if(Array.isArray(c)&&!(1>c.length)){var l=c[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var d=1;d<c.length;d++)c[d]=""}}}return _i(t)}catch(g){return e}}(i,t)+(s?" "+s:"")})}ma.prototype.M=function(){ma.X.M.call(this),Lc(this)},ma.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zo.prototype.Aa=function(){this.g=!1},Zo.prototype.info=function(){};var no={},Do=null;function wr(){return Do=Do||new Ar}function su(i){Qr.call(this,no.Pa,i)}function Ls(i){const e=wr();ar(e,new su(e,i))}function Qa(i,e){Qr.call(this,no.STAT_EVENT,i),this.stat=e}function Gr(i){const e=wr();ar(e,new Qa(e,i))}function Yo(i,e){Qr.call(this,no.Qa,i),this.size=e}function Ao(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Zt.setTimeout(function(){i()},e)}no.Pa="serverreachability",sr(su,Qr),no.STAT_EVENT="statevent",sr(Qa,Qr),no.Qa="timingevent",sr(Yo,Qr);var Mr={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Wi={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ds(){}function Vc(){}Ds.prototype.h=null;var Hc,nr={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function _a(){Qr.call(this,"d")}function ou(){Qr.call(this,"c")}function Uc(){}function Xa(i,e,t,s){this.l=i,this.j=e,this.m=t,this.U=s||1,this.S=new ma(this),this.O=Bc,this.T=new Za(i=se?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new jc}function jc(){this.i=null,this.g="",this.h=!1}sr(_a,Qr),sr(ou,Qr),sr(Uc,Ds),Uc.prototype.g=function(){return new XMLHttpRequest},Uc.prototype.i=function(){return{}},Hc=new Uc;var Bc=45e3,ec={},Vs={};function au(i,e,t){i.K=1,i.v=b(Ki(e)),i.s=t,i.P=!0,us(i,null)}function us(i,e){i.F=Date.now(),ro(i),i.A=Ki(i.v);var t=i.A,s=i.U;Array.isArray(s)||(s=[String(s)]),Jr(t.i,"t",s),i.C=0,t=i.l.H,i.h=new jc,i.g=_s(i.l,t?e:null,!i.s),0<i.N&&(i.L=new ga(vr(i.La,i,i.g),i.N)),ya(i.S,i.g,"readystatechange",i.ib),e=i.H?qt(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),Ls(1),function(i,e,t,s,c,l){i.info(function(){if(i.g)if(l)for(var d="",g=l.split("&"),m=0;m<g.length;m++){var w=g[m].split("=");if(1<w.length){var I=w[0];w=w[1];var M=I.split("_");d=2<=M.length&&"type"==M[1]?d+(I+"=")+w+"&":d+(I+"=redacted&")}}else d=null;else d=l;return"XMLHTTP REQ ("+s+") [attempt "+c+"]: "+e+"\n"+t+"\n"+d})}(i.j,i.u,i.A,i.m,i.U,i.s)}function qi(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function $c(i,e,t){let c,s=!0;for(;!i.I&&i.C<t.length;){if(c=va(i,t),c==Vs){4==e&&(i.o=4,Gr(14),s=!1),Yn(i.j,i.m,null,"[Incomplete Response]");break}if(c==ec){i.o=4,Gr(15),Yn(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}Yn(i.j,i.m,c,null),Gc(i,c)}qi(i)&&c!=Vs&&c!=ec&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Gr(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Se(e),e.K=!0,Gr(11))):(Yn(i.j,i.m,t,"[Invalid Chunked Response]"),ms(i),So(i))}function va(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?Vs:(t=Number(e.substring(t,s)),isNaN(t)?ec:(s+=1)+t>e.length?Vs:(e=e.substr(s,t),i.C=s+t,e))}function ro(i){i.V=Date.now()+i.O,tc(i,i.O)}function tc(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Ao(vr(i.gb,i),e)}function nc(i){i.B&&(Zt.clearTimeout(i.B),i.B=null)}function So(i){0==i.l.G||i.I||kt(i.l,i)}function ms(i){nc(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,To(i.T),Lc(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Gc(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||xl(t.h,i)))if(!i.J&&xl(t.h,i)&&3==t.G){try{var s=t.Fa.g.parse(e)}catch(w){s=null}if(Array.isArray(s)&&3==s.length){var c=s;if(0==c[0])e:if(t.u)t.Ba=c[1],0<t.Ba-t.T&&37500>c[2]&&t.L&&0==t.A&&!t.v&&(t.v=Ao(vr(t.cb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;pt(t),Po(t)}ge(t),Gr(18)}if(1>=Dd(t.h)&&t.ja){try{t.ja()}catch(w){}t.ja=void 0}}else Qt(t,11)}else if((i.J||t.g==i)&&pt(t),!yi(e))for(c=t.Fa.g.parse(e),e=0;e<c.length;e++){let w=c[e];if(t.T=w[0],w=w[1],2==t.G)if("c"==w[0]){t.I=w[1],t.ka=w[2];const I=w[3];null!=I&&(t.ma=I,t.j.info("VER="+t.ma));const M=w[4];null!=M&&(t.Ca=M,t.j.info("SVER="+t.Ca));const V=w[5];null!=V&&"number"==typeof V&&0<V&&(t.J=s=1.5*V,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const K=i.g;if(K){const ce=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ce){var l=s.h;l.g||-1==ce.indexOf("spdy")&&-1==ce.indexOf("quic")&&-1==ce.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(br(l,l.h),l.h=null))}if(s.D){const Ae=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;Ae&&(s.za=Ae,C(s.F,s.D,Ae))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=i;if((s=t).sa=fi(s,s.H?s.ka:null,s.V),d.J){Rh(s.h,d);var g=d,m=s.J;m&&g.setTimeout(m),g.B&&(nc(g),ro(g)),s.g=d}else J(s);0<t.i.length&&Aa(t)}else"stop"!=w[0]&&"close"!=w[0]||Qt(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Qt(t,7):Wc(t):"noop"!=w[0]&&t.l&&t.l.wa(w),t.A=0)}Ls(4)}catch(w){}}function ba(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Js(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if("undefined"!=typeof Map&&i instanceof Map)return Array.from(i.keys());if(!("undefined"!=typeof Set&&i instanceof Set)){if(Js(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const s in i)e[t++]=s;return e}}}(i),s=function(i){if(i.W&&"function"==typeof i.W)return i.W();if("undefined"!=typeof Map&&i instanceof Map||"undefined"!=typeof Set&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Js(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),c=s.length,l=0;l<c;l++)e.call(void 0,s[l],t&&t[l],i)}(Dt=Xa.prototype).setTimeout=function(i){this.O=i},Dt.ib=function(i){i=i.target;const e=this.L;e&&3==Xo(i)?e.l():this.La(i)},Dt.La=function(i){try{if(i==this.g)e:{const I=Xo(this.g);var e=this.g.Ea();const M=this.g.aa();if(!(3>I)&&(3!=I||se||this.g&&(this.h.h||this.g.fa()||Ad(this.g)))){this.I||4!=I||7==e||Ls(8==e||0>=M?3:2),nc(this);var t=this.g.aa();this.Y=t;t:if(qi(this)){var s=Ad(this.g);i="";var c=s.length,l=4==Xo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ms(this),So(this);var d="";break t}this.h.i=new Zt.TextDecoder}for(e=0;e<c;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:l&&e==c-1});s.splice(0,c),this.h.g+=i,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function(i,e,t,s,c,l,d){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+c+"]: "+e+"\n"+t+"\n"+l+" "+d})}(this.j,this.u,this.A,this.m,this.U,I,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var g,m=this.g;if((g=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yi(g)){var w=g;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Gr(12),ms(this),So(this);break e}Yn(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Gc(this,t)}this.P?($c(this,I,d),se&&this.i&&3==I&&(ya(this.S,this.T,"tick",this.hb),this.T.start())):(Yn(this.j,this.m,d,null),Gc(this,d)),4==I&&ms(this),this.i&&!this.I&&(4==I?kt(this.l,this):(this.i=!1,ro(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Gr(12)):(this.o=0,Gr(13)),ms(this),So(this)}}}catch(I){}},Dt.hb=function(){if(this.g){var i=Xo(this.g),e=this.g.fa();this.C<e.length&&(nc(this),$c(this,i,e),this.i&&4!=i&&ro(this))}},Dt.cancel=function(){this.I=!0,ms(this)},Dt.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ls(3),Gr(17)),ms(this),this.o=2,So(this)):tc(this,this.V-i)};var Ca=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function As(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof As){this.h=void 0!==e?e:i.h,rc(this,i.j),this.s=i.s,this.g=i.g,Ss(this,i.m),this.l=i.l,e=i.i;var t=new Mt;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),D(this,t),this.o=i.o}else i&&(t=String(i).match(Ca))?(this.h=!!e,rc(this,t[1]||"",!0),this.s=P(t[2]||""),this.g=P(t[3]||"",!0),Ss(this,t[4]),this.l=P(t[5]||"",!0),D(this,t[6]||"",!0),this.o=P(t[7]||"")):(this.h=!!e,this.i=new Mt(null,this.h))}function Ki(i){return new As(i)}function rc(i,e,t){i.j=t?P(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Ss(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function D(i,e,t){e instanceof Mt?(i.i=e,function(i,e){e&&!i.j&&(An(i),i.i=null,i.g.forEach(function(t,s){var c=s.toLowerCase();s!=c&&(an(this,s),Jr(this,c,t))},i)),i.j=e}(i.i,i.h)):(t||(e=L(e,mt)),i.i=new Mt(e,i.h))}function C(i,e,t){i.i.set(e,t)}function b(i){return C(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function P(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function L(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,G),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function G(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}As.prototype.toString=function(){var i=[],e=this.j;e&&i.push(L(e,ee,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(L(e,ee,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(L(t,"/"==t.charAt(0)?Fe:ae,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",L(t,cn)),i.join("")};var ee=/[#\/\?@]/g,ae=/[#\?:]/g,Fe=/[#\?]/g,mt=/[#\?@]/g,cn=/#/g;function Mt(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function An(i){i.g||(i.g=new Map,i.h=0,i.i&&function(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),c=null;if(0<=s){var l=i[t].substring(0,s);c=i[t].substring(s+1)}else l=i[t];e(l,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function an(i,e){An(i),e=Er(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Pi(i,e){return An(i),e=Er(i,e),i.g.has(e)}function Jr(i,e,t){an(i,e),0<t.length&&(i.i=null,i.g.set(Er(i,e),Eo(t)),i.h+=t.length)}function Er(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function xo(i){this.l=i||cu,i=Zt.PerformanceNavigationTiming?0<(i=Zt.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Zt.g&&Zt.g.Ga&&Zt.g.Ga()&&Zt.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Dt=Mt.prototype).add=function(i,e){An(this),this.i=null,i=Er(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Dt.forEach=function(i,e){An(this),this.g.forEach(function(t,s){t.forEach(function(c){i.call(e,c,s,this)},this)},this)},Dt.oa=function(){An(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const c=i[s];for(let l=0;l<c.length;l++)t.push(e[s])}return t},Dt.W=function(i){An(this);let e=[];if("string"==typeof i)Pi(this,i)&&(e=e.concat(this.g.get(Er(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},Dt.set=function(i,e){return An(this),this.i=null,Pi(this,i=Er(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Dt.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},Dt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const l=encodeURIComponent(String(s)),d=this.W(s);for(s=0;s<d.length;s++){var c=l;""!==d[s]&&(c+="="+encodeURIComponent(String(d[s]))),i.push(c)}}return this.i=i.join("&")};var cu=10;function xh(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Dd(i){return i.h?1:i.g?i.g.size:0}function xl(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function br(i,e){i.g?i.g.add(e):i.h=e}function Rh(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Rl(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Eo(i.i)}function Ta(){}function Jf(){this.g=new Ta}function Xf(i,e,t){const s=t||"";try{ba(i,function(c,l){let d=c;vo(c)&&(d=_i(c)),e.push(s+l+"="+encodeURIComponent(d))})}catch(c){throw e.push(s+"type="+encodeURIComponent("_badmap")),c}}function uu(i,e,t,s,c){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,c(s)}catch(l){}}function Hu(i){this.l=i.ac||null,this.j=i.jb||!1}function Uu(i,e){Ar.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Pl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xo.prototype.cancel=function(){if(this.i=Rl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Ta.prototype.stringify=function(i){return Zt.JSON.stringify(i,void 0)},Ta.prototype.parse=function(i){return Zt.JSON.parse(i,void 0)},sr(Hu,Ds),Hu.prototype.g=function(){return new Uu(this.l,this.j)},Hu.prototype.i=function(i){return function(){return i}}({}),sr(Uu,Ar);var Pl=0;function Ml(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function io(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Jo(i)}function Jo(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Dt=Uu.prototype).open=function(i,e){if(this.readyState!=Pl)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Jo(this)},Dt.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||Zt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Dt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,io(this)),this.readyState=Pl},Dt.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Jo(this)),this.g&&(this.readyState=3,Jo(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Zt.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ml(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},Dt.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?io(this):Jo(this),3==this.readyState&&Ml(this)}},Dt.Va=function(i){this.g&&(this.response=this.responseText=i,io(this))},Dt.Ua=function(i){this.g&&(this.response=i,io(this))},Dt.ga=function(){this.g&&io(this)},Dt.setRequestHeader=function(i,e){this.v.append(i,e)},Dt.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Dt.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Uu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Wr=Zt.JSON.parse;function or(i){Ar.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ic,this.K=this.L=!1}sr(or,Ar);var ic="",ju=/^https?$/i,tp=["POST","PUT"];function Ro(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,lu(i),Mi(i)}function lu(i){i.D||(i.D=!0,ar(i,"complete"),ar(i,"error"))}function Da(i){if(i.h&&void 0!==yo&&(!i.C[1]||4!=Xo(i)||2!=i.aa()))if(i.v&&4==Xo(i))to(i.Ha,0,i);else if(ar(i,"readystatechange"),4==Xo(i)){i.h=!1;try{const g=i.aa();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===g){var c=String(i.H).match(Ca)[1]||null;if(!c&&Zt.self&&Zt.self.location){var l=Zt.self.location.protocol;c=l.substr(0,l.length-1)}s=!ju.test(c?c.toLowerCase():"")}t=s}if(t)ar(i,"complete"),ar(i,"success");else{i.m=6;try{var d=2<Xo(i)?i.g.statusText:""}catch(m){d=""}i.j=d+" ["+i.aa()+"]",lu(i)}}finally{Mi(i)}}}function Mi(i,e){if(i.g){Bu(i);const t=i.g,s=i.C[0]?_o:null;i.g=null,i.C=null,e||ar(i,"ready");try{t.onreadystatechange=s}catch(c){}}}function Bu(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Zt.clearTimeout(i.A),i.A=null)}function Xo(i){return i.g?i.g.readyState:0}function Ad(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case ic:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ea(i){let e="";return bo(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function Sd(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=ea(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):C(i,e,t))}function ys(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function xs(i){this.Ca=0,this.i=[],this.j=new Zo,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ys("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ys("baseRetryDelayMs",5e3,i),this.bb=ys("retryDelaySeedMs",1e4,i),this.$a=ys("forwardChannelMaxRetries",2,i),this.ta=ys("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new xo(i&&i.concurrentRequestLimit),this.Fa=new Jf,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Wc(i){if(Nl(i),3==i.G){var e=i.U++,t=Ki(i.F);C(t,"SID",i.I),C(t,"RID",e),C(t,"TYPE","terminate"),F(i,t),(e=new Xa(i,i.j,e,void 0)).K=2,e.v=b(Ki(t)),t=!1,Zt.navigator&&Zt.navigator.sendBeacon&&(t=Zt.navigator.sendBeacon(e.v.toString(),"")),!t&&Zt.Image&&((new Image).src=e.v,t=!0),t||(e.g=_s(e.l,null),e.g.da(e.v)),e.F=Date.now(),ro(e)}Kt(i)}function Po(i){i.g&&(Se(i),i.g.cancel(),i.g=null)}function Nl(i){Po(i),i.u&&(Zt.clearTimeout(i.u),i.u=null),pt(i),i.h.cancel(),i.m&&("number"==typeof i.m&&Zt.clearTimeout(i.m),i.m=null)}function Aa(i){xh(i.h)||i.m||(i.m=!0,Fu(i.Ja,i),i.C=0)}function S(i,e){var t;t=e?e.m:i.U++;const s=Ki(i.F);C(s,"SID",i.I),C(s,"RID",t),C(s,"AID",i.T),F(i,s),i.o&&i.s&&Sd(s,i.o,i.s),t=new Xa(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=$(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),br(i.h,t),au(t,s,e)}function F(i,e){i.ia&&bo(i.ia,function(t,s){C(e,s,t)}),i.l&&ba({},function(t,s){C(e,s,t)})}function $(i,e,t){t=Math.min(i.i.length,t);var s=i.l?vr(i.l.Ra,i.l,i):null;e:{var c=i.i;let l=-1;for(;;){const d=["count="+t];-1==l?0<t?(l=c[0].h,d.push("ofs="+l)):l=0:d.push("ofs="+l);let g=!0;for(let m=0;m<t;m++){let w=c[m].h;const I=c[m].g;if(w-=l,0>w)l=Math.max(0,c[m].h-100),g=!1;else try{Xf(I,d,"req"+w+"_")}catch(M){s&&s(I)}}if(g){s=d.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,s}function J(i){i.g||i.u||(i.Z=1,Fu(i.Ia,i),i.A=0)}function ge(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=Ao(vr(i.Ia,i),rn(i,i.A)),i.A++,0))}function Se(i){null!=i.B&&(Zt.clearTimeout(i.B),i.B=null)}function qe(i){i.g=new Xa(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=Ki(i.sa);C(e,"RID","rpc"),C(e,"SID",i.I),C(e,"CI",i.L?"0":"1"),C(e,"AID",i.T),C(e,"TYPE","xmlhttp"),F(i,e),i.o&&i.s&&Sd(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=b(Ki(e)),t.s=null,t.P=!0,us(t,i)}function pt(i){null!=i.v&&(Zt.clearTimeout(i.v),i.v=null)}function kt(i,e){var t=null;if(i.g==e){pt(i),Se(i),i.g=null;var s=2}else{if(!xl(i.h,e))return;t=e.D,Rh(i.h,e),s=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var c=i.C;ar(s=wr(),new Yo(s,t,e,c)),Aa(i)}else J(i);else if(3==(c=e.o)||0==c&&0<i.pa||!(1==s&&function(i,e){return!(Dd(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=Ao(vr(i.Ja,i,e),rn(i,i.C)),i.C++,0)))}(i,e)||2==s&&ge(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),c){case 1:Qt(i,5);break;case 4:Qt(i,10);break;case 3:Qt(i,6);break;default:Qt(i,2)}}function rn(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function Qt(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var s=vr(i.kb,i);t||(t=new As("//www.google.com/images/cleardot.gif"),Zt.location&&"http"==Zt.location.protocol||rc(t,"https"),b(t)),function(i,e){const t=new Zo;if(Zt.Image){const s=new Image;s.onload=Bo(uu,t,s,"TestLoadImage: loaded",!0,e),s.onerror=Bo(uu,t,s,"TestLoadImage: error",!1,e),s.onabort=Bo(uu,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=Bo(uu,t,s,"TestLoadImage: timeout",!1,e),Zt.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else Gr(2);i.G=0,i.l&&i.l.va(e),Kt(i),Nl(i)}function Kt(i){if(i.G=0,i.la=[],i.l){const e=Rl(i.h);(0!=e.length||0!=i.i.length)&&(ua(i.la,e),ua(i.la,i.i),i.h.i.length=0,Eo(i.i),i.i.length=0),i.l.ua()}}function fi(i,e,t){var s=t instanceof As?Ki(t):new As(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),Ss(s,s.m);else{var c=Zt.location;s=c.protocol,e=e?e+"."+c.hostname:c.hostname,c=+c.port;var l=new As(null,void 0);s&&rc(l,s),e&&(l.g=e),c&&Ss(l,c),t&&(l.l=t),s=l}return e=i.za,(t=i.D)&&e&&C(s,t,e),C(s,"VER",i.ma),F(i,s),s}function _s(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new or(t&&i.Da&&!i.ra?new Hu({jb:!0}):i.ra)).Ka(i.H),e}function ta(){}function sc(){if(N&&!(10<=Number(hi)))throw Error("Environmental error: no available transport.")}function Nr(i,e){Ar.call(this),this.g=new xs(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!yi(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!yi(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new vs(this)}function Sa(i){_a.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function na(){ou.call(this),this.status=1}function vs(i){this.g=i}(Dt=or.prototype).Ka=function(i){this.L=i},Dt.da=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Hc.g(),this.C=function(i){return i.h||(i.h=i.i())}(this.u?this.u:Hc),this.g.onreadystatechange=vr(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(l){return void Ro(this,l)}if(i=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var c in s)t.set(c,s[c]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const l of s.keys())t.set(l,s.get(l))}s=Array.from(t.keys()).find(l=>"content-type"==l.toLowerCase()),c=Zt.FormData&&i instanceof Zt.FormData,!(0<=Ui(tp,e))||s||c||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,d]of t)this.g.setRequestHeader(l,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Bu(this),0<this.B&&((this.K=function(i){return N&&mn()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vr(this.qa,this)):this.A=to(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(l){Ro(this,l)}},Dt.qa=function(){void 0!==yo&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ar(this,"timeout"),this.abort(8))},Dt.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,ar(this,"complete"),ar(this,"abort"),Mi(this))},Dt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Mi(this,!0)),or.X.M.call(this)},Dt.Ha=function(){this.s||(this.F||this.v||this.l?Da(this):this.fb())},Dt.fb=function(){Da(this)},Dt.aa=function(){try{return 2<Xo(this)?this.g.status:-1}catch(i){return-1}},Dt.fa=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},Dt.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Wr(e)}},Dt.Ea=function(){return this.m},Dt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Dt=xs.prototype).ma=8,Dt.G=1,Dt.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const c=new Xa(this,this.j,i,void 0);let l=this.s;if(this.S&&(l?(l=qt(l),ha(l,this.S)):l=this.S),null!==this.o||this.N||(c.H=l,l=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=$(this,c,e),C(t=Ki(this.F),"RID",i),C(t,"CVER",22),this.D&&C(t,"X-HTTP-Session-Id",this.D),F(this,t),l&&(this.N?e="headers="+encodeURIComponent(String(ea(l)))+"&"+e:this.o&&Sd(t,this.o,l)),br(this.h,c),this.Ya&&C(t,"TYPE","init"),this.O?(C(t,"$req",e),C(t,"SID","null"),c.Z=!0,au(c,t,null)):au(c,t,e),this.G=2}}else 3==this.G&&(i?S(this,i):0==this.i.length||xh(this.h)||S(this))},Dt.Ia=function(){if(this.u=null,qe(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=Ao(vr(this.eb,this),i)}},Dt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Gr(10),Po(this),qe(this))},Dt.cb=function(){null!=this.v&&(this.v=null,Po(this),ge(this),Gr(19))},Dt.kb=function(i){i?(this.j.info("Successfully pinged google.com"),Gr(2)):(this.j.info("Failed to ping google.com"),Gr(1))},(Dt=ta.prototype).xa=function(){},Dt.wa=function(){},Dt.va=function(){},Dt.ua=function(){},Dt.Ra=function(){},sc.prototype.g=function(i,e){return new Nr(i,e)},sr(Nr,Ar),Nr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;Gr(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=fi(i,null,i.V),Aa(i)},Nr.prototype.close=function(){Wc(this.g)},Nr.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=_i(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&Aa(e)},Nr.prototype.M=function(){this.g.l=null,delete this.j,Wc(this.g),delete this.g,Nr.X.M.call(this)},sr(Sa,_a),sr(na,ou),sr(vs,ta),vs.prototype.xa=function(){ar(this.g,"a")},vs.prototype.wa=function(i){ar(this.g,new Sa(i))},vs.prototype.va=function(i){ar(this.g,new na(i))},vs.prototype.ua=function(){ar(this.g,"b")},sc.prototype.createWebChannel=sc.prototype.g,Nr.prototype.send=Nr.prototype.u,Nr.prototype.open=Nr.prototype.m,Nr.prototype.close=Nr.prototype.close,Mr.NO_ERROR=0,Mr.TIMEOUT=8,Mr.HTTP_ERROR=6,Wi.COMPLETE="complete",Vc.EventType=nr,nr.OPEN="a",nr.CLOSE="b",nr.ERROR="c",nr.MESSAGE="d",Ar.prototype.listen=Ar.prototype.N,or.prototype.listenOnce=or.prototype.O,or.prototype.getLastError=or.prototype.Oa,or.prototype.getLastErrorCode=or.prototype.Ea,or.prototype.getStatus=or.prototype.aa,or.prototype.getResponseJson=or.prototype.Sa,or.prototype.getResponseText=or.prototype.fa,or.prototype.send=or.prototype.da,or.prototype.setWithCredentials=or.prototype.Ka;var cr=ts.createWebChannelTransport=function(){return new sc},oc=ts.getStatEventTarget=function(){return wr()},du=ts.ErrorCode=Mr,ac=ts.EventType=Wi,hu=ts.Event=no,np=ts.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Rd=ts.FetchXmlHttpFactory=Hu,$u=ts.WebChannel=Vc,om=ts.XhrIo=or;const fu="@firebase/firestore";class Cr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cr.UNAUTHENTICATED=new Cr(null),Cr.GOOGLE_CREDENTIALS=new Cr("google-credentials-uid"),Cr.FIRST_PARTY=new Cr("first-party-uid"),Cr.MOCK_USER=new Cr("mock-user");let ra="9.12.1";const Rs=new ps.Yd("@firebase/firestore");function Ph(){return Rs.logLevel}function it(i,...e){if(Rs.logLevel<=ps.in.DEBUG){const t=e.map(Mh);Rs.debug(`Firestore (${ra}): ${i}`,...t)}}function Or(i,...e){if(Rs.logLevel<=ps.in.ERROR){const t=e.map(Mh);Rs.error(`Firestore (${ra}): ${i}`,...t)}}function xa(i,...e){if(Rs.logLevel<=ps.in.WARN){const t=e.map(Mh);Rs.warn(`Firestore (${ra}): ${i}`,...t)}}function Mh(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function xt(i="Unexpected state"){const e=`FIRESTORE (${ra}) INTERNAL ASSERTION FAILED: `+i;throw Or(e),new Error(e)}function Vt(i,e){i||xt()}function _t(i,e){return i}const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Je extends xn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class rp{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ip{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Cr.UNAUTHENTICATED))}shutdown(){}}class am{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class sp{constructor(e){this.t=e,this.currentUser=Cr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let c=this.i;const l=w=>this.i!==c?(c=this.i,t(w)):Promise.resolve();let d=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new vi,e.enqueueRetryable(()=>l(this.currentUser))};const g=()=>{const w=d;e.enqueueRetryable((0,ke.Z)(function*(){yield w.promise,yield l(s.currentUser)}))},m=w=>{it("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(w=>m(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?m(w):(it("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new vi)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(it("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Vt("string"==typeof s.accessToken),new rp(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Vt(null===e||"string"==typeof e),new Cr(e)}}class Gu{constructor(e,t,s,c){this.h=e,this.l=t,this.m=s,this.g=c,this.type="FirstParty",this.user=Cr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Vt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Nh{constructor(e,t,s,c){this.h=e,this.l=t,this.m=s,this.g=c}getToken(){return Promise.resolve(new Gu(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Cr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cm{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const s=l=>{null!=l.error&&it("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.A;return this.A=l.token,it("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const c=l=>{it("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.T.onInit(l=>c(l)),setTimeout(()=>{if(!this.appCheck){const l=this.T.getImmediate({optional:!0});l?c(l):it("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Vt("string"==typeof t.token),this.A=t.token,new gu(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function $_(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class Ol{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const c=$_(40);for(let l=0;l<c.length;++l)s.length<20&&c[l]<t&&(s+=e.charAt(c[l]%e.length))}return s}}function sn(i,e){return i<e?-1:i>e?1:0}function mu(i,e,t){return i.length===e.length&&i.every((s,c)=>t(s,e[c]))}function Wu(i){return i+"\0"}class xr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Je(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Je(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Je(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Je(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return xr.fromMillis(Date.now())}static fromDate(e){return xr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new xr(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?sn(this.nanoseconds,e.nanoseconds):sn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Bt(e)}static min(){return new Bt(new xr(0,0))}static max(){return new Bt(new xr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class kl{constructor(e,t,s){void 0===t?t=0:t>e.length&&xt(),void 0===s?s=e.length-t:s>e.length-t&&xt(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===kl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof kl?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let c=0;c<s;c++){const l=e.get(c),d=t.get(c);if(l<d)return-1;if(l>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Hn extends kl{construct(e,t,s){return new Hn(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Je(Pe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(c=>c.length>0))}return new Hn(t)}static emptyPath(){return new Hn([])}}const um=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ei extends kl{construct(e,t,s){return new ei(e,t,s)}static isValidIdentifier(e){return um.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ei.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ei(["__name__"])}static fromServerFormat(e){const t=[];let s="",c=0;const l=()=>{if(0===s.length)throw new Je(Pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;c<e.length;){const g=e[c];if("\\"===g){if(c+1===e.length)throw new Je(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[c+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Je(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,c+=2}else"`"===g?(d=!d,c++):"."!==g||d?(s+=g,c++):(l(),c++)}if(l(),d)throw new Je(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ei(t)}static emptyPath(){return new ei([])}}class yt{constructor(e){this.path=e}static fromPath(e){return new yt(Hn.fromString(e))}static fromName(e){return new yt(Hn.fromString(e).popFirst(5))}static empty(){return new yt(Hn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Hn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Hn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yt(new Hn(e.slice()))}}class Mo{constructor(e,t,s,c){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=c}}function Ra(i){return i.fields.find(e=>2===e.kind)}function qc(i){return i.fields.filter(e=>2!==e.kind)}Mo.UNKNOWN_ID=-1;class Md{constructor(e,t){this.fieldPath=e,this.kind=t}}class Fl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Fl(0,oo.min())}}function Oh(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,c=Bt.fromTimestamp(1e9===s?new xr(t+1,0):new xr(t,s));return new oo(c,yt.empty(),e)}function kh(i){return new oo(i.readTime,i.key,-1)}class oo{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new oo(Bt.min(),yt.empty(),-1)}static max(){return new oo(Bt.max(),yt.empty(),-1)}}function Fh(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=yt.comparator(i.documentKey,e.documentKey),0!==t?t:sn(i.largestBatchId,e.largestBatchId))}const ap="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Nd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function yu(i){return Ll.apply(this,arguments)}function Ll(){return Ll=(0,ke.Z)(function*(i){if(i.code!==Pe.FAILED_PRECONDITION||i.message!==ap)throw i;it("LocalStore","Unexpectedly lost primary lease")}),Ll.apply(this,arguments)}class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Te((s,c)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,c)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,c)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Te?t:Te.resolve(t)}catch(t){return Te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.reject(t)}static resolve(e){return new Te((t,s)=>{t(e)})}static reject(e){return new Te((t,s)=>{s(e)})}static waitFor(e){return new Te((t,s)=>{let c=0,l=0,d=!1;e.forEach(g=>{++c,g.next(()=>{++l,d&&l===c&&t()},m=>s(m))}),d=!0,l===c&&t()})}static or(e){let t=Te.resolve(!1);for(const s of e)t=t.next(c=>c?Te.resolve(c):s());return t}static forEach(e,t){const s=[];return e.forEach((c,l)=>{s.push(t.call(this,c,l))}),this.waitFor(s)}static mapArray(e,t){return new Te((s,c)=>{const l=e.length,d=new Array(l);let g=0;for(let m=0;m<l;m++){const w=m;t(e[w]).next(I=>{d[w]=I,++g,g===l&&s(d)},I=>c(I))}})}static doWhile(e,t){return new Te((s,c)=>{const l=()=>{!0===e()?t().next(()=>{l()},c):s()};l()})}}class qu{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new vi,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Ku(e,t.error)):this.P.resolve()},this.transaction.onerror=s=>{const c=cp(s.target.error);this.P.reject(new Ku(e,c))}}static open(e,t,s,c){try{return new qu(t,e.transaction(c,s))}catch(l){throw new Ku(t,l)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(it("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Lh(t)}}class wi{constructor(e,t,s){this.name=e,this.version=t,this.S=s,12.2===wi.D((0,xn.z$)())&&Or("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return it("SimpleDb","Removing database:",e),zu(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,xn.hl)())return!1;if(wi.N())return!0;const e=(0,xn.z$)(),t=wi.D(e),s=0<t&&t<10,c=wi.k(e),l=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||l)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static k(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}F(e){var t=this;return(0,ke.Z)(function*(){return t.db||(it("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,c)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=d=>{s(d.target.result)},l.onblocked=()=>{c(new Ku(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=d=>{const g=d.target.error;c("VersionError"===g.name?new Je(Pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Je(Pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Ku(e,g))},l.onupgradeneeded=d=>{it("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,l.transaction,d.oldVersion,t.version).next(()=>{it("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=s=>t.B(s)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,c){var l=this;return(0,ke.Z)(function*(){const d="readonly"===t;let g=0;for(;;){++g;try{l.db=yield l.F(e);const m=qu.open(l.db,e,d?"readonly":"readwrite",s),w=c(m).next(I=>(m.V(),I)).catch(I=>(m.abort(I),Te.reject(I))).toPromise();return w.catch(()=>{}),yield m.v,w}catch(m){const w=m,I="FirebaseError"!==w.name&&g<3;if(it("SimpleDb","Transaction failed with error:",w.message,"Retrying:",I),l.close(),!I)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class _u{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return zu(this.U.delete())}}class Ku extends Je{constructor(e,t){super(Pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Pa(i){return"IndexedDbTransactionError"===i.name}class Lh{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(it("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(it("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),zu(s)}add(e){return it("SimpleDb","ADD",this.store.name,e,e),zu(this.store.add(e))}get(e){return zu(this.store.get(e)).next(t=>(void 0===t&&(t=null),it("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return it("SimpleDb","DELETE",this.store.name,e),zu(this.store.delete(e))}count(){return it("SimpleDb","COUNT",this.store.name),zu(this.store.count())}W(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const c=this.cursor(s),l=[];return this.H(c,(d,g)=>{l.push(g)}).next(()=>l)}{const c=this.store.getAll(s.range);return new Te((l,d)=>{c.onerror=g=>{d(g.target.error)},c.onsuccess=g=>{l(g.target.result)}})}}J(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new Te((c,l)=>{s.onerror=d=>{l(d.target.error)},s.onsuccess=d=>{c(d.target.result)}})}Y(e,t){it("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.X=!1;const c=this.cursor(s);return this.H(c,(l,d,g)=>g.delete())}Z(e,t){let s;t?s=e:(s={},t=e);const c=this.cursor(s);return this.H(c,t)}tt(e){const t=this.cursor({});return new Te((s,c)=>{t.onerror=l=>{const d=cp(l.target.error);c(d)},t.onsuccess=l=>{const d=l.target.result;d?e(d.primaryKey,d.value).next(g=>{g?d.continue():s()}):s()}})}H(e,t){const s=[];return new Te((c,l)=>{e.onerror=d=>{l(d.target.error)},e.onsuccess=d=>{const g=d.target.result;if(!g)return void c();const m=new _u(g),w=t(g.primaryKey,g.value,m);if(w instanceof Te){const I=w.catch(M=>(m.done(),Te.reject(M)));s.push(I)}m.isDone?c():null===m.G?g.continue():g.continue(m.G)}}).next(()=>Te.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.X?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function zu(i){return new Te((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const c=cp(s.target.error);t(c)}})}let hm=!1;function cp(i){const e=wi.D((0,xn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new Je("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hm||(hm=!0,setTimeout(()=>{throw s},0)),s}}return i}class Vh{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;it("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ke.Z)(function*(){t.task=null;try{it("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(s){Pa(s)?it("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield yu(s)}yield t.nt(6e4)}))}}class Hh{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ke.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.it(s,e))})()}it(e,t){const s=new Set;let c=t,l=!0;return Te.doWhile(()=>!0===l&&c>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!s.has(d))return it("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,c).next(g=>{c-=g,s.add(d)});l=!1})).next(()=>t-c)}rt(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(c=>this.localStore.localDocuments.getNextDocuments(e,t,c,s).next(l=>{const d=l.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(c,l)).next(g=>(it("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>d.size)}))}ot(e,t){let s=e;return t.changes.forEach((c,l)=>{const d=kh(l);Fh(d,s)>0&&(s=d)}),new oo(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ls{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ut(s),this.ct=s=>t.writeSequenceNumber(s))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function fm(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Vl(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function cc(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}ls.at=-1;class ti{constructor(e,t){this.comparator=e,this.root=t||Ni.EMPTY}insert(e,t){return new ti(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ni.BLACK,null,null))}remove(e){return new ti(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ni.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const c=this.comparator(e,s.key);if(0===c)return t+s.left.size;c<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Od(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Od(this.root,e,this.comparator,!1)}getReverseIterator(){return new Od(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Od(this.root,e,this.comparator,!0)}}class Od{constructor(e,t,s,c){this.isReverse=c,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&c&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ni{constructor(e,t,s,c,l){this.key=e,this.value=t,this.color=null!=s?s:Ni.RED,this.left=null!=c?c:Ni.EMPTY,this.right=null!=l?l:Ni.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,c,l){return new Ni(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=c?c:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let c=this;const l=s(e,c.key);return c=l<0?c.copy(null,null,null,c.left.insert(e,t,s),null):0===l?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,s)),c.fixUp()}removeMin(){if(this.left.isEmpty())return Ni.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===t(e,c.key)){if(c.right.isEmpty())return Ni.EMPTY;s=c.right.min(),c=c.copy(s.key,s.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xt();const e=this.left.check();if(e!==this.right.check())throw xt();return e+(this.isRed()?0:1)}}Ni.EMPTY=null,Ni.RED=!0,Ni.BLACK=!1,Ni.EMPTY=new class{constructor(){this.size=0}get key(){throw xt()}get value(){throw xt()}get color(){throw xt()}get left(){throw xt()}get right(){throw xt()}copy(i,e,t,s,c){return this}insert(i,e,t){return new Ni(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ur{constructor(e){this.comparator=e,this.data=new ti(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const c=s.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Hl(this.data.getIterator())}getIteratorFrom(e){return new Hl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof ur)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,l=s.getNext().key;if(0!==this.comparator(c,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ur(this.comparator);return t.data=e,t}}class Hl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function uc(i){return i.hasNext()?i.getNext():void 0}class Hs{constructor(e){this.fields=e,e.sort(ei.comparator)}static empty(){return new Hs([])}unionWith(e){let t=new ur(ei.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Hs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mu(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Oi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Oi(t)}static fromUint8Array(e){const t=function(s){let c="";for(let l=0;l<s.length;++l)c+=String.fromCharCode(s[l]);return c}(e);return new Oi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return sn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Oi.EMPTY_BYTE_STRING=new Oi("");const ni=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ma(i){if(Vt(!!i),"string"==typeof i){let e=0;const t=ni.exec(i);if(Vt(!!t),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ri(i.seconds),nanos:ri(i.nanos)}}function ri(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function lc(i){return"string"==typeof i?Oi.fromBase64String(i):Oi.fromUint8Array(i)}function kd(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function up(i){const e=i.mapValue.fields.__previous_value__;return kd(e)?up(e):e}function jl(i){const e=Ma(i.mapValue.fields.__local_write_time__.timestampValue);return new xr(e.seconds,e.nanos)}class lp{constructor(e,t,s,c,l,d,g,m){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=c,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.useFetchStreams=m}}class Na{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Na("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Na&&e.projectId===this.projectId&&e.database===this.database}}function Bl(i){return null==i}function Fd(i){return 0===i&&1/i==-1/0}function Uh(i){return"number"==typeof i&&Number.isInteger(i)&&!Fd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Us={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zi={nullValue:"NULL_VALUE"};function dc(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?kd(i)?4:hp(i)?9007199254740991:10:xt()}function js(i,e){if(i===e)return!0;const t=dc(i);if(t!==dc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return jl(i).isEqual(jl(e));case 3:return function(s,c){if("string"==typeof s.timestampValue&&"string"==typeof c.timestampValue&&s.timestampValue.length===c.timestampValue.length)return s.timestampValue===c.timestampValue;const l=Ma(s.timestampValue),d=Ma(c.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return c=e,lc(i.bytesValue).isEqual(lc(c.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,c){return ri(s.geoPointValue.latitude)===ri(c.geoPointValue.latitude)&&ri(s.geoPointValue.longitude)===ri(c.geoPointValue.longitude)}(i,e);case 2:return function(s,c){if("integerValue"in s&&"integerValue"in c)return ri(s.integerValue)===ri(c.integerValue);if("doubleValue"in s&&"doubleValue"in c){const l=ri(s.doubleValue),d=ri(c.doubleValue);return l===d?Fd(l)===Fd(d):isNaN(l)&&isNaN(d)}return!1}(i,e);case 9:return mu(i.arrayValue.values||[],e.arrayValue.values||[],js);case 10:return function(s,c){const l=s.mapValue.fields||{},d=c.mapValue.fields||{};if(fm(l)!==fm(d))return!1;for(const g in l)if(l.hasOwnProperty(g)&&(void 0===d[g]||!js(l[g],d[g])))return!1;return!0}(i,e);default:return xt()}var c}function Zu(i,e){return void 0!==(i.values||[]).find(t=>js(t,e))}function qr(i,e){if(i===e)return 0;const t=dc(i),s=dc(e);if(t!==s)return sn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return sn(i.booleanValue,e.booleanValue);case 2:return function(c,l){const d=ri(c.integerValue||c.doubleValue),g=ri(l.integerValue||l.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(i,e);case 3:return Yu(i.timestampValue,e.timestampValue);case 4:return Yu(jl(i),jl(e));case 5:return sn(i.stringValue,e.stringValue);case 6:return function(c,l){const d=lc(c),g=lc(l);return d.compareTo(g)}(i.bytesValue,e.bytesValue);case 7:return function(c,l){const d=c.split("/"),g=l.split("/");for(let m=0;m<d.length&&m<g.length;m++){const w=sn(d[m],g[m]);if(0!==w)return w}return sn(d.length,g.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,l){const d=sn(ri(c.latitude),ri(l.latitude));return 0!==d?d:sn(ri(c.longitude),ri(l.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(c,l){const d=c.values||[],g=l.values||[];for(let m=0;m<d.length&&m<g.length;++m){const w=qr(d[m],g[m]);if(w)return w}return sn(d.length,g.length)}(i.arrayValue,e.arrayValue);case 10:return function(c,l){if(c===Us.mapValue&&l===Us.mapValue)return 0;if(c===Us.mapValue)return 1;if(l===Us.mapValue)return-1;const d=c.fields||{},g=Object.keys(d),m=l.fields||{},w=Object.keys(m);g.sort(),w.sort();for(let I=0;I<g.length&&I<w.length;++I){const M=sn(g[I],w[I]);if(0!==M)return M;const V=qr(d[g[I]],m[w[I]]);if(0!==V)return V}return sn(g.length,w.length)}(i.mapValue,e.mapValue);default:throw xt()}}function Yu(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return sn(i,e);const t=Ma(i),s=Ma(e),c=sn(t.seconds,s.seconds);return 0!==c?c:sn(t.nanos,s.nanos)}function hc(i){return jh(i)}function jh(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const c=Ma(s);return`time(${c.seconds},${c.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?lc(i.bytesValue).toBase64():"referenceValue"in i?yt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let c="[",l=!0;for(const d of s.values||[])l?l=!1:c+=",",c+=jh(d);return c+"]"}(i.arrayValue):"mapValue"in i?function(s){const c=Object.keys(s.fields||{}).sort();let l="{",d=!0;for(const g of c)d?d=!1:l+=",",l+=`${g}:${jh(s.fields[g])}`;return l+"}"}(i.mapValue):xt();var e}function vu(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Ld(i){return!!i&&"integerValue"in i}function $l(i){return!!i&&"arrayValue"in i}function wu(i){return!!i&&"nullValue"in i}function dp(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Qu(i){return!!i&&"mapValue"in i}function Gl(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Vl(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Gl(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gl(i.arrayValue.values[t]);return e}return Object.assign({},i)}function hp(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function pm(i){return"nullValue"in i?zi:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?vu(Na.empty(),yt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:xt()}function fp(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?vu(Na.empty(),yt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Us:xt()}function Wl(i,e){const t=qr(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function ql(i,e){const t=qr(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class ki{constructor(e){this.value=e}static empty(){return new ki({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Qu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gl(t)}setAll(e){let t=ei.emptyPath(),s={},c=[];e.forEach((d,g)=>{if(!t.isImmediateParentOf(g)){const m=this.getFieldsMap(t);this.applyChanges(m,s,c),s={},c=[],t=g.popLast()}d?s[g.lastSegment()]=Gl(d):c.push(g.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,c)}delete(e){const t=this.field(e.popLast());Qu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return js(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let c=t.mapValue.fields[e.get(s)];Qu(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,s){Vl(t,(c,l)=>e[c]=l);for(const c of s)delete e[c]}clone(){return new ki(Gl(this.value))}}function pp(i){const e=[];return Vl(i.fields,(t,s)=>{const c=new ei([t]);if(Qu(s)){const l=pp(s.mapValue).fields;if(0===l.length)e.push(c);else for(const d of l)e.push(c.child(d))}else e.push(c)}),new Hs(e)}class _r{constructor(e,t,s,c,l,d){this.key=e,this.documentType=t,this.version=s,this.readTime=c,this.data=l,this.documentState=d}static newInvalidDocument(e){return new _r(e,0,Bt.min(),Bt.min(),ki.empty(),0)}static newFoundDocument(e,t,s){return new _r(e,1,t,Bt.min(),s,0)}static newNoDocument(e,t){return new _r(e,2,t,Bt.min(),ki.empty(),0)}static newUnknownDocument(e,t){return new _r(e,3,t,Bt.min(),ki.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ki.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ki.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof _r&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _r(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ju{constructor(e,t=null,s=[],c=[],l=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=c,this.limit=l,this.startAt=d,this.endAt=g,this.ht=null}}function gp(i,e=null,t=[],s=[],c=null,l=null,d=null){return new Ju(i,e,t,s,c,l,d)}function Fi(i){const e=_t(i);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>{return(c=s).field.canonicalString()+c.op.toString()+hc(c.value);var c}).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(c=s).field.canonicalString()+c.dir;var c}).join(","),Bl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>hc(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>hc(s)).join(",")),e.ht=t}return e.ht}function Xu(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let c=0;c<i.orderBy.length;c++)if(!tl(i.orderBy[c],e.orderBy[c]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let c=0;c<i.filters.length;c++)if((t=i.filters[c]).op!==(s=e.filters[c]).op||!t.field.isEqual(s.field)||!js(t.value,s.value))return!1;var t,s;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Kl(i.startAt,e.startAt)&&Kl(i.endAt,e.endAt)}function Vd(i){return yt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function el(i,e){return i.filters.filter(t=>t instanceof pi&&t.field.isEqual(e))}function Hd(i,e,t){let s=zi,c=!0;for(const l of el(i,e)){let d=zi,g=!0;switch(l.op){case"<":case"<=":d=pm(l.value);break;case"==":case"in":case">=":d=l.value;break;case">":d=l.value,g=!1;break;case"!=":case"not-in":d=zi}Wl({value:s,inclusive:c},{value:d,inclusive:g})<0&&(s=d,c=g)}if(null!==t)for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const d=t.position[l];Wl({value:s,inclusive:c},{value:d,inclusive:t.inclusive})<0&&(s=d,c=t.inclusive);break}return{value:s,inclusive:c}}function mp(i,e,t){let s=Us,c=!0;for(const l of el(i,e)){let d=Us,g=!0;switch(l.op){case">=":case">":d=fp(l.value),g=!1;break;case"==":case"in":case"<=":d=l.value;break;case"<":d=l.value,g=!1;break;case"!=":case"not-in":d=Us}ql({value:s,inclusive:c},{value:d,inclusive:g})>0&&(s=d,c=g)}if(null!==t)for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const d=t.position[l];ql({value:s,inclusive:c},{value:d,inclusive:t.inclusive})>0&&(s=d,c=t.inclusive);break}return{value:s,inclusive:c}}class pi extends class{}{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,s):new No(e,t,s):"array-contains"===t?new vp(e,s):"in"===t?new G_(e,s):"not-in"===t?new Bh(e,s):"array-contains-any"===t?new Bs(e,s):new pi(e,t,s)}static lt(e,t,s){return"in"===t?new fc(e,s):new yp(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(qr(t,this.value)):null!==t&&dc(this.value)===dc(t)&&this.ft(qr(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class No extends pi{constructor(e,t,s){super(e,t,s),this.key=yt.fromName(s.referenceValue)}matches(e){const t=yt.comparator(e.key,this.key);return this.ft(t)}}class fc extends pi{constructor(e,t){super(e,"in",t),this.keys=_p(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class yp extends pi{constructor(e,t){super(e,"not-in",t),this.keys=_p(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function _p(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>yt.fromName(s.referenceValue))}class vp extends pi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $l(t)&&Zu(t.arrayValue,this.value)}}class G_ extends pi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zu(this.value.arrayValue,t)}}class Bh extends pi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zu(this.value.arrayValue,t)}}class Bs extends pi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$l(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Zu(this.value.arrayValue,s))}}class ka{constructor(e,t){this.position=e,this.inclusive=t}}class Kc{constructor(e,t="asc"){this.field=e,this.dir=t}}function tl(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Li(i,e,t){let s=0;for(let c=0;c<i.position.length;c++){const l=e[c],d=i.position[c];if(s=l.field.isKeyField()?yt.comparator(yt.fromName(d.referenceValue),t.key):qr(d,t.data.field(l.field)),"desc"===l.dir&&(s*=-1),0!==s)break}return s}function Kl(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!js(i.position[t],e.position[t]))return!1;return!0}class pc{constructor(e,t=null,s=[],c=[],l=null,d="F",g=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=c,this.limit=l,this.limitType=d,this.startAt=g,this.endAt=m,this._t=null,this.wt=null}}function Ud(i,e,t,s,c,l,d,g){return new pc(i,e,t,s,c,l,d,g)}function zl(i){return new pc(i)}function ao(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Zl(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Yl(i){for(const e of i.filters)if(e.dt())return e.field;return null}function $h(i){return null!==i.collectionGroup}function Eu(i){const e=_t(i);if(null===e._t){e._t=[];const t=Yl(e),s=Zl(e);if(null!==t&&null===s)t.isKeyField()||e._t.push(new Kc(t)),e._t.push(new Kc(ei.keyField(),"asc"));else{let c=!1;for(const l of e.explicitOrderBy)e._t.push(l),l.field.isKeyField()&&(c=!0);if(!c){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Kc(ei.keyField(),l))}}}return e._t}function _(i){const e=_t(i);if(!e.wt)if("F"===e.limitType)e.wt=gp(e.path,e.collectionGroup,Eu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of Eu(e))t.push(new Kc(l.field,"desc"===l.dir?"asc":"desc"));const s=e.endAt?new ka(e.endAt.position,e.endAt.inclusive):null,c=e.startAt?new ka(e.startAt.position,e.startAt.inclusive):null;e.wt=gp(e.path,e.collectionGroup,t,e.filters,e.limit,s,c)}return e.wt}function f(i,e,t){return new pc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function p(i,e){return Xu(_(i),_(e))&&i.limitType===e.limitType}function E(i){return`${Fi(_(i))}|lt:${i.limitType}`}function O(i){return`Query(target=${function(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(s=t).field.canonicalString()} ${s.op} ${hc(s.value)}`;var s}).join(", ")}]`),Bl(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(s=t).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>hc(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>hc(t)).join(",")),`Target(${e})`}(_(i))}; limitType=${i.limitType})`}function U(i,e){return e.isFoundDocument()&&function(t,s){const c=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(c):yt.isDocumentKey(t.path)?t.path.isEqual(c):t.path.isImmediateParentOf(c)}(i,e)&&function(t,s){for(const c of t.explicitOrderBy)if(!c.field.isKeyField()&&null===s.data.field(c.field))return!1;return!0}(i,e)&&function(t,s){for(const c of t.filters)if(!c.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(c,l,d){const g=Li(c,l,d);return c.inclusive?g<=0:g<0}(t.startAt,Eu(t),s)||t.endAt&&!function(c,l,d){const g=Li(c,l,d);return c.inclusive?g>=0:g>0}(t.endAt,Eu(t),s)));var t,s}function ne(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function ve(i){return(e,t)=>{let s=!1;for(const c of Eu(i)){const l=rt(c,e,t);if(0!==l)return l;s=s||c.field.isKeyField()}return 0}}function rt(i,e,t){const s=i.field.isKeyField()?yt.comparator(e.key,t.key):function(c,l,d){const g=l.data.field(c),m=d.data.field(c);return null!==g&&null!==m?qr(g,m):xt()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return xt()}}function Xe(i,e){if(i.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fd(e)?"-0":e}}function Rt(i){return{integerValue:""+i}}function Pt(i,e){return Uh(e)?Rt(e):Xe(i,e)}class In{constructor(){this._=void 0}}function Zi(i,e,t){return i instanceof Zc?function(s,c){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return c&&(l.fields.__previous_value__=c),{mapValue:l}}(t,e):i instanceof Yc?jd(i,e):i instanceof ia?Bd(i,e):function(s,c){const l=Ql(s,c),d=$d(l)+$d(s.yt);return Ld(l)&&Ld(s.yt)?Rt(d):Xe(s.It,d)}(i,e)}function zc(i,e,t){return i instanceof Yc?jd(i,e):i instanceof ia?Bd(i,e):t}function Ql(i,e){return i instanceof gc?Ld(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Zc extends In{}class Yc extends In{constructor(e){super(),this.elements=e}}function jd(i,e){const t=Gh(e);for(const s of i.elements)t.some(c=>js(c,s))||t.push(s);return{arrayValue:{values:t}}}class ia extends In{constructor(e){super(),this.elements=e}}function Bd(i,e){let t=Gh(e);for(const s of i.elements)t=t.filter(c=>!js(c,s));return{arrayValue:{values:t}}}class gc extends In{constructor(e,t){super(),this.It=e,this.yt=t}}function $d(i){return ri(i.integerValue||i.doubleValue)}function Gh(i){return $l(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class nl{constructor(e,t){this.field=e,this.transform=t}}class bu{constructor(e,t){this.version=e,this.transformResults=t}}class Kr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kr}static exists(e){return new Kr(void 0,e)}static updateTime(e){return new Kr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wh(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class wp{}function qh(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new il(i.key,Kr.none()):new rl(i.key,i.data,Kr.none());{const t=i.data,s=ki.empty();let c=new ur(ei.comparator);for(let l of e.fields)if(!c.has(l)){let d=t.field(l);null===d&&l.length>1&&(l=l.popLast(),d=t.field(l)),null===d?s.delete(l):s.set(l,d),c=c.add(l)}return new Qc(i.key,s,new Hs(c.toArray()),Kr.none())}}function WE(i,e,t){i instanceof rl?function(s,c,l){const d=s.value.clone(),g=zh(s.fieldTransforms,c,l.transformResults);d.setAll(g),c.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(i,e,t):i instanceof Qc?function(s,c,l){if(!Wh(s.precondition,c))return void c.convertToUnknownDocument(l.version);const d=zh(s.fieldTransforms,c,l.transformResults),g=c.data;g.setAll(Kh(s)),g.setAll(d),c.convertToFoundDocument(l.version,g).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Wd(i,e,t,s){return i instanceof rl?function(c,l,d,g){if(!Wh(c.precondition,l))return d;const m=c.value.clone(),w=mm(c.fieldTransforms,g,l);return m.setAll(w),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null}(i,e,t,s):i instanceof Qc?function(c,l,d,g){if(!Wh(c.precondition,l))return d;const m=mm(c.fieldTransforms,g,l),w=l.data;return w.setAll(Kh(c)),w.setAll(m),l.convertToFoundDocument(l.version,w).setHasLocalMutations(),null===d?null:d.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(I=>I.field))}(i,e,t,s):(d=t,Wh(i.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d);var l,d}function W_(i,e){let t=null;for(const s of i.fieldTransforms){const c=e.data.field(s.field),l=Ql(s.transform,c||null);null!=l&&(null===t&&(t=ki.empty()),t.set(s.field,l))}return t||null}function gm(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&mu(t,s,(c,l)=>function(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof Yc&&s instanceof Yc||t instanceof ia&&s instanceof ia?mu(t.elements,s.elements,js):t instanceof gc&&s instanceof gc?js(t.yt,s.yt):t instanceof Zc&&s instanceof Zc);var t,s}(c,l))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class rl extends wp{constructor(e,t,s,c=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class Qc extends wp{constructor(e,t,s,c,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=c,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Kh(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function zh(i,e,t){const s=new Map;Vt(i.length===t.length);for(let c=0;c<t.length;c++){const l=i[c],d=l.transform,g=e.data.field(l.field);s.set(l.field,zc(d,g,t[c]))}return s}function mm(i,e,t){const s=new Map;for(const c of i){const l=c.transform,d=t.data.field(c.field);s.set(c.field,Zi(l,d,e))}return s}class il extends wp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ep extends wp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ym{constructor(e){this.count=e}}var ii,qn;function _m(i){switch(i){default:return xt();case Pe.CANCELLED:case Pe.UNKNOWN:case Pe.DEADLINE_EXCEEDED:case Pe.RESOURCE_EXHAUSTED:case Pe.INTERNAL:case Pe.UNAVAILABLE:case Pe.UNAUTHENTICATED:return!1;case Pe.INVALID_ARGUMENT:case Pe.NOT_FOUND:case Pe.ALREADY_EXISTS:case Pe.PERMISSION_DENIED:case Pe.FAILED_PRECONDITION:case Pe.ABORTED:case Pe.OUT_OF_RANGE:case Pe.UNIMPLEMENTED:case Pe.DATA_LOSS:return!0}}function q_(i){if(void 0===i)return Or("GRPC error has no .code"),Pe.UNKNOWN;switch(i){case ii.OK:return Pe.OK;case ii.CANCELLED:return Pe.CANCELLED;case ii.UNKNOWN:return Pe.UNKNOWN;case ii.DEADLINE_EXCEEDED:return Pe.DEADLINE_EXCEEDED;case ii.RESOURCE_EXHAUSTED:return Pe.RESOURCE_EXHAUSTED;case ii.INTERNAL:return Pe.INTERNAL;case ii.UNAVAILABLE:return Pe.UNAVAILABLE;case ii.UNAUTHENTICATED:return Pe.UNAUTHENTICATED;case ii.INVALID_ARGUMENT:return Pe.INVALID_ARGUMENT;case ii.NOT_FOUND:return Pe.NOT_FOUND;case ii.ALREADY_EXISTS:return Pe.ALREADY_EXISTS;case ii.PERMISSION_DENIED:return Pe.PERMISSION_DENIED;case ii.FAILED_PRECONDITION:return Pe.FAILED_PRECONDITION;case ii.ABORTED:return Pe.ABORTED;case ii.OUT_OF_RANGE:return Pe.OUT_OF_RANGE;case ii.UNIMPLEMENTED:return Pe.UNIMPLEMENTED;case ii.DATA_LOSS:return Pe.DATA_LOSS;default:return xt()}}(qn=ii||(ii={}))[qn.OK=0]="OK",qn[qn.CANCELLED=1]="CANCELLED",qn[qn.UNKNOWN=2]="UNKNOWN",qn[qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qn[qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qn[qn.NOT_FOUND=5]="NOT_FOUND",qn[qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",qn[qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",qn[qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",qn[qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qn[qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qn[qn.ABORTED=10]="ABORTED",qn[qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",qn[qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",qn[qn.INTERNAL=13]="INTERNAL",qn[qn.UNAVAILABLE=14]="UNAVAILABLE",qn[qn.DATA_LOSS=15]="DATA_LOSS";class sl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[c,l]of s)if(this.equalsFn(c,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),c=this.inner[s];if(void 0===c)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<c.length;l++)if(this.equalsFn(c[l][0],e))return void(c[l]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return 1===s.length?delete this.inner[t]:s.splice(c,1),this.innerSize--,!0;return!1}forEach(e){Vl(this.inner,(t,s)=>{for(const[c,l]of s)e(c,l)})}isEmpty(){return cc(this.inner)}size(){return this.innerSize}}const K_=new ti(yt.comparator);function $s(){return K_}const vm=new ti(yt.comparator);function bp(...i){let e=vm;for(const t of i)e=e.insert(t.key,t);return e}function wm(i){let e=vm;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Jc(){return Zh()}function Em(){return Zh()}function Zh(){return new sl(i=>i.toString(),(i,e)=>i.isEqual(e))}const qE=new ti(yt.comparator),mc=new ur(yt.comparator);function bn(...i){let e=mc;for(const t of i)e=e.add(t);return e}const z_=new ur(sn);function Cp(){return z_}class Yh{constructor(e,t,s,c,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=c,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const c=new Map;return c.set(e,Qh.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Yh(Bt.min(),c,Cp(),$s(),bn())}}class Qh{constructor(e,t,s,c,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=c,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Qh(s,t,bn(),bn(),bn())}}class Ip{constructor(e,t,s,c){this.Tt=e,this.removedTargetIds=t,this.key=s,this.Et=c}}class bm{constructor(e,t){this.targetId=e,this.At=t}}class Z_{constructor(e,t,s=Oi.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=c}}class Y_{constructor(){this.Rt=0,this.bt=Cm(),this.Pt=Oi.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=bn(),t=bn(),s=bn();return this.bt.forEach((c,l)=>{switch(l){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:s=s.add(c);break;default:xt()}}),new Qh(this.Pt,this.vt,e,t,s)}Nt(){this.Vt=!1,this.bt=Cm()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class KE{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=$s(),this.qt=pn(),this.Kt=new ur(sn)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const s=this.zt(t);switch(e.state){case 0:this.Ht(t)&&s.Ct(e.resumeToken);break;case 1:s.Ft(),s.St||s.Nt(),s.Ct(e.resumeToken);break;case 2:s.Ft(),s.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(s.$t(),s.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),s.Ct(e.resumeToken));break;default:xt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((s,c)=>{this.Ht(c)&&t(c)})}Yt(e){const t=e.targetId,s=e.At.count,c=this.Xt(t);if(c){const l=c.target;if(Vd(l))if(0===s){const d=new yt(l.path);this.jt(t,d,_r.newNoDocument(d,Bt.min()))}else Vt(1===s);else this.Zt(t)!==s&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((l,d)=>{const g=this.Xt(d);if(g){if(l.current&&Vd(g.target)){const m=new yt(g.target.path);null!==this.Ut.get(m)||this.ee(d,m)||this.jt(d,m,_r.newNoDocument(m,e))}l.Dt&&(t.set(d,l.xt()),l.Nt())}});let s=bn();this.qt.forEach((l,d)=>{let g=!0;d.forEachWhile(m=>{const w=this.Xt(m);return!w||2===w.purpose||(g=!1,!1)}),g&&(s=s.add(l))}),this.Ut.forEach((l,d)=>d.setReadTime(e));const c=new Yh(e,t,this.Kt,this.Ut,s);return this.Ut=$s(),this.qt=pn(),this.Kt=new ur(sn),c}Qt(e,t){if(!this.Ht(e))return;const s=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,s),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,s){if(!this.Ht(e))return;const c=this.zt(e);this.ee(e,t)?c.kt(t,1):c.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),s&&(this.Ut=this.Ut.insert(t,s))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new Y_,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new ur(sn),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||it("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Y_),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function pn(){return new ti(yt.comparator)}function Cm(){return new ti(yt.comparator)}const Q_={asc:"ASCENDING",desc:"DESCENDING"},Tp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class yc{constructor(e,t){this.databaseId=e,this.gt=t}}function qd(i,e){return i.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function J_(i,e){return i.gt?e.toBase64():e.toUint8Array()}function Im(i,e){return qd(i,e.toTimestamp())}function kr(i){return Vt(!!i),Bt.fromTimestamp(function(e){const t=Ma(e);return new xr(t.seconds,t.nanos)}(i))}function Jh(i,e){return(t=i,new Hn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Tm(i){const e=Hn.fromString(i);return Vt(XE(e)),e}function Jl(i,e){return Jh(i.databaseId,e.path)}function Cu(i,e){const t=Tm(e);if(t.get(1)!==i.databaseId.projectId)throw new Je(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Je(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new yt(Xh(t))}function Dp(i,e){return Jh(i.databaseId,e)}function zE(i){const e=Tm(i);return 4===e.length?Hn.emptyPath():Xh(e)}function sa(i){return new Hn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Xh(i){return Vt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function ef(i,e,t){return{name:Jl(i,e),fields:t.value.mapValue.fields}}function Ap(i,e,t){const s=Cu(i,e.name),c=kr(e.updateTime),l=new ki({mapValue:{fields:e.fields}}),d=_r.newFoundDocument(s,c,l);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Kd(i,e){let t;if(e instanceof rl)t={update:ef(i,e.key,e.value)};else if(e instanceof il)t={delete:Jl(i,e.key)};else if(e instanceof Qc)t={update:ef(i,e.key,e.data),updateMask:gI(e.fieldMask)};else{if(!(e instanceof Ep))return xt();t={verify:Jl(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(c,l){const d=l.transform;if(d instanceof Zc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Yc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ia)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof gc)return{fieldPath:l.field.canonicalString(),increment:d.yt};throw xt()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:Im(i,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:xt()),t;var c}function X_(i,e){const t=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?Kr.updateTime(kr(c.updateTime)):void 0!==c.exists?Kr.exists(c.exists):Kr.none():Kr.none(),s=e.updateTransforms?e.updateTransforms.map(c=>function(l,d){let g=null;"setToServerValue"in d?(Vt("REQUEST_TIME"===d.setToServerValue),g=new Zc):"appendMissingElements"in d?g=new Yc(d.appendMissingElements.values||[]):"removeAllFromArray"in d?g=new ia(d.removeAllFromArray.values||[]):"increment"in d?g=new gc(l,d.increment):xt();const m=ei.fromServerFormat(d.fieldPath);return new nl(m,g)}(i,c)):[];var c;if(e.update){const c=Cu(i,e.update.name),l=new ki({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Hs((e.updateMask.fieldPaths||[]).map(w=>ei.fromServerFormat(w)));return new Qc(c,l,d,t,s)}return new rl(c,l,t,s)}if(e.delete){const c=Cu(i,e.delete);return new il(c,t)}if(e.verify){const c=Cu(i,e.verify);return new Ep(c,t)}return xt()}function QE(i,e){return{documents:[Dp(i,e.path)]}}function Sp(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Dp(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Dp(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const c=function(m){if(0===m.length)return;const w=m.map(I=>function(M){if("=="===M.op){if(dp(M.value))return{unaryFilter:{field:tf(M.field),op:"IS_NAN"}};if(wu(M.value))return{unaryFilter:{field:tf(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(dp(M.value))return{unaryFilter:{field:tf(M.field),op:"IS_NOT_NAN"}};if(wu(M.value))return{unaryFilter:{field:tf(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tf(M.field),op:hI(M.op),value:M.value}}}(I));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);c&&(t.structuredQuery.where=c);const l=function(m){if(0!==m.length)return m.map(w=>{return{field:tf((I=w).field),direction:dI(I.dir)};var I})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const d=(w=e.limit,i.gt||Bl(w)?w:{value:w});var w,g,m;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function Dm(i){let e=zE(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let c=null;if(s>0){Vt(1===s);const I=t.from[0];I.allDescendants?c=I.collectionId:e=e.child(I.collectionId)}let l=[];t.where&&(l=xp(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(I=>{return new Kc(nf((M=I).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let g=null;t.limit&&(g=function(I){let M;return M="object"==typeof I?I.value:I,Bl(M)?null:M}(t.limit));let m=null;var I;t.startAt&&(m=new ka((I=t.startAt).values||[],!!I.before));let w=null;return t.endAt&&(w=function(I){return new ka(I.values||[],!I.before)}(t.endAt)),Ud(e,c,d,l,g,"F",m,w)}function xp(i){return i?void 0!==i.unaryFilter?[pI(i)]:void 0!==i.fieldFilter?[fI(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>xp(e)).reduce((e,t)=>e.concat(t)):xt():[]}function dI(i){return Q_[i]}function hI(i){return Tp[i]}function tf(i){return{fieldPath:i.canonicalString()}}function nf(i){return ei.fromServerFormat(i.fieldPath)}function fI(i){return pi.create(nf(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xt()}}(i.fieldFilter.op),i.fieldFilter.value)}function pI(i){switch(i.unaryFilter.op){case"IS_NAN":const e=nf(i.unaryFilter.field);return pi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=nf(i.unaryFilter.field);return pi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=nf(i.unaryFilter.field);return pi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=nf(i.unaryFilter.field);return pi.create(c,"!=",{nullValue:"NULL_VALUE"});default:return xt()}}function gI(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function XE(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Oo(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=eb(e)),e=mI(i.get(t),e);return eb(e)}function mI(i,e){let t=e;const s=i.length;for(let c=0;c<s;c++){const l=i.charAt(c);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function eb(i){return i+"\x01\x01"}function Ps(i){const e=i.length;if(Vt(e>=2),2===e)return Vt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Hn.emptyPath();const t=e-2,s=[];let c="";for(let l=0;l<e;){const d=i.indexOf("\x01",l);switch((d<0||d>t)&&xt(),i.charAt(d+1)){case"\x01":const g=i.substring(l,d);let m;0===c.length?m=g:(c+=g,m=c,c=""),s.push(m);break;case"\x10":c+=i.substring(l,d),c+="\0";break;case"\x11":c+=i.substring(l,d+1);break;default:xt()}l=d+2}return new Hn(s)}const Rp=["userId","batchId"];function Pp(i,e){return[i,Oo(e)]}function Am(i,e,t){return[i,Oo(e),t]}const Sm={},ev=["prefixPath","collectionGroup","readTime","documentId"],xm=["prefixPath","collectionGroup","documentId"],tb=["collectionGroup","readTime","prefixPath","documentId"],ol=["canonicalId","targetId"],tv=["targetId","path"],nb=["path","targetId"],yI=["collectionId","parent"],Rm=["indexId","uid"],rb=["uid","sequenceNumber"],nv=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ib=["indexId","uid","orderedDocumentKey"],sb=["userId","collectionPath","documentId"],rf=["userId","collectionPath","largestBatchId"],zd=["userId","collectionGroup","largestBatchId"],Mp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Zd=[...Mp,"documentOverlays"],Yd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Xl=Yd,ob=[...Xl,"indexConfiguration","indexState","indexEntries"];class Np extends Nd{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function ds(i,e){const t=_t(i);return wi.M(t.ie,e)}class sf{constructor(e,t,s,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=c}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const l=this.mutations[c];l.key.isEqual(e.key)&&WE(l,e,s[c])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Wd(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Wd(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Em();return this.mutations.forEach(c=>{const l=e.get(c.key),d=l.overlayedDocument;let g=this.applyToLocalView(d,l.mutatedFields);g=t.has(c.key)?null:g;const m=qh(d,g);null!==m&&s.set(c.key,m),d.isValidDocument()||d.convertToNoDocument(Bt.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),bn())}isEqual(e){return this.batchId===e.batchId&&mu(this.mutations,e.mutations,(t,s)=>gm(t,s))&&mu(this.baseMutations,e.baseMutations,(t,s)=>gm(t,s))}}class of{constructor(e,t,s,c){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=c}static from(e,t,s){Vt(e.mutations.length===s.length);let c=qE;const l=e.mutations;for(let d=0;d<l.length;d++)c=c.insert(l[d].key,s[d].version);return new of(e,t,s,c)}}class Op{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class _c{constructor(e,t,s,c,l=Bt.min(),d=Bt.min(),g=Oi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=c,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g}withSequenceNumber(e){return new _c(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new _c(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new _c(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class rv{constructor(e){this.re=e}}function ab(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:af(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Jl(c=i.re,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:qd(c,l.version.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:al(e.version)};else{if(!e.isUnknownDocument())return xt();s.unknownDocument={path:t.path.toArray(),version:al(e.version)}}var c,l;return s}function af(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function al(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ed(i){const e=new xr(i.seconds,i.nanoseconds);return Bt.fromTimestamp(e)}function cl(i,e){const t=(e.baseMutations||[]).map(l=>X_(i.re,l));for(let l=0;l<e.mutations.length-1;++l){const d=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(d.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const s=e.mutations.map(l=>X_(i.re,l)),c=xr.fromMillis(e.localWriteTimeMs);return new sf(e.batchId,c,t,s)}function cf(i){const e=ed(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?ed(i.lastLimboFreeSnapshotVersion):Bt.min();let s;var c;return void 0!==i.query.documents?(Vt(1===(c=i.query).documents.length),s=_(zl(zE(c.documents[0])))):s=_(Dm(i.query)),new _c(s,i.targetId,0,i.lastListenSequenceNumber,e,t,Oi.fromBase64String(i.resumeToken))}function sv(i,e){const t=al(e.snapshotVersion),s=al(e.lastLimboFreeSnapshotVersion);let c;c=Vd(e.target)?QE(i.re,e.target):Sp(i.re,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fi(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:c}}function co(i){const e=Dm({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?f(e,e.limit,"L"):e}function Pm(i,e){return new Op(e.largestBatchId,X_(i.re,e.overlayMutation))}function ov(i,e){const t=e.path.lastSegment();return[i,Oo(e.path.popLast()),t]}function cb(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:al(s.readTime),documentKey:Oo(s.documentKey.path),largestBatchId:s.largestBatchId}}class _I{getBundleMetadata(e,t){return Mm(e).get(t).next(s=>{if(s)return{id:(c=s).bundleId,createTime:ed(c.createTime),version:c.version};var c})}saveBundleMetadata(e,t){return Mm(e).put({bundleId:(s=t).id,createTime:al(kr(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return ub(e).get(t).next(s=>{if(s)return{name:(c=s).name,query:co(c.bundledQuery),readTime:ed(c.readTime)};var c})}saveNamedQuery(e,t){return ub(e).put({name:(s=t).name,readTime:al(kr(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Mm(i){return ds(i,"bundles")}function ub(i){return ds(i,"namedQueries")}class kp{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new kp(e,t.uid||"")}getOverlay(e,t){return td(e).get(ov(this.userId,t)).next(s=>s?Pm(this.It,s):null)}getOverlays(e,t){const s=Jc();return Te.forEach(t,c=>this.getOverlay(e,c).next(l=>{null!==l&&s.set(c,l)})).next(()=>s)}saveOverlays(e,t,s){const c=[];return s.forEach((l,d)=>{const g=new Op(t,d);c.push(this.ue(e,g))}),Te.waitFor(c)}removeOverlaysForBatchId(e,t,s){const c=new Set;t.forEach(d=>c.add(Oo(d.getCollectionPath())));const l=[];return c.forEach(d=>{const g=IDBKeyRange.bound([this.userId,d,s],[this.userId,d,s+1],!1,!0);l.push(td(e).Y("collectionPathOverlayIndex",g))}),Te.waitFor(l)}getOverlaysForCollection(e,t,s){const c=Jc(),l=Oo(t),d=IDBKeyRange.bound([this.userId,l,s],[this.userId,l,Number.POSITIVE_INFINITY],!0);return td(e).W("collectionPathOverlayIndex",d).next(g=>{for(const m of g){const w=Pm(this.It,m);c.set(w.getKey(),w)}return c})}getOverlaysForCollectionGroup(e,t,s,c){const l=Jc();let d;const g=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return td(e).Z({index:"collectionGroupOverlayIndex",range:g},(m,w,I)=>{const M=Pm(this.It,w);l.size()<c||M.largestBatchId===d?(l.set(M.getKey(),M),d=M.largestBatchId):I.done()}).next(()=>l)}ue(e,t){return td(e).put(function(s,c,l){const[d,g,m]=ov(c,l.mutation.key);return{userId:c,collectionPath:g,documentId:m,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Kd(s.re,l.mutation)}}(this.It,this.userId,t))}}function td(i){return ds(i,"documentOverlays")}class ul{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(ri(e.integerValue));else if("doubleValue"in e){const s=ri(e.doubleValue);isNaN(s)?this.le(t,13):(this.le(t,15),Fd(s)?t.fe(0):t.fe(s))}else if("timestampValue"in e){const s=e.timestampValue;this.le(t,20),"string"==typeof s?t.de(s):(t.de(`${s.seconds||""}`),t.fe(s.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(lc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.le(t,45),t.fe(s.latitude||0),t.fe(s.longitude||0)}else"mapValue"in e?hp(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):xt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const s=e.fields||{};this.le(t,55);for(const c of Object.keys(s))this._e(c,t),this.ae(s[c],t)}pe(e,t){const s=e.values||[];this.le(t,50);for(const c of s)this.ae(c,t)}ge(e,t){this.le(t,37),yt.fromName(e).path.forEach(s=>{this.le(t,60),this.Ie(s,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function lb(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function av(i){const e=64-function(t){let s=0;for(let c=0;c<8;++c){const l=lb(255&t[c]);if(s+=l,8!==l)break}return s}(i);return Math.ceil(e/8)}ul.Te=new ul;class db{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ae(s.value),s=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Pe(s.value),s=t.next();this.ve()}Ve(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ae(s);else if(s<2048)this.Ae(960|s>>>6),this.Ae(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s);else{const c=t.codePointAt(0);this.Ae(240|c>>>18),this.Ae(128|63&c>>>12),this.Ae(128|63&c>>>6),this.Ae(128|63&c)}}this.Re()}Se(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Pe(s);else if(s<2048)this.Pe(960|s>>>6),this.Pe(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|s>>>12),this.Pe(128|63&s>>>6),this.Pe(128|63&s);else{const c=t.codePointAt(0);this.Pe(240|c>>>18),this.Pe(128|63&c>>>12),this.Pe(128|63&c>>>6),this.Pe(128|63&c)}}this.ve()}De(e){const t=this.Ce(e),s=av(t);this.xe(1+s),this.buffer[this.position++]=255&s;for(let c=t.length-s;c<t.length;++c)this.buffer[this.position++]=255&t[c]}Ne(e){const t=this.Ce(e),s=av(t);this.xe(1+s),this.buffer[this.position++]=~(255&s);for(let c=t.length-s;c<t.length;++c)this.buffer[this.position++]=~(255&t[c])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(c){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,c,!1),new Uint8Array(l.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let c=1;c<t.length;++c)t[c]^=s?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const c=new Uint8Array(s);c.set(this.buffer),this.buffer=c}}class cv{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class hb{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Qd{constructor(){this.Be=new db,this.Le=new cv(this.Be),this.Ue=new hb(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class nd{constructor(e,t,s,c){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=c}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new nd(this.indexId,this.documentKey,this.arrayValue,s)}}function rd(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Nm(i.arrayValue,e.arrayValue),0!==t?t:(t=Nm(i.directionalValue,e.directionalValue),0!==t?t:yt.comparator(i.documentKey,e.documentKey)))}function Nm(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class uv{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const s=t;s.dt()?this.je=s:this.Qe.push(s)}}We(e){const t=Ra(e);if(void 0!==t&&!this.ze(t))return!1;const s=qc(e);let c=0,l=0;for(;c<s.length&&this.ze(s[c]);++c);if(c===s.length)return!0;if(void 0!==this.je){const d=s[c];if(!this.He(this.je,d)||!this.Je(this.Ge[l++],d))return!1;++c}for(;c<s.length;++c){const d=s[c];if(l>=this.Ge.length||!this.Je(this.Ge[l++],d))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class fb{constructor(){this.Ye=new Fa}addToCollectionParentIndex(e,t){return this.Ye.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return Te.resolve()}deleteFieldIndex(e,t){return Te.resolve()}getDocumentsMatchingTarget(e,t){return Te.resolve(null)}getIndexType(e,t){return Te.resolve(0)}getFieldIndexes(e,t){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,t){return Te.resolve(oo.min())}getMinOffsetFromCollectionGroup(e,t){return Te.resolve(oo.min())}updateCollectionGroup(e,t,s){return Te.resolve()}updateIndexEntries(e,t){return Te.resolve()}}class Fa{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t]||new ur(Hn.comparator),l=!c.has(s);return this.index[t]=c.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t];return c&&c.has(s)}getEntries(e){return(this.index[e]||new ur(Hn.comparator)).toArray()}}const Jd=new Uint8Array(0);class pb{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Fa,this.Ze=new sl(s=>Fi(s),(s,c)=>Xu(s,c)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const s=t.lastSegment(),c=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const l={collectionId:s,parent:Oo(c)};return lv(e).put(l)}return Te.resolve()}getCollectionParents(e,t){const s=[],c=IDBKeyRange.bound([t,""],[Wu(t),""],!1,!0);return lv(e).W(c).next(l=>{for(const d of l){if(d.collectionId!==t)break;s.push(Ps(d.parent))}return s})}addFieldIndex(e,t){const s=uf(e),c={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var d;delete c.indexId;const l=s.add(c);if(t.indexState){const d=lf(e);return l.next(g=>{d.put(cb(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const s=uf(e),c=lf(e),l=Fp(e);return s.delete(t.indexId).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Fp(e);let c=!0;const l=new Map;return Te.forEach(this.tn(t),d=>this.en(e,d).next(g=>{c&&(c=!!g),l.set(d,g)})).next(()=>{if(c){let d=bn();const g=[];return Te.forEach(l,(m,w)=>{var I;it("IndexedDbIndexManager",`Using index ${I=m,`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(_n=>`${_n.fieldPath}:${_n.kind}`).join(",")}`} to execute ${Fi(t)}`);const M=function(_n,Cn){const vn=Ra(Cn);if(void 0===vn)return null;for(const Tn of el(_n,vn.fieldPath))switch(Tn.op){case"array-contains-any":return Tn.value.arrayValue.values||[];case"array-contains":return[Tn.value]}return null}(w,m),V=function(_n,Cn){const vn=new Map;for(const Tn of qc(Cn))for(const Qi of el(_n,Tn.fieldPath))switch(Qi.op){case"==":case"in":vn.set(Tn.fieldPath.canonicalString(),Qi.value);break;case"not-in":case"!=":return vn.set(Tn.fieldPath.canonicalString(),Qi.value),Array.from(vn.values())}return null}(w,m),K=function(_n,Cn){const vn=[];let Tn=!0;for(const Qi of qc(Cn)){const Ah=0===Qi.kind?Hd(_n,Qi.fieldPath,_n.startAt):mp(_n,Qi.fieldPath,_n.startAt);vn.push(Ah.value),Tn&&(Tn=Ah.inclusive)}return new ka(vn,Tn)}(w,m),ce=function(_n,Cn){const vn=[];let Tn=!0;for(const Qi of qc(Cn)){const Ah=0===Qi.kind?mp(_n,Qi.fieldPath,_n.endAt):Hd(_n,Qi.fieldPath,_n.endAt);vn.push(Ah.value),Tn&&(Tn=Ah.inclusive)}return new ka(vn,Tn)}(w,m),Ae=this.nn(m,w,K),ze=this.nn(m,w,ce),Ht=this.sn(m,w,V),yn=this.rn(m.indexId,M,Ae,K.inclusive,ze,ce.inclusive,Ht);return Te.forEach(yn,_n=>s.J(_n,t.limit).next(Cn=>{Cn.forEach(vn=>{const Tn=yt.fromSegments(vn.documentKey);d.has(Tn)||(d=d.add(Tn),g.push(Tn))})}))}).next(()=>g)}return Te.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,s,c,l,d,g){const m=(null!=t?t.length:1)*Math.max(s.length,l.length),w=m/(null!=t?t.length:1),I=[];for(let M=0;M<m;++M){const V=t?this.on(t[M/w]):Jd,K=this.un(e,V,s[M%w],c),ce=this.cn(e,V,l[M%w],d),Ae=g.map(ze=>this.un(e,V,ze,!0));I.push(...this.createRange(K,ce,Ae))}return I}un(e,t,s,c){const l=new nd(e,yt.empty(),t,s);return c?l:l.Ke()}cn(e,t,s,c){const l=new nd(e,yt.empty(),t,s);return c?l.Ke():l}en(e,t){const s=new uv(t),c=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,c).next(l=>{let d=null;for(const g of l)s.We(g)&&(!d||g.fields.length>d.fields.length)&&(d=g);return d})}getIndexType(e,t){let s=2;return Te.forEach(this.tn(t),c=>this.en(e,c).next(l=>{l?0!==s&&l.fields.length<function(d){let g=new ur(ei.comparator),m=!1;for(const w of d.filters){const I=w;I.field.isKeyField()||("array-contains"===I.op||"array-contains-any"===I.op?m=!0:g=g.add(I.field))}for(const w of d.orderBy)w.field.isKeyField()||(g=g.add(w.field));return g.size+(m?1:0)}(c)&&(s=1):s=0})).next(()=>s)}an(e,t){const s=new Qd;for(const c of qc(e)){const l=t.data.field(c.fieldPath);if(null==l)return null;const d=s.qe(c.kind);ul.Te.ce(l,d)}return s.$e()}on(e){const t=new Qd;return ul.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const s=new Qd;return ul.Te.ce(vu(this.databaseId,t),s.qe(function(c){const l=qc(c);return 0===l.length?0:l[l.length-1].kind}(e))),s.$e()}sn(e,t,s){if(null===s)return[];let c=[];c.push(new Qd);let l=0;for(const d of qc(e)){const g=s[l++];for(const m of c)if(this.ln(t,d.fieldPath)&&$l(g))c=this.fn(c,d,g);else{const w=m.qe(d.kind);ul.Te.ce(g,w)}}return this.dn(c)}nn(e,t,s){return this.sn(e,t,s.position)}dn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].$e();return t}fn(e,t,s){const c=[...e],l=[];for(const d of s.arrayValue.values||[])for(const g of c){const m=new Qd;m.seed(g.$e()),ul.Te.ce(d,m.qe(t.kind)),l.push(m)}return l}ln(e,t){return!!e.filters.find(s=>s instanceof pi&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=uf(e),c=lf(e);return(t?s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.W()).next(l=>{const d=[];return Te.forEach(l,g=>c.get([g.indexId,this.uid]).next(m=>{d.push(function(w,I){const M=I?new Fl(I.sequenceNumber,new oo(ed(I.readTime),new yt(Ps(I.documentKey)),I.largestBatchId)):Fl.empty(),V=w.fields.map(([K,ce])=>new Md(ei.fromServerFormat(K),ce));return new Mo(w.indexId,w.collectionGroup,V,M)}(g,m))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,c)=>{const l=s.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==l?l:sn(s.collectionGroup,c.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const c=uf(e),l=lf(e);return this._n(e).next(d=>c.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>Te.forEach(g,m=>l.put(cb(m.indexId,this.user,d,s)))))}updateIndexEntries(e,t){const s=new Map;return Te.forEach(t,(c,l)=>{const d=s.get(c.collectionGroup);return(d?Te.resolve(d):this.getFieldIndexes(e,c.collectionGroup)).next(g=>(s.set(c.collectionGroup,g),Te.forEach(g,m=>this.wn(e,c,m).next(w=>{const I=this.mn(l,m);return w.isEqual(I)?Te.resolve():this.gn(e,l,m,w,I)}))))})}yn(e,t,s,c){return Fp(e).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.hn(s,t.key),documentKey:t.key.path.toArray()})}pn(e,t,s,c){return Fp(e).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.hn(s,t.key),t.key.path.toArray()])}wn(e,t,s){const c=Fp(e);let l=new ur(rd);return c.Z({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.hn(s,t)])},(d,g)=>{l=l.add(new nd(s.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>l)}mn(e,t){let s=new ur(rd);const c=this.an(t,e);if(null==c)return s;const l=Ra(t);if(null!=l){const d=e.data.field(l.fieldPath);if($l(d))for(const g of d.arrayValue.values||[])s=s.add(new nd(t.indexId,e.key,this.on(g),c))}else s=s.add(new nd(t.indexId,e.key,Jd,c));return s}gn(e,t,s,c,l){it("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(g,m,w,I,M){const V=g.getIterator(),K=m.getIterator();let ce=uc(V),Ae=uc(K);for(;ce||Ae;){let ze=!1,Ht=!1;if(ce&&Ae){const yn=w(ce,Ae);yn<0?Ht=!0:yn>0&&(ze=!0)}else null!=ce?Ht=!0:ze=!0;ze?(I(Ae),Ae=uc(K)):Ht?(M(ce),ce=uc(V)):(ce=uc(V),Ae=uc(K))}}(c,l,rd,g=>{d.push(this.yn(e,t,s,g))},g=>{d.push(this.pn(e,t,s,g))}),Te.waitFor(d)}_n(e){let t=1;return lf(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,c,l)=>{l.done(),t=c.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((d,g)=>rd(d,g)).filter((d,g,m)=>!g||0!==rd(d,m[g-1]));const c=[];c.push(e);for(const d of s){const g=rd(d,e),m=rd(d,t);if(0===g)c[0]=e.Ke();else if(g>0&&m<0)c.push(d),c.push(d.Ke());else if(m>0)break}c.push(t);const l=[];for(let d=0;d<c.length;d+=2)l.push(IDBKeyRange.bound([c[d].indexId,this.uid,c[d].arrayValue,c[d].directionalValue,Jd,[]],[c[d+1].indexId,this.uid,c[d+1].arrayValue,c[d+1].directionalValue,Jd,[]]));return l}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(dv)}getMinOffset(e,t){return Te.mapArray(this.tn(t),s=>this.en(e,s).next(c=>c||xt())).next(dv)}}function lv(i){return ds(i,"collectionParents")}function Fp(i){return ds(i,"indexEntries")}function uf(i){return ds(i,"indexConfiguration")}function lf(i){return ds(i,"indexState")}function dv(i){Vt(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const c=i[s].indexState.offset;Fh(c,e)<0&&(e=c),t<c.largestBatchId&&(t=c.largestBatchId)}return new oo(e.readTime,e.documentKey,t)}const hv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Gs{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Gs(e,Gs.DEFAULT_COLLECTION_PERCENTILE,Gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fv(i,e,t){const s=i.store("mutations"),c=i.store("documentMutations"),l=[],d=IDBKeyRange.only(t.batchId);let g=0;const m=s.Z({range:d},(I,M,V)=>(g++,V.delete()));l.push(m.next(()=>{Vt(1===g)}));const w=[];for(const I of t.mutations){const M=Am(e,I.key.path,t.batchId);l.push(c.delete(M)),w.push(I.key)}return Te.waitFor(l).next(()=>w)}function Lp(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw xt();e=i.noDocument}return JSON.stringify(e).length}Gs.DEFAULT_COLLECTION_PERCENTILE=10,Gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gs.DEFAULT=new Gs(41943040,Gs.DEFAULT_COLLECTION_PERCENTILE,Gs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gs.DISABLED=new Gs(-1,0,0);class id{constructor(e,t,s,c){this.userId=e,this.It=t,this.indexManager=s,this.referenceDelegate=c,this.In={}}static oe(e,t,s,c){Vt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new id(l,t,s,c)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ll(e).Z({index:"userMutationsIndex",range:s},(c,l,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,s,c){const l=dl(e),d=ll(e);return d.add({}).next(g=>{Vt("number"==typeof g);const m=new sf(g,t,s,c),w=function(V,K,ce){const Ae=ce.baseMutations.map(Ht=>Kd(V.re,Ht)),ze=ce.mutations.map(Ht=>Kd(V.re,Ht));return{userId:K,batchId:ce.batchId,localWriteTimeMs:ce.localWriteTime.toMillis(),baseMutations:Ae,mutations:ze}}(this.It,this.userId,m),I=[];let M=new ur((V,K)=>sn(V.canonicalString(),K.canonicalString()));for(const V of c){const K=Am(this.userId,V.key.path,g);M=M.add(V.key.path.popLast()),I.push(d.put(w)),I.push(l.put(K,Sm))}return M.forEach(V=>{I.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.In[g]=m.keys()}),Te.waitFor(I).next(()=>m)})}lookupMutationBatch(e,t){return ll(e).get(t).next(s=>s?(Vt(s.userId===this.userId),cl(this.It,s)):null)}Tn(e,t){return this.In[t]?Te.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const c=s.keys();return this.In[t]=c,c}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,c=IDBKeyRange.lowerBound([this.userId,s]);let l=null;return ll(e).Z({index:"userMutationsIndex",range:c},(d,g,m)=>{g.userId===this.userId&&(Vt(g.batchId>=s),l=cl(this.It,g)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return ll(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(c,l,d)=>{s=l.batchId,d.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ll(e).W("userMutationsIndex",t).next(s=>s.map(c=>cl(this.It,c)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=Pp(this.userId,t.path),c=IDBKeyRange.lowerBound(s),l=[];return dl(e).Z({range:c},(d,g,m)=>{const[w,I,M]=d,V=Ps(I);if(w===this.userId&&t.path.isEqual(V))return ll(e).get(M).next(K=>{if(!K)throw xt();Vt(K.userId===this.userId),l.push(cl(this.It,K))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ur(sn);const c=[];return t.forEach(l=>{const d=Pp(this.userId,l.path),g=IDBKeyRange.lowerBound(d),m=dl(e).Z({range:g},(w,I,M)=>{const[V,K,ce]=w,Ae=Ps(K);V===this.userId&&l.path.isEqual(Ae)?s=s.add(ce):M.done()});c.push(m)}),Te.waitFor(c).next(()=>this.En(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1,l=Pp(this.userId,s),d=IDBKeyRange.lowerBound(l);let g=new ur(sn);return dl(e).Z({range:d},(m,w,I)=>{const[M,V,K]=m,ce=Ps(V);M===this.userId&&s.isPrefixOf(ce)?ce.length===c&&(g=g.add(K)):I.done()}).next(()=>this.En(e,g))}En(e,t){const s=[],c=[];return t.forEach(l=>{c.push(ll(e).get(l).next(d=>{if(null===d)throw xt();Vt(d.userId===this.userId),s.push(cl(this.It,d))}))}),Te.waitFor(c).next(()=>s)}removeMutationBatch(e,t){return fv(e.ie,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),Te.forEach(s,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Te.resolve();const s=IDBKeyRange.lowerBound([this.userId]),c=[];return dl(e).Z({range:s},(l,d,g)=>{if(l[0]===this.userId){const m=Ps(l[1]);c.push(m)}else g.done()}).next(()=>{Vt(0===c.length)})})}containsKey(e,t){return Vp(e,this.userId,t)}Rn(e){return Hp(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Vp(i,e,t){const s=Pp(e,t.path),c=s[1],l=IDBKeyRange.lowerBound(s);let d=!1;return dl(i).Z({range:l,X:!0},(g,m,w)=>{const[I,M,V]=g;I===e&&M===c&&(d=!0),w.done()}).next(()=>d)}function ll(i){return ds(i,"mutations")}function dl(i){return ds(i,"documentMutations")}function Hp(i){return ds(i,"mutationQueues")}class hl{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new hl(0)}static vn(){return new hl(-1)}}class gb{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const s=new hl(t.highestTargetId);return t.highestTargetId=s.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Bt.fromTimestamp(new xr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Vn(e).next(c=>(c.highestListenSequenceNumber=t,s&&(c.lastRemoteSnapshotVersion=s.toTimestamp()),t>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=t),this.Sn(e,c)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(s=>(s.targetCount+=1,this.Cn(t,s),this.Sn(e,s))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Xd(e).delete(t.targetId)).next(()=>this.Vn(e)).next(s=>(Vt(s.targetCount>0),s.targetCount-=1,this.Sn(e,s)))}removeTargets(e,t,s){let c=0;const l=[];return Xd(e).Z((d,g)=>{const m=cf(g);m.sequenceNumber<=t&&null===s.get(m.targetId)&&(c++,l.push(this.removeTargetData(e,m)))}).next(()=>Te.waitFor(l)).next(()=>c)}forEachTarget(e,t){return Xd(e).Z((s,c)=>{const l=cf(c);t(l)})}Vn(e){return Up(e).get("targetGlobalKey").next(t=>(Vt(null!==t),t))}Sn(e,t){return Up(e).put("targetGlobalKey",t)}Dn(e,t){return Xd(e).put(sv(this.It,t))}Cn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Fi(t),c=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let l=null;return Xd(e).Z({range:c,index:"queryTargetsIndex"},(d,g,m)=>{const w=cf(g);Xu(t,w.target)&&(l=w,m.done())}).next(()=>l)}addMatchingKeys(e,t,s){const c=[],l=sd(e);return t.forEach(d=>{const g=Oo(d.path);c.push(l.put({targetId:s,path:g})),c.push(this.referenceDelegate.addReference(e,s,d))}),Te.waitFor(c)}removeMatchingKeys(e,t,s){const c=sd(e);return Te.forEach(t,l=>{const d=Oo(l.path);return Te.waitFor([c.delete([s,d]),this.referenceDelegate.removeReference(e,s,l)])})}removeMatchingKeysForTargetId(e,t){const s=sd(e),c=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(c)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),c=sd(e);let l=bn();return c.Z({range:s,X:!0},(d,g,m)=>{const w=Ps(d[1]),I=new yt(w);l=l.add(I)}).next(()=>l)}containsKey(e,t){const s=Oo(t.path),c=IDBKeyRange.bound([s],[Wu(s)],!1,!0);let l=0;return sd(e).Z({index:"documentTargetsIndex",X:!0,range:c},([d,g],m,w)=>{0!==d&&(l++,w.done())}).next(()=>l>0)}se(e,t){return Xd(e).get(t).next(s=>s?cf(s):null)}}function Xd(i){return ds(i,"targets")}function Up(i){return ds(i,"targetGlobal")}function sd(i){return ds(i,"targetDocuments")}function pv([i,e],[t,s]){const c=sn(i,t);return 0===c?sn(e,s):c}class gv{constructor(e){this.xn=e,this.buffer=new ur(pv),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();pv(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mv{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;it("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ke.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){Pa(s)?it("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield yu(s)}yield t.Fn(3e5)}))}}class yv{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Te.resolve(ls.at);const s=new gv(t);return this.$n.forEachTarget(e,c=>s.On(c.sequenceNumber)).next(()=>this.$n.Ln(e,c=>s.On(c))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.$n.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(it("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(hv)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(it("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hv):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let s,c,l,d,g,m,w;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(it("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),c=this.params.maximumSequenceNumbersToCollect):c=M,d=Date.now(),this.nthSequenceNumber(e,c))).next(M=>(s=M,g=Date.now(),this.removeTargets(e,s,t))).next(M=>(l=M,m=Date.now(),this.removeOrphanedDocuments(e,s))).next(M=>(w=Date.now(),Ph()<=ps.in.DEBUG&&it("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-I}ms\n\tDetermined least recently used ${c} in `+(g-d)+`ms\n\tRemoved ${l} targets in `+(m-g)+`ms\n\tRemoved ${M} documents in `+(w-m)+`ms\nTotal Duration: ${w-I}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:l,documentsRemoved:M})))}}class _v{constructor(e,t){this.db=e,this.garbageCollector=new yv(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(c=>s+c))}qn(e){let t=0;return this.Ln(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(s,c)=>t(c))}addReference(e,t,s){return df(e,s)}removeReference(e,t,s){return df(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return df(e,t)}Gn(e,t){return function(s,c){let l=!1;return Hp(s).tt(d=>Vp(s,d,c).next(g=>(g&&(l=!0),Te.resolve(!g)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let l=0;return this.Kn(e,(d,g)=>{if(g<=t){const m=this.Gn(e,d).next(w=>{if(!w)return l++,s.getEntry(e,d).next(()=>(s.removeEntry(d,Bt.min()),sd(e).delete([0,Oo(d.path)])))});c.push(m)}}).next(()=>Te.waitFor(c)).next(()=>s.apply(e)).next(()=>l)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return df(e,t)}Kn(e,t){const s=sd(e);let c,l=ls.at;return s.Z({index:"documentTargetsIndex"},([d,g],{path:m,sequenceNumber:w})=>{0===d?(l!==ls.at&&t(new yt(Ps(c)),l),l=w,c=m):l=ls.at}).next(()=>{l!==ls.at&&t(new yt(Ps(c)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function df(i,e){return sd(i).put((s=i.currentSequenceNumber,{targetId:0,path:Oo(e.path),sequenceNumber:s}));var s}class Xc{constructor(){this.changes=new sl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_r.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Te.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jp{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return La(e).put(s)}removeEntry(e,t,s){return La(e).delete(function(c,l){const d=c.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],af(l),d[d.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Qn(e,s)))}getEntry(e,t){let s=_r.newInvalidDocument(t);return La(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(eh(t))},(c,l)=>{s=this.jn(t,l)}).next(()=>s)}Wn(e,t){let s={size:0,document:_r.newInvalidDocument(t)};return La(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(eh(t))},(c,l)=>{s={document:this.jn(t,l),size:Lp(l)}}).next(()=>s)}getEntries(e,t){let s=$s();return this.zn(e,t,(c,l)=>{const d=this.jn(c,l);s=s.insert(c,d)}).next(()=>s)}Hn(e,t){let s=$s(),c=new ti(yt.comparator);return this.zn(e,t,(l,d)=>{const g=this.jn(l,d);s=s.insert(l,g),c=c.insert(l,Lp(d))}).next(()=>({documents:s,Jn:c}))}zn(e,t,s){if(t.isEmpty())return Te.resolve();let c=new ur(nh);t.forEach(m=>c=c.add(m));const l=IDBKeyRange.bound(eh(c.first()),eh(c.last())),d=c.getIterator();let g=d.getNext();return La(e).Z({index:"documentKeyIndex",range:l},(m,w,I)=>{const M=yt.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;g&&nh(g,M)<0;)s(g,null),g=d.getNext();g&&g.isEqual(M)&&(s(g,w),g=d.hasNext()?d.getNext():null),g?I.j(eh(g)):I.done()}).next(()=>{for(;g;)s(g,null),g=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,s){const c=[t.popLast().toArray(),t.lastSegment(),af(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return La(e).W(IDBKeyRange.bound(c,l,!0)).next(d=>{let g=$s();for(const m of d){const w=this.jn(yt.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);g=g.insert(w.key,w)}return g})}getAllFromCollectionGroup(e,t,s,c){let l=$s();const d=th(t,s),g=th(t,oo.max());return La(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,g,!0)},(m,w,I)=>{const M=this.jn(yt.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);l=l.insert(M.key,M),l.size===c&&I.done()}).next(()=>l)}newChangeBuffer(e){return new mb(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return yb(e).get("remoteDocumentGlobalKey").next(t=>(Vt(!!t),t))}Qn(e,t){return yb(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const s=function(i,e){let t;if(e.document)t=Ap(i.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=yt.fromSegments(e.noDocument.path),c=ed(e.noDocument.readTime);t=_r.newNoDocument(s,c),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return xt();{const s=yt.fromSegments(e.unknownDocument.path),c=ed(e.unknownDocument.version);t=_r.newUnknownDocument(s,c)}}return e.readTime&&t.setReadTime(function(s){const c=new xr(s[0],s[1]);return Bt.fromTimestamp(c)}(e.readTime)),t}(this.It,t);if(!s.isNoDocument()||!s.version.isEqual(Bt.min()))return s}return _r.newInvalidDocument(e)}}function vv(i){return new jp(i)}class mb extends Xc{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new sl(s=>s.toString(),(s,c)=>s.isEqual(c))}applyChanges(e){const t=[];let s=0,c=new ur((l,d)=>sn(l.canonicalString(),d.canonicalString()));return this.changes.forEach((l,d)=>{const g=this.Xn.get(l);if(t.push(this.Yn.removeEntry(e,l,g.readTime)),d.isValidDocument()){const m=ab(this.Yn.It,d);c=c.add(l.path.popLast()),s+=Lp(m)-g.size,t.push(this.Yn.addEntry(e,l,m))}else if(s-=g.size,this.trackRemovals){const m=ab(this.Yn.It,d.convertToNoDocument(Bt.min()));t.push(this.Yn.addEntry(e,l,m))}}),c.forEach(l=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Yn.updateMetadata(e,s)),Te.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(s=>(this.Xn.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:s,Jn:c})=>(c.forEach((l,d)=>{this.Xn.set(l,{size:d,readTime:s.get(l).readTime})}),s))}}function yb(i){return ds(i,"remoteDocumentGlobal")}function La(i){return ds(i,"remoteDocumentsV14")}function eh(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function th(i,e){const t=e.documentKey.path.toArray();return[i,af(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function nh(i,e){const t=i.path.toArray(),s=e.path.toArray();let c=0;for(let l=0;l<t.length-2&&l<s.length-2;++l)if(c=sn(t[l],s[l]),c)return c;return c=sn(t.length,s.length),c||(c=sn(t[t.length-2],s[s.length-2]),c||sn(t[t.length-1],s[s.length-1]))}class _b{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Bp{constructor(e,t,s,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=c}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(c=>(s=c,this.getBaseDocument(e,t,s))).next(c=>(null!==s&&Wd(s.mutation,c,Hs.empty(),xr.now()),c))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,bn()).next(()=>s))}getLocalViewOfDocuments(e,t,s=bn()){const c=Jc();return this.populateOverlays(e,c,t).next(()=>this.computeViews(e,t,c,s).next(l=>{let d=bp();return l.forEach((g,m)=>{d=d.insert(g,m.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const s=Jc();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,bn()))}populateOverlays(e,t,s){const c=[];return s.forEach(l=>{t.has(l)||c.push(l)}),this.documentOverlayCache.getOverlays(e,c).next(l=>{l.forEach((d,g)=>{t.set(d,g)})})}computeViews(e,t,s,c){let l=$s();const d=Zh(),g=Zh();return t.forEach((m,w)=>{const I=s.get(w.key);c.has(w.key)&&(void 0===I||I.mutation instanceof Qc)?l=l.insert(w.key,w):void 0!==I&&(d.set(w.key,I.mutation.getFieldMask()),Wd(I.mutation,w,I.mutation.getFieldMask(),xr.now()))}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((w,I)=>d.set(w,I)),t.forEach((w,I)=>{var M;return g.set(w,new _b(I,null!==(M=d.get(w))&&void 0!==M?M:null))}),g))}recalculateAndSaveOverlays(e,t){const s=Zh();let c=new ti((d,g)=>d-g),l=bn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const g of d)g.keys().forEach(m=>{const w=t.get(m);if(null===w)return;let I=s.get(m)||Hs.empty();I=g.applyToLocalView(w,I),s.set(m,I);const M=(c.get(g.batchId)||bn()).add(m);c=c.insert(g.batchId,M)})}).next(()=>{const d=[],g=c.getReverseIterator();for(;g.hasNext();){const m=g.getNext(),w=m.key,I=m.value,M=Em();I.forEach(V=>{if(!l.has(V)){const K=qh(t.get(V),s.get(V));null!==K&&M.set(V,K),l=l.add(V)}}),d.push(this.documentOverlayCache.saveOverlays(e,w,M))}return Te.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return yt.isDocumentKey((c=t).path)&&null===c.collectionGroup&&0===c.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):$h(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var c}getNextDocuments(e,t,s,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,c).next(l=>{const d=c-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,c-l.size):Te.resolve(Jc());let g=-1,m=l;return d.next(w=>Te.forEach(w,(I,M)=>(g<M.largestBatchId&&(g=M.largestBatchId),l.get(I)?Te.resolve():this.getBaseDocument(e,I,M).next(V=>{m=m.insert(I,V)}))).next(()=>this.populateOverlays(e,w,l)).next(()=>this.computeViews(e,m,w,bn())).next(I=>({batchId:g,changes:wm(I)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new yt(t)).next(s=>{let c=bp();return s.isFoundDocument()&&(c=c.insert(s.key,s)),c})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const c=t.collectionGroup;let l=bp();return this.indexManager.getCollectionParents(e,c).next(d=>Te.forEach(d,g=>{const m=(w=t,I=g.child(c),new pc(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,I;return this.getDocumentsMatchingCollectionQuery(e,m,s).next(w=>{w.forEach((I,M)=>{l=l.insert(I,M)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,s){let c;return this.remoteDocumentCache.getAllFromCollection(e,t.path,s).next(l=>(c=l,this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId))).next(l=>{l.forEach((g,m)=>{const w=m.getKey();null===c.get(w)&&(c=c.insert(w,_r.newInvalidDocument(w)))});let d=bp();return c.forEach((g,m)=>{const w=l.get(g);void 0!==w&&Wd(w.mutation,m,Hs.empty(),xr.now()),U(t,m)&&(d=d.insert(g,m))}),d})}getBaseDocument(e,t,s){return null===s||1===s.mutation.type?this.remoteDocumentCache.getEntry(e,t):Te.resolve(_r.newInvalidDocument(t))}}class wv{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return Te.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var s;return this.Zn.set(t.id,{id:(s=t).id,version:s.version,createTime:kr(s.createTime)}),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(s=t).name,query:co(s.bundledQuery),readTime:kr(s.readTime)}),Te.resolve();var s}}class vb{constructor(){this.overlays=new ti(yt.comparator),this.es=new Map}getOverlay(e,t){return Te.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Jc();return Te.forEach(t,c=>this.getOverlay(e,c).next(l=>{null!==l&&s.set(c,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((c,l)=>{this.ue(e,t,l)}),Te.resolve()}removeOverlaysForBatchId(e,t,s){const c=this.es.get(s);return void 0!==c&&(c.forEach(l=>this.overlays=this.overlays.remove(l)),this.es.delete(s)),Te.resolve()}getOverlaysForCollection(e,t,s){const c=Jc(),l=t.length+1,d=new yt(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const m=g.getNext().value,w=m.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===l&&m.largestBatchId>s&&c.set(m.getKey(),m)}return Te.resolve(c)}getOverlaysForCollectionGroup(e,t,s,c){let l=new ti((w,I)=>w-I);const d=this.overlays.getIterator();for(;d.hasNext();){const w=d.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>s){let I=l.get(w.largestBatchId);null===I&&(I=Jc(),l=l.insert(w.largestBatchId,I)),I.set(w.getKey(),w)}}const g=Jc(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((w,I)=>g.set(w,I)),!(g.size()>=c)););return Te.resolve(g)}ue(e,t,s){const c=this.overlays.get(s.key);if(null!==c){const d=this.es.get(c.largestBatchId).delete(s.key);this.es.set(c.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new Op(t,s));let l=this.es.get(t);void 0===l&&(l=bn(),this.es.set(t,l)),this.es.set(t,l.add(s.key))}}class $p{constructor(){this.ns=new ur(ws.ss),this.rs=new ur(ws.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const s=new ws(e,t);this.ns=this.ns.add(s),this.rs=this.rs.add(s)}us(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.cs(new ws(e,t))}hs(e,t){e.forEach(s=>this.removeReference(s,t))}ls(e){const t=new yt(new Hn([])),s=new ws(t,e),c=new ws(t,e+1),l=[];return this.rs.forEachInRange([s,c],d=>{this.cs(d),l.push(d.key)}),l}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new yt(new Hn([])),s=new ws(t,e),c=new ws(t,e+1);let l=bn();return this.rs.forEachInRange([s,c],d=>{l=l.add(d.key)}),l}containsKey(e){const t=new ws(e,0),s=this.ns.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class ws{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return yt.comparator(e.key,t.key)||sn(e._s,t._s)}static os(e,t){return sn(e._s,t._s)||yt.comparator(e.key,t.key)}}class Om{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new ur(ws.ss)}checkEmpty(e){return Te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,c){const l=this.ws;this.ws++;const d=new sf(l,t,s,c);this.mutationQueue.push(d);for(const g of c)this.gs=this.gs.add(new ws(g.key,l)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return Te.resolve(d)}lookupMutationBatch(e,t){return Te.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const c=this.ps(t+1),l=c<0?0:c;return Te.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new ws(t,0),c=new ws(t,Number.POSITIVE_INFINITY),l=[];return this.gs.forEachInRange([s,c],d=>{const g=this.ys(d._s);l.push(g)}),Te.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ur(sn);return t.forEach(c=>{const l=new ws(c,0),d=new ws(c,Number.POSITIVE_INFINITY);this.gs.forEachInRange([l,d],g=>{s=s.add(g._s)})}),Te.resolve(this.Is(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1;let l=s;yt.isDocumentKey(l)||(l=l.child(""));const d=new ws(new yt(l),0);let g=new ur(sn);return this.gs.forEachWhile(m=>{const w=m.key.path;return!!s.isPrefixOf(w)&&(w.length===c&&(g=g.add(m._s)),!0)},d),Te.resolve(this.Is(g))}Is(e){const t=[];return e.forEach(s=>{const c=this.ys(s);null!==c&&t.push(c)}),t}removeMutationBatch(e,t){Vt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let s=this.gs;return Te.forEach(t.mutations,c=>{const l=new ws(c.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.gs=s})}An(e){}containsKey(e,t){const s=new ws(t,0),c=this.gs.firstAfterOrEqual(s);return Te.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return Te.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class wb{constructor(e){this.Es=e,this.docs=new ti(yt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,c=this.docs.get(s),l=c?c.size:0,d=this.Es(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Te.resolve(s?s.document.mutableCopy():_r.newInvalidDocument(t))}getEntries(e,t){let s=$s();return t.forEach(c=>{const l=this.docs.get(c);s=s.insert(c,l?l.document.mutableCopy():_r.newInvalidDocument(c))}),Te.resolve(s)}getAllFromCollection(e,t,s){let c=$s();const l=new yt(t.child("")),d=this.docs.getIteratorFrom(l);for(;d.hasNext();){const{key:g,value:{document:m}}=d.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||Fh(kh(m),s)<=0||(c=c.insert(m.key,m.mutableCopy()))}return Te.resolve(c)}getAllFromCollectionGroup(e,t,s,c){xt()}As(e,t){return Te.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Eb(this)}getSize(e){return Te.resolve(this.size)}}class Eb extends Xc{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((s,c)=>{c.isValidDocument()?t.push(this.Yn.addEntry(e,c)):this.Yn.removeEntry(s)}),Te.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class Ev{constructor(e){this.persistence=e,this.Rs=new sl(t=>Fi(t),Xu),this.lastRemoteSnapshotVersion=Bt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new $p,this.targetCount=0,this.vs=hl.Pn()}forEachTarget(e,t){return this.Rs.forEach((s,c)=>t(c)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.bs&&(this.bs=t),Te.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new hl(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.Dn(t),Te.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,s){let c=0;const l=[];return this.Rs.forEach((d,g)=>{g.sequenceNumber<=t&&null===s.get(g.targetId)&&(this.Rs.delete(d),l.push(this.removeMatchingKeysForTargetId(e,g.targetId)),c++)}),Te.waitFor(l).next(()=>c)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){const s=this.Rs.get(t)||null;return Te.resolve(s)}addMatchingKeys(e,t,s){return this.Ps.us(t,s),Te.resolve()}removeMatchingKeys(e,t,s){this.Ps.hs(t,s);const c=this.persistence.referenceDelegate,l=[];return c&&t.forEach(d=>{l.push(c.markPotentiallyOrphaned(e,d))}),Te.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),Te.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Ps.ds(t);return Te.resolve(s)}containsKey(e,t){return Te.resolve(this.Ps.containsKey(t))}}class od{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ls(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Ev(this),this.indexManager=new fb,this.remoteDocumentCache=new wb(s=>this.referenceDelegate.xs(s)),this.It=new rv(t),this.Ns=new wv(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Vs[e.toKey()];return s||(s=new Om(t,this.referenceDelegate),this.Vs[e.toKey()]=s),s}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,s){it("MemoryPersistence","Starting transaction:",e);const c=new bv(this.Ss.next());return this.referenceDelegate.ks(),s(c).next(l=>this.referenceDelegate.Os(c).next(()=>l)).toPromise().then(l=>(c.raiseOnCommittedEvent(),l))}Ms(e,t){return Te.or(Object.values(this.Vs).map(s=>()=>s.containsKey(e,t)))}}class bv extends Nd{constructor(e){super(),this.currentSequenceNumber=e}}class Gp{constructor(e){this.persistence=e,this.Fs=new $p,this.$s=null}static Bs(e){return new Gp(e)}get Ls(){if(this.$s)return this.$s;throw xt()}addReference(e,t,s){return this.Fs.addReference(s,t),this.Ls.delete(s.toString()),Te.resolve()}removeReference(e,t,s){return this.Fs.removeReference(s,t),this.Ls.add(s.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),Te.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(c=>this.Ls.add(c.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(c=>{c.forEach(l=>this.Ls.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.Ls,s=>{const c=yt.fromPath(s);return this.Us(e,c).next(l=>{l||t.removeEntry(c,Bt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(s=>{s?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return Te.or([()=>Te.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class bb{constructor(e){this.It=e}$(e,t,s,c){const l=new qu("createOrUpgrade",t);var g;s<1&&c>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Rp,{unique:!0}),g.createObjectStore("documentMutations"),ad(e),function(g){g.createObjectStore("remoteDocuments")}(e));let d=Te.resolve();return s<3&&c>=3&&(0!==s&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),ad(e)),d=d.next(()=>function(g){const m=g.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Bt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",w)}(l))),s<4&&c>=4&&(0!==s&&(d=d.next(()=>function(g,m){return m.store("mutations").W().next(w=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Rp,{unique:!0});const I=m.store("mutations"),M=w.map(V=>I.put(V));return Te.waitFor(M)})}(e,l))),d=d.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&c>=5&&(d=d.next(()=>this.qs(l))),s<6&&c>=6&&(d=d.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(l)))),s<7&&c>=7&&(d=d.next(()=>this.Gs(l))),s<8&&c>=8&&(d=d.next(()=>this.Qs(e,l))),s<9&&c>=9&&(d=d.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&c>=10&&(d=d.next(()=>this.js(l))),s<11&&c>=11&&(d=d.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&c>=12&&(d=d.next(()=>{!function(g){const m=g.createObjectStore("documentOverlays",{keyPath:sb});m.createIndex("collectionPathOverlayIndex",rf,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",zd,{unique:!1})}(e)})),s<13&&c>=13&&(d=d.next(()=>function(g){const m=g.createObjectStore("remoteDocumentsV14",{keyPath:ev});m.createIndex("documentKeyIndex",xm),m.createIndex("collectionGroupIndex",tb)}(e)).next(()=>this.Ws(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&c>=14&&(d=d.next(()=>this.zs(e,l))),s<15&&c>=15&&(d=d.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:Rm}).createIndex("sequenceNumberIndex",rb,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:nv}).createIndex("documentKeyIndex",ib,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((s,c)=>{t+=Lp(c)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}qs(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.W().next(c=>Te.forEach(c,l=>{const d=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return s.W("userMutationsIndex",d).next(g=>Te.forEach(g,m=>{Vt(m.userId===l.userId);const w=cl(this.It,m);return fv(e,l.userId,w).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(c=>{const l=[];return s.Z((d,g)=>{const m=new Hn(d),w=[0,Oo(m)];l.push(t.get(w).next(I=>I?Te.resolve():t.put({targetId:0,path:Oo(m),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>Te.waitFor(l))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:yI});const s=t.store("collectionParents"),c=new Fa,l=d=>{if(c.add(d)){const g=d.lastSegment(),m=d.popLast();return s.put({collectionId:g,parent:Oo(m)})}};return t.store("remoteDocuments").Z({X:!0},(d,g)=>{const m=new Hn(d);return l(m.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,g,m],w)=>{const I=Ps(g);return l(I.popLast())}))}js(e){const t=e.store("targets");return t.Z((s,c)=>{const l=cf(c),d=sv(this.It,l);return t.put(d)})}Ws(e,t){const s=t.store("remoteDocuments"),c=[];return s.Z((l,d)=>{const g=t.store("remoteDocumentsV14"),m=(w=d,w.document?new yt(Hn.fromString(w.document.name).popFirst(5)):w.noDocument?yt.fromSegments(w.noDocument.path):w.unknownDocument?yt.fromSegments(w.unknownDocument.path):xt()).path.toArray();var w;const I={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};c.push(g.put(I))}).next(()=>Te.waitFor(c))}zs(e,t){const s=t.store("mutations"),c=vv(this.It),l=new od(Gp.Bs,this.It.re);return s.W().next(d=>{const g=new Map;return d.forEach(m=>{var w;let I=null!==(w=g.get(m.userId))&&void 0!==w?w:bn();cl(this.It,m).keys().forEach(M=>I=I.add(M)),g.set(m.userId,I)}),Te.forEach(g,(m,w)=>{const I=new Cr(w),M=kp.oe(this.It,I),V=l.getIndexManager(I),K=id.oe(I,this.It,V,l.referenceDelegate);return new Bp(c,K,M,V).recalculateAndSaveOverlaysForDocumentKeys(new Np(t,ls.at),m).next()})})}}function ad(i){i.createObjectStore("targetDocuments",{keyPath:tv}).createIndex("documentTargetsIndex",nb,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ol,{unique:!0}),i.createObjectStore("targetGlobal")}const km="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Fm{constructor(e,t,s,c,l,d,g,m,w,I,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Hs=l,this.window=d,this.document=g,this.Js=w,this.Ys=I,this.Xs=M,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=V=>Promise.resolve(),!Fm.C())throw new Je(Pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _v(this,c),this.ii=t+"main",this.It=new rv(m),this.ri=new wi(this.ii,this.Xs,new bb(this.It)),this.Cs=new gb(this.referenceDelegate,this.It),this.remoteDocumentCache=vv(this.It),this.Ns=new _I,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===I&&Or("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Je(Pe.FAILED_PRECONDITION,km);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ls(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var s=(0,ke.Z)(function*(c){if(t.started)return e(c)});return function(c){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ke.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ke.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Wp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Pa(e))return it("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return it("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return hf(e).get("owner").next(t=>Te.resolve(this.mi(t)))}gi(e){return Wp(e).delete(this.clientId)}yi(){var e=this;return(0,ke.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const c=ds(s,"clientMetadata");return c.W().next(l=>{const d=e.Ii(l,18e5),g=l.filter(m=>-1===d.indexOf(m));return Te.forEach(g,m=>c.delete(m.clientId)).next(()=>g)})}).catch(()=>[]);if(e.oi)for(const s of t)e.oi.removeItem(e.Ti(s.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Te.resolve(!0):hf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Je(Pe.FAILED_PRECONDITION,km);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wp(e).W().next(s=>void 0===this.Ii(s,5e3).find(c=>{if(this.clientId!==c.clientId){const d=!this.inForeground&&c.inForeground,g=this.networkEnabled===c.networkEnabled;if(!this.networkEnabled&&c.networkEnabled||d&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&it("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ke.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Np(t,ls.at);return e._i(s).next(()=>e.gi(s))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(s=>this.pi(s.updateTimeMs,t)&&!this.Ei(s.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Wp(e).W().next(t=>this.Ii(t,18e5).map(s=>s.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return id.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new pb(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return kp.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,s){it("IndexedDbPersistence","Starting transaction:",e);const c="readonly"===t?"readonly":"readwrite",l=15===(d=this.Xs)?ob:14===d?Xl:13===d?Yd:12===d?Zd:11===d?Mp:void xt();var d;let g;return this.ri.runTransaction(e,c,l,m=>(g=new Np(m,this.Ss?this.Ss.next():ls.at),"readwrite-primary"===t?this.fi(g).next(w=>!!w||this.di(g)).next(w=>{if(!w)throw Or(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Je(Pe.FAILED_PRECONDITION,ap);return s(g)}).next(w=>this.wi(g).next(()=>w)):this.Vi(g).next(()=>s(g)))).then(m=>(g.raiseOnCommittedEvent(),m))}Vi(e){return hf(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Je(Pe.FAILED_PRECONDITION,km)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hf(e).put("owner",t)}static C(){return wi.C()}_i(e){const t=hf(e);return t.get("owner").next(s=>this.mi(s)?(it("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Te.resolve())}pi(e,t){const s=Date.now();return!(e<s-t||e>s&&(Or(`Detected an update time that is in the future: ${e} > ${s}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,xn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const s=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return it("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Or("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Or("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function hf(i){return ds(i,"owner")}function Wp(i){return ds(i,"clientMetadata")}function Cv(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Lm{constructor(e,t,s,c){this.targetId=e,this.fromCache=t,this.Si=s,this.Di=c}static Ci(e,t){let s=bn(),c=bn();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:c=c.add(l.doc.key)}return new Lm(e,t.fromCache,s,c)}}class Vm{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,s,c){return this.ki(e,t).next(l=>l||this.Oi(e,t,c,s)).next(l=>l||this.Mi(e,t))}ki(e,t){if(ao(t))return Te.resolve(null);let s=_(t);return this.indexManager.getIndexType(e,s).next(c=>0===c?null:(null!==t.limit&&1===c&&(t=f(t,null,"F"),s=_(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const d=bn(...l);return this.Ni.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,s).next(m=>{const w=this.Fi(t,g);return this.$i(t,w,d,m.readTime)?this.ki(e,f(t,null,"F")):this.Bi(e,w,t,m)}))})))}Oi(e,t,s,c){return ao(t)||c.isEqual(Bt.min())?this.Mi(e,t):this.Ni.getDocuments(e,s).next(l=>{const d=this.Fi(t,l);return this.$i(t,d,s,c)?this.Mi(e,t):(Ph()<=ps.in.DEBUG&&it("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),O(t)),this.Bi(e,d,t,Oh(c,-1)))})}Fi(e,t){let s=new ur(ve(e));return t.forEach((c,l)=>{U(e,l)&&(s=s.add(l))}),s}$i(e,t,s,c){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(c)>0)}Mi(e,t){return Ph()<=ps.in.DEBUG&&it("QueryEngine","Using full collection scan to execute query:",O(t)),this.Ni.getDocumentsMatchingQuery(e,t,oo.min())}Bi(e,t,s,c){return this.Ni.getDocumentsMatchingQuery(e,s,c).next(l=>(t.forEach(d=>{l=l.insert(d.key,d)}),l))}}class si{constructor(e,t,s,c){this.persistence=e,this.Li=t,this.It=c,this.Ui=new ti(sn),this.qi=new sl(l=>Fi(l),Xu),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(s)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bp(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function qp(i,e,t,s){return new si(i,e,t,s)}function Cb(i,e){return vc.apply(this,arguments)}function vc(){return vc=(0,ke.Z)(function*(i,e){const t=_t(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let c;return t.mutationQueue.getAllMutationBatches(s).next(l=>(c=l,t.Qi(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const d=[],g=[];let m=bn();for(const w of c){d.push(w.batchId);for(const I of w.mutations)m=m.add(I.key)}for(const w of l){g.push(w.batchId);for(const I of w.mutations)m=m.add(I.key)}return t.localDocuments.getDocuments(s,m).next(w=>({ji:w,removedBatchIds:d,addedBatchIds:g}))})})}),vc.apply(this,arguments)}function Hm(i,e){const t=_t(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const c=e.batch.keys(),l=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,g,m,w){const I=m.batch,M=I.keys();let V=Te.resolve();return M.forEach(K=>{V=V.next(()=>w.getEntry(g,K)).next(ce=>{const Ae=m.docVersions.get(K);Vt(null!==Ae),ce.version.compareTo(Ae)<0&&(I.applyToRemoteDocument(ce,m),ce.isValidDocument()&&(ce.setReadTime(m.commitVersion),w.addEntry(ce)))})}),V.next(()=>d.mutationQueue.removeMutationBatch(g,I))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,c,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(d){let g=bn();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(g=g.add(d.batch.mutations[m].key));return g}(e))).next(()=>t.localDocuments.getDocuments(s,c))})}function Kp(i){const e=_t(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function vI(i,e){const t=_t(i),s=e.snapshotVersion;let c=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});c=t.Ui;const g=[];e.targetChanges.forEach((I,M)=>{const V=c.get(M);if(!V)return;g.push(t.Cs.removeMatchingKeys(l,I.removedDocuments,M).next(()=>t.Cs.addMatchingKeys(l,I.addedDocuments,M)));let K=V.withSequenceNumber(l.currentSequenceNumber);var ce,Ae,ze;e.targetMismatches.has(M)?K=K.withResumeToken(Oi.EMPTY_BYTE_STRING,Bt.min()).withLastLimboFreeSnapshotVersion(Bt.min()):I.resumeToken.approximateByteSize()>0&&(K=K.withResumeToken(I.resumeToken,s)),c=c.insert(M,K),Ae=K,ze=I,(0===(ce=V).resumeToken.approximateByteSize()||Ae.snapshotVersion.toMicroseconds()-ce.snapshotVersion.toMicroseconds()>=3e8||ze.addedDocuments.size+ze.modifiedDocuments.size+ze.removedDocuments.size>0)&&g.push(t.Cs.updateTargetData(l,K))});let m=$s(),w=bn();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(l,I))}),g.push(Iv(l,d,e.documentUpdates).next(I=>{m=I.Wi,w=I.zi})),!s.isEqual(Bt.min())){const I=t.Cs.getLastRemoteSnapshotVersion(l).next(M=>t.Cs.setTargetsMetadata(l,l.currentSequenceNumber,s));g.push(I)}return Te.waitFor(g).next(()=>d.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,w)).next(()=>m)}).then(l=>(t.Ui=c,l))}function Iv(i,e,t){let s=bn(),c=bn();return t.forEach(l=>s=s.add(l)),e.getEntries(i,s).next(l=>{let d=$s();return t.forEach((g,m)=>{const w=l.get(g);m.isFoundDocument()!==w.isFoundDocument()&&(c=c.add(g)),m.isNoDocument()&&m.version.isEqual(Bt.min())?(e.removeEntry(g,m.readTime),d=d.insert(g,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),d=d.insert(g,m)):it("LocalStore","Ignoring outdated watch update for ",g,". Current version:",w.version," Watch version:",m.version)}),{Wi:d,zi:c}})}function Ib(i,e){const t=_t(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function cd(i,e){const t=_t(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let c;return t.Cs.getTargetData(s,e).next(l=>l?(c=l,Te.resolve(c)):t.Cs.allocateTargetId(s).next(d=>(c=new _c(e,d,0,s.currentSequenceNumber),t.Cs.addTargetData(s,c).next(()=>c))))}).then(s=>{const c=t.Ui.get(s.targetId);return(null===c||s.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(s.targetId,s),t.qi.set(e,s.targetId)),s})}function ud(i,e,t){return zp.apply(this,arguments)}function zp(){return zp=(0,ke.Z)(function*(i,e,t){const s=_t(i),c=s.Ui.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",l,d=>s.persistence.referenceDelegate.removeTarget(d,c)))}catch(d){if(!Pa(d))throw d;it("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ui=s.Ui.remove(e),s.qi.delete(c.target)}),zp.apply(this,arguments)}function ff(i,e,t){const s=_t(i);let c=Bt.min(),l=bn();return s.persistence.runTransaction("Execute query","readonly",d=>function(g,m,w){const I=_t(g),M=I.qi.get(w);return void 0!==M?Te.resolve(I.Ui.get(M)):I.Cs.getTargetData(m,w)}(s,d,_(e)).next(g=>{if(g)return c=g.lastLimboFreeSnapshotVersion,s.Cs.getMatchingKeysForTargetId(d,g.targetId).next(m=>{l=m})}).next(()=>s.Li.getDocumentsMatchingQuery(d,e,t?c:Bt.min(),t?l:bn())).next(g=>(rh(s,ne(e),g),{documents:g,Hi:l})))}function Tv(i,e){const t=_t(i),s=_t(t.Cs),c=t.Ui.get(e);return c?Promise.resolve(c.target):t.persistence.runTransaction("Get target data","readonly",l=>s.se(l,e).next(d=>d?d.target:null))}function Dv(i,e){const t=_t(i),s=t.Ki.get(e)||Bt.min();return t.persistence.runTransaction("Get new document changes","readonly",c=>t.Gi.getAllFromCollectionGroup(c,e,Oh(s,-1),Number.MAX_SAFE_INTEGER)).then(c=>(rh(t,e,c),c))}function rh(i,e,t){let s=i.Ki.get(e)||Bt.min();t.forEach((c,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),i.Ki.set(e,s)}function Zp(){return Zp=(0,ke.Z)(function*(i,e,t,s){const c=_t(i);let l=bn(),d=$s();for(const w of t){const I=e.Ji(w.metadata.name);w.document&&(l=l.add(I));const M=e.Yi(w);M.setReadTime(e.Xi(w.metadata.readTime)),d=d.insert(I,M)}const g=c.Gi.newChangeBuffer({trackRemovals:!0}),m=yield cd(c,(w=s,_(zl(Hn.fromString(`__bundle__/docs/${w}`)))));var w;return c.persistence.runTransaction("Apply bundle documents","readwrite",w=>Iv(w,g,d).next(I=>(g.apply(w),I)).next(I=>c.Cs.removeMatchingKeysForTargetId(w,m.targetId).next(()=>c.Cs.addMatchingKeys(w,l,m.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments(w,I.Wi,I.zi)).next(()=>I.Wi)))}),Zp.apply(this,arguments)}function Av(i,e){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,ke.Z)(function*(i,e,t=bn()){const s=yield cd(i,_(co(e.bundledQuery))),c=_t(i);return c.persistence.runTransaction("Save named query","readwrite",l=>{const d=kr(e.readTime);if(s.snapshotVersion.compareTo(d)>=0)return c.Ns.saveNamedQuery(l,e);const g=s.withResumeToken(Oi.EMPTY_BYTE_STRING,d);return c.Ui=c.Ui.insert(g.targetId,g),c.Cs.updateTargetData(l,g).next(()=>c.Cs.removeMatchingKeysForTargetId(l,s.targetId)).next(()=>c.Cs.addMatchingKeys(l,t,s.targetId)).next(()=>c.Ns.saveNamedQuery(l,e))})}),Yp.apply(this,arguments)}function jm(i,e){return`firestore_clients_${i}_${e}`}function Sv(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Bm(i,e){return`firestore_targets_${i}_${e}`}class Qp{constructor(e,t,s,c){this.user=e,this.batchId=t,this.state=s,this.error=c}static Zi(e,t,s){const c=JSON.parse(s);let l,d="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return d&&c.error&&(d="string"==typeof c.error.message&&"string"==typeof c.error.code,d&&(l=new Je(c.error.code,c.error.message))),d?new Qp(e,t,c.state,l):(Or("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pf{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Zi(e,t){const s=JSON.parse(t);let c,l="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(c=new Je(s.error.code,s.error.message))),l?new pf(e,s.state,c):(Or("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const s=JSON.parse(t);let c="object"==typeof s&&s.activeTargetIds instanceof Array,l=Cp();for(let d=0;c&&d<s.activeTargetIds.length;++d)c=Uh(s.activeTargetIds[d]),l=l.add(s.activeTargetIds[d]);return c?new gf(e,l):(Or("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class xv{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new xv(t.clientId,t.onlineState):(Or("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Jp{constructor(){this.activeTargetIds=Cp()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $m{constructor(e,t,s,c,l){this.window=e,this.Hs=t,this.persistenceKey=s,this.sr=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new ti(sn),this.started=!1,this.cr=[];const d=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ar=jm(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Jp),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ke.Z)(function*(){const t=yield e.syncEngine.vi();for(const c of t){if(c===e.sr)continue;const l=e.getItem(jm(e.persistenceKey,c));if(l){const d=gf.Zi(c,l);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const s=e.storage.getItem(e.wr);if(s){const c=e.yr(s);c&&e.pr(c)}for(const c of e.cr)e.rr(c);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((s,c)=>{c.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,s){this.Tr(e,t,s),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Bm(this.persistenceKey,e));if(s){const c=pf.Zi(e,s);c&&(t=c.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Bm(this.persistenceKey,e))}updateQueryState(e,t,s){this.Rr(e,t,s)}handleUserChange(e,t,s){t.forEach(c=>{this.Er(c)}),this.currentUser=e,s.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return it("SharedClientState","READ",e,t),t}setItem(e,t){it("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){it("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(it("SharedClientState","EVENT",s.key,s.newValue),s.key===this.ar)return void Or("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ke.Z)(function*(){if(t.started){if(null!==s.key)if(t.lr.test(s.key)){if(null==s.newValue){const c=t.vr(s.key);return t.Vr(c,null)}{const c=t.Sr(s.key,s.newValue);if(c)return t.Vr(c.clientId,c)}}else if(t.dr.test(s.key)){if(null!==s.newValue){const c=t.Dr(s.key,s.newValue);if(c)return t.Cr(c)}}else if(t._r.test(s.key)){if(null!==s.newValue){const c=t.Nr(s.key,s.newValue);if(c)return t.kr(c)}}else if(s.key===t.wr){if(null!==s.newValue){const c=t.yr(s.newValue);if(c)return t.pr(c)}}else if(s.key===t.hr){const c=function(l){let d=ls.at;if(null!=l)try{const g=JSON.parse(l);Vt("number"==typeof g),d=g}catch(g){Or("SharedClientState","Failed to read sequence number from WebStorage",g)}return d}(s.newValue);c!==ls.at&&t.sequenceNumberHandler(c)}else if(s.key===t.mr){const c=t.Or(s.newValue);yield Promise.all(c.map(l=>t.syncEngine.Mr(l)))}}else t.cr.push(s)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,s){const c=new Qp(this.currentUser,e,t,s),l=Sv(this.persistenceKey,this.currentUser,e);this.setItem(l,c.tr())}Er(e){const t=Sv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,s){const c=Bm(this.persistenceKey,e),l=new pf(e,t,s);this.setItem(c,l.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const s=this.vr(e);return gf.Zi(s,t)}Dr(e,t){const s=this.dr.exec(e),c=Number(s[1]);return Qp.Zi(new Cr(void 0!==s[2]?s[2]:null),c,t)}Nr(e,t){const s=this._r.exec(e),c=Number(s[1]);return pf.Zi(c,t)}yr(e){return xv.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ke.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);it("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const s=t?this.ur.insert(e,t):this.ur.remove(e),c=this.Ir(this.ur),l=this.Ir(s),d=[],g=[];return l.forEach(m=>{c.has(m)||d.push(m)}),c.forEach(m=>{l.has(m)||g.push(m)}),this.syncEngine.Br(d,g).then(()=>{this.ur=s})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Cp();return e.forEach((s,c)=>{t=t.unionWith(c.activeTargetIds)}),t}}class Rv{constructor(){this.Lr=new Jp,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,s){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Jp,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class wI{qr(e){}shutdown(){}}class Tb{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){it("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){it("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Gm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Db{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Pv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,s,c,l){const d=this.ho(e,t);it("RestConnection","Sending: ",d,s);const g={};return this.lo(g,c,l),this.fo(e,d,g,s).then(m=>(it("RestConnection","Received: ",m),m),m=>{throw xa("RestConnection",`${e} failed with error: `,m,"url: ",d,"request:",s),m})}_o(e,t,s,c,l,d){return this.ao(e,t,s,c,l)}lo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+ra,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,l)=>e[l]=c),s&&s.headers.forEach((c,l)=>e[l]=c)}ho(e,t){return`${this.oo}/v1/${t}:${Gm[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,s,c){return new Promise((l,d)=>{const g=new om;g.setWithCredentials(!0),g.listenOnce(ac.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case du.NO_ERROR:const w=g.getResponseJson();it("Connection","XHR received:",JSON.stringify(w)),l(w);break;case du.TIMEOUT:it("Connection",'RPC "'+e+'" timed out'),d(new Je(Pe.DEADLINE_EXCEEDED,"Request time out"));break;case du.HTTP_ERROR:const I=g.getStatus();if(it("Connection",'RPC "'+e+'" failed with status:',I,"response text:",g.getResponseText()),I>0){const M=g.getResponseJson().error;if(M&&M.status&&M.message){const V=function(K){const ce=K.toLowerCase().replace(/_/g,"-");return Object.values(Pe).indexOf(ce)>=0?ce:Pe.UNKNOWN}(M.status);d(new Je(V,M.message))}else d(new Je(Pe.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new Je(Pe.UNAVAILABLE,"Connection failed."));break;default:xt()}}finally{it("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(c);g.send(t,"POST",m,s,15)})}wo(e,t,s){const c=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=cr(),d=oc(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new Rd({})),this.lo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const m=c.join("");it("Connection","Creating WebChannel: "+m,g);const w=l.createWebChannel(m,g);let I=!1,M=!1;const V=new Db({Hr:ce=>{M?it("Connection","Not sending because WebChannel is closed:",ce):(I||(it("Connection","Opening WebChannel transport."),w.open(),I=!0),it("Connection","WebChannel sending:",ce),w.send(ce))},Jr:()=>w.close()}),K=(ce,Ae,ze)=>{ce.listen(Ae,Ht=>{try{ze(Ht)}catch(yn){setTimeout(()=>{throw yn},0)}})};return K(w,$u.EventType.OPEN,()=>{M||it("Connection","WebChannel transport opened.")}),K(w,$u.EventType.CLOSE,()=>{M||(M=!0,it("Connection","WebChannel transport closed"),V.io())}),K(w,$u.EventType.ERROR,ce=>{M||(M=!0,xa("Connection","WebChannel transport errored:",ce),V.io(new Je(Pe.UNAVAILABLE,"The operation could not be completed")))}),K(w,$u.EventType.MESSAGE,ce=>{var Ae;if(!M){const ze=ce.data[0];Vt(!!ze);const Ht=ze,yn=Ht.error||(null===(Ae=Ht[0])||void 0===Ae?void 0:Ae.error);if(yn){it("Connection","WebChannel received error:",yn);const _n=yn.status;let Cn=function(Tn){const Qi=ii[Tn];if(void 0!==Qi)return q_(Qi)}(_n),vn=yn.message;void 0===Cn&&(Cn=Pe.INTERNAL,vn="Unknown error status: "+_n+" with message "+yn.message),M=!0,V.io(new Je(Cn,vn)),w.close()}else it("Connection","WebChannel received:",ze),V.ro(ze)}}),K(d,hu.STAT_EVENT,ce=>{ce.stat===np.PROXY?it("Connection","Detected buffering proxy"):ce.stat===np.NOPROXY&&it("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.so()},0),V}}function Wm(){return"undefined"!=typeof window?window:null}function qm(){return"undefined"!=typeof document?document:null}function uo(i){return new yc(i,!0)}class Mv{constructor(e,t,s=1e3,c=1.5,l=6e4){this.Hs=e,this.timerId=t,this.mo=s,this.yo=c,this.po=l,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),s=Math.max(0,Date.now()-this.Eo),c=Math.max(0,t-s);c>0&&it("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,c,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Ab{constructor(e,t,s,c,l,d,g,m){this.Hs=e,this.vo=s,this.Vo=c,this.So=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=m,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Mv(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,ke.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,ke.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var s=this;return(0,ke.Z)(function*(){s.Uo(),s.qo(),s.No.cancel(),s.Do++,4!==e?s.No.reset():t&&t.code===Pe.RESOURCE_EXHAUSTED?(Or(t.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),s.No.Ao()):t&&t.code===Pe.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Ko(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,c])=>{this.Do===t&&this.Qo(s,c)},s=>{e(()=>{const c=new Je(Pe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.jo(c)})})}Qo(e,t){const s=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{s(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(c=>{s(()=>this.jo(c))}),this.stream.onMessage(c=>{s(()=>this.onMessage(c))})}Mo(){var e=this;this.state=5,this.No.Ro((0,ke.Z)(function*(){e.state=0,e.start()}))}jo(e){return it("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(it("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EI extends Ab{constructor(e,t,s,c,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,c,d),this.It=l}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:xt(),c=e.targetChange.targetIds||[],l=function(m,w){return m.gt?(Vt(void 0===w||"string"==typeof w),Oi.fromBase64String(w||"")):(Vt(void 0===w||w instanceof Uint8Array),Oi.fromUint8Array(w||new Uint8Array))}(i,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(m){const w=void 0===m.code?Pe.UNKNOWN:q_(m.code);return new Je(w,m.message||"")}(d);t=new Z_(s,c,l,g||null)}else if("documentChange"in e){const s=e.documentChange,c=Cu(i,s.document.name),l=kr(s.document.updateTime),d=new ki({mapValue:{fields:s.document.fields}}),g=_r.newFoundDocument(c,l,d);t=new Ip(s.targetIds||[],s.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const s=e.documentDelete,c=Cu(i,s.document),l=s.readTime?kr(s.readTime):Bt.min(),d=_r.newNoDocument(c,l);t=new Ip([],s.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const s=e.documentRemove,c=Cu(i,s.document);t=new Ip([],s.removedTargetIds||[],c,null)}else{if(!("filter"in e))return xt();{const s=e.filter,l=new ym(s.count||0);t=new bm(s.targetId,l)}}var m;return t}(this.It,e),s=function(c){if(!("targetChange"in c))return Bt.min();const l=c.targetChange;return l.targetIds&&l.targetIds.length?Bt.min():l.readTime?kr(l.readTime):Bt.min()}(e);return this.listener.zo(t,s)}Ho(e){const t={};t.database=sa(this.It),t.addTarget=function(c,l){let d;const g=l.target;return d=Vd(g)?{documents:QE(c,g)}:{query:Sp(c,g)},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?d.resumeToken=J_(c,l.resumeToken):l.snapshotVersion.compareTo(Bt.min())>0&&(d.readTime=qd(c,l.snapshotVersion.toTimestamp())),d}(this.It,e);const s=function(i,e){const t=function(s,c){switch(c){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return xt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Lo(t)}Jo(e){const t={};t.database=sa(this.It),t.removeTarget=e,this.Lo(t)}}class Nv extends Ab{constructor(e,t,s,c,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,c,d),this.It=l,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Vt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function(i,e){return i&&i.length>0?(Vt(void 0!==e),i.map(t=>function(s,c){let l=kr(s.updateTime?s.updateTime:c);return l.isEqual(Bt.min())&&(l=kr(c)),new bu(l,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=kr(e.commitTime);return this.listener.tu(s,t)}return Vt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=sa(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Kd(this.It,s))};this.Lo(t)}}class Ov extends class{}{constructor(e,t,s,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=s,this.It=c,this.su=!1}iu(){if(this.su)throw new Je(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,s){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,l])=>this.So.ao(e,t,s,c,l)).catch(c=>{throw"FirebaseError"===c.name?(c.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Je(Pe.UNKNOWN,c.toString())})}_o(e,t,s,c){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,d])=>this.So._o(e,t,s,l,d,c)).catch(l=>{throw"FirebaseError"===l.name?(l.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Je(Pe.UNKNOWN,l.toString())})}terminate(){this.su=!0}}class bI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Or(t),this.uu=!1):it("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class Fv{constructor(e,t,s,c,l){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=l,this.gu.qr(g=>{s.enqueueAndForget((0,ke.Z)(function*(){var m;ko(d)&&(it("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,ke.Z)(function*(w){const I=_t(w);I.wu.add(4),yield fl(I),I.yu.set("Unknown"),I.wu.delete(4),yield ld(I)}),function(w){return m.apply(this,arguments)})(d))}))}),this.yu=new bI(s,c)}}function ld(i){return zm.apply(this,arguments)}function zm(){return zm=(0,ke.Z)(function*(i){if(ko(i))for(const e of i.mu)yield e(!0)}),zm.apply(this,arguments)}function fl(i){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,ke.Z)(function*(i){for(const e of i.mu)yield e(!1)}),Zm.apply(this,arguments)}function Xp(i,e){const t=_t(i);t._u.has(e.targetId)||(t._u.set(e.targetId,e),ih(t)?Qm(t):pd(t).Oo()&&Ym(t,e))}function mf(i,e){const t=_t(i),s=pd(t);t._u.delete(e),s.Oo()&&Lv(t,e),0===t._u.size&&(s.Oo()?s.$o():ko(t)&&t.yu.set("Unknown"))}function Ym(i,e){i.pu.Mt(e.targetId),pd(i).Ho(e)}function Lv(i,e){i.pu.Mt(e),pd(i).Jo(e)}function Qm(i){i.pu=new KE({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),se:e=>i._u.get(e)||null}),pd(i).start(),i.yu.cu()}function ih(i){return ko(i)&&!pd(i).ko()&&i._u.size>0}function ko(i){return 0===_t(i).wu.size}function Jm(i){i.pu=void 0}function wc(i){return dd.apply(this,arguments)}function dd(){return dd=(0,ke.Z)(function*(i){i._u.forEach((e,t)=>{Ym(i,e)})}),dd.apply(this,arguments)}function Sb(i,e){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,ke.Z)(function*(i,e){Jm(i),ih(i)?(i.yu.lu(e),Qm(i)):i.yu.set("Unknown")}),Xm.apply(this,arguments)}function ey(i,e,t){return Va.apply(this,arguments)}function Va(){return Va=(0,ke.Z)(function*(i,e,t){if(i.yu.set("Online"),e instanceof Z_&&2===e.state&&e.cause)try{yield(s=(0,ke.Z)(function*(c,l){const d=l.cause;for(const g of l.targetIds)c._u.has(g)&&(yield c.remoteSyncer.rejectListen(g,d),c._u.delete(g),c.pu.removeTarget(g))}),function(c,l){return s.apply(this,arguments)})(i,e)}catch(s){it("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield pl(i,s)}else if(e instanceof Ip?i.pu.Gt(e):e instanceof bm?i.pu.Yt(e):i.pu.Wt(e),!t.isEqual(Bt.min()))try{const s=yield Kp(i.localStore);t.compareTo(s)>=0&&(yield function(c,l){const d=c.pu.te(l);return d.targetChanges.forEach((g,m)=>{if(g.resumeToken.approximateByteSize()>0){const w=c._u.get(m);w&&c._u.set(m,w.withResumeToken(g.resumeToken,l))}}),d.targetMismatches.forEach(g=>{const m=c._u.get(g);if(!m)return;c._u.set(g,m.withResumeToken(Oi.EMPTY_BYTE_STRING,m.snapshotVersion)),Lv(c,g);const w=new _c(m.target,g,1,m.sequenceNumber);Ym(c,w)}),c.remoteSyncer.applyRemoteEvent(d)}(i,t))}catch(s){it("RemoteStore","Failed to raise snapshot:",s),yield pl(i,s)}var s}),Va.apply(this,arguments)}function pl(i,e,t){return Es.apply(this,arguments)}function Es(){return Es=(0,ke.Z)(function*(i,e,t){if(!Pa(e))throw e;i.wu.add(1),yield fl(i),i.yu.set("Offline"),t||(t=()=>Kp(i.localStore)),i.asyncQueue.enqueueRetryable((0,ke.Z)(function*(){it("RemoteStore","Retrying IndexedDB access"),yield t(),i.wu.delete(1),yield ld(i)}))}),Es.apply(this,arguments)}function gl(i,e){return e().catch(t=>pl(i,t,e))}function Iu(i){return Fo.apply(this,arguments)}function Fo(){return Fo=(0,ke.Z)(function*(i){const e=_t(i),t=Tu(e);let s=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;ty(e);)try{const c=yield Ib(e.localStore,s);if(null===c){0===e.du.length&&t.$o();break}s=c.batchId,sh(e,c)}catch(c){yield pl(e,c)}hd(e)&&fd(e)}),Fo.apply(this,arguments)}function ty(i){return ko(i)&&i.du.length<10}function sh(i,e){i.du.push(e);const t=Tu(i);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function hd(i){return ko(i)&&!Tu(i).ko()&&i.du.length>0}function fd(i){Tu(i).start()}function oh(i){return ml.apply(this,arguments)}function ml(){return ml=(0,ke.Z)(function*(i){Tu(i).nu()}),ml.apply(this,arguments)}function ah(i){return yl.apply(this,arguments)}function yl(){return yl=(0,ke.Z)(function*(i){const e=Tu(i);for(const t of i.du)e.Zo(t.mutations)}),yl.apply(this,arguments)}function ch(i,e,t){return _l.apply(this,arguments)}function _l(){return _l=(0,ke.Z)(function*(i,e,t){const s=i.du.shift(),c=of.from(s,e,t);yield gl(i,()=>i.remoteSyncer.applySuccessfulWrite(c)),yield Iu(i)}),_l.apply(this,arguments)}function Vv(i,e){return eg.apply(this,arguments)}function eg(){return eg=(0,ke.Z)(function*(i,e){var t;e&&Tu(i).Xo&&(yield(t=(0,ke.Z)(function*(s,c){if(_m(l=c.code)&&l!==Pe.ABORTED){const d=s.du.shift();Tu(s).Fo(),yield gl(s,()=>s.remoteSyncer.rejectFailedWrite(d.batchId,c)),yield Iu(s)}var l}),function(s,c){return t.apply(this,arguments)})(i,e)),hd(i)&&fd(i)}),eg.apply(this,arguments)}function ny(i,e){return tg.apply(this,arguments)}function tg(){return tg=(0,ke.Z)(function*(i,e){const t=_t(i);t.asyncQueue.verifyOperationInProgress(),it("RemoteStore","RemoteStore received new credentials");const s=ko(t);t.wu.add(3),yield fl(t),s&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield ld(t)}),tg.apply(this,arguments)}function ng(i,e){return rg.apply(this,arguments)}function rg(){return rg=(0,ke.Z)(function*(i,e){const t=_t(i);e?(t.wu.delete(2),yield ld(t)):e||(t.wu.add(2),yield fl(t),t.yu.set("Unknown"))}),rg.apply(this,arguments)}function pd(i){return i.Iu||(i.Iu=function(e,t,s){const c=_t(e);return c.iu(),new EI(t,c.So,c.authCredentials,c.appCheckCredentials,c.It,s)}(i.datastore,i.asyncQueue,{Yr:wc.bind(null,i),Zr:Sb.bind(null,i),zo:ey.bind(null,i)}),i.mu.push(function(){var e=(0,ke.Z)(function*(t){t?(i.Iu.Fo(),ih(i)?Qm(i):i.yu.set("Unknown")):(yield i.Iu.stop(),Jm(i))});return function(t){return e.apply(this,arguments)}}())),i.Iu}function Tu(i){return i.Tu||(i.Tu=function(e,t,s){const c=_t(e);return c.iu(),new Nv(t,c.So,c.authCredentials,c.appCheckCredentials,c.It,s)}(i.datastore,i.asyncQueue,{Yr:oh.bind(null,i),Zr:Vv.bind(null,i),eu:ah.bind(null,i),tu:ch.bind(null,i)}),i.mu.push(function(){var e=(0,ke.Z)(function*(t){t?(i.Tu.Fo(),yield Iu(i)):(yield i.Tu.stop(),i.du.length>0&&(it("RemoteStore",`Stopping write stream with ${i.du.length} pending writes`),i.du=[]))});return function(t){return e.apply(this,arguments)}}())),i.Tu}class ig{constructor(e,t,s,c,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=c,this.removalCallback=l,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,s,c,l){const d=Date.now()+s,g=new ig(e,t,d,c,l);return g.start(s),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Je(Pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uh(i,e){if(Or("AsyncQueue",`${e}: ${i}`),Pa(i))return new Je(Pe.UNAVAILABLE,`${e}: ${i}`);throw i}class gd{constructor(e){this.comparator=e?(t,s)=>e(t,s)||yt.comparator(t.key,s.key):(t,s)=>yt.comparator(t.key,s.key),this.keyedMap=bp(),this.sortedSet=new ti(this.comparator)}static emptySet(e){return new gd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,l=s.getNext().key;if(!c.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new gd;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Hv{constructor(){this.Eu=new ti(yt.comparator)}track(e){const t=e.doc.key,s=this.Eu.get(t);s?0!==e.type&&3===s.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==s.type?this.Eu=this.Eu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Eu=this.Eu.remove(t):1===e.type&&2===s.type?this.Eu=this.Eu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):xt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,s)=>{e.push(s)}),e}}class md{constructor(e,t,s,c,l,d,g,m,w){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=c,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=m,this.hasCachedResults=w}static fromInitialDocuments(e,t,s,c,l){const d=[];return t.forEach(g=>{d.push({type:0,doc:g})}),new md(e,t,gd.emptySet(t),d,s,c,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&p(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==s[c].type||!t[c].doc.isEqual(s[c].doc))return!1;return!0}}class Uv{constructor(){this.Ru=void 0,this.listeners=[]}}class xb{constructor(){this.queries=new sl(e=>E(e),p),this.onlineState="Unknown",this.bu=new Set}}function jv(i,e){return ry.apply(this,arguments)}function ry(){return ry=(0,ke.Z)(function*(i,e){const t=_t(i),s=e.query;let c=!1,l=t.queries.get(s);if(l||(c=!0,l=new Uv),c)try{l.Ru=yield t.onListen(s)}catch(d){const g=uh(d,`Initialization of query '${O(e.query)}' failed`);return void e.onError(g)}t.queries.set(s,l),l.listeners.push(e),e.Pu(t.onlineState),l.Ru&&e.vu(l.Ru)&&sy(t)}),ry.apply(this,arguments)}function sg(i,e){return iy.apply(this,arguments)}function iy(){return iy=(0,ke.Z)(function*(i,e){const t=_t(i),s=e.query;let c=!1;const l=t.queries.get(s);if(l){const d=l.listeners.indexOf(e);d>=0&&(l.listeners.splice(d,1),c=0===l.listeners.length)}if(c)return t.queries.delete(s),t.onUnlisten(s)}),iy.apply(this,arguments)}function Bv(i,e){const t=_t(i);let s=!1;for(const c of e){const d=t.queries.get(c.query);if(d){for(const g of d.listeners)g.vu(c)&&(s=!0);d.Ru=c}}s&&sy(t)}function Rb(i,e,t){const s=_t(i),c=s.queries.get(e);if(c)for(const l of c.listeners)l.onError(t);s.queries.delete(e)}function sy(i){i.bu.forEach(e=>{e.next()})}class $v{constructor(e,t,s){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=s||{}}vu(e){if(!this.options.includeMetadataChanges){const s=[];for(const c of e.docChanges)3!==c.type&&s.push(c);e=new md(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=md.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class Pb{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class oy{constructor(e){this.It=e}Ji(e){return Cu(this.It,e)}Yi(e){return e.metadata.exists?Ap(this.It,e.document,!1):_r.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return kr(e)}}class CI{constructor(e,t,s){this.Mu=e,this.localStore=t,this.It=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Mb(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const s=Hn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,s=new oy(this.It);for(const c of e)if(c.metadata.queries){const l=s.Ji(c.metadata.name);for(const d of c.metadata.queries){const g=(t.get(d)||bn()).add(l);t.set(d,g)}}return t}complete(){var e=this;return(0,ke.Z)(function*(){const t=yield function(i,e,t,s){return Zp.apply(this,arguments)}(e.localStore,new oy(e.It),e.documents,e.Mu.id),s=e.$u(e.documents);for(const c of e.queries)yield Av(e.localStore,c,s.get(c.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Mb(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Nb{constructor(e){this.key=e}}class Gv{constructor(e){this.key=e}}class Ob{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=bn(),this.mutatedKeys=bn(),this.Gu=ve(e),this.Qu=new gd(this.Gu)}get ju(){return this.Uu}Wu(e,t){const s=t?t.zu:new Hv,c=t?t.Qu:this.Qu;let l=t?t.mutatedKeys:this.mutatedKeys,d=c,g=!1;const m="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,w="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((I,M)=>{const V=c.get(I),K=U(this.query,M)?M:null,ce=!!V&&this.mutatedKeys.has(V.key),Ae=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let ze=!1;V&&K?V.data.isEqual(K.data)?ce!==Ae&&(s.track({type:3,doc:K}),ze=!0):this.Hu(V,K)||(s.track({type:2,doc:K}),ze=!0,(m&&this.Gu(K,m)>0||w&&this.Gu(K,w)<0)&&(g=!0)):!V&&K?(s.track({type:0,doc:K}),ze=!0):V&&!K&&(s.track({type:1,doc:V}),ze=!0,(m||w)&&(g=!0)),ze&&(K?(d=d.add(K),l=Ae?l.add(I):l.delete(I)):(d=d.delete(I),l=l.delete(I)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const I="F"===this.query.limitType?d.last():d.first();d=d.delete(I.key),l=l.delete(I.key),s.track({type:1,doc:I})}return{Qu:d,zu:s,$i:g,mutatedKeys:l}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const c=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const l=e.zu.Au();l.sort((w,I)=>function(M,V){const K=ce=>{switch(ce){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xt()}};return K(M)-K(V)}(w.type,I.type)||this.Gu(w.doc,I.doc)),this.Ju(s);const d=t?this.Yu():[],g=0===this.Ku.size&&this.current?1:0,m=g!==this.qu;return this.qu=g,0!==l.length||m?{snapshot:new md(this.query,e.Qu,c,l,e.mutatedKeys,0===g,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),Xu:d}:{Xu:d}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Hv,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=bn(),this.Qu.forEach(s=>{this.Zu(s.key)&&(this.Ku=this.Ku.add(s.key))});const t=[];return e.forEach(s=>{this.Ku.has(s)||t.push(new Gv(s))}),this.Ku.forEach(s=>{e.has(s)||t.push(new Nb(s))}),t}tc(e){this.Uu=e.Hi,this.Ku=bn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return md.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class kb{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Fb{constructor(e){this.key=e,this.nc=!1}}class ay{constructor(e,t,s,c,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=c,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.sc={},this.ic=new sl(g=>E(g),p),this.rc=new Map,this.oc=new Set,this.uc=new ti(yt.comparator),this.cc=new Map,this.ac=new $p,this.hc={},this.lc=new Map,this.fc=hl.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function cy(i,e){return uy.apply(this,arguments)}function uy(){return uy=(0,ke.Z)(function*(i,e){const t=wf(i);let s,c;const l=t.ic.get(e);if(l)s=l.targetId,t.sharedClientState.addLocalQueryTarget(s),c=l.view.ec();else{const d=yield cd(t.localStore,_(e));t.isPrimaryClient&&Xp(t.remoteStore,d);const g=t.sharedClientState.addLocalQueryTarget(d.targetId);s=d.targetId,c=yield Wv(t,e,s,"current"===g,d.resumeToken)}return c}),uy.apply(this,arguments)}function Wv(i,e,t,s,c){return qv.apply(this,arguments)}function qv(){return qv=(0,ke.Z)(function*(i,e,t,s,c){i._c=(M,V,K)=>{return(ce=(0,ke.Z)(function*(Ae,ze,Ht,yn){let _n=ze.view.Wu(Ht);_n.$i&&(_n=yield ff(Ae.localStore,ze.query,!1).then(({documents:Tn})=>ze.view.Wu(Tn,_n)));const Cn=yn&&yn.targetChanges.get(ze.targetId),vn=ze.view.applyChanges(_n,Ae.isPrimaryClient,Cn);return my(Ae,ze.targetId,vn.Xu),vn.snapshot}),function(Ae,ze,Ht,yn){return ce.apply(this,arguments)})(i,M,V,K);var ce};const l=yield ff(i.localStore,e,!0),d=new Ob(e,l.Hi),g=d.Wu(l.documents),m=Qh.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState,c),w=d.applyChanges(g,i.isPrimaryClient,m);my(i,t,w.Xu);const I=new kb(e,t,d);return i.ic.set(e,I),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),w.snapshot}),qv.apply(this,arguments)}function II(i,e){return ly.apply(this,arguments)}function ly(){return ly=(0,ke.Z)(function*(i,e){const t=_t(i),s=t.ic.get(e),c=t.rc.get(s.targetId);if(c.length>1)return t.rc.set(s.targetId,c.filter(l=>!p(l,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield ud(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),mf(t.remoteStore,s.targetId),dh(t,s.targetId)}).catch(yu))):(dh(t,s.targetId),yield ud(t.localStore,s.targetId,!0))}),ly.apply(this,arguments)}function zv(){return zv=(0,ke.Z)(function*(i,e,t){const s=Ef(i);try{const c=yield function(l,d){const g=_t(l),m=xr.now(),w=d.reduce((V,K)=>V.add(K.key),bn());let I,M;return g.persistence.runTransaction("Locally write mutations","readwrite",V=>{let K=$s(),ce=bn();return g.Gi.getEntries(V,w).next(Ae=>{K=Ae,K.forEach((ze,Ht)=>{Ht.isValidDocument()||(ce=ce.add(ze))})}).next(()=>g.localDocuments.getOverlayedDocuments(V,K)).next(Ae=>{I=Ae;const ze=[];for(const Ht of d){const yn=W_(Ht,I.get(Ht.key).overlayedDocument);null!=yn&&ze.push(new Qc(Ht.key,yn,pp(yn.value.mapValue),Kr.exists(!0)))}return g.mutationQueue.addMutationBatch(V,m,ze,d)}).next(Ae=>{M=Ae;const ze=Ae.applyToLocalDocumentSet(I,ce);return g.documentOverlayCache.saveOverlays(V,Ae.batchId,ze)})}).then(()=>({batchId:M.batchId,changes:wm(I)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(c.batchId),function(l,d,g){let m=l.hc[l.currentUser.toKey()];m||(m=new ti(sn)),m=m.insert(d,g),l.hc[l.currentUser.toKey()]=m}(s,c.batchId,t),yield Ec(s,c.changes),yield Iu(s.remoteStore)}catch(c){const l=uh(c,"Failed to persist write");t.reject(l)}}),zv.apply(this,arguments)}function Zv(i,e){return vl.apply(this,arguments)}function vl(){return vl=(0,ke.Z)(function*(i,e){const t=_t(i);try{const s=yield vI(t.localStore,e);e.targetChanges.forEach((c,l)=>{const d=t.cc.get(l);d&&(Vt(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?d.nc=!0:c.modifiedDocuments.size>0?Vt(d.nc):c.removedDocuments.size>0&&(Vt(d.nc),d.nc=!1))}),yield Ec(t,s,e)}catch(s){yield yu(s)}}),vl.apply(this,arguments)}function Yv(i,e,t){const s=_t(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const c=[];s.ic.forEach((l,d)=>{const g=d.view.Pu(e);g.snapshot&&c.push(g.snapshot)}),function(l,d){const g=_t(l);g.onlineState=d;let m=!1;g.queries.forEach((w,I)=>{for(const M of I.listeners)M.Pu(d)&&(m=!0)}),m&&sy(g)}(s.eventManager,e),c.length&&s.sc.zo(c),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function Qv(i,e,t){return dy.apply(this,arguments)}function dy(){return dy=(0,ke.Z)(function*(i,e,t){const s=_t(i);s.sharedClientState.updateQueryState(e,"rejected",t);const c=s.cc.get(e),l=c&&c.key;if(l){let d=new ti(yt.comparator);d=d.insert(l,_r.newNoDocument(l,Bt.min()));const g=bn().add(l),m=new Yh(Bt.min(),new Map,new ur(sn),d,g);yield Zv(s,m),s.uc=s.uc.remove(l),s.cc.delete(e),ag(s)}else yield ud(s.localStore,e,!1).then(()=>dh(s,e,t)).catch(yu)}),dy.apply(this,arguments)}function Jv(i,e){return lh.apply(this,arguments)}function lh(){return lh=(0,ke.Z)(function*(i,e){const t=_t(i),s=e.batch.batchId;try{const c=yield Hm(t.localStore,e);py(t,s,null),fy(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Ec(t,c)}catch(c){yield yu(c)}}),lh.apply(this,arguments)}function Lb(i,e,t){return og.apply(this,arguments)}function og(){return og=(0,ke.Z)(function*(i,e,t){const s=_t(i);try{const c=yield function(l,d){const g=_t(l);return g.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let w;return g.mutationQueue.lookupMutationBatch(m,d).next(I=>(Vt(null!==I),w=I.keys(),g.mutationQueue.removeMutationBatch(m,I))).next(()=>g.mutationQueue.performConsistencyCheck(m)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(m,w,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,w)).next(()=>g.localDocuments.getDocuments(m,w))})}(s.localStore,e);py(s,e,t),fy(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Ec(s,c)}catch(c){yield yu(c)}}),og.apply(this,arguments)}function hy(){return hy=(0,ke.Z)(function*(i,e){const t=_t(i);ko(t.remoteStore)||it("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(l){const d=_t(l);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>d.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===s)return void e.resolve();const c=t.lc.get(s)||[];c.push(e),t.lc.set(s,c)}catch(s){const c=uh(s,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}}),hy.apply(this,arguments)}function fy(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function py(i,e,t){const s=_t(i);let c=s.hc[s.currentUser.toKey()];if(c){const l=c.get(e);l&&(t?l.reject(t):l.resolve(),c=c.remove(e)),s.hc[s.currentUser.toKey()]=c}}function dh(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.rc.get(e))i.ic.delete(s),t&&i.sc.wc(s,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(s=>{i.ac.containsKey(s)||gy(i,s)})}function gy(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(mf(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),ag(i))}function my(i,e,t){for(const s of t)s instanceof Nb?(i.ac.addReference(s.key,e),Xv(i,s)):s instanceof Gv?(it("SyncEngine","Document no longer in limbo: "+s.key),i.ac.removeReference(s.key,e),i.ac.containsKey(s.key)||gy(i,s.key)):xt()}function Xv(i,e){const t=e.key,s=t.path.canonicalString();i.uc.get(t)||i.oc.has(s)||(it("SyncEngine","New document in limbo: "+t),i.oc.add(s),ag(i))}function ag(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new yt(Hn.fromString(e)),s=i.fc.next();i.cc.set(s,new Fb(t)),i.uc=i.uc.insert(t,s),Xp(i.remoteStore,new _c(_(zl(t.path)),s,2,ls.at))}}function Ec(i,e,t){return ew.apply(this,arguments)}function ew(){return ew=(0,ke.Z)(function*(i,e,t){const s=_t(i),c=[],l=[],d=[];var g;s.ic.isEmpty()||(s.ic.forEach((g,m)=>{d.push(s._c(m,e,t).then(w=>{if((w||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(m.targetId,(null==w?void 0:w.fromCache)?"not-current":"current"),w){c.push(w);const I=Lm.Ci(m.targetId,w);l.push(I)}}))}),yield Promise.all(d),s.sc.zo(c),yield(g=(0,ke.Z)(function*(m,w){const I=_t(m);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>Te.forEach(w,V=>Te.forEach(V.Si,K=>I.persistence.referenceDelegate.addReference(M,V.targetId,K)).next(()=>Te.forEach(V.Di,K=>I.persistence.referenceDelegate.removeReference(M,V.targetId,K)))))}catch(M){if(!Pa(M))throw M;it("LocalStore","Failed to update sequence numbers: "+M)}for(const M of w){const V=M.targetId;if(!M.fromCache){const K=I.Ui.get(V),Ae=K.withLastLimboFreeSnapshotVersion(K.snapshotVersion);I.Ui=I.Ui.insert(V,Ae)}}}),function(m,w){return g.apply(this,arguments)})(s.localStore,l))}),ew.apply(this,arguments)}function yy(i,e){return _y.apply(this,arguments)}function _y(){return _y=(0,ke.Z)(function*(i,e){const t=_t(i);if(!t.currentUser.isEqual(e)){it("SyncEngine","User change. New user:",e.toKey());const s=yield Cb(t.localStore,e);t.currentUser=e,(c=t).lc.forEach(d=>{d.forEach(g=>{g.reject(new Je(Pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.lc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Ec(t,s.ji)}var c}),_y.apply(this,arguments)}function TI(i,e){const t=_t(i),s=t.cc.get(e);if(s&&s.nc)return bn().add(s.key);{let c=bn();const l=t.rc.get(e);if(!l)return c;for(const d of l){const g=t.ic.get(d);c=c.unionWith(g.view.ju)}return c}}function yf(i,e){return vy.apply(this,arguments)}function vy(){return vy=(0,ke.Z)(function*(i,e){const t=_t(i),s=yield ff(t.localStore,e.query,!0),c=e.view.tc(s);return t.isPrimaryClient&&my(t,e.targetId,c.Xu),c}),vy.apply(this,arguments)}function wy(i,e){return _f.apply(this,arguments)}function _f(){return _f=(0,ke.Z)(function*(i,e){const t=_t(i);return Dv(t.localStore,e).then(s=>Ec(t,s))}),_f.apply(this,arguments)}function Hb(i,e,t,s){return vf.apply(this,arguments)}function vf(){return vf=(0,ke.Z)(function*(i,e,t,s){const c=_t(i),l=yield function(d,g){const m=_t(d),w=_t(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",I=>w.Tn(I,g).next(M=>M?m.localDocuments.getDocuments(I,M):Te.resolve(null)))}(c.localStore,e);var g;null!==l?("pending"===t?yield Iu(c.remoteStore):"acknowledged"===t||"rejected"===t?(py(c,e,s||null),fy(c,e),g=e,_t(_t(c.localStore).mutationQueue).An(g)):xt(),yield Ec(c,l)):it("SyncEngine","Cannot apply mutation batch with id: "+e)}),vf.apply(this,arguments)}function cg(){return cg=(0,ke.Z)(function*(i,e){const t=_t(i);if(wf(t),Ef(t),!0===e&&!0!==t.dc){const s=t.sharedClientState.getAllActiveQueryTargets(),c=yield Ub(t,s.toArray());t.dc=!0,yield ng(t.remoteStore,!0);for(const l of c)Xp(t.remoteStore,l)}else if(!1===e&&!1!==t.dc){const s=[];let c=Promise.resolve();t.rc.forEach((l,d)=>{t.sharedClientState.isLocalQueryTarget(d)?s.push(d):c=c.then(()=>(dh(t,d),ud(t.localStore,d,!0))),mf(t.remoteStore,d)}),yield c,yield Ub(t,s),function(l){const d=_t(l);d.cc.forEach((g,m)=>{mf(d.remoteStore,m)}),d.ac.fs(),d.cc=new Map,d.uc=new ti(yt.comparator)}(t),t.dc=!1,yield ng(t.remoteStore,!1)}}),cg.apply(this,arguments)}function Ub(i,e,t){return by.apply(this,arguments)}function by(){return by=(0,ke.Z)(function*(i,e,t){const s=_t(i),c=[],l=[];for(const d of e){let g;const m=s.rc.get(d);if(m&&0!==m.length){g=yield cd(s.localStore,_(m[0]));for(const w of m){const I=s.ic.get(w),M=yield yf(s,I);M.snapshot&&l.push(M.snapshot)}}else{const w=yield Tv(s.localStore,d);g=yield cd(s.localStore,w),yield Wv(s,Cy(w),d,!1,g.resumeToken)}c.push(g)}return s.sc.zo(l),c}),by.apply(this,arguments)}function Cy(i){return Ud(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function tw(i){const e=_t(i);return _t(_t(e.localStore).persistence).vi()}function jb(i,e,t,s){return ug.apply(this,arguments)}function ug(){return ug=(0,ke.Z)(function*(i,e,t,s){const c=_t(i);if(c.dc)return void it("SyncEngine","Ignoring unexpected query state notification.");const l=c.rc.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const d=yield Dv(c.localStore,ne(l[0])),g=Yh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Oi.EMPTY_BYTE_STRING);yield Ec(c,d,g);break}case"rejected":yield ud(c.localStore,e,!0),dh(c,e,s);break;default:xt()}}),ug.apply(this,arguments)}function Iy(i,e,t){return lg.apply(this,arguments)}function lg(){return lg=(0,ke.Z)(function*(i,e,t){const s=wf(i);if(s.dc){for(const c of e){if(s.rc.has(c)){it("SyncEngine","Adding an already active target "+c);continue}const l=yield Tv(s.localStore,c),d=yield cd(s.localStore,l);yield Wv(s,Cy(l),d.targetId,!1,d.resumeToken),Xp(s.remoteStore,d)}for(const c of t)s.rc.has(c)&&(yield ud(s.localStore,c,!1).then(()=>{mf(s.remoteStore,c),dh(s,c)}).catch(yu))}}),lg.apply(this,arguments)}function wf(i){const e=_t(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Qv.bind(null,e),e.sc.zo=Bv.bind(null,e.eventManager),e.sc.wc=Rb.bind(null,e.eventManager),e}function Ef(i){const e=_t(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Jv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Lb.bind(null,e),e}class rw{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ke.Z)(function*(){t.It=uo(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return qp(this.persistence,new Vm,e.initialUser,this.It)}yc(e){return new od(Gp.Bs,this.It)}gc(e){return new Rv}terminate(){var e=this;return(0,ke.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ty extends rw{constructor(e,t,s){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,ke.Z)(function*(){yield t().call(s,e),yield s.Ac.initialize(s,e),yield Ef(s.Ac.syncEngine),yield Iu(s.Ac.remoteStore),yield s.persistence.li(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return qp(this.persistence,new Vm,e.initialUser,this.It)}Tc(e,t){return new mv(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const s=new Hh(t,this.persistence);return new Vh(e.asyncQueue,s)}yc(e){const t=Cv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Gs.withCacheSize(this.cacheSizeBytes):Gs.DEFAULT;return new Fm(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,Wm(),qm(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Rv}}class iw extends Ty{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,ke.Z)(function*(){yield t().call(s,e);const c=s.Ac.syncEngine;s.sharedClientState instanceof $m&&(s.sharedClientState.syncEngine={Fr:Hb.bind(null,c),$r:jb.bind(null,c),Br:Iy.bind(null,c),vi:tw.bind(null,c),Mr:wy.bind(null,c)},yield s.sharedClientState.start()),yield s.persistence.li(function(){var l=(0,ke.Z)(function*(d){yield function(i,e){return cg.apply(this,arguments)}(s.Ac.syncEngine,d),s.gcScheduler&&(d&&!s.gcScheduler.started?s.gcScheduler.start():d||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(d&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():d||s.indexBackfillerScheduler.stop())});return function(d){return l.apply(this,arguments)}}())})()}gc(e){const t=Wm();if(!$m.C(t))throw new Je(Pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Cv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $m(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class bf{initialize(e,t){var s=this;return(0,ke.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=c=>Yv(s.syncEngine,c,1),s.remoteStore.remoteSyncer.handleCredentialChange=yy.bind(null,s.syncEngine),yield ng(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new xb}createDatastore(e){const t=uo(e.databaseInfo.databaseId),s=new Pv(e.databaseInfo);return new Ov(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,c=e.asyncQueue,l=g=>Yv(this.syncEngine,g,0),d=Tb.C()?new Tb:new wI,new Fv(t,s,c,l,d);var t,s,c,l,d}createSyncEngine(e,t){return function(s,c,l,d,g,m,w){const I=new ay(s,c,l,d,g,m);return w&&(I.dc=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ke.Z)(function*(t){const s=_t(t);it("RemoteStore","RemoteStore shutting down."),s.wu.add(5),yield fl(s),s.gu.shutdown(),s.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Dy(i,e,t){if(!t)throw new Je(Pe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function sw(i,e,t,s){if(!0===e&&!0===s)throw new Je(Pe.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function ow(i){if(!yt.isDocumentKey(i))throw new Je(Pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function aw(i){if(yt.isDocumentKey(i))throw new Je(Pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Cf(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":xt()}function Mn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Je(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Cf(i);throw new Je(Pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Ay(i,e){if(e<=0)throw new Je(Pe.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}const Sy=new Map;class xy{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Je(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Je(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,sw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hh{constructor(e,t,s,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Je(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Je(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xy(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ip;switch(t.type){case"gapi":return new Nh(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Je(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Sy.get(e);t&&(it("ComponentProvider","Removing Datastore"),Sy.delete(e),t.terminate())}(this),Promise.resolve()}}class Fr{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fr(this.firestore,e,this._key)}}class Ms{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ms(this.firestore,e,this._query)}}class bc extends Ms{constructor(e,t,s){super(e,t,zl(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fr(this.firestore,null,new yt(e))}withConverter(e){return new bc(this.firestore,e,this._path)}}function Bb(i,e,...t){if(i=(0,xn.m9)(i),Dy("collection","path",e),i instanceof hh){const s=Hn.fromString(e,...t);return aw(s),new bc(i,null,s)}{if(!(i instanceof Fr||i instanceof bc))throw new Je(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Hn.fromString(e,...t));return aw(s),new bc(i.firestore,null,s)}}function dg(i,e,...t){if(i=(0,xn.m9)(i),1===arguments.length&&(e=Ol.R()),Dy("doc","path",e),i instanceof hh){const s=Hn.fromString(e,...t);return ow(s),new Fr(i,null,new yt(s))}{if(!(i instanceof Fr||i instanceof bc))throw new Je(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Hn.fromString(e,...t));return ow(s),new Fr(i.firestore,i instanceof bc?i.converter:null,new yt(s))}}function Py(i,e){return i=(0,xn.m9)(i),e=(0,xn.m9)(e),(i instanceof Fr||i instanceof bc)&&(e instanceof Fr||e instanceof bc)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function My(i,e){return i=(0,xn.m9)(i),e=(0,xn.m9)(e),i instanceof Ms&&e instanceof Ms&&i.firestore===e.firestore&&p(i._query,e._query)&&i.converter===e.converter}function Yi(i,e=10240){let t=0;return{read:()=>(0,ke.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,ke.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class If{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Or("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Gb{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new vi,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(s=>{s&&s.Ou()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ke.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ke.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ke.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const s=e.vc.decode(t),c=Number(s);isNaN(c)&&e.Dc(`length string (${s}) is not valid number`);const l=yield e.Cc(c);return new Pb(JSON.parse(l),t.length+c)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ke.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}Cc(e){var t=this;return(0,ke.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const s=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ke.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class uw{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ke.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Je(Pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(c=(0,ke.Z)(function*(l,d){const g=_t(l),m=sa(g.It)+"/documents",w={documents:d.map(K=>Jl(g.It,K))},I=yield g._o("BatchGetDocuments",m,w,d.length),M=new Map;I.forEach(K=>{const ce=function(i,e){return"found"in e?function(t,s){Vt(!!s.found);const c=Cu(t,s.found.name),l=kr(s.found.updateTime),d=new ki({mapValue:{fields:s.found.fields}});return _r.newFoundDocument(c,l,d)}(i,e):"missing"in e?function(t,s){Vt(!!s.missing),Vt(!!s.readTime);const c=Cu(t,s.missing),l=kr(s.readTime);return _r.newNoDocument(c,l)}(i,e):xt()}(g.It,K);M.set(ce.key.toString(),ce)});const V=[];return d.forEach(K=>{const ce=M.get(K.toString());Vt(!!ce),V.push(ce)}),V}),function(l,d){return c.apply(this,arguments)})(t.datastore,e);var c;return s.forEach(c=>t.recordVersion(c)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new il(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ke.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,c)=>{const l=yt.fromPath(c);e.mutations.push(new Ep(l,e.precondition(l)))}),yield(s=(0,ke.Z)(function*(c,l){const d=_t(c),g=sa(d.It)+"/documents",m={writes:l.map(w=>Kd(d.It,w))};yield d.ao("Commit",g,m)}),function(c,l){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xt();t=Bt.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Je(Pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Bt.min())?Kr.exists(!1):Kr.updateTime(t):Kr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Bt.min()))throw new Je(Pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kr.updateTime(t)}return Kr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class lw{constructor(e,t,s,c,l){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=c,this.deferred=l,this.kc=s.maxAttempts,this.No=new Mv(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,ke.Z)(function*(){const t=new uw(e.datastore),s=e.Mc(t);s&&s.then(c=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(c)}).catch(l=>{e.Fc(l)}))}).catch(c=>{e.Fc(c)})}))}Mc(e){try{const t=this.updateFunction(e);return!Bl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!_m(t)}return!1}}class fh{constructor(e,t,s,c){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=c,this.user=Cr.UNAUTHENTICATED,this.clientId=Ol.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var d=(0,ke.Z)(function*(g){it("FirestoreClient","Received user=",g.uid),yield l.authCredentialListener(g),l.user=g});return function(g){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(s,d=>(it("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ke.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Je(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ke.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const c=uh(s,"Failed to shutdown persistence");t.reject(c)}})),t.promise}}function dw(i,e){return Ny.apply(this,arguments)}function Ny(){return Ny=(0,ke.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),it("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var c=(0,ke.Z)(function*(l){s.isEqual(l)||(yield Cb(e.localStore,l),s=l)});return function(l){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),Ny.apply(this,arguments)}function Oy(i,e){return ky.apply(this,arguments)}function ky(){return ky=(0,ke.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield hg(i);it("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(c=>ny(e.remoteStore,c)),i.setAppCheckTokenChangeListener((c,l)=>ny(e.remoteStore,l)),i.onlineComponents=e}),ky.apply(this,arguments)}function hg(i){return hw.apply(this,arguments)}function hw(){return hw=(0,ke.Z)(function*(i){return i.offlineComponents||(it("FirestoreClient","Using default OfflineComponentProvider"),yield dw(i,new rw)),i.offlineComponents}),hw.apply(this,arguments)}function Tf(i){return Df.apply(this,arguments)}function Df(){return Df=(0,ke.Z)(function*(i){return i.onlineComponents||(it("FirestoreClient","Using default OnlineComponentProvider"),yield Oy(i,new bf)),i.onlineComponents}),Df.apply(this,arguments)}function Cc(i){return hg(i).then(e=>e.persistence)}function fg(i){return hg(i).then(e=>e.localStore)}function Fy(i){return Tf(i).then(e=>e.remoteStore)}function Ha(i){return Tf(i).then(e=>e.syncEngine)}function Ws(i){return pg.apply(this,arguments)}function pg(){return pg=(0,ke.Z)(function*(i){const e=yield Tf(i),t=e.eventManager;return t.onListen=cy.bind(null,e.syncEngine),t.onUnlisten=II.bind(null,e.syncEngine),t}),pg.apply(this,arguments)}function pw(i,e,t={}){const s=new vi;return i.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return function(c,l,d,g,m){const w=new If({next:M=>{l.enqueueAndForget(()=>sg(c,I));const V=M.docs.has(d);!V&&M.fromCache?m.reject(new Je(Pe.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&M.fromCache&&g&&"server"===g.source?m.reject(new Je(Pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(M)},error:M=>m.reject(M)}),I=new $v(zl(d.path),w,{includeMetadataChanges:!0,ku:!0});return jv(c,I)}(yield Ws(i),i.asyncQueue,e,t,s)})),s.promise}function gg(i,e,t={}){const s=new vi;return i.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return function(c,l,d,g,m){const w=new If({next:M=>{l.enqueueAndForget(()=>sg(c,I)),M.fromCache&&"server"===g.source?m.reject(new Je(Pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(M)},error:M=>m.reject(M)}),I=new $v(d,w,{includeMetadataChanges:!0,ku:!0});return jv(c,I)}(yield Ws(i),i.asyncQueue,e,t,s)})),s.promise}class Yb{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new Mv(this,"async_queue_retry"),this.Wc=()=>{const t=qm();t&&it("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=qm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=qm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new vi;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ke.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!Pa(t))throw t;it("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(s=>{throw this.Kc=s,this.Gc=!1,Or("INTERNAL UNHANDLED ERROR: ",function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),d}(s)),s}).then(s=>(this.Gc=!1,s))));return this.Bc=t,t}enqueueAfterDelay(e,t,s){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const c=ig.createAndSchedule(this,e,t,s,l=>this.Yc(l));return this.qc.push(c),c}zc(){this.Kc&&xt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ke.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function mg(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const c of["next","error","complete"])if(c in s&&"function"==typeof s[c])return!0;return!1}(i)}class mw{constructor(){this._progressObserver={},this._taskCompletionResolver=new vi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class zr extends hh{constructor(e,t,s,c){super(e,t,s,c),this.type="firestore",this._queue=new Yb,this._persistenceKey=(null==c?void 0:c.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||_g(this),this._firestoreClient.terminate()}}function Ei(i){return i._firestoreClient||_g(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function _g(i){var e;const t=i._freezeSettings(),s=(l=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new lp(i._databaseId,l,i._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var l,g;i._firestoreClient=new fh(i._authCredentials,i._appCheckCredentials,i._queue,s)}function Ly(i,e,t){const s=new vi;return i.asyncQueue.enqueue((0,ke.Z)(function*(){try{yield dw(i,t),yield Oy(i,e),s.resolve()}catch(c){const l=c;if(!("FirebaseError"===(d=l).name?d.code===Pe.FAILED_PRECONDITION||d.code===Pe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw l;xa("Error enabling offline persistence. Falling back to persistence disabled: "+l),s.reject(l)}var d})).then(()=>s.promise)}function Cw(i){if(i._initialized||i._terminated)throw new Je(Pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class eu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new eu(Oi.fromBase64String(e))}catch(t){throw new Je(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new eu(Oi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Du{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Je(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ei(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class yd{constructor(e){this._methodName=e}}class vg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Je(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Je(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return sn(this._lat,e._lat)||sn(this._long,e._long)}}const nC=/^__.*__$/;class rC{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Qc(e,this.data,this.fieldMask,t,this.fieldTransforms):new rl(e,this.data,t,this.fieldTransforms)}}class Iw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Qc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Tw(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xt()}}class wg{constructor(e,t,s,c,l,d){this.settings=e,this.databaseId=t,this.It=s,this.ignoreUndefinedProperties=c,void 0===l&&this.na(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new wg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.ia({path:s,oa:!1});return c.ua(e),c}ca(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.ia({path:s,oa:!1});return c.na(),c}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Su(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(Tw(this.sa)&&nC.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class iC{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=s||uo(e)}da(e,t,s,c=!1){return new wg({sa:e,methodName:t,fa:s,path:ei.emptyPath(),oa:!1,la:c},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function _d(i){const e=i._freezeSettings(),t=uo(i._databaseId);return new iC(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Eg(i,e,t,s,c,l={}){const d=i.da(l.merge||l.mergeFields?2:0,e,t,c);Dg("Data must be an object, but it was:",d,s);const g=Hy(s,d);let m,w;if(l.merge)m=new Hs(d.fieldMask),w=d.fieldTransforms;else if(l.mergeFields){const I=[];for(const M of l.mergeFields){const V=Au(e,M,t);if(!d.contains(V))throw new Je(Pe.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);oC(I,V)||I.push(V)}m=new Hs(I),w=d.fieldTransforms.filter(M=>m.covers(M.field))}else m=null,w=d.fieldTransforms;return new rC(new ki(g),m,w)}class Sf extends yd{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sf}}function Dw(i,e,t){return new wg({sa:3,fa:e.settings.fa,methodName:i._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class bg extends yd{_toFieldTransform(e){return new nl(e.path,new Zc)}isEqual(e){return e instanceof bg}}class Aw extends yd{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Dw(this,e,!0),s=this._a.map(l=>wl(l,t)),c=new Yc(s);return new nl(e.path,c)}isEqual(e){return this===e}}class Sw extends yd{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Dw(this,e,!0),s=this._a.map(l=>wl(l,t)),c=new ia(s);return new nl(e.path,c)}isEqual(e){return this===e}}class xw extends yd{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new gc(e.It,Pt(e.It,this.wa));return new nl(e.path,t)}isEqual(e){return this===e}}function Cg(i,e,t,s){const c=i.da(1,e,t);Dg("Data must be an object, but it was:",c,s);const l=[],d=ki.empty();Vl(s,(m,w)=>{const I=Ag(e,m,t);w=(0,xn.m9)(w);const M=c.ca(I);if(w instanceof Sf)l.push(I);else{const V=wl(w,M);null!=V&&(l.push(I),d.set(I,V))}});const g=new Hs(l);return new Iw(d,g,c.fieldTransforms)}function Ig(i,e,t,s,c,l){const d=i.da(1,e,t),g=[Au(e,s,t)],m=[c];if(l.length%2!=0)throw new Je(Pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<l.length;V+=2)g.push(Au(e,l[V])),m.push(l[V+1]);const w=[],I=ki.empty();for(let V=g.length-1;V>=0;--V)if(!oC(w,g[V])){const K=g[V];let ce=m[V];ce=(0,xn.m9)(ce);const Ae=d.ca(K);if(ce instanceof Sf)w.push(K);else{const ze=wl(ce,Ae);null!=ze&&(w.push(K),I.set(K,ze))}}const M=new Hs(w);return new Iw(I,M,d.fieldTransforms)}function Vy(i,e,t,s=!1){return wl(t,i.da(s?4:3,e))}function wl(i,e){if(Tg(i=(0,xn.m9)(i)))return Dg("Unsupported field value:",e,i),Hy(i,e);if(i instanceof yd)return function(t,s){if(!Tw(s.sa))throw s.ha(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.ha(`${t._methodName}() is not currently supported inside arrays`);const c=t._toFieldTransform(s);c&&s.fieldTransforms.push(c)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,s){const c=[];let l=0;for(const d of t){let g=wl(d,s.aa(l));null==g&&(g={nullValue:"NULL_VALUE"}),c.push(g),l++}return{arrayValue:{values:c}}}(i,e)}return function(t,s){if(null===(t=(0,xn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Pt(s.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const c=xr.fromDate(t);return{timestampValue:qd(s.It,c)}}if(t instanceof xr){const c=new xr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:qd(s.It,c)}}if(t instanceof vg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof eu)return{bytesValue:J_(s.It,t._byteString)};if(t instanceof Fr){const c=s.databaseId,l=t.firestore._databaseId;if(!l.isEqual(c))throw s.ha(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Jh(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.ha(`Unsupported field value: ${Cf(t)}`)}(i,e)}function Hy(i,e){const t={};return cc(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vl(i,(s,c)=>{const l=wl(c,e.ra(s));null!=l&&(t[s]=l)}),{mapValue:{fields:t}}}function Tg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof xr||i instanceof vg||i instanceof eu||i instanceof Fr||i instanceof yd)}function Dg(i,e,t){if(!Tg(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Cf(t);throw e.ha("an object"===s?i+" a custom object":i+" "+s)}var s}function Au(i,e,t){if((e=(0,xn.m9)(e))instanceof Du)return e._internalPath;if("string"==typeof e)return Ag(i,e);throw Su("Field path arguments must be of type string or ",i,!1,void 0,t)}const sC=new RegExp("[~\\*/\\[\\]]");function Ag(i,e,t){if(e.search(sC)>=0)throw Su(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Du(...e.split("."))._internalPath}catch(s){throw Su(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Su(i,e,t,s,c){const l=s&&!s.isEmpty(),d=void 0!==c;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let m="";return(l||d)&&(m+=" (found",l&&(m+=` in field ${s}`),d&&(m+=` in document ${c}`),m+=")"),new Je(Pe.INVALID_ARGUMENT,g+i+m)}function oC(i,e){return i.some(t=>t.isEqual(e))}class vd{constructor(e,t,s,c,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=c,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Fr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new SI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class SI extends vd{data(){return super.data()}}function xf(i,e){return"string"==typeof e?Ag(i,e):e instanceof Du?e._internalPath:e._delegate._internalPath}function Uy(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Je(Pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sg{}function Ut(i,...e){for(const t of e)i=t._apply(i);return i}class aC extends Sg{constructor(e,t,s){super(),this.ma=e,this.ga=t,this.ya=s,this.type="where"}_apply(e){const t=_d(e.firestore),s=function(c,l,d,g,m,w,I){let M;if(m.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Je(Pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){$y(I,w);const K=[];for(const ce of I)K.push(By(g,c,ce));M={arrayValue:{values:K}}}else M=By(g,c,I)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||$y(I,w),M=Vy(d,"where",I,"in"===w||"not-in"===w);const V=pi.create(m,w,M);return function(K,ce){if(ce.dt()){const ze=Yl(K);if(null!==ze&&!ze.isEqual(ce.field))throw new Je(Pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ze.toString()}' and '${ce.field.toString()}'`);const Ht=Zl(K);null!==Ht&&Nw(0,ce.field,Ht)}const Ae=function(ze,Ht){for(const yn of ze.filters)if(Ht.indexOf(yn.op)>=0)return yn.op;return null}(K,function(ze){switch(ze){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ce.op));if(null!==Ae)throw new Je(Pe.INVALID_ARGUMENT,Ae===ce.op?`Invalid query. You cannot use more than one '${ce.op.toString()}' filter.`:`Invalid query. You cannot use '${ce.op.toString()}' filters with '${Ae.toString()}' filters.`)}(c,V),V}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Ms(e.firestore,e.converter,function(c,l){const d=c.filters.concat([l]);return new pc(c.path,c.collectionGroup,c.explicitOrderBy.slice(),d,c.limit,c.limitType,c.startAt,c.endAt)}(e._query,s))}}class uC extends Sg{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(s,c,l){if(null!==s.startAt)throw new Je(Pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Je(Pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Kc(c,l);return function(g,m){if(null===Zl(g)){const w=Yl(g);null!==w&&Nw(0,w,m.field)}}(s,d),d}(e._query,this.ma,this.pa);return new Ms(e.firestore,e.converter,function(s,c){const l=s.explicitOrderBy.concat([c]);return new pc(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Rw extends Sg{constructor(e,t,s){super(),this.type=e,this.Ia=t,this.Ta=s}_apply(e){return new Ms(e.firestore,e.converter,f(e._query,this.Ia,this.Ta))}}class gi extends Sg{constructor(e,t,s){super(),this.type=e,this.Ea=t,this.Aa=s}_apply(e){const t=jy(e,this.type,this.Ea,this.Aa);return new Ms(e.firestore,e.converter,(c=t,new pc((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,c,s.endAt)));var s,c}}class Mg extends Sg{constructor(e,t,s){super(),this.type=e,this.Ea=t,this.Aa=s}_apply(e){const t=jy(e,this.type,this.Ea,this.Aa);return new Ms(e.firestore,e.converter,(c=t,new pc((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,c)));var s,c}}function jy(i,e,t,s){if(t[0]=(0,xn.m9)(t[0]),t[0]instanceof vd)return function(c,l,d,g,m){if(!g)throw new Je(Pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const w=[];for(const I of Eu(c))if(I.field.isKeyField())w.push(vu(l,g.key));else{const M=g.data.field(I.field);if(kd(M))throw new Je(Pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const V=I.field.canonicalString();throw new Je(Pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}w.push(M)}return new ka(w,m)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const c=_d(i.firestore);return function(l,d,g,m,w,I){const M=l.explicitOrderBy;if(w.length>M.length)throw new Je(Pe.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let K=0;K<w.length;K++){const ce=w[K];if(M[K].field.isKeyField()){if("string"!=typeof ce)throw new Je(Pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof ce}`);if(!$h(l)&&-1!==ce.indexOf("/"))throw new Je(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${ce}' contains a slash.`);const Ae=l.path.child(Hn.fromString(ce));if(!yt.isDocumentKey(Ae))throw new Je(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${Ae}' is not because it contains an odd number of segments.`);const ze=new yt(Ae);V.push(vu(d,ze))}else{const Ae=Vy(g,m,ce);V.push(Ae)}}return new ka(V,I)}(i._query,i.firestore._databaseId,c,e,t,s)}}function By(i,e,t){if("string"==typeof(t=(0,xn.m9)(t))){if(""===t)throw new Je(Pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$h(e)&&-1!==t.indexOf("/"))throw new Je(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Hn.fromString(t));if(!yt.isDocumentKey(s))throw new Je(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return vu(i,new yt(s))}if(t instanceof Fr)return vu(i,t._key);throw new Je(Pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cf(t)}.`)}function $y(i,e){if(!Array.isArray(i)||0===i.length)throw new Je(Pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new Je(Pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Nw(i,e,t){if(!t.isEqual(e))throw new Je(Pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Gy{convertValue(e,t="none"){switch(dc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ri(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw xt()}}convertObject(e,t){const s={};return Vl(e.fields,(c,l)=>{s[c]=this.convertValue(l,t)}),s}convertGeoPoint(e){return new vg(ri(e.latitude),ri(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=up(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(jl(e));default:return null}}convertTimestamp(e){const t=Ma(e);return new xr(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Hn.fromString(e);Vt(XE(s));const c=new Na(s.get(1),s.get(3)),l=new yt(s.popFirst(5));return c.isEqual(t)||Or(`Document ${l} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function Ng(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class Rf extends Gy{constructor(e){super(),this.firestore=e}convertBytes(e){return new eu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fr(this.firestore,null,t)}}class wd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xu extends vd{constructor(e,t,s,c,l,d){super(e,t,s,c,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(xf("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Pf extends xu{data(e={}){return super.data(e)}}class Ic{constructor(e,t,s,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new wd(c.hasPendingWrites,c.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Pf(this._firestore,this._userDataWriter,s.key,s,new wd(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Je(Pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,c){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(d=>({type:"added",doc:new Pf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new wd(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:l++}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(d=>c||3!==d.type).map(d=>{const g=new Pf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new wd(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,w=-1;return 0!==d.type&&(m=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),1!==d.type&&(l=l.add(d.doc),w=l.indexOf(d.doc.key)),{type:Ow(d.type),doc:g,oldIndex:m,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Ow(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xt()}}function Wy(i,e){return i instanceof xu&&e instanceof xu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Ic&&e instanceof Ic&&i._firestore===e._firestore&&My(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class El extends Gy{constructor(e){super(),this.firestore=e}convertBytes(e){return new eu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fr(this.firestore,null,t)}}function qy(i,e,t){i=Mn(i,Fr);const s=Mn(i.firestore,zr),c=Ng(i.converter,e,t);return ph(s,[Eg(_d(s),"setDoc",i._key,c,null!==i.converter,t).toMutation(i._key,Kr.none())])}function Ky(i,e,t,...s){i=Mn(i,Fr);const c=Mn(i.firestore,zr),l=_d(c);let d;return d="string"==typeof(e=(0,xn.m9)(e))||e instanceof Du?Ig(l,"updateDoc",i._key,e,t,s):Cg(l,"updateDoc",i._key,e),ph(c,[d.toMutation(i._key,Kr.exists(!0))])}function zy(i,...e){var t,s,c;i=(0,xn.m9)(i);let l={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||mg(e[d])||(l=e[d],d++);const g={includeMetadataChanges:l.includeMetadataChanges};if(mg(e[d])){const M=e[d];e[d]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[d+1]=null===(s=M.error)||void 0===s?void 0:s.bind(M),e[d+2]=null===(c=M.complete)||void 0===c?void 0:c.bind(M)}let m,w,I;if(i instanceof Fr)w=Mn(i.firestore,zr),I=zl(i._key.path),m={next:M=>{e[d]&&e[d](Lw(w,i,M))},error:e[d+1],complete:e[d+2]};else{const M=Mn(i,Ms);w=Mn(M.firestore,zr),I=M._query;const V=new El(w);m={next:K=>{e[d]&&e[d](new Ic(w,V,M,K))},error:e[d+1],complete:e[d+2]},Uy(i._query)}return function(M,V,K,ce){const Ae=new If(ce),ze=new $v(V,Ae,K);return M.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return jv(yield Ws(M),ze)})),()=>{Ae.bc(),M.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return sg(yield Ws(M),ze)}))}}(Ei(w),I,g,m)}function ph(i,e){return function(t,s){const c=new vi;return t.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return function(i,e,t){return zv.apply(this,arguments)}(yield Ha(t),s,c)})),c.promise}(Ei(i),e)}function Lw(i,e,t){const s=t.docs.get(e._key),c=new El(i);return new xu(i,c,e._key,s,new wd(t.hasPendingWrites,t.fromCache),e.converter)}const RI={maxAttempts:5};class Zy{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=_d(e)}set(e,t,s){this._verifyNotCommitted();const c=Tc(e,this._firestore),l=Ng(c.converter,t,s),d=Eg(this._dataReader,"WriteBatch.set",c._key,l,null!==c.converter,s);return this._mutations.push(d.toMutation(c._key,Kr.none())),this}update(e,t,s,...c){this._verifyNotCommitted();const l=Tc(e,this._firestore);let d;return d="string"==typeof(t=(0,xn.m9)(t))||t instanceof Du?Ig(this._dataReader,"WriteBatch.update",l._key,t,s,c):Cg(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(d.toMutation(l._key,Kr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Tc(e,this._firestore);return this._mutations=this._mutations.concat(new il(t._key,Kr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Je(Pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Tc(i,e){if((i=(0,xn.m9)(i)).firestore!==e)throw new Je(Pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class mC extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=_d(e)}get(e){const t=Tc(e,this._firestore),s=new Rf(this._firestore);return this._transaction.lookup([t._key]).then(c=>{if(!c||1!==c.length)return xt();const l=c[0];if(l.isFoundDocument())return new vd(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new vd(this._firestore,s,t._key,null,t.converter);throw xt()})}set(e,t,s){const c=Tc(e,this._firestore),l=Ng(c.converter,t,s),d=Eg(this._dataReader,"Transaction.set",c._key,l,null!==c.converter,s);return this._transaction.set(c._key,d),this}update(e,t,s,...c){const l=Tc(e,this._firestore);let d;return d="string"==typeof(t=(0,xn.m9)(t))||t instanceof Du?Ig(this._dataReader,"Transaction.update",l._key,t,s,c):Cg(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,d),this}delete(e){const t=Tc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Tc(e,this._firestore),s=new El(this._firestore);return super.get(e).then(c=>new xu(this._firestore,s,t._key,c._document,new wd(!1,!1),t.converter))}}function bl(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Je("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Hw(){if("undefined"==typeof Uint8Array)throw new Je("unimplemented","Uint8Arrays are not available in this environment.")}function Qy(){if("undefined"==typeof atob)throw new Je("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){ra=Hi.SDK_VERSION,(0,Hi._registerComponent)(new Ri.wA("firestore",(t,{instanceIdentifier:s,options:c})=>{const l=t.getProvider("app").getImmediate(),d=new zr(new sp(t.getProvider("auth-internal")),new cm(t.getProvider("app-check-internal")),function(g,m){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Je(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Na(g.options.projectId,m)}(l,s),l);return c=Object.assign({useFetchStreams:e},c),d._setSettings(c),d},"PUBLIC").setMultipleInstances(!0)),(0,Hi.registerVersion)(fu,"3.7.1",i),(0,Hi.registerVersion)(fu,"3.7.1","esm2017")}();class kf{constructor(e){this._delegate=e}static fromBase64String(e){return Qy(),new kf(eu.fromBase64String(e))}static fromUint8Array(e){return Hw(),new kf(eu.fromUint8Array(e))}toBase64(){return Qy(),this._delegate.toBase64()}toUint8Array(){return Hw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Og(i){return function(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const s of["next","error","complete"])if(s in t&&"function"==typeof t[s])return!0;return!1}(i)}class Uw{enableIndexedDbPersistence(e,t){return function(i,e){Cw(i=Mn(i,zr));const t=Ei(i),s=i._freezeSettings(),c=new bf;return Ly(t,c,new Ty(c,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(i){Cw(i=Mn(i,zr));const e=Ei(i),t=i._freezeSettings(),s=new bf;return Ly(e,s,new iw(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(i){if(i._initialized&&!i._terminated)throw new Je(Pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vi;return i._queue.enqueueAndForgetEvenWhileRestricted((0,ke.Z)(function*(){try{yield(t=(0,ke.Z)(function*(s){if(!wi.C())return Promise.resolve();const c=s+"main";yield wi.delete(c)}),function(s){return t.apply(this,arguments)})(Cv(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class jw{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Na||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&xa("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function(i,e,t,s={}){var c;const l=(i=Mn(i,hh))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&xa("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let d,g;if("string"==typeof s.mockUserToken)d=s.mockUserToken,g=Cr.MOCK_USER;else{d=(0,xn.Sg)(s.mockUserToken,null===(c=i._app)||void 0===c?void 0:c.options.projectId);const m=s.mockUserToken.sub||s.mockUserToken.user_id;if(!m)throw new Je(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Cr(m)}i._authCredentials=new am(new rp(d,g))}}(this._delegate,e,t,s)}enableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,ke.Z)(function*(){const e=yield Cc(i),t=yield Fy(i);return e.setNetworkEnabled(!0),function(s){const c=_t(s);return c.wu.delete(0),ld(c)}(t)}))}(Ei(i=Mn(i,zr)))}(this._delegate)}disableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,ke.Z)(function*(){const e=yield Cc(i),t=yield Fy(i);return e.setNetworkEnabled(!1),(s=(0,ke.Z)(function*(c){const l=_t(c);l.wu.add(0),yield fl(l),l.yu.set("Offline")}),function(c){return s.apply(this,arguments)})(t);var s}))}(Ei(i=Mn(i,zr)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,sw("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(i){return function(e){const t=new vi;return e.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return function(i,e){return hy.apply(this,arguments)}(yield Ha(e),t)})),t.promise}(Ei(i=Mn(i,zr)))}(this._delegate)}onSnapshotsInSync(e){return function(i,e){return function(i,e){const t=new If(e);return i.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return s=yield Ws(i),c=t,_t(s).bu.add(c),void c.next();var s,c})),()=>{t.bc(),i.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return s=yield Ws(i),c=t,void _t(s).bu.delete(c);var s,c}))}}(Ei(i=Mn(i,zr)),mg(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Je("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new yh(this,Bb(this._delegate,e))}catch(t){throw lo(t,"collection()","Firestore.collection()")}}doc(e){try{return new ja(this,dg(this._delegate,e))}catch(t){throw lo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ho(this,function(i,e){if(i=Mn(i,hh),Dy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Je(Pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ms(i,null,(t=e,new pc(Hn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw lo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(i,e,t){i=Mn(i,zr);const s=Object.assign(Object.assign({},RI),void 0);return function(c){if(c.maxAttempts<1)throw new Je(Pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(c,l,d){const g=new vi;return c.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){const m=yield function(i){return Tf(i).then(e=>e.datastore)}(c);new lw(c.asyncQueue,m,d,l,g).run()})),g.promise}(Ei(i),c=>e(new mC(i,c)),s)}(this._delegate,t=>e(new Jy(this,t)))}batch(){return Ei(this._delegate),new Xy(new Zy(this._delegate,e=>ph(this._delegate,e)))}loadBundle(e){return function(i,e){const t=Ei(i=Mn(i,zr)),s=new mw;return function(i,e,t,s){const c=function(l,d){let g;return g="string"==typeof l?(new TextEncoder).encode(l):l,m=function(m,w){if(m instanceof Uint8Array)return Yi(m,w);if(m instanceof ArrayBuffer)return Yi(new Uint8Array(m),w);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new Gb(m,d);var m}(t,uo(e));i.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){!function(i,e,t){const s=_t(i);var c;(c=(0,ke.Z)(function*(l,d,g){try{const m=yield d.getMetadata();if(yield function(V,K){const ce=_t(V),Ae=kr(K.createTime);return ce.persistence.runTransaction("hasNewerBundle","readonly",ze=>ce.Ns.getBundleMetadata(ze,K.id)).then(ze=>!!ze&&ze.createTime.compareTo(Ae)>=0)}(l.localStore,m))return yield d.close(),g._completeWith({taskState:"Success",documentsLoaded:(V=m).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);g._updateProgress(Mb(m));const w=new CI(m,l.localStore,d.It);let I=yield d.mc();for(;I;){const V=yield w.Fu(I);V&&g._updateProgress(V),I=yield d.mc()}const M=yield w.complete();return yield Ec(l,M.Lu,void 0),yield function(V,K){const ce=_t(V);return ce.persistence.runTransaction("Save bundle","readwrite",Ae=>ce.Ns.saveBundleMetadata(Ae,K))}(l.localStore,m),g._completeWith(M.progress),Promise.resolve(M.Bu)}catch(m){return xa("SyncEngine",`Loading bundle failed with ${m}`),g._failWith(m),Promise.resolve(new Set)}var V}),function(l,d,g){return c.apply(this,arguments)})(s,e,t).then(c=>{s.sharedClientState.notifyBundleLoaded(c)})}(yield Ha(i),c,s)}))}(t,i._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function(i,e){return function(i,e){return i.asyncQueue.enqueue((0,ke.Z)(function*(){return function(t,s){const c=_t(t);return c.persistence.runTransaction("Get named query","readonly",l=>c.Ns.getNamedQuery(l,s))}(yield fg(i),e)}))}(Ei(i=Mn(i,zr)),e).then(t=>t?new Ms(i,null,t.query):null)}(this._delegate,e).then(t=>t?new ho(this,t):null)}}class gh extends Gy{constructor(e){super(),this.firestore=e}convertBytes(e){return new kf(new eu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ja.forKey(t,this.firestore,null)}}class Jy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new gh(e)}get(e){const t=bd(e);return this._delegate.get(t).then(s=>new mh(this._firestore,new xu(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const c=bd(e);return s?(bl("Transaction.set",s),this._delegate.set(c,t,s)):this._delegate.set(c,t),this}update(e,t,s,...c){const l=bd(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...c),this}delete(e){const t=bd(e);return this._delegate.delete(t),this}}class Xy{constructor(e){this._delegate=e}set(e,t,s){const c=bd(e);return s?(bl("WriteBatch.set",s),this._delegate.set(c,t,s)):this._delegate.set(c,t),this}update(e,t,s,...c){const l=bd(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...c),this}delete(e){const t=bd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ed{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Pf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ff(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Ed.INSTANCES;let c=s.get(e);c||(c=new WeakMap,s.set(e,c));let l=c.get(t);return l||(l=new Ed(e,new gh(e),t),c.set(t,l)),l}}Ed.INSTANCES=new WeakMap;class ja{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gh(e)}static forPath(e,t,s){if(e.length%2!=0)throw new Je("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ja(t,new Fr(t._delegate,s,new yt(e)))}static forKey(e,t,s){return new ja(t,new Fr(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new yh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new yh(this.firestore,Bb(this._delegate,e))}catch(t){throw lo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,xn.m9)(e))instanceof Fr&&Py(this._delegate,e)}set(e,t){t=bl("DocumentReference.set",t);try{return t?qy(this._delegate,e,t):qy(this._delegate,e)}catch(s){throw lo(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?Ky(this._delegate,e):Ky(this._delegate,e,t,...s)}catch(c){throw lo(c,"updateDoc()","DocumentReference.update()")}}delete(){return function(i){return ph(Mn(i.firestore,zr),[new il(i._key,Kr.none())])}(this._delegate)}onSnapshot(...e){const t=kg(e),s=Bw(e,c=>new mh(this.firestore,new xu(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return zy(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(i){i=Mn(i,Fr);const e=Mn(i.firestore,zr),t=Ei(e),s=new El(e);return function(i,e){const t=new vi;return i.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return(s=(0,ke.Z)(function*(c,l,d){try{const g=yield function(m,w){const I=_t(m);return I.persistence.runTransaction("read document","readonly",M=>I.localDocuments.getDocument(M,w))}(c,l);g.isFoundDocument()?d.resolve(g):g.isNoDocument()?d.resolve(null):d.reject(new Je(Pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const m=uh(g,`Failed to get document '${l} from cache`);d.reject(m)}}),function(c,l,d){return s.apply(this,arguments)})(yield fg(i),e,t);var s})),t.promise}(t,i._key).then(c=>new xu(e,s,i._key,c,new wd(null!==c&&c.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(i){i=Mn(i,Fr);const e=Mn(i.firestore,zr);return pw(Ei(e),i._key,{source:"server"}).then(t=>Lw(e,i,t))}(this._delegate):function(i){i=Mn(i,Fr);const e=Mn(i.firestore,zr);return pw(Ei(e),i._key).then(t=>Lw(e,i,t))}(this._delegate),t.then(s=>new mh(this.firestore,new xu(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new ja(this.firestore,this._delegate.withConverter(e?Ed.getInstance(this.firestore,e):null))}}function lo(i,e,t){return i.message=i.message.replace(e,t),i}function kg(i){for(const e of i)if("object"==typeof e&&!Og(e))return e;return{}}function Bw(i,e){var t,s;let c;return c=Og(i[0])?i[0]:Og(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:l=>{c.next&&c.next(e(l))},error:null===(t=c.error)||void 0===t?void 0:t.bind(c),complete:null===(s=c.complete)||void 0===s?void 0:s.bind(c)}}class mh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ja(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Wy(this._delegate,e._delegate)}}class Ff extends mh{data(e){const t=this._delegate.data(e);return function(i,e){i||xt()}(void 0!==t),t}}class ho{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gh(e)}where(e,t,s){try{return new ho(this.firestore,Ut(this._delegate,function(i,e,t){const s=e,c=xf("where",i);return new aC(c,s,t)}(e,t,s)))}catch(c){throw lo(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ho(this.firestore,Ut(this._delegate,function(i,e="asc"){const t=e,s=xf("orderBy",i);return new uC(s,t)}(e,t)))}catch(s){throw lo(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ho(this.firestore,Ut(this._delegate,function(i){return Ay("limit",i),new Rw("limit",i,"F")}(e)))}catch(t){throw lo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ho(this.firestore,Ut(this._delegate,function(i){return Ay("limitToLast",i),new Rw("limitToLast",i,"L")}(e)))}catch(t){throw lo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ho(this.firestore,Ut(this._delegate,function(...i){return new gi("startAt",i,!0)}(...e)))}catch(t){throw lo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ho(this.firestore,Ut(this._delegate,function(...i){return new gi("startAfter",i,!1)}(...e)))}catch(t){throw lo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ho(this.firestore,Ut(this._delegate,function(...i){return new Mg("endBefore",i,!1)}(...e)))}catch(t){throw lo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ho(this.firestore,Ut(this._delegate,function(...i){return new Mg("endAt",i,!0)}(...e)))}catch(t){throw lo(t,"endAt()","Query.endAt()")}}isEqual(e){return My(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(i){i=Mn(i,Ms);const e=Mn(i.firestore,zr),t=Ei(e),s=new El(e);return function(i,e){const t=new vi;return i.asyncQueue.enqueueAndForget((0,ke.Z)(function*(){return(s=(0,ke.Z)(function*(c,l,d){try{const g=yield ff(c,l,!0),m=new Ob(l,g.Hi),w=m.Wu(g.documents),I=m.applyChanges(w,!1);d.resolve(I.snapshot)}catch(g){const m=uh(g,`Failed to execute query '${l} against cache`);d.reject(m)}}),function(c,l,d){return s.apply(this,arguments)})(yield fg(i),e,t);var s})),t.promise}(t,i._query).then(c=>new Ic(e,s,i,c))}(this._delegate):"server"===(null==e?void 0:e.source)?function(i){i=Mn(i,Ms);const e=Mn(i.firestore,zr),t=Ei(e),s=new El(e);return gg(t,i._query,{source:"server"}).then(c=>new Ic(e,s,i,c))}(this._delegate):function(i){i=Mn(i,Ms);const e=Mn(i.firestore,zr),t=Ei(e),s=new El(e);return Uy(i._query),gg(t,i._query).then(c=>new Ic(e,s,i,c))}(this._delegate),t.then(s=>new e_(this.firestore,new Ic(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=kg(e),s=Bw(e,c=>new e_(this.firestore,new Ic(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return zy(this._delegate,t,s)}withConverter(e){return new ho(this.firestore,this._delegate.withConverter(e?Ed.getInstance(this.firestore,e):null))}}class TC{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ff(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class e_{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ho(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ff(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new TC(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Ff(this._firestore,s))})}isEqual(e){return Wy(this._delegate,e._delegate)}}class yh extends ho{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ja(this.firestore,e):null}doc(e){try{return new ja(this.firestore,void 0===e?dg(this._delegate):dg(this._delegate,e))}catch(t){throw lo(t,"doc()","CollectionReference.doc()")}}add(e){return function(i,e){const t=Mn(i.firestore,zr),s=dg(i),c=Ng(i.converter,e);return ph(t,[Eg(_d(i.firestore),"addDoc",s._key,c,null!==i.converter,{}).toMutation(s._key,Kr.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new ja(this.firestore,t))}isEqual(e){return Py(this._delegate,e._delegate)}withConverter(e){return new yh(this.firestore,this._delegate.withConverter(e?Ed.getInstance(this.firestore,e):null))}}function bd(i){return Mn(i,Fr)}class t_{constructor(...e){this._delegate=new Du(...e)}static documentId(){return new t_(ei.keyField().canonicalString())}isEqual(e){return(e=(0,xn.m9)(e))instanceof Du&&this._delegate._internalPath.isEqual(e._internalPath)}}class Cd{constructor(e){this._delegate=e}static serverTimestamp(){const e=new bg("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Cd(e)}static delete(){const e=new Sf("deleteField");return e._methodName="FieldValue.delete",new Cd(e)}static arrayUnion(...e){const t=function(...i){return new Aw("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Cd(t)}static arrayRemove(...e){const t=function(...i){return new Sw("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Cd(t)}static increment(e){const t=function(i){return new xw("increment",i)}(e);return t._methodName="FieldValue.increment",new Cd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const $w={Firestore:jw,GeoPoint:vg,Timestamp:xr,Blob:kf,Transaction:Jy,WriteBatch:Xy,DocumentReference:ja,DocumentSnapshot:mh,Query:ho,QueryDocumentSnapshot:Ff,QuerySnapshot:e_,CollectionReference:yh,FieldPath:t_,FieldValue:Cd,setLogLevel:function(i){!function(i){Rs.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function(i){(function(i,e){i.INTERNAL.registerComponent(new Ri.wA("firestore-compat",t=>((e,t)=>new jw(e,t,new Uw))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},$w)))})(i),i.registerVersion("@firebase/firestore-compat","0.2.1")}(Uo.Z);var Ww=j(9765),qw=j(6682),Lf=j(309),Cl=j(3190),AC=j(7771),n_=j(5319),r_=j(7971),Kw=j(8858);class i_ extends Ww.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,s){super(),this.scheduler=s,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new SC(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,s=t?this._events:this._trimBufferThenGetEvents(),c=this.scheduler,l=s.length;let d;if(this.closed)throw new r_.N;if(this.isStopped||this.hasError?d=n_.w.EMPTY:(this.observers.push(e),d=new Kw.W(this,e)),c&&e.add(e=new Lf.ht(e,c)),t)for(let g=0;g<l&&!e.closed;g++)e.next(s[g]);else for(let g=0;g<l&&!e.closed;g++)e.next(s[g].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),d}_getNow(){return(this.scheduler||AC.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,s=this._windowTime,c=this._events,l=c.length;let d=0;for(;d<l&&!(e-c[d].time<s);)d++;return l>t&&(d=Math.max(d,l-t)),d>0&&c.splice(0,d),c}}class SC{constructor(e,t){this.time=e,this.value=t}}function zw(i,e,t){let s;return s=i&&"object"==typeof i?i:{bufferSize:i,windowTime:e,refCount:!1,scheduler:t},c=>c.lift(function({bufferSize:i=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:s}){let c,d,l=0,g=!1,m=!1;return function(I){let M;l++,!c||g?(g=!1,c=new i_(i,e,s),M=c.subscribe(this),d=I.subscribe({next(V){c.next(V)},error(V){g=!0,c.error(V)},complete(){m=!0,d=void 0,c.complete()}}),m&&(d=void 0)):M=c.subscribe(this),this.add(()=>{l--,M.unsubscribe(),M=void 0,d&&!m&&t&&0===l&&(d.unsubscribe(),d=void 0,c=void 0)})}}(s))}var xC=j(8049);function o_(i,e){return e?(0,Cl.w)(()=>i,e):(0,Cl.w)(()=>i)}var a_=j(3101);j(2329);const Qw=new Map,NC={activated:!1,tokenObservers:[]},kI={initialized:!1,enabled:!1};function bs(i){return Qw.get(i)||NC}function Ba(i,e){Qw.set(i,e)}function Lg(){return kI}class OC{constructor(e,t,s,c,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=s,this.lowerBound=c,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=c,c>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ke.Z)(function*(){t.stop();try{t.pending=new xn.BH,yield function(i){return new Promise(e=>{setTimeout(e,i)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new xn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(s){t.retryPolicy(s)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const qs=new xn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function d_(i){if(!bs(i).activated)throw qs.create("use-before-activation",{appName:i.name})}function Hg(i,e){return _h.apply(this,arguments)}function _h(){return _h=(0,ke.Z)(function*({url:i,body:e},t){var s,c;const l={"Content-Type":"application/json"},d=t.getImmediate({optional:!0});if(d){const K=yield d.getHeartbeatsHeader();K&&(l["X-Firebase-Client"]=K)}const g={method:"POST",body:JSON.stringify(e),headers:l};let m,w;try{m=yield fetch(i,g)}catch(K){throw qs.create("fetch-network-error",{originalErrorMessage:null===(s=K)||void 0===s?void 0:s.message})}if(200!==m.status)throw qs.create("fetch-status-error",{httpStatus:m.status});try{w=yield m.json()}catch(K){throw qs.create("fetch-parse-error",{originalErrorMessage:null===(c=K)||void 0===c?void 0:c.message})}const I=w.ttl.match(/^([\d.]+)(s)$/);if(!I||!I[2]||isNaN(Number(I[1])))throw qs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${w.ttl}`});const M=1e3*Number(I[1]),V=Date.now();return{token:w.token,expireTimeMillis:V+M,issuedAtTimeMillis:V}}),_h.apply(this,arguments)}function Ug(i,e){const{projectId:t,appId:s,apiKey:c}=i.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${s}:exchangeDebugToken?key=${c}`,body:{debug_token:e}}}const $f="firebase-app-check-store";let f_=null;function rE(){return f_||(f_=new Promise((i,e)=>{var t;try{const s=indexedDB.open("firebase-app-check-database",1);s.onsuccess=c=>{i(c.target.result)},s.onerror=c=>{var l;e(qs.create("storage-open",{originalErrorMessage:null===(l=c.target.error)||void 0===l?void 0:l.message}))},s.onupgradeneeded=c=>{0===c.oldVersion&&c.target.result.createObjectStore($f,{keyPath:"compositeKey"})}}catch(s){e(qs.create("storage-open",{originalErrorMessage:null===(t=s)||void 0===t?void 0:t.message}))}}),f_)}function p_(){return p_=(0,ke.Z)(function*(i,e){const s=(yield rE()).transaction($f,"readwrite"),l=s.objectStore($f).put({compositeKey:i,value:e});return new Promise((d,g)=>{l.onsuccess=m=>{d()},s.onerror=m=>{var w;g(qs.create("storage-set",{originalErrorMessage:null===(w=m.target.error)||void 0===w?void 0:w.message}))}})}),p_.apply(this,arguments)}const Gf=new ps.Yd("@firebase/app-check");function y_(i,e){return(0,xn.hl)()?function(i,e){return function(i,e){return p_.apply(this,arguments)}(function(i){return`${i.options.appId}-${i.name}`}(i),e)}(i,e).catch(t=>{Gf.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Tl(){return Lg().enabled}function __(){return v_.apply(this,arguments)}function v_(){return v_=(0,ke.Z)(function*(){const i=Lg();if(i.enabled&&i.token)return i.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),v_.apply(this,arguments)}const GC={error:"UNKNOWN_ERROR"};function Bg(i){return xn.US.encodeString(JSON.stringify(i),!1)}function $g(i){return w_.apply(this,arguments)}function w_(){return w_=(0,ke.Z)(function*(i,e=!1){const t=i.app;d_(t);const s=bs(t);let l,c=s.token;if(c&&!wh(c)&&(Ba(t,Object.assign(Object.assign({},s),{token:void 0})),c=void 0),!c){const m=yield s.cachedTokenPromise;m&&(wh(m)?c=m:yield y_(t,void 0))}if(!e&&c&&wh(c))return{token:c.token};let g,d=!1;if(Tl()){s.exchangeTokenPromise||(s.exchangeTokenPromise=Hg(Ug(t,yield __()),i.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),d=!0);const m=yield s.exchangeTokenPromise;return yield y_(t,m),Ba(t,Object.assign(Object.assign({},s),{token:m})),{token:m.token}}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),d=!0),c=yield s.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Gf.warn(m.message):Gf.error(m),l=m}return c?l?g=wh(c)?{token:c.token,internalError:l}:aE(l):(g={token:c.token},Ba(t,Object.assign(Object.assign({},s),{token:c})),yield y_(t,c)):g=aE(l),d&&E_(t,g),g}),w_.apply(this,arguments)}function Wg(i,e){const t=bs(i),s=t.tokenObservers.filter(c=>c.next!==e);0===s.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ba(i,Object.assign(Object.assign({},t),{tokenObservers:s}))}function qg(i){const{app:e}=i,t=bs(e);let s=t.tokenRefresher;s||(s=function(i){const{app:e}=i;return new OC((0,ke.Z)(function*(){let s;if(s=bs(e).token?yield $g(i,!0):yield $g(i),s.error)throw s.error;if(s.internalError)throw s.internalError}),()=>!0,()=>{const t=bs(e);if(t.token){let s=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return s=Math.min(s,t.token.expireTimeMillis-3e5),Math.max(0,s-Date.now())}return 0},3e4,96e4)}(i),Ba(e,Object.assign(Object.assign({},t),{tokenRefresher:s}))),!s.isRunning()&&t.isTokenAutoRefreshEnabled&&s.start()}function E_(i,e){const t=bs(i).tokenObservers;for(const s of t)try{"EXTERNAL"===s.type&&null!=e.error?s.error(e.error):s.next(e)}catch(c){}}function wh(i){return i.expireTimeMillis-Date.now()>0}function aE(i){return{token:Bg(GC),error:i}}class cE{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=bs(this.app);for(const t of e)Wg(this.app,t.next);return Promise.resolve()}}const Yg="app-check-internal";(0,Hi._registerComponent)(new Ri.wA("app-check",i=>function(i,e){return new cE(i,e)}(i.getProvider("app").getImmediate(),i.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((i,e,t)=>{i.getProvider(Yg).initialize()})),(0,Hi._registerComponent)(new Ri.wA(Yg,i=>function(i){return{getToken:e=>$g(i,e),addTokenListener:e=>function(i,e,t,s){const{app:c}=i,l=bs(c),d={next:t,error:s,type:e};if(Ba(c,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,d]})),l.token&&wh(l.token)){const g=l.token;Promise.resolve().then(()=>{t({token:g.token}),qg(i)}).catch(()=>{})}l.cachedTokenPromise.then(()=>qg(i))}(i,"INTERNAL",e),removeTokenListener:e=>Wg(i.app,e)}}(i.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Hi.registerVersion)("@firebase/app-check","0.5.15");class Mu{constructor(){return(0,pr.vb)("app-check")}}"undefined"!=typeof window&&window;var S_=j(7841);const QC=new A.OlP("angularfire2.auth.use-emulator"),dn=new A.OlP("angularfire2.auth.settings"),JC=new A.OlP("angularfire2.auth.tenant-id"),Th=new A.OlP("angularfire2.auth.langugage-code"),yE=new A.OlP("angularfire2.auth.use-device-language"),_E=new A.OlP("angularfire.auth.persistence"),vE=(i,e,t,s,c,l,d,g)=>(0,Xn.cc)(`${i.name}.auth`,"AngularFireAuth",i.name,()=>{const m=e.runOutsideAngular(()=>i.auth());if(t&&m.useEmulator(...t),s&&(m.tenantId=s),m.languageCode=c,l&&m.useDeviceLanguage(),d)for(const[w,I]of Object.entries(d))m.settings[w]=I;return g&&m.setPersistence(g),m},[t,s,c,l,d,g]);let XC=(()=>{class i{constructor(t,s,c,l,d,g,m,w,I,M,V,K){const ce=new Ww.xQ,Ae=(0,fs.of)(void 0).pipe((0,Lf.QV)(d.outsideAngular),(0,Cl.w)(()=>l.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,8241)))),(0,Dr.U)(()=>(0,Xn.on)(t,l,s)),(0,Dr.U)(ze=>vE(ze,l,g,w,I,M,m,V)),zw({bufferSize:1,refCount:!1}));if((0,R.PM)(c))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,fs.of)(null);else{Ae.pipe((0,xC.P)()).subscribe();const Ht=Ae.pipe((0,Cl.w)(Cn=>Cn.getRedirectResult().then(vn=>vn,()=>null)),pr.iC,zw({bufferSize:1,refCount:!1})),yn=Ae.pipe((0,Cl.w)(Cn=>new On.y(vn=>({unsubscribe:l.runOutsideAngular(()=>Cn.onAuthStateChanged(Tn=>vn.next(Tn),Tn=>vn.error(Tn),()=>vn.complete()))})))),_n=Ae.pipe((0,Cl.w)(Cn=>new On.y(vn=>({unsubscribe:l.runOutsideAngular(()=>Cn.onIdTokenChanged(Tn=>vn.next(Tn),Tn=>vn.error(Tn),()=>vn.complete()))}))));this.authState=Ht.pipe(o_(yn),(0,a_.R)(d.outsideAngular),(0,Lf.QV)(d.insideAngular)),this.user=Ht.pipe(o_(_n),(0,a_.R)(d.outsideAngular),(0,Lf.QV)(d.insideAngular)),this.idToken=this.user.pipe((0,Cl.w)(Cn=>Cn?(0,Xi.D)(Cn.getIdToken()):(0,fs.of)(null))),this.idTokenResult=this.user.pipe((0,Cl.w)(Cn=>Cn?(0,Xi.D)(Cn.getIdTokenResult()):(0,fs.of)(null))),this.credential=(0,qw.T)(Ht,ce,this.authState.pipe((0,xi.h)(Cn=>!Cn))).pipe((0,Dr.U)(Cn=>(null==Cn?void 0:Cn.user)?Cn:null),(0,a_.R)(d.outsideAngular),(0,Lf.QV)(d.insideAngular))}return(0,Xn.pX)(this,Ae,l,{spy:{apply:(ze,Ht,yn)=>{(ze.startsWith("signIn")||ze.startsWith("createUser"))&&yn.then(_n=>ce.next(_n))}}})}}return i.\u0275fac=function(t){return new(t||i)(A.LFG(Xn.Dh),A.LFG(Xn.xv,8),A.LFG(A.Lbi),A.LFG(A.R0b),A.LFG(pr.HU),A.LFG(QC,8),A.LFG(dn,8),A.LFG(JC,8),A.LFG(Th,8),A.LFG(yE,8),A.LFG(_E,8),A.LFG(Mu,8))},i.\u0275prov=A.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})();function Ns(i,e){return function(i,e=Ji.z){return new On.y(t=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},t)}):s=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(i,e)}function x_(i,e){return Ns(i,e).pipe((0,Dr.U)(t=>({payload:t,type:"query"})))}function Dh(i,e){return x_(i,e).pipe((0,Ai.O)(void 0),es(),(0,Dr.U)(([t,s])=>{const c=s.payload.docChanges(),l=c.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((d,g)=>{const m=c.find(I=>I.doc.ref.isEqual(d.ref)),w=null==t?void 0:t.payload.docs.find(I=>I.ref.isEqual(d.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(d.metadata)||!m&&w&&JSON.stringify(w.metadata)===JSON.stringify(d.metadata)||l.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:d}})}),l}))}function wE(i,e,t){return Dh(i,t).pipe((0,Si.R)((s,c)=>function(i,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(i=function(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return R_(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return R_(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return R_(i,e.oldIndex,1)}return i}(i,s))}),i}(s,c.map(l=>l.payload),e),[]),t=>t.lift(new Qs(void 0,void 0)),(0,Dr.U)(s=>s.map(c=>({type:c.type,payload:c}))))}function R_(i,e,t,...s){const c=i.slice();return c.splice(e,t,...s),c}function EE(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class bE{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Dh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Dr.U)(s=>s.filter(c=>e.indexOf(c.type)>-1)))),t.pipe((0,Ai.O)(void 0),es(),(0,xi.h)(([s,c])=>c.length>0||!s),(0,Dr.U)(([s,c])=>c),pr.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Si.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=EE(e);return wE(this.query,t,this.afs.schedulers.outsideAngular).pipe(pr.iC)}valueChanges(e={}){return x_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dr.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),pr.iC)}get(e){return(0,Xi.D)(this.query.get(e)).pipe(pr.iC)}add(e){return this.ref.add(e)}doc(e){return new Jg(this.ref.doc(e),this.afs)}}class Jg{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:c,query:l}=a0(s,t);return new bE(c,l,this.afs)}snapshotChanges(){return function(i,e){return Ns(i,e).pipe((0,Ai.O)(void 0),es(),(0,Dr.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(pr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Dr.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Xi.D)(this.ref.get(e)).pipe(pr.iC)}}class s0{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Dh(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dr.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,xi.h)(t=>t.length>0),pr.iC):Dh(this.query,this.afs.schedulers.outsideAngular).pipe(pr.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Si.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=EE(e);return wE(this.query,t,this.afs.schedulers.outsideAngular).pipe(pr.iC)}valueChanges(e={}){return x_(this.query,this.afs.schedulers.outsideAngular).pipe((0,Dr.U)(s=>s.payload.docs.map(c=>e.idField?Object.assign({[e.idField]:c.id},c.data()):c.data())),pr.iC)}get(e){return(0,Xi.D)(this.query.get(e)).pipe(pr.iC)}}const CE=new A.OlP("angularfire2.enableFirestorePersistence"),P_=new A.OlP("angularfire2.firestore.persistenceSettings"),M_=new A.OlP("angularfire2.firestore.settings"),o0=new A.OlP("angularfire2.firestore.use-emulator");function a0(i,e=(t=>t)){return{query:e(i),ref:i}}let c0=(()=>{class i{constructor(t,s,c,l,d,g,m,w,I,M,V,K,ce,Ae,ze,Ht,yn){this.schedulers=m;const _n=(0,Xn.on)(t,g,s),Cn=I;M&&vE(_n,g,V,ce,Ae,ze,K,Ht),[this.firestore,this.persistenceEnabled$]=(0,Xn.cc)(`${_n.name}.firestore`,"AngularFirestore",_n.name,()=>{const vn=g.runOutsideAngular(()=>_n.firestore());if(l&&vn.settings(l),Cn&&vn.useEmulator(...Cn),c&&!(0,R.PM)(d)){const Tn=()=>{try{return(0,Xi.D)(vn.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Qi){return"undefined"!=typeof console&&console.warn(Qi),(0,fs.of)(!1)}};return[vn,g.runOutsideAngular(Tn)]}return[vn,(0,fs.of)(!1)]},[l,Cn,c])}collection(t,s){let c;c="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:d}=a0(c,s),g=this.schedulers.ngZone.run(()=>l);return new bE(g,d,this)}collectionGroup(t,s){const c=s||(d=>d),l=this.firestore.collectionGroup(t);return new s0(c(l),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const c=this.schedulers.ngZone.run(()=>s);return new Jg(c,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(A.LFG(Xn.Dh),A.LFG(Xn.xv,8),A.LFG(CE,8),A.LFG(M_,8),A.LFG(A.Lbi),A.LFG(A.R0b),A.LFG(pr.HU),A.LFG(P_,8),A.LFG(o0,8),A.LFG(XC,8),A.LFG(QC,8),A.LFG(dn,8),A.LFG(JC,8),A.LFG(Th,8),A.LFG(yE,8),A.LFG(_E,8),A.LFG(Mu,8))},i.\u0275prov=A.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),u0=(()=>{class i{constructor(){S_.Z.registerVersion("angularfire",pr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:CE,useValue:!0},{provide:P_,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=A.oAB({type:i}),i.\u0275inj=A.cJS({providers:[c0]}),i})();var Ce=j(1841);const fo=new A.OlP("basePath");class Qn{constructor(e={}){this.apiKeys=e.apiKeys,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.withCredentials=e.withCredentials,this.encoder=e.encoder,this.credentials=e.credentials?e.credentials:{},this.credentials.apikey||(this.credentials.apikey=()=>{if(null!=this.apiKeys)return this.apiKeys.apikey||this.apiKeys["X-ElasticEmail-ApiKey"]})}selectHeaderContentType(e){if(0===e.length)return;const t=e.find(s=>this.isJsonMime(s));return void 0===t?e[0]:t}selectHeaderAccept(e){if(0===e.length)return;const t=e.find(s=>this.isJsonMime(s));return void 0===t?e[0]:t}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}lookupCredential(e){const t=this.credentials[e];return"function"==typeof t?t():t}}let RE=(()=>{class i{constructor(t,s){if(t)throw new Error("ApiModule is already loaded. Import in your base AppModule only.");if(!s)throw new Error("You need to import the HttpClientModule in your AppModule! \nSee also https://github.com/angular/angular/issues/20575")}static forRoot(t){return{ngModule:i,providers:[{provide:Qn,useFactory:t}]}}}return i.\u0275fac=function(t){return new(t||i)(A.LFG(i,12),A.LFG(Ce.eN,8))},i.\u0275mod=A.oAB({type:i}),i.\u0275inj=A.cJS({providers:[],imports:[[]]}),i})();const I0={apiKey:"AIzaSyCpALxydPCsA4EXBWAkini0flkt1_4D8nU",authDomain:"shreyasambreportfoliofirbseapp.firebaseapp.com",projectId:"shreyasambreportfoliofirbseapp",storageBucket:"shreyasambreportfoliofirbseapp.appspot.com",messagingSenderId:"485676699494",appId:"1:485676699494:web:76a996c03c10d6357142a7",measurementId:"G-5PX06KD7L3"};let iT=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=A.oAB({type:i,bootstrap:[mo]}),i.\u0275inj=A.cJS({providers:[Ys.f,{provide:fo,useValue:"http://127.0.0.1:8080"}],imports:[[Tt,li,Xn.hO.initializeApp(I0),u0,RE,Ce.JF]]}),i})();(0,A.G48)(),Ne().bootstrapModule(iT).catch(i=>console.error(i))},3394:(ut,Ie,j)=>{"use strict";j.d(Ie,{Z:()=>He});var R=j(3854),A=j(3910),z=j(8026),_e=j(5422);class he{constructor(xe,Ye){this._delegate=xe,this.firebase=Ye,(0,z._addComponent)(xe,new A.wA("app-compat",()=>this,"PUBLIC")),this.container=xe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(xe){this._delegate.automaticDataCollectionEnabled=xe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(xe=>{this._delegate.checkDestroyed(),xe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,z.deleteApp)(this._delegate)))}_getService(xe,Ye=z._DEFAULT_ENTRY_NAME){var Be;this._delegate.checkDestroyed();const $e=this._delegate.container.getProvider(xe);return!$e.isInitialized()&&"EXPLICIT"===(null===(Be=$e.getComponent())||void 0===Be?void 0:Be.instantiationMode)&&$e.initialize(),$e.getImmediate({identifier:Ye})}_removeServiceInstance(xe,Ye=z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(xe).clearInstance(Ye)}_addComponent(xe){(0,z._addComponent)(this._delegate,xe)}_addOrOverwriteComponent(xe){(0,z._addOrOverwriteComponent)(this._delegate,xe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const be=new R.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Y=function fe(){const Oe=function(Oe){const xe={},Ye={__esModule:!0,initializeApp:function(jt,Ve={}){const Qe=z.initializeApp(jt,Ve);if((0,R.r3)(xe,Qe.name))return xe[Qe.name];const lt=new Oe(Qe,Ye);return xe[Qe.name]=lt,lt},app:$e,registerVersion:z.registerVersion,setLogLevel:z.setLogLevel,onLog:z.onLog,apps:null,SDK_VERSION:z.SDK_VERSION,INTERNAL:{registerComponent:function(jt){const Ve=jt.name,Qe=Ve.replace("-compat","");if(z._registerComponent(jt)&&"PUBLIC"===jt.type){const lt=(Et=$e())=>{if("function"!=typeof Et[Qe])throw be.create("invalid-app-argument",{appName:Ve});return Et[Qe]()};void 0!==jt.serviceProps&&(0,R.ZB)(lt,jt.serviceProps),Ye[Qe]=lt,Oe.prototype[Qe]=function(...Et){return this._getService.bind(this,Ve).apply(this,jt.multipleInstances?Et:[])}}return"PUBLIC"===jt.type?Ye[Qe]:null},removeApp:function(jt){delete xe[jt]},useAsService:function(jt,Ve){return"serverAuth"===Ve?null:Ve},modularAPIs:z}};function $e(jt){if(!(0,R.r3)(xe,jt=jt||z._DEFAULT_ENTRY_NAME))throw be.create("no-app",{appName:jt});return xe[jt]}return Ye.default=Ye,Object.defineProperty(Ye,"apps",{get:function(){return Object.keys(xe).map(jt=>xe[jt])}}),$e.App=Oe,Ye}(he);return Oe.INTERNAL=Object.assign(Object.assign({},Oe.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function(Ye){(0,R.ZB)(Oe,Ye)},createSubscribe:R.ne,ErrorFactory:R.LL,deepExtend:R.ZB}),Oe}(),Q=new _e.Yd("@firebase/app-compat");if((0,R.jU)()&&void 0!==self.firebase){Q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Oe=self.firebase.SDK_VERSION;Oe&&Oe.indexOf("LITE")>=0&&Q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const He=Y;(0,z.registerVersion)("@firebase/app-compat","0.1.37",undefined)},8026:(ut,Ie,j)=>{"use strict";j.r(Ie),j.d(Ie,{FirebaseError:()=>_e.ZR,SDK_VERSION:()=>Yr,_DEFAULT_ENTRY_NAME:()=>Vr,_addComponent:()=>Ci,_addOrOverwriteComponent:()=>Cs,_apps:()=>Ir,_clearComponents:()=>Ii,_components:()=>Zr,_getProvider:()=>St,_registerComponent:()=>Jn,_removeServiceInstance:()=>rr,deleteApp:()=>Rr,getApp:()=>kn,getApps:()=>tt,initializeApp:()=>gn,onLog:()=>Fn,registerVersion:()=>Dn,setLogLevel:()=>hs});var R=j(8239),A=j(3910),z=j(5422),_e=j(3854),he=j(5742);class le{constructor(je){this.container=je}getPlatformInfoString(){return this.container.getProviders().map(et=>{if(function(gt){const je=gt.getComponent();return"VERSION"===(null==je?void 0:je.type)}(et)){const Ot=et.getImmediate();return`${Ot.library}/${Ot.version}`}return null}).filter(et=>et).join(" ")}}const ue="@firebase/app",Y=new z.Yd("@firebase/app"),Vr="[DEFAULT]",Vo={[ue]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ir=new Map,Zr=new Map;function Ci(gt,je){try{gt.container.addComponent(je)}catch(et){Y.debug(`Component ${je.name} failed to register with FirebaseApp ${gt.name}`,et)}}function Cs(gt,je){gt.container.addOrOverwriteComponent(je)}function Jn(gt){const je=gt.name;if(Zr.has(je))return Y.debug(`There were multiple attempts to register component ${je}.`),!1;Zr.set(je,gt);for(const et of Ir.values())Ci(et,gt);return!0}function St(gt,je){const et=gt.container.getProvider("heartbeat").getImmediate({optional:!0});return et&&et.triggerHeartbeat(),gt.container.getProvider(je)}function rr(gt,je,et=Vr){St(gt,je).clearInstance(et)}function Ii(){Zr.clear()}const Ft=new _e.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Kn{constructor(je,et,Ot){this._isDeleted=!1,this._options=Object.assign({},je),this._config=Object.assign({},et),this._name=et.name,this._automaticDataCollectionEnabled=et.automaticDataCollectionEnabled,this._container=Ot,this.container.addComponent(new A.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(je){this.checkDestroyed(),this._automaticDataCollectionEnabled=je}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(je){this._isDeleted=je}checkDestroyed(){if(this.isDeleted)throw Ft.create("app-deleted",{appName:this._name})}}const Yr="9.12.1";function gn(gt,je={}){let et=gt;"object"!=typeof je&&(je={name:je});const Ot=Object.assign({name:Vr,automaticDataCollectionEnabled:!1},je),Jt=Ot.name;if("string"!=typeof Jt||!Jt)throw Ft.create("bad-app-name",{appName:String(Jt)});if(et||(et=(0,_e.aH)()),!et)throw Ft.create("no-options");const wn=Ir.get(Jt);if(wn){if((0,_e.vZ)(et,wn.options)&&(0,_e.vZ)(Ot,wn.config))return wn;throw Ft.create("duplicate-app",{appName:Jt})}const ie=new A.H0(Jt);for(const oe of Zr.values())ie.addComponent(oe);const te=new Kn(et,Ot,ie);return Ir.set(Jt,te),te}function kn(gt=Vr){const je=Ir.get(gt);if(!je&&gt===Vr)return gn();if(!je)throw Ft.create("no-app",{appName:gt});return je}function tt(){return Array.from(Ir.values())}function Rr(gt){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,R.Z)(function*(gt){const je=gt.name;Ir.has(je)&&(Ir.delete(je),yield Promise.all(gt.container.getProviders().map(et=>et.delete())),gt.isDeleted=!0)})).apply(this,arguments)}function Dn(gt,je,et){var Ot;let Jt=null!==(Ot=Vo[gt])&&void 0!==Ot?Ot:gt;et&&(Jt+=`-${et}`);const wn=Jt.match(/\s|\//),ie=je.match(/\s|\//);if(wn||ie){const te=[`Unable to register library "${Jt}" with version "${je}":`];return wn&&te.push(`library name "${Jt}" contains illegal characters (whitespace or "/")`),wn&&ie&&te.push("and"),ie&&te.push(`version name "${je}" contains illegal characters (whitespace or "/")`),void Y.warn(te.join(" "))}Jn(new A.wA(`${Jt}-version`,()=>({library:Jt,version:je}),"VERSION"))}function Fn(gt,je){if(null!==gt&&"function"!=typeof gt)throw Ft.create("invalid-log-argument");(0,z.Am)(gt,je)}function hs(gt){(0,z.Ub)(gt)}const de="firebase-heartbeat-store";let Ze=null;function We(){return Ze||(Ze=(0,he.X3)("firebase-heartbeat-database",1,{upgrade:(gt,je)=>{0===je&&gt.createObjectStore(de)}}).catch(gt=>{throw Ft.create("idb-open",{originalErrorMessage:gt.message})})),Ze}function ot(){return(ot=(0,R.Z)(function*(gt){var je;try{return(yield We()).transaction(de).objectStore(de).get(jn(gt))}catch(et){if(et instanceof _e.ZR)Y.warn(et.message);else{const Ot=Ft.create("idb-get",{originalErrorMessage:null===(je=et)||void 0===je?void 0:je.message});Y.warn(Ot.message)}}})).apply(this,arguments)}function at(gt,je){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,R.Z)(function*(gt,je){var et;try{const Jt=(yield We()).transaction(de,"readwrite");return yield Jt.objectStore(de).put(je,jn(gt)),Jt.done}catch(Ot){if(Ot instanceof _e.ZR)Y.warn(Ot.message);else{const Jt=Ft.create("idb-set",{originalErrorMessage:null===(et=Ot)||void 0===et?void 0:et.message});Y.warn(Jt.message)}}})).apply(this,arguments)}function jn(gt){return`${gt.name}!${gt.options.appId}`}class un{constructor(je){this.container=je,this._heartbeatsCache=null;const et=this.container.getProvider("app").getImmediate();this._storage=new Ur(et),this._heartbeatsCachePromise=this._storage.read().then(Ot=>(this._heartbeatsCache=Ot,Ot))}triggerHeartbeat(){var je=this;return(0,R.Z)(function*(){const Ot=je.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Jt=ht();if(null===je._heartbeatsCache&&(je._heartbeatsCache=yield je._heartbeatsCachePromise),je._heartbeatsCache.lastSentHeartbeatDate!==Jt&&!je._heartbeatsCache.heartbeats.some(wn=>wn.date===Jt))return je._heartbeatsCache.heartbeats.push({date:Jt,agent:Ot}),je._heartbeatsCache.heartbeats=je._heartbeatsCache.heartbeats.filter(wn=>{const ie=new Date(wn.date).valueOf();return Date.now()-ie<=2592e6}),je._storage.overwrite(je._heartbeatsCache)})()}getHeartbeatsHeader(){var je=this;return(0,R.Z)(function*(){if(null===je._heartbeatsCache&&(yield je._heartbeatsCachePromise),null===je._heartbeatsCache||0===je._heartbeatsCache.heartbeats.length)return"";const et=ht(),{heartbeatsToSend:Ot,unsentEntries:Jt}=function(gt,je=1024){const et=[];let Ot=gt.slice();for(const Jt of gt){const wn=et.find(ie=>ie.agent===Jt.agent);if(wn){if(wn.dates.push(Jt.date),vt(et)>je){wn.dates.pop();break}}else if(et.push({agent:Jt.agent,dates:[Jt.date]}),vt(et)>je){et.pop();break}Ot=Ot.slice(1)}return{heartbeatsToSend:et,unsentEntries:Ot}}(je._heartbeatsCache.heartbeats),wn=(0,_e.L)(JSON.stringify({version:2,heartbeats:Ot}));return je._heartbeatsCache.lastSentHeartbeatDate=et,Jt.length>0?(je._heartbeatsCache.heartbeats=Jt,yield je._storage.overwrite(je._heartbeatsCache)):(je._heartbeatsCache.heartbeats=[],je._storage.overwrite(je._heartbeatsCache)),wn})()}}function ht(){return(new Date).toISOString().substring(0,10)}class Ur{constructor(je){this.app=je,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,R.Z)(function*(){return!!(0,_e.hl)()&&(0,_e.eu)().then(()=>!0).catch(()=>!1)})()}read(){var je=this;return(0,R.Z)(function*(){return(yield je._canUseIndexedDBPromise)&&(yield function(gt){return ot.apply(this,arguments)}(je.app))||{heartbeats:[]}})()}overwrite(je){var et=this;return(0,R.Z)(function*(){var Ot;if(yield et._canUseIndexedDBPromise){const wn=yield et.read();return at(et.app,{lastSentHeartbeatDate:null!==(Ot=je.lastSentHeartbeatDate)&&void 0!==Ot?Ot:wn.lastSentHeartbeatDate,heartbeats:je.heartbeats})}})()}add(je){var et=this;return(0,R.Z)(function*(){var Ot;if(yield et._canUseIndexedDBPromise){const wn=yield et.read();return at(et.app,{lastSentHeartbeatDate:null!==(Ot=je.lastSentHeartbeatDate)&&void 0!==Ot?Ot:wn.lastSentHeartbeatDate,heartbeats:[...wn.heartbeats,...je.heartbeats]})}})()}}function vt(gt){return(0,_e.L)(JSON.stringify({version:2,heartbeats:gt})).length}Jn(new A.wA("platform-logger",je=>new le(je),"PRIVATE")),Jn(new A.wA("heartbeat",je=>new un(je),"PRIVATE")),Dn(ue,"0.8.2",""),Dn(ue,"0.8.2","esm2017"),Dn("fire-js","")},3910:(ut,Ie,j)=>{"use strict";j.d(Ie,{wA:()=>z,H0:()=>ue});var R=j(8239),A=j(3854);class z{constructor(Y,Q,ye){this.name=Y,this.instanceFactory=Q,this.type=ye,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Y){return this.instantiationMode=Y,this}setMultipleInstances(Y){return this.multipleInstances=Y,this}setServiceProps(Y){return this.serviceProps=Y,this}setInstanceCreatedCallback(Y){return this.onInstanceCreated=Y,this}}const _e="[DEFAULT]";class he{constructor(Y,Q){this.name=Y,this.container=Q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Y){const Q=this.normalizeInstanceIdentifier(Y);if(!this.instancesDeferred.has(Q)){const ye=new A.BH;if(this.instancesDeferred.set(Q,ye),this.isInitialized(Q)||this.shouldAutoInitialize())try{const me=this.getOrInitializeService({instanceIdentifier:Q});me&&ye.resolve(me)}catch(me){}}return this.instancesDeferred.get(Q).promise}getImmediate(Y){var Q;const ye=this.normalizeInstanceIdentifier(null==Y?void 0:Y.identifier),me=null!==(Q=null==Y?void 0:Y.optional)&&void 0!==Q&&Q;if(!this.isInitialized(ye)&&!this.shouldAutoInitialize()){if(me)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ye})}catch(Re){if(me)return null;throw Re}}getComponent(){return this.component}setComponent(Y){if(Y.name!==this.name)throw Error(`Mismatching Component ${Y.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Y,this.shouldAutoInitialize()){if("EAGER"===Y.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:_e})}catch(Q){}for(const[Q,ye]of this.instancesDeferred.entries()){const me=this.normalizeInstanceIdentifier(Q);try{const Re=this.getOrInitializeService({instanceIdentifier:me});ye.resolve(Re)}catch(Re){}}}}clearInstance(Y=_e){this.instancesDeferred.delete(Y),this.instancesOptions.delete(Y),this.instances.delete(Y)}delete(){var Y=this;return(0,R.Z)(function*(){const Q=Array.from(Y.instances.values());yield Promise.all([...Q.filter(ye=>"INTERNAL"in ye).map(ye=>ye.INTERNAL.delete()),...Q.filter(ye=>"_delete"in ye).map(ye=>ye._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Y=_e){return this.instances.has(Y)}getOptions(Y=_e){return this.instancesOptions.get(Y)||{}}initialize(Y={}){const{options:Q={}}=Y,ye=this.normalizeInstanceIdentifier(Y.instanceIdentifier);if(this.isInitialized(ye))throw Error(`${this.name}(${ye}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const me=this.getOrInitializeService({instanceIdentifier:ye,options:Q});for(const[Re,He]of this.instancesDeferred.entries())ye===this.normalizeInstanceIdentifier(Re)&&He.resolve(me);return me}onInit(Y,Q){var ye;const me=this.normalizeInstanceIdentifier(Q),Re=null!==(ye=this.onInitCallbacks.get(me))&&void 0!==ye?ye:new Set;Re.add(Y),this.onInitCallbacks.set(me,Re);const He=this.instances.get(me);return He&&Y(He,me),()=>{Re.delete(Y)}}invokeOnInitCallbacks(Y,Q){const ye=this.onInitCallbacks.get(Q);if(ye)for(const me of ye)try{me(Y,Q)}catch(Re){}}getOrInitializeService({instanceIdentifier:Y,options:Q={}}){let ye=this.instances.get(Y);if(!ye&&this.component&&(ye=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=Y,fe===_e?void 0:fe),options:Q}),this.instances.set(Y,ye),this.instancesOptions.set(Y,Q),this.invokeOnInitCallbacks(ye,Y),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Y,ye)}catch(me){}var fe;return ye||null}normalizeInstanceIdentifier(Y=_e){return this.component?this.component.multipleInstances?Y:_e:Y}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(Y){this.name=Y,this.providers=new Map}addComponent(Y){const Q=this.getProvider(Y.name);if(Q.isComponentSet())throw new Error(`Component ${Y.name} has already been registered with ${this.name}`);Q.setComponent(Y)}addOrOverwriteComponent(Y){this.getProvider(Y.name).isComponentSet()&&this.providers.delete(Y.name),this.addComponent(Y)}getProvider(Y){if(this.providers.has(Y))return this.providers.get(Y);const Q=new he(Y,this);return this.providers.set(Y,Q),Q}getProviders(){return Array.from(this.providers.values())}}},5422:(ut,Ie,j)=>{"use strict";j.d(Ie,{in:()=>A,Yd:()=>be,Ub:()=>ue,Am:()=>fe});const R=[];var A=(()=>{return(Y=A||(A={}))[Y.DEBUG=0]="DEBUG",Y[Y.VERBOSE=1]="VERBOSE",Y[Y.INFO=2]="INFO",Y[Y.WARN=3]="WARN",Y[Y.ERROR=4]="ERROR",Y[Y.SILENT=5]="SILENT",A;var Y})();const z={debug:A.DEBUG,verbose:A.VERBOSE,info:A.INFO,warn:A.WARN,error:A.ERROR,silent:A.SILENT},_e=A.INFO,he={[A.DEBUG]:"log",[A.VERBOSE]:"log",[A.INFO]:"info",[A.WARN]:"warn",[A.ERROR]:"error"},le=(Y,Q,...ye)=>{if(Q<Y.logLevel)return;const me=(new Date).toISOString(),Re=he[Q];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${Q})`);console[Re](`[${me}]  ${Y.name}:`,...ye)};class be{constructor(Q){this.name=Q,this._logLevel=_e,this._logHandler=le,this._userLogHandler=null,R.push(this)}get logLevel(){return this._logLevel}set logLevel(Q){if(!(Q in A))throw new TypeError(`Invalid value "${Q}" assigned to \`logLevel\``);this._logLevel=Q}setLogLevel(Q){this._logLevel="string"==typeof Q?z[Q]:Q}get logHandler(){return this._logHandler}set logHandler(Q){if("function"!=typeof Q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Q}get userLogHandler(){return this._userLogHandler}set userLogHandler(Q){this._userLogHandler=Q}debug(...Q){this._userLogHandler&&this._userLogHandler(this,A.DEBUG,...Q),this._logHandler(this,A.DEBUG,...Q)}log(...Q){this._userLogHandler&&this._userLogHandler(this,A.VERBOSE,...Q),this._logHandler(this,A.VERBOSE,...Q)}info(...Q){this._userLogHandler&&this._userLogHandler(this,A.INFO,...Q),this._logHandler(this,A.INFO,...Q)}warn(...Q){this._userLogHandler&&this._userLogHandler(this,A.WARN,...Q),this._logHandler(this,A.WARN,...Q)}error(...Q){this._userLogHandler&&this._userLogHandler(this,A.ERROR,...Q),this._logHandler(this,A.ERROR,...Q)}}function ue(Y){R.forEach(Q=>{Q.setLogLevel(Y)})}function fe(Y,Q){for(const ye of R){let me=null;Q&&Q.level&&(me=z[Q.level]),ye.userLogHandler=null===Y?null:(Re,He,...Oe)=>{const xe=Oe.map(Ye=>{if(null==Ye)return null;if("string"==typeof Ye)return Ye;if("number"==typeof Ye||"boolean"==typeof Ye)return Ye.toString();if(Ye instanceof Error)return Ye.message;try{return JSON.stringify(Ye)}catch(Be){return null}}).filter(Ye=>Ye).join(" ");He>=(null!=me?me:Re.logLevel)&&Y({level:A[He].toLowerCase(),message:xe,args:Oe,type:Re.name})}}}},5742:(ut,Ie,j)=>{"use strict";j.d(Ie,{Lj:()=>bt,X3:()=>$e});var R=j(8239);let z,_e;const be=new WeakMap,ue=new WeakMap,fe=new WeakMap,Y=new WeakMap,Q=new WeakMap;let Re={get(Ve,Qe,lt){if(Ve instanceof IDBTransaction){if("done"===Qe)return ue.get(Ve);if("objectStoreNames"===Qe)return Ve.objectStoreNames||fe.get(Ve);if("store"===Qe)return lt.objectStoreNames[1]?void 0:lt.objectStore(lt.objectStoreNames[0])}return Ye(Ve[Qe])},set:(Ve,Qe,lt)=>(Ve[Qe]=lt,!0),has:(Ve,Qe)=>Ve instanceof IDBTransaction&&("done"===Qe||"store"===Qe)||Qe in Ve};function xe(Ve){return"function"==typeof Ve?function(Ve){return Ve!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(_e||(_e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(Ve)?function(...Qe){return Ve.apply(Be(this),Qe),Ye(be.get(this))}:function(...Qe){return Ye(Ve.apply(Be(this),Qe))}:function(Qe,...lt){const Et=Ve.call(Be(this),Qe,...lt);return fe.set(Et,Qe.sort?Qe.sort():[Qe]),Ye(Et)}}(Ve):(Ve instanceof IDBTransaction&&function(Ve){if(ue.has(Ve))return;const Qe=new Promise((lt,Et)=>{const Ct=()=>{Ve.removeEventListener("complete",$t),Ve.removeEventListener("error",dt),Ve.removeEventListener("abort",dt)},$t=()=>{lt(),Ct()},dt=()=>{Et(Ve.error||new DOMException("AbortError","AbortError")),Ct()};Ve.addEventListener("complete",$t),Ve.addEventListener("error",dt),Ve.addEventListener("abort",dt)});ue.set(Ve,Qe)}(Ve),((Ve,Qe)=>Qe.some(lt=>Ve instanceof lt))(Ve,z||(z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(Ve,Re):Ve)}function Ye(Ve){if(Ve instanceof IDBRequest)return function(Ve){const Qe=new Promise((lt,Et)=>{const Ct=()=>{Ve.removeEventListener("success",$t),Ve.removeEventListener("error",dt)},$t=()=>{lt(Ye(Ve.result)),Ct()},dt=()=>{Et(Ve.error),Ct()};Ve.addEventListener("success",$t),Ve.addEventListener("error",dt)});return Qe.then(lt=>{lt instanceof IDBCursor&&be.set(lt,Ve)}).catch(()=>{}),Q.set(Qe,Ve),Qe}(Ve);if(Y.has(Ve))return Y.get(Ve);const Qe=xe(Ve);return Qe!==Ve&&(Y.set(Ve,Qe),Q.set(Qe,Ve)),Qe}const Be=Ve=>Q.get(Ve);function $e(Ve,Qe,{blocked:lt,upgrade:Et,blocking:Ct,terminated:$t}={}){const dt=indexedDB.open(Ve,Qe),Un=Ye(dt);return Et&&dt.addEventListener("upgradeneeded",Lr=>{Et(Ye(dt.result),Lr.oldVersion,Lr.newVersion,Ye(dt.transaction))}),lt&&dt.addEventListener("blocked",()=>lt()),Un.then(Lr=>{$t&&Lr.addEventListener("close",()=>$t()),Ct&&Lr.addEventListener("versionchange",()=>Ct())}).catch(()=>{}),Un}function bt(Ve,{blocked:Qe}={}){const lt=indexedDB.deleteDatabase(Ve);return Qe&&lt.addEventListener("blocked",()=>Qe()),Ye(lt).then(()=>{})}const nt=["get","getKey","getAll","getAllKeys","count"],ct=["put","add","delete","clear"],tn=new Map;function jt(Ve,Qe){if(!(Ve instanceof IDBDatabase)||Qe in Ve||"string"!=typeof Qe)return;if(tn.get(Qe))return tn.get(Qe);const lt=Qe.replace(/FromIndex$/,""),Et=Qe!==lt,Ct=ct.includes(lt);if(!(lt in(Et?IDBIndex:IDBObjectStore).prototype)||!Ct&&!nt.includes(lt))return;const $t=function(){var dt=(0,R.Z)(function*(Un,...Lr){const oi=this.transaction(Un,Ct?"readwrite":"readonly");let Vr=oi.store;return Et&&(Vr=Vr.index(Lr.shift())),(yield Promise.all([Vr[lt](...Lr),Ct&&oi.done]))[0]});return function(Lr){return dt.apply(this,arguments)}}();return tn.set(Qe,$t),$t}var Ve;Re=DD(TD({},Ve=Re),{get:(Qe,lt,Et)=>jt(Qe,lt)||Ve.get(Qe,lt,Et),has:(Qe,lt)=>!!jt(Qe,lt)||Ve.has(Qe,lt)})},8239:(ut,Ie,j)=>{"use strict";function R(z,_e,he,le,be,ue,fe){try{var Y=z[ue](fe),Q=Y.value}catch(ye){return void he(ye)}Y.done?_e(Q):Promise.resolve(Q).then(le,be)}function A(z){return function(){var _e=this,he=arguments;return new Promise(function(le,be){var ue=z.apply(_e,he);function fe(Q){R(ue,le,be,fe,Y,"next",Q)}function Y(Q){R(ue,le,be,fe,Y,"throw",Q)}fe(void 0)})}}j.d(Ie,{Z:()=>A})}},ut=>{ut(ut.s=2128)}]);